(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36ed4254"],{"2c10":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{superviseDetailsCorrectId:e.info.superviseDetailsCorrectId},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[i("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),i("div",[i("limsTable",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:e.columnData,height:"calc(100vh - 30em)",highlightCurrentRow:!0,"table-data":e.tableData,"table-loading":e.tableLoading}})],1)]),i("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?i("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.fileUrl}}):e._e()],1)],1)},l=[],o=(i("d3b7"),i("00d5")),r=i("a408"),n=i("bb61"),s={name:"ViewTestRecord",components:{filePreview:r["a"],limsTable:o["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,this.searchTableList()},searchTableList:function(){var e=this;this.tableLoading=!0,Object(n["d"])({superviseDetailsCorrectId:this.info.superviseDetailsCorrectId}).then((function(t){e.tableLoading=!1,e.tableData=t.data})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},closeFilesLook:function(){this.filesDialogVisible=!1},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0},upload:function(e){this.$download.saveAs(e.fileUrl,e.fileName)},delete:function(e){var t=this;this.tableLoading=!0,Object(n["a"])({superviseDetailsCorrectFileId:e.superviseDetailsCorrectFileId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchTableList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,i,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.searchTableList())}},computed:{fileAction:function(){return this.javaApi+"/qualitySupervise/uploadSuperviseDetailCorrectFile"}}},c=s,u=i("2877"),d=Object(u["a"])(c,a,l,!1,null,"ca2d2566",null);t["default"]=d.exports},bb61:function(e,t,i){"use strict";i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return r})),i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return c}));var a=i("b775");function l(e){return Object(a["a"])({url:"/qualitySupervise/pageSuperviseDetailCorrect",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/qualitySupervise/exportSuperviseDetaillCorrect",method:"get",responseType:"blob",params:e})}function r(e){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrectFileList",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/qualitySupervise/delSuperviseDetailCorrectFile",method:"delete",params:e})}function s(e){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrect",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/personTraining/getThisYearTrainingDetailed",method:"get",params:e})}}}]);