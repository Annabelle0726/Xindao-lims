(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78d2c9d6"],{"1e4b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index"},[i("el-row",{attrs:{gutter:25}},[i("el-col",{attrs:{lg:14,md:14,sm:24,xl:14,xs:24}},[i("div",{staticClass:"left-1"},[i("div",{staticClass:"say"},[i("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},[i("div",{staticClass:"say-1"},[t._v(t._s(t.nickName)+" 您好！祝您开心每一天")]),i("div",{staticClass:"say-2"},[t._v("当前时间： "+t._s(t.now))])])])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.workLoading,expression:"workLoading"}],staticClass:"left-2 card",staticStyle:{overflow:"hidden"}},t._l(t.workDay,(function(e,a){return i("div",{key:a,staticClass:"left-2-item"},[i("div",{staticClass:"left-item-title"},[i("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e))]),i("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v(t._s(t.weekdays[a]))]),i("el-tag",{staticStyle:{"margin-top":"6px"},attrs:{size:"small"}},[t._v(t._s(t.workList[a].length)+" 条")])],1),i("div",{staticClass:"left-item-body"},t._l(t.workList[a],(function(e,a){return i("div",{key:a,staticClass:"body-item",class:{color0:0==e.type,color1:1==e.type,color2:2==e.type}},[i("div",[i("span",{staticStyle:{"font-size":"12px","margin-bottom":"17px"}},[t._v(t._s(e.text))]),i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"body-item-name"},[t._v(t._s(e.name))]),0==e.state?i("span",{staticClass:"body-item-insState",staticStyle:{"background-color":"#909399","font-size":"12px"}},[t._v("待检验")]):t._e(),1==e.state?i("span",{staticClass:"body-item-insState",staticStyle:{"background-color":"#E6A23C","font-size":"12px"}},[t._v("检验中")]):t._e(),2==e.state?i("span",{staticClass:"body-item-insState",staticStyle:{"background-color":"#67C23A","font-size":"12px"}},[t._v("已检验")]):t._e(),3==e.state?i("span",{staticClass:"body-item-insState",staticStyle:{"background-color":"#E6A23C","font-size":"12px"}},[t._v("待复核")]):t._e(),4==e.state?i("span",{staticClass:"body-item-insState",staticStyle:{"background-color":"#F56C6C","font-size":"9px"}},[t._v("复核未通过")]):t._e(),5==e.state?i("span",{staticClass:"body-item-insState",staticStyle:{"background-color":"#67C23A","font-size":"10px"}},[t._v("复核通过")]):t._e()])])])})),0)])})),0)]),i("el-col",{attrs:{lg:10,md:10,sm:24,xl:10,xs:24}},[i("div",{staticClass:"right-2 card"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},[i("span",{staticStyle:{color:"#333333","font-size":"16px"}},[t._v("工时统计")]),i("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"month","date-format":"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择月",size:"mini"},on:{change:t.changeTime},model:{value:t.time.month,callback:function(e){t.$set(t.time,"month",e)},expression:"time.month"}})],1),i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"right-time-1"},[i("div",{staticStyle:{"text-align":"center","font-size":"14px",color:"#606266","line-height":"60px"}},[t._v("总工时(小时)")]),i("div",{staticStyle:{"text-align":"center","font-family":"DIN Alternate, DIN Alternate","font-weight":"700","font-size":"26px",color:"#3D3D3D","line-height":"40px"}},[t._v(t._s(t.totalHour))])])]),i("el-col",{attrs:{span:12}},[i("Echarts",{ref:"chart",staticStyle:{height:"150px",width:"100%"},attrs:{legend:t.pieLegend,series:t.materialPieSeries,tooltip:t.pieTooltip}})],1)],1)],1),i("div",{staticClass:"right-3 card",staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"right-3-tab"},[i("div",{staticClass:"tab-item"},[t._v("待办事项")]),i("div",{staticClass:"tab-item2"},[t._v(t._s("您有"+t.total+"项任务待完成"))])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"right-3-list"},[t.list.length>0||t.listLoading?i("scroll-pagination",{attrs:{finishLoding:t.finishLoding,list:t.list},on:{load:t.getList}},t._l(t.list,(function(e,a){return i("div",{key:a,staticClass:"list3-item"},[i("div",{staticClass:"list3-item-title"},[i("span",{staticClass:"blue-dot"},[t._v(t._s(e.theme))]),i("el-link",{staticClass:"blue-dot1",on:{click:function(i){return t.goAddList(e)}}},[t._v("查看")])],1),i("div",{staticClass:"list3-item-info"},[i("div",{staticClass:"ellipsis-multiline",on:{click:function(i){return t.goNoticeDetail(e)}}},[t._v(" "+t._s(e.content)+" ")]),i("div",{staticClass:"createTime-info"},[t._v("时间："+t._s(e.createTime))])])])})),0):t._e(),t.list.length<1&&!t.listLoading?i("div",{staticStyle:{color:"#909399","font-size":"14px","text-align":"center","margin-top":"80px"}},[t._v("暂无数据")]):t._e()],1)])])],1)],1)},s=[],n=i("c14f"),o=i("1da1"),r=i("5530"),l=(i("99af"),i("d81d"),i("14d9"),i("d3b7"),i("0643"),i("a573"),i("76f3")),c=i("b775");function d(){return Object(c["a"])({url:"/report/calendarWorkByWeek",method:"get"})}function u(t){return Object(c["a"])({url:"/report/currentUserWorkHourCount",method:"get",params:t})}function g(t){return Object(c["a"])({url:"/informationNotification/msgRoll",method:"get",params:t})}function h(t){return Object(c["a"])({url:"/informationNotification/triggerModificationStatusToRead",method:"post",data:t})}var m=i("fd54"),f=i("2f62"),p={components:{Echarts:m["a"],ScrollPagination:l["a"]},dicts:["sys_sub_lab"],data:function(){return{now:null,calendarValue:new Date,workLoading:!1,workList:[],workDay:[],weekdays:[],listScheduleByMe:[],scheduleLoading:!1,list:[],currentPage:1,pageSize:8,total:0,listLoading:!0,finishLoding:!1,timer:null,keyMap:{},sonLaboratory:null,totalHour:0,materialPieSeries:[{name:"Access From",type:"pie",radius:["40%","60%"],avoidLabelOverlap:!1,itemStyle:{borderColor:"#fff",borderWidth:2},label:{alignTo:"edge",edgeDistance:10,lineHeight:15,formatter:"{name|{b}}\n{time|{c} 小时}",rich:{time:{fontSize:10,color:"#999"}}},labelLine:{length:10,length2:10},data:[{value:0,name:"辅助工时",itemStyle:{color:"#A4EEDA"}},{value:0,name:"产量工时",itemStyle:{color:"#86C1F4"}}]}],pieLegend:{show:!1},pieTooltip:{trigger:"item"},type:"月",time:{week:"",month:"",year:""}}},computed:Object(r["a"])({},Object(f["b"])(["nickName"])),mounted:function(){var t=this;this.nowTime(),setInterval((function(){t.nowTime()}),1e3),this.weekdays=this.getWeekdaysForNextWeek(),this.init(),this.currentPage=1,this.keyMap={},this.list=[],this.getList(),this.initEchart(),this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){t.init(),t.currentPage=1,t.keyMap={},t.list=[],t.getList()}),6e5)},methods:{goAddList:function(t){this.$router.push({name:t.jumpPath,query:{activeName:t.jumpId}}),this.changeStatus(t)},changeStatus:function(t){h({id:t.id}).then((function(t){console.log(t.data)}))},getList:function(){var t=this,e="_".concat(this.currentPage),i=this.keyMap[e];if(!i){this.keyMap[e]="temp",1==this.currentPage&&(this.listLoading=!0),0==this.list.length&&(this.finishLoding=!1);var a={size:this.pageSize,currentPage:this.currentPage};g(a).then((function(e){var i=e.data.records;t.total=e.data.total,0==i.length?t.finishLoding=!0:(i.length<t.pageSize&&(t.finishLoding=!0),t.list=t.list.concat(i),t.total==t.list.length&&(t.finishLoding=!0),t.currentPage++),t.listLoading=!1})).catch((function(e){t.listLoading=!1}))}},nowTime:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),s=t.getHours();this.timeH=s;var n=t.getMinutes(),o=t.getSeconds();o<10&&(o="0"+o),n<10&&(n="0"+n),s<10&&(s="0"+s),a<10&&(a="0"+a),i<10&&(i="0"+i),this.now=e+"-"+i+"-"+a+"  "+s+":"+n+":"+o},init:function(){var t=this;this.workLoading=!0,d().then((function(e){t.workLoading=!1,t.workList=[];for(var i=0;i<7;i++)t.workList.push(e.data["work".concat(i)]);t.workDay=e.data.weekDays.map((function(t){var e=t.split("-");return e[2]}))})).catch((function(e){t.workLoading=!1}))},getWeekdaysForNextWeek:function(){for(var t=[],e=0;e<7;e++){var i=new Date;i.setDate(i.getDate()-e);var a=i.getDay();t.push(a)}return t.reverse(),t=t.map((function(t){var e="";switch(t){case 0:e="星期天";break;case 1:e="星期一";break;case 2:e="星期二";break;case 3:e="星期三";break;case 4:e="星期四";break;case 5:e="星期五";break;case 6:e="星期六";break}return e})),t},goNoticeDetail:function(t){},changeTime:function(t){this.initEchart(t)},initEchart:function(t){var e=this;return Object(o["a"])(Object(n["a"])().m((function i(){var a,s,o,r,l;return Object(n["a"])().w((function(i){while(1)switch(i.n){case 0:a="",t?a=t:(s=new Date,o={year:s.getFullYear(),month:s.getMonth()+1},r=o.month>=10?o.month:"0"+o.month,a=o.year+"-"+r),l={month:a},u(l).then((function(t){e.totalHour=t.data.totalHour,e.materialPieSeries[0].data[0].value=t.data.subsidiaryHour,e.materialPieSeries[0].data[1].value=t.data.yieldHour}));case 1:return i.a(2)}}),i)})))()}},deactivated:function(){this.timer&&clearInterval(this.timer)}},v=p,y=(i("d3e9"),i("2877")),b=Object(y["a"])(v,a,s,!1,null,"29f9b09b",null);e["default"]=b.exports},d3e9:function(t,e,i){"use strict";i("ff0b")},ff0b:function(t,e,i){}}]);