(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-989b3cce","chunk-4c09a4b4"],{7276:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"add"},[e("el-dialog",{attrs:{title:t.isEdit?"编辑附件资料":"新增附件资料",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(n){t.dialogVisible=n}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"沟通人",prop:"userId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",multiple:""},model:{value:t.form.userId,callback:function(n){t.$set(t.form,"userId",n)},expression:"form.userId"}},t._l(t.userList,(function(t,n){return e("el-option",{key:n,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"沟通时间",prop:"communicationTime"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择日期时间"},model:{value:t.form.communicationTime,callback:function(n){t.$set(t.form,"communicationTime",n)},expression:"form.communicationTime"}})],1),e("el-form-item",{attrs:{label:"沟通地点",prop:"communicationPlace"}},[e("el-input",{attrs:{placeholder:"请填写沟通地点"},model:{value:t.form.communicationPlace,callback:function(n){t.$set(t.form,"communicationPlace",n)},expression:"form.communicationPlace"}})],1),e("el-form-item",{attrs:{label:"沟通内容",prop:"communicationContent"}},[e("el-input",{attrs:{placeholder:"请填写沟通内容"},model:{value:t.form.communicationContent,callback:function(n){t.$set(t.form,"communicationContent",n)},expression:"form.communicationContent"}})],1)],1),e("div",{staticClass:"foot",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(n){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},i=[],a=e("c14f"),o=e("1da1"),c=(e("a15b"),e("d81d"),e("a9e3"),e("d3b7"),e("0643"),e("a573"),e("b558")),u=e("d707"),l={data:function(){return{isEdit:!1,dialogVisible:!1,form:{id:"",userId:[],communicationTime:void 0,communicationPlace:void 0,communicationContent:void 0},rules:{userId:[{required:!0,message:"请选择沟通人",trigger:"change"}],communicationTime:[{required:!0,message:"请选择沟通时间",trigger:"change"}],communicationPlace:[{required:!0,message:"请填写沟通地点",trigger:"blur"}],communicationContent:[{required:!0,message:"请填写沟通内容",trigger:"blur"}]},loading:!1,userList:[]}},methods:{openDialog:function(t,n){this.getUserList(),this.dialogVisible=!0,n?(this.isEdit=!0,this.form.id=t.id,this.form.userId=t.userId.split(",").map((function(t){return Number(t)})),this.form.communicationTime=t.communicationTime,this.form.communicationPlace=t.communicationPlace,this.form.communicationContent=t.communicationContent):(this.form.id="",this.resetForm("form"))},getUserList:function(){var t=this;return Object(o["a"])(Object(a["a"])().m((function n(){return Object(a["a"])().w((function(n){while(1)switch(n.n){case 0:Object(c["w"])({type:2}).then((function(n){t.userList=n.data}));case 1:return n.a(2)}}),n)})))()},submitForm:function(){var t=this;return Object(o["a"])(Object(a["a"])().m((function n(){return Object(a["a"])().w((function(n){while(1)switch(n.n){case 0:t.$refs.form.validate((function(n){if(n){t.loading=!0;var e={id:t.form.id,userId:t.form.userId.join(","),communicationTime:t.form.communicationTime,communicationPlace:t.form.communicationPlace,communicationContent:t.form.communicationContent};Object(u["a"])(e).then((function(n){t.loading=!1,t.resetForm("form"),t.$emit("submit"),t.dialogVisible=!1})).catch((function(n){t.loading=!1}))}}));case 1:return n.a(2)}}),n)})))()}}},s=l,d=e("2877"),m=Object(d["a"])(s,r,i,!1,null,"31b1cb96",null);n["default"]=m.exports},b558:function(t,n,e){"use strict";e.d(n,"v",(function(){return i})),e.d(n,"A",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"z",(function(){return c})),e.d(n,"y",(function(){return u})),e.d(n,"w",(function(){return l})),e.d(n,"i",(function(){return s})),e.d(n,"n",(function(){return d})),e.d(n,"a",(function(){return m})),e.d(n,"e",(function(){return f})),e.d(n,"u",(function(){return p})),e.d(n,"g",(function(){return b})),e.d(n,"j",(function(){return h})),e.d(n,"p",(function(){return g})),e.d(n,"o",(function(){return O})),e.d(n,"d",(function(){return P})),e.d(n,"D",(function(){return j})),e.d(n,"l",(function(){return v})),e.d(n,"t",(function(){return y})),e.d(n,"C",(function(){return w})),e.d(n,"b",(function(){return T})),e.d(n,"x",(function(){return I})),e.d(n,"s",(function(){return C})),e.d(n,"h",(function(){return D})),e.d(n,"k",(function(){return k})),e.d(n,"f",(function(){return x})),e.d(n,"r",(function(){return A})),e.d(n,"m",(function(){return B})),e.d(n,"q",(function(){return $})),e.d(n,"B",(function(){return _}));var r=e("b775");function i(t){return Object(r["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:t})}function l(t){return Object(r["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:t})}function p(t){return Object(r["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:t})}function h(t){return Object(r["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:t})}function g(t){return Object(r["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:t})}function O(t){return Object(r["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:t})}function P(t){return Object(r["a"])({url:"/deviceScope/dataCollection",method:"post",data:t})}function j(t){return Object(r["a"])({url:"/insOrderPlan/write",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/deviceScope/search",method:"get",params:t})}function w(t){return Object(r["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:t})}function T(t){return Object(r["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:t})}function I(t){return Object(r["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:t})}function C(t){return Object(r["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:t})}function D(t){return Object(r["a"])({url:"/insOrderPlan/downFile",method:"get",params:t})}function k(t){return Object(r["a"])({url:"/insOrderPlan/getFileList",method:"get",params:t})}function x(t){return Object(r["a"])({url:"/insOrderPlan/delfile",method:"delete",params:t})}function A(t){return Object(r["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:t})}function B(t){return Object(r["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:t})}function $(t){return Object(r["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:t})}function _(t){return Object(r["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:t})}},d707:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return c}));var r=e("b775");function i(t){return Object(r["a"])({url:"/personCommunicationAbility/personPersonCommunicationAbilityPage",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/personCommunicationAbility/deletePersonCommunicationAbility",method:"delete",params:t})}function o(t){return Object(r["a"])({url:"/personCommunicationAbility/exportPersonCommunicationAbility",method:"get",params:t,responseType:"blob"})}function c(t){return Object(r["a"])({url:"/personCommunicationAbility/addOrUpdatePersonCommunicationAbility",method:"post",data:t})}},e6a6:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"flex_column"},[t.isDepartment?e("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getTableData}},[t._v("刷新")]),e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.openDialog}},[t._v("新增")])],1):t._e(),e("lims-table",{attrs:{tableData:t.tableData,column:t.columnData,height:"calc(100vh - 18em)",page:t.pagination,tableLoading:t.loading},on:{pagination:t.page}}),e("Add",{ref:"communicateModal",on:{submit:t.getTableData}})],1)},i=[],a=e("c14f"),o=e("1da1"),c=(e("a9e3"),e("7276")),u=e("00d5"),l=e("d707"),s={components:{limsTable:u["a"],Add:c["default"]},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},data:function(){var t=this;return{columnData:[{label:"沟通人",prop:"userName"},{label:"沟通时间",prop:"communicationTime"},{label:"沟通地点",prop:"communicationPlace"},{label:"沟通内容",prop:"communicationContent"},{label:"操作",dataType:"action",operation:[{name:"编辑",type:"text",clickFun:function(n){t.openDialog(n,!0)}},{name:"导出",type:"text",clickFun:function(n){t.handleDown(n)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(n){t.delPerson(n.id)}}]}],tableData:[],pagination:{current:1,size:20,total:0},loading:!1}},mounted:function(){this.getTableData()},methods:{openDialog:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs.communicateModal.openDialog(t,n)},getTableData:function(){var t=this;this.loading=!0;var n=this.isDepartment?{departLimsId:this.departId,current:this.pagination.current,size:this.pagination.size}:{userId:this.departId,current:this.pagination.current,size:this.pagination.size};Object(l["d"])(n).then((function(n){t.loading=!1,t.tableData=n.data.records,t.pagination.total=n.data.total})).catch((function(n){t.loading=!1}))},page:function(t){this.pagination.size=t.limit,this.getTableData()},delPerson:function(t){var n=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(a["a"])().m((function e(){return Object(a["a"])().w((function(e){while(1)switch(e.n){case 0:Object(l["b"])({id:t}).then((function(t){n.$message.success("删除成功!"),n.getTableData()}));case 1:return e.a(2)}}),e)}))))},handleDown:function(t){var n=this;return Object(o["a"])(Object(a["a"])().m((function e(){return Object(a["a"])().w((function(e){while(1)switch(e.n){case 0:Object(l["c"])({id:t.id}).then((function(e){var r=new Blob([e],{type:"application/octet-stream"});n.$download.saveAs(r,t.userName+"-沟通记录.docx")}));case 1:return e.a(2)}}),e)})))()}},watch:{departId:{handler:function(t,n){t&&this.getTableData()}}}},d=s,m=e("2877"),f=Object(m["a"])(d,r,i,!1,null,"eb70578a",null);n["default"]=f.exports}}]);