(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ddaf344","chunk-2ec83045","chunk-37f25fb6","chunk-33ae2478","chunk-13979697","chunk-12df2dfe"],{"0e9a":function(e,t,i){"use strict";var a=i("c14f"),n=i("1da1"),r=(i("c19f"),i("ace4"),i("2c66"),i("249d"),i("40e9"),i("d3b7"),i("ac1f"),i("5319"),i("5cc6"),i("907a"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("986a"),i("1d02"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("6ce5"),i("2834"),i("72f7"),i("4ea1"),i("c343")),o=i("acff"),l=i("2b0e");t["a"]={convertFileToHtml:function(e){return Object(n["a"])(Object(a["a"])().m((function t(){var i,o;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return i=new XMLHttpRequest,i.open("GET",l["default"].prototype.javaApi+e,!0),i.send(),i.responseType="blob",o=new Promise((function(e,t){i.onload=Object(n["a"])(Object(a["a"])().m((function t(){var o,l,s,c,d;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:if(200!==this.status){t.n=2;break}return o=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),l=new FileReader,l.readAsArrayBuffer(o),s=new Promise((function(e,t){l.onload=Object(n["a"])(Object(a["a"])().m((function t(){var n,o,l;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return n=i.response,t.n=1,Object(r["convertToHtml"])({arrayBuffer:n});case 1:o=t.v,l=o.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(l);case 2:return t.a(2)}}),t)})))})),c=e,t.n=1,s;case 1:d=t.v,c(d);case 2:return t.a(2)}}),t,this)})))})),t.n=1,o;case 1:return t.a(2,t.v)}}),t)})))()},downloadIamge:function(e,t){var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var a=e.getContext("2d");a.drawImage(i,0,0,i.width,i.height);var n=e.toDataURL("image/png"),r=document.createElement("a"),o=new MouseEvent("click");r.download=t||"photo",r.href=n,r.dispatchEvent(o)},i.src=e},compressBlob:function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(i){t.onload=function(){var a=t.result,n=new Uint8Array(a),r=o["a"].deflate(n),l=new Blob([r],{type:e.type});i(l)}}))}}},2997:function(e,t,i){},"2bad":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.viewDeviceDialog,title:"查看设备",width:"80%"},on:{"update:visible":function(t){e.viewDeviceDialog=t},close:e.closeDia}},[i("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("添加")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.machineAttachmentList,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"",height:"500"}},[i("el-table-column",{attrs:{"header-align":"center",label:"名称",prop:"machineName",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("p",[e._v("名称")])]}},{key:"default",fn:function(t){return[i("el-select",{staticClass:"table_input",attrs:{clearable:"",filterable:"",placeholder:"设备名称",size:"small"},on:{change:function(i){return e.changeMachineName(i,t.$index)}},model:{value:t.row.machineName,callback:function(i){e.$set(t.row,"machineName",i)},expression:"scope.row.machineName"}},e._l(e.equipOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[e._v(" "+e._s(t.label+t.value)+" ")])})),1)]}}])}),i("el-table-column",{attrs:{"header-align":"center",label:"型号规格",prop:"machineSpecification",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("p",[e._v("型号规格")])]}},{key:"default",fn:function(t){var a=t.row;return[i("el-input",{attrs:{size:"small"},model:{value:a.machineSpecification,callback:function(t){e.$set(a,"machineSpecification",t)},expression:"row.machineSpecification"}})]}}])}),i("el-table-column",{attrs:{"header-align":"center",label:"测量范围",prop:"machineMeasuringRange"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("p",[e._v("测量范围")])]}},{key:"default",fn:function(t){var a=t.row;return[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:a.machineMeasuringRange,callback:function(t){e.$set(a,"machineMeasuringRange",t)},expression:"row.machineMeasuringRange"}})]}}])}),i("el-table-column",{attrs:{"header-align":"center",label:"①扩展不确定度②最大允差③准确度等级",prop:"other"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("p",[e._v("①扩展不确定度②最大允差③准确度等级")])]}},{key:"default",fn:function(t){var a=t.row;return[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:a.other,callback:function(t){e.$set(a,"other",t)},expression:"row.other"}})]}}])})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDia}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleDeviceInfo}},[e._v("确 定")])],1)])],1)},n=[],r=(i("c740"),i("d81d"),i("14d9"),i("d3b7"),i("0643"),i("a573"),i("6a74")),o={name:"ViewDeviceDialog",components:{},data:function(){return{viewDeviceDialog:!1,machineAttachmentList:[],equipOptions:[]}},methods:{openDia:function(e){this.viewDeviceDialog=!0,this.machineAttachmentList=e.machineAttachmentList,this.getEquipOptions()},addRow:function(){this.machineAttachmentList.push({machineName:"",machineSpecification:"",machineMeasuringRange:"",other:""})},clearTable:function(){this.machineAttachmentList=[]},changeMachineName:function(e,t){var i=this.equipOptions.findIndex((function(t){return t.value===e}));-1!==i&&(this.machineAttachmentList[t].deviceId=this.equipOptions[i].id,this.machineAttachmentList[t].machineName=this.equipOptions[i].deviceName),this.machineAttachmentList[t].machineSpecification=e},handleDeviceInfo:function(){0!==this.machineAttachmentList.length?(this.viewDeviceDialog=!1,this.$emit("handleDeviceInfo",this.machineAttachmentList)):this.$message.warning("请添加信息")},closeDia:function(){this.viewDeviceDialog=!1,this.$emit("closDeviceDia")},getEquipOptions:function(){var e=this;this.equipOptions=[],Object(r["d"])({status:"0"}).then((function(t){200===t.code&&t.data&&(e.equipOptions=t.data.map((function(e){return e.value=e.managementNumber,e.label=e.deviceName,e})))})).catch((function(e){console.error(e)}))}}},l=o,s=i("2877"),c=Object(s["a"])(l,a,n,!1,null,"7bc5b72e",null);t["default"]=c.exports},4737:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:"edit"===e.operationType?"编辑":"新增",visible:e.formDia,width:"90%"},on:{"update:visible":function(t){e.formDia=t},close:e.closeDia}},["edit"===e.operationType?i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{disabled:""!==e.form.confirmDate&&null!==e.form.confirmDate&&void 0!==e.form.confirmDate,size:"small",type:"primary"},on:{click:e.validation}},[e._v("验证确认")])],1):e._e(),i("table",{staticClass:"tables",attrs:{border:"1",cellspacing:"10"}},[i("tr",[i("td",[i("p",[e._v("标准方法")])]),i("td",[i("p",[e._v("验证原因")])]),i("td",[i("p",[e._v("主要技术变化")])]),i("td",[i("p",[e._v("涉及方面")])]),i("td",[i("p",[e._v("标准要求")])]),i("td",[i("p",[e._v("准备情况")])]),i("td",[i("p",[e._v("是否满足")])]),i("td",[i("p",[e._v("备注")])])]),i("tr",[i("td",{attrs:{rowspan:"9"}},[i("el-input",{attrs:{rows:6,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:e.form.methodName,callback:function(t){e.$set(e.form,"methodName",t)},expression:"form.methodName"}})],1),i("td",{attrs:{rowspan:"9"}},[i("el-input",{attrs:{rows:6,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:e.form.verifyReason,callback:function(t){e.$set(e.form,"verifyReason",t)},expression:"form.verifyReason"}})],1),i("td",{attrs:{rowspan:"9"}},[i("el-input",{attrs:{rows:6,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:e.form.technologyChange,callback:function(t){e.$set(e.form,"technologyChange",t)},expression:"form.technologyChange"}})],1)]),i("tr",[i("td",[e._v("人：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.personRequirements,callback:function(t){e.$set(e.form,"personRequirements",t)},expression:"form.personRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.personReadiness,callback:function(t){e.$set(e.form,"personReadiness",t)},expression:"form.personReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.personIsSatisfied,callback:function(t){e.$set(e.form,"personIsSatisfied",t)},expression:"form.personIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-link",{attrs:{type:"primary"},on:{click:e.viewWorkPermit}},[e._v("查看上岗证")])],1)]),i("tr",[i("td",[e._v("机：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.machineRequirements,callback:function(t){e.$set(e.form,"machineRequirements",t)},expression:"form.machineRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.machineReadiness,callback:function(t){e.$set(e.form,"machineReadiness",t)},expression:"form.machineReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.machineIsSatisfied,callback:function(t){e.$set(e.form,"machineIsSatisfied",t)},expression:"form.machineIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-link",{attrs:{type:"primary"},on:{click:e.viewDevice}},[e._v("查看设备")])],1)]),i("tr",[i("td",[e._v("料：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.materialRequirements,callback:function(t){e.$set(e.form,"materialRequirements",t)},expression:"form.materialRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.materialReadiness,callback:function(t){e.$set(e.form,"materialReadiness",t)},expression:"form.materialReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.materialIsSatisfied,callback:function(t){e.$set(e.form,"materialIsSatisfied",t)},expression:"form.materialIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-input",{attrs:{size:"small"},model:{value:e.form.materialRemark,callback:function(t){e.$set(e.form,"materialRemark",t)},expression:"form.materialRemark"}})],1)]),i("tr",[i("td",[e._v("法：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.methodRequirements,callback:function(t){e.$set(e.form,"methodRequirements",t)},expression:"form.methodRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.methodReadiness,callback:function(t){e.$set(e.form,"methodReadiness",t)},expression:"form.methodReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.methodIsSatisfied,callback:function(t){e.$set(e.form,"methodIsSatisfied",t)},expression:"form.methodIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-link",{attrs:{type:"primary"},on:{click:e.viewTestRecord}},[e._v("查看检测记录")])],1)]),i("tr",[i("td",[e._v("环：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.environmentRequirements,callback:function(t){e.$set(e.form,"environmentRequirements",t)},expression:"form.environmentRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.environmentReadiness,callback:function(t){e.$set(e.form,"environmentReadiness",t)},expression:"form.environmentReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.environmentIsSatisfied,callback:function(t){e.$set(e.form,"environmentIsSatisfied",t)},expression:"form.environmentIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-input",{attrs:{size:"small"},model:{value:e.form.traceabilityRemark,callback:function(t){e.$set(e.form,"traceabilityRemark",t)},expression:"form.traceabilityRemark"}})],1)]),i("tr",[i("td",[e._v("测量溯源性：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.traceabilityRequirements,callback:function(t){e.$set(e.form,"traceabilityRequirements",t)},expression:"form.traceabilityRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.traceabilityReadiness,callback:function(t){e.$set(e.form,"traceabilityReadiness",t)},expression:"form.traceabilityReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.traceabilityIsSatisfied,callback:function(t){e.$set(e.form,"traceabilityIsSatisfied",t)},expression:"form.traceabilityIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-link",{attrs:{type:"primary"},on:{click:e.viewCalibrationsFileDia}},[e._v("查看校准证书")])],1)]),i("tr",[i("td",[e._v("样品管理需求：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.managementRequirements,callback:function(t){e.$set(e.form,"managementRequirements",t)},expression:"form.managementRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.managementReadiness,callback:function(t){e.$set(e.form,"managementReadiness",t)},expression:"form.managementReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.managementIsSatisfied,callback:function(t){e.$set(e.form,"managementIsSatisfied",t)},expression:"form.managementIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-input",{attrs:{size:"small"},model:{value:e.form.managementRemark,callback:function(t){e.$set(e.form,"managementRemark",t)},expression:"form.managementRemark"}})],1)]),i("tr",[i("td",[e._v("其他：")]),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.otherRequirements,callback:function(t){e.$set(e.form,"otherRequirements",t)},expression:"form.otherRequirements"}})],1),i("td",[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.form.otherReadiness,callback:function(t){e.$set(e.form,"otherReadiness",t)},expression:"form.otherReadiness"}})],1),i("td",[i("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],model:{value:e.form.otherIsSatisfied,callback:function(t){e.$set(e.form,"otherIsSatisfied",t)},expression:"form.otherIsSatisfied"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),i("td",[i("el-input",{attrs:{size:"small"},model:{value:e.form.otherRemark,callback:function(t){e.$set(e.form,"otherRemark",t)},expression:"form.otherRemark"}})],1)]),i("tr",[i("td",{attrs:{colspan:"3"}},[i("p",[e._v("是否引用此标准开展检测:")])]),i("td",{attrs:{colspan:"3"}},[e._v("可以引用此标准开展检测")]),i("td",[i("p",[e._v("确认时间:")])]),i("td",[e._v(e._s(e.form.confirmDate))])]),i("tr",[i("td",{attrs:{colspan:"3"}},[i("p",[e._v("参加确认人签名:")])]),i("td",{attrs:{colspan:"5"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择",size:"small","multiple-limit":5},model:{value:e.form.confirmUser,callback:function(t){e.$set(e.form,"confirmUser",t)},expression:"form.confirmUser"}},e._l(e.userList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDia}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.editLoad,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")])],1)]),e.viewDeviceDialog?i("ViewDeviceDialog",{ref:"viewDeviceDialog",on:{closDeviceDia:e.closDeviceDia,handleDeviceInfo:e.handleDeviceInfo}}):e._e(),e.viewTestRecordDialog?i("ViewTestRecord",{ref:"viewTestRecordDialog"}):e._e(),e.viewWorkPermitDia?i("ViewWorkPermitDia",{ref:"viewWorkPermitDia"}):e._e(),e.calibrationsFileDia?i("calibrations-file-dia",{ref:"calibrationsFileDia"}):e._e()],1)},n=[],r=i("5530"),o=(i("a15b"),i("d81d"),i("a9e3"),i("d3b7"),i("0643"),i("a573"),i("c466")),l=i("722c"),s=i("2bad"),c=i("8fbb"),d=i("73a3"),f=i("6a74"),m={name:"formDIaChange",components:{CalibrationsFileDia:d["default"],ViewWorkPermitDia:c["default"],ViewDeviceDialog:s["default"],ViewTestRecord:l["default"]},props:{operationType:{type:String,default:function(){return""}}},data:function(){return{formDia:!1,form:{methodName:"",verifyReason:"",technologyChange:"",personRequirements:"",personReadiness:"",personIsSatisfied:"",personRemark:"",machineRequirements:"",machineReadiness:"",machineIsSatisfied:"",materialRequirements:"",materialReadiness:"",materialIsSatisfied:"",materialRemark:"",methodRequirements:"",methodReadiness:"",methodIsSatisfied:"",environmentRequirements:"",environmentReadiness:"",environmentIsSatisfied:"",traceabilityRequirements:"",traceabilityReadiness:"",traceabilityIsSatisfied:"",traceabilityRemark:"",managementRequirements:"",managementReadiness:"",managementIsSatisfied:"",managementRemark:"",otherRequirements:"",otherReadiness:"",otherIsSatisfied:"",otherRemark:"",machineAttachmentList:[]},editLoad:!1,info:{methodVerifyId:""},userList:[],viewDeviceDialog:!1,viewTestRecordDialog:!1,viewWorkPermitDia:!1,calibrationsFileDia:!1}},methods:{openDia:function(e){this.formDia=!0,this.info=e,this.getUserList(),"edit"===this.operationType&&this.searchInfo(e)},searchInfo:function(e){var t=this;Object(f["f"])({methodVerifyId:e.methodVerifyId}).then((function(e){200===e.code&&(t.form=Object(r["a"])({},e.data),t.form.confirmUser&&(t.form.confirmUser=t.form.confirmUser.split(",").map(Number)))})).catch((function(e){console.log("err---",e)}))},handleEdit:function(){this.editLoad=!0;var e=this.HaveJson(this.form);e.confirmUser=e.confirmUser&&e.confirmUser.join(","),e.operationType=0,"edit"===this.operationType?this.editInfo(e):this.addInfo(e)},viewWorkPermit:function(){var e=this;this.viewWorkPermitDia=!0,this.$nextTick((function(){e.$refs.viewWorkPermitDia.openDia(e.form)}))},viewCalibrationsFileDia:function(){var e=this;this.calibrationsFileDia=!0,this.$nextTick((function(){e.$refs.calibrationsFileDia.openDia(e.form)}))},viewDevice:function(){var e=this;this.viewDeviceDialog=!0,this.$nextTick((function(){e.$refs.viewDeviceDialog.openDia(e.form)}))},closDeviceDia:function(){this.viewDeviceDialog=!1},handleDeviceInfo:function(e){this.viewDeviceDialog=!1,this.form.machineAttachmentList=e},viewTestRecord:function(){var e=this;this.viewTestRecordDialog=!0,this.$nextTick((function(){e.$refs.viewTestRecordDialog.openDia(e.info)}))},editInfo:function(e){var t=this;Object(f["j"])(e).then((function(e){t.editLoad=!1,200===e.code&&(t.$message.success("操作成功"),t.closeDia())})).catch((function(e){console.log("err---",e),t.editLoad=!1}))},addInfo:function(e){var t=this;Object(f["a"])(e).then((function(e){t.editLoad=!1,200===e.code&&(t.$message.success("操作成功"),t.closeDia())})).catch((function(e){console.log("err---",e),t.editLoad=!1}))},validation:function(){var e=this;Object(f["d"])({methodVerifyId:this.info.methodVerifyId}).then((function(t){200===t.code&&(e.form.confirmDate=Object(o["a"])(new Date))})).catch((function(e){console.log("err---",e)}))},closeDia:function(){this.formDia=!1,this.$emit("closeDia")},getUserList:function(){var e=this;Object(f["i"])().then((function(t){200===t.code&&(e.userList=t.data)}))}}},u=m,h=(i("653f"),i("2877")),p=Object(h["a"])(u,a,n,!1,null,"66a47c53",null);t["default"]=p.exports},"653f":function(e,t,i){"use strict";i("2997")},"6a74":function(e,t,i){"use strict";i.d(t,"h",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"f",(function(){return o})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return s})),i.d(t,"j",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"b",(function(){return f})),i.d(t,"g",(function(){return m})),i.d(t,"c",(function(){return u}));var a=i("b775");function n(e){return Object(a["a"])({url:"/processMethodVerify/pagesMethodVerify",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/processMethodVerify/getMethodVerifyOne",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/deviceScope/search",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/processMethodVerify/addMethodVerify",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/processMethodVerify/updateMethodVerify",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/processMethodVerify/exportMethodVerify",method:"get",responseType:"blob",params:e})}function f(e){return Object(a["a"])({url:"/processMethodVerify/delMethodVerify",method:"delete",params:e})}function m(e){return Object(a["a"])({url:"/processMethodVerify/getVerifyMethodFileList",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/processMethodVerify/delVerifyMethodFileList",method:"delete",params:e})}},"6cf7":function(e,t,i){},"6e52":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isImage?i("div",[i("img",{attrs:{src:e.imgUrl,alt:"Image Preview"}})]):e._e(),e.isPdf?i("div",[i("object",{attrs:{data:e.fileUrl,type:"application/pdf",width:"100%",height:"750px"}},[i("p",[e._v("您的浏览器不支持 PDF 预览。"),i("a",{attrs:{href:e.fileUrl}},[e._v("下载 PDF 文件")])])])]):e._e(),e.isDoc?i("div",[e.isDocShow?e._e():i("p",[e._v("文档无法直接预览，请下载查看。")]),e.isDocShow?i("vue-office-docx",{staticStyle:{height:"100vh"},attrs:{src:e.fileUrl},on:{rendered:e.renderedHandler,error:e.errorHandler}}):i("a",{attrs:{href:e.fileUrl}},[e._v("下载文件")])],1):e._e(),e.isXls?i("div",[e.isDocShow?e._e():i("p",[e._v("文档无法直接预览，请下载查看。")]),e.isDocShow?i("vue-office-excel",{staticStyle:{height:"100vh"},attrs:{src:e.fileUrl,options:e.options},on:{rendered:e.renderedHandler,error:e.errorHandler}}):i("a",{attrs:{href:e.fileUrl}},[e._v("下载文件")])],1):e._e(),e.isZipOrRar?i("div",[i("p",[e._v("压缩文件无法直接预览，请下载查看。")]),i("a",{attrs:{href:e.fileUrl}},[e._v("下载文件")])]):e._e(),e.isCsv?i("div",[0==e.csvList.length?i("p",[e._v("CSV 文件无法直接预览，请下载查看。")]):e._e(),0==e.csvList.length?i("a",{attrs:{href:e.fileUrl}},[e._v("下载文件")]):e._e(),e.csvList.length>0?i("el-tabs",{attrs:{type:"border-card","tab-position":"bottom"}},e._l(e.csvList,(function(t,a){return i("el-tab-pane",{key:a,attrs:{label:t.sheetName}},[i("el-table",{attrs:{data:t.tableData,height:"75vh"}},e._l(t.column,(function(t,a){return i("el-table-column",{key:a,attrs:{label:t.label,prop:t.prop,"min-width":"120px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(a){return[i("div",[i("el-tooltip",{attrs:{content:t.label,placement:"top"}},[i("div",{staticClass:"oneLine"},[i("span",[e._v(e._s(t.label))])])])],1)]}}],null,!0)})})),1)],1)})),1):e._e()],1):e._e(),e.isSupported?e._e():i("div",[i("p",[e._v("不支持的文件格式")])])])},n=[],r=i("b85c"),o=i("c14f"),l=i("1da1"),s=(i("d81d"),i("14d9"),i("d3b7"),i("ac1f"),i("00b4"),i("5319"),i("5b81"),i("498a"),i("0643"),i("a573"),i("2d46")),c=i.n(s),d=(i("d457"),i("b690")),f=i.n(d),m=(i("2c3a"),{components:{VueOfficeDocx:c.a,VueOfficeExcel:f.a},props:{fileUrl:{type:String,required:!0},currentFile:{type:Object,required:!0}},data:function(){return{isDocShow:!0,options:{xls:!1,minColLength:0,minRowLength:0,widthOffset:10,heightOffset:10,beforeTransformData:function(e){return e},transformData:function(e){return e}},csvList:[],imgUrl:""}},computed:{isImage:function(){var e=/\.(jpg|jpeg|png|gif)$/i.test(this.fileUrl);return this.imgUrl=this.fileUrl,e&&(this.imgUrl=this.fileUrl.replaceAll("word","img")),e},isPdf:function(){return/\.pdf$/i.test(this.fileUrl)},isDoc:function(){return/\.(doc|docx)$/i.test(this.fileUrl)},isXls:function(){var e=/\.(xls|xlsx)$/i.test(this.fileUrl);return e&&(/\.(xlsx)$/i.test(this.fileUrl)?this.options.xls=!1:this.options.xls=!0),e},isZipOrRar:function(){return/\.(zip|rar)$/i.test(this.fileUrl)},isCsv:function(){var e=/\.csv$/i.test(this.fileUrl);return e&&this.loadCSVData(),e},isSupported:function(){return this.isImage||this.isPdf||this.isDoc||this.isZipOrRar||this.isCsv||this.isXls}},methods:{renderedHandler:function(){console.log("渲染完成"),this.isDocShow=!0,this.resetStyle()},errorHandler:function(){console.log("渲染失败"),this.isDocShow=!1},loadCSVData:function(){var e=this;return Object(l["a"])(Object(o["a"])().m((function t(){return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:e.$axios.post(e.$api.insOrderPlan.preview,{id:e.currentFile.id}).then((function(t){var i=t.data;i=i.map((function(t){var i={sheetName:t.sheetName,tableData:[],column:[]};for(var a in i.tableData=e.formatCSVToTable(t.content.replaceAll("null"," ")),i.tableData[0])i.column.push({label:a,prop:a});return i})),e.csvList=i})).catch((function(e){console.log(e)}));case 1:return t.a(2)}}),t)})))()},formatCSVToTable:function(e){var t=[],i=e.split("\n"),a=[];for(var n in i)if("string"===typeof i[n]&&i[n].length>0){var r="".concat(i[n]);if(r.trim().length>0){var o=i[n].split(",");if(0==n)a=o;else{for(var l={},s=0;s<a.length;s++){var c=String(a[s]);if(a[s]&&!l[c])try{o[s]?l[c]=String(o[s]):l[c]=""}catch(d){l[c]=""}}t.push(l)}}}return t},resetStyle:function(){var e,t=document.querySelectorAll('[style*="pt"]'),i=Object(r["a"])(t);try{for(i.s();!(e=i.n()).done;){var a=e.value,n=a.getAttribute("style");n&&a.setAttribute("style",n.replace(/pt/g,"px"))}}catch(o){i.e(o)}finally{i.f()}}}}),u=m,h=(i("f71c"),i("2877")),p=Object(h["a"])(u,a,n,!1,null,"5966505f",null);t["default"]=p.exports},"722c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件上传",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{methodVerifyId:e.info.methodVerifyId},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[i("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),i("div",[i("lims-table",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:e.columnData,height:"calc(100vh - 47em)",highlightCurrentRow:!0,"table-data":e.tableData,"table-loading":e.tableLoading}})],1)])],1)},n=[],r=(i("d3b7"),i("00d5")),o=i("0e9a"),l=i("6a74"),s={name:"ViewTestRecord",components:{limsTable:r["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],tableData:[],info:{}}},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,void 0===this.info&&(this.info={methodVerifyId:""}),this.searchTableList()},searchTableList:function(){var e=this;this.tableLoading=!0,Object(l["g"])({methodVerifyId:this.info.methodVerifyId}).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data)})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},closeFilesLook:function(){this.filesDialogVisible=!1},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,o["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var i=document.createElement("a");i.href=t,i.download=e.fileName,i.click()}},delete:function(e){var t=this;this.tableLoading=!0,Object(l["c"])({methodFileId:e.methodFileId}).then((function(e){t.tableLoading=!1,200===e.code&&(t.$message.success("删除成功"),t.searchTableList())})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,i,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.searchTableList())}},computed:{fileAction:function(){return this.javaApi+"/processMethodVerify/uploadVerifyMethodFile"}}},c=s,d=i("2877"),f=Object(d["a"])(c,a,n,!1,null,"0f495bfe",null);t["default"]=f.exports},"73a3":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"查看校准证书",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[i("div",[i("limsTable",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:e.columnData,height:"calc(100vh - 47em)",highlightCurrentRow:!0,"table-data":e.tableData,"table-loading":e.tableLoading}})],1)]),i("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?i("filePreview",{staticStyle:{"max-height":"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/img/"+e.currentInfo.fileUrl}}):e._e()],1)],1)},n=[],r=i("6e52"),o=i("00d5"),l=i("0e9a"),s={name:"calibrationsFileDia",components:{limsTable:o["a"],filePreview:r["default"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{label:"设备名称",prop:"deviceName",minWidth:"150px"},{label:"设备编号",prop:"managementNumber",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.upload(t)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},mounted:function(){},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,this.tableData=this.info.calibrationsFileList},closeFilesLook:function(){this.filesDialogVisible=!1},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,l["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var i=document.createElement("a");i.href=t,i.download=e.fileName,i.click()}}}},c=s,d=i("2877"),f=Object(d["a"])(c,a,n,!1,null,"3596f0df",null);t["default"]=f.exports},"8fbb":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"查看上岗证",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[i("div",[i("limsTable",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:e.columnData,height:"calc(100vh - 400px)",highlightCurrentRow:!0,"table-data":e.tableData,"table-loading":e.tableLoading}})],1)]),i("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?i("filePreview",{staticStyle:{"max-height":"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/img/"+e.currentInfo.fileUrl}}):e._e()],1)],1)},n=[],r=i("0e9a"),o=i("6e52"),l=i("00d5"),s={name:"viewWorkPermitDia",components:{filePreview:o["default"],limsTable:l["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{label:"持有人",prop:"userName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.upload(t)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},mounted:function(){},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,this.tableData=this.info.workFileList},closeFilesLook:function(){this.filesDialogVisible=!1},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,r["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var i=document.createElement("a");i.href=t,i.download=e.fileName,i.click()}}}},c=s,d=i("2877"),f=Object(d["a"])(c,a,n,!1,null,"0d9b5a50",null);t["default"]=f.exports},c466:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return r}));i("4d63"),i("c607"),i("ac1f"),i("2c3e"),i("00b4"),i("25f0"),i("5319");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),i=e.getMonth()+1;i<10?i="0"+i+"-":i+="-",t+="-";var a=e.getDate();return a=a<10?"0"+a:a,t+i+a}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("Invalid Date"!==e){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return t}return""}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),i=e.getMonth(),a=e.getDate();return 26===a&&(i++,i>11&&(i=0,t++)),i+=1,i=i<10?"0"+i+"-":i+"-",t+="-",a=a<10?"0"+a:a,t+i+a}},f71c:function(e,t,i){"use strict";i("6cf7")}}]);