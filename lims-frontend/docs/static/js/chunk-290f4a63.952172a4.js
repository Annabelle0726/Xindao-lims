(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-290f4a63"],{"0e9a":function(t,e,a){"use strict";var i=a("c14f"),n=a("1da1"),o=(a("c19f"),a("ace4"),a("2c66"),a("249d"),a("40e9"),a("d3b7"),a("ac1f"),a("5319"),a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("986a"),a("1d02"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("6ce5"),a("2834"),a("72f7"),a("4ea1"),a("c343")),r=a("acff"),l=a("2b0e");e["a"]={convertFileToHtml:function(t){return Object(n["a"])(Object(i["a"])().m((function e(){var a,r;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return a=new XMLHttpRequest,a.open("GET",l["default"].prototype.javaApi+t,!0),a.send(),a.responseType="blob",r=new Promise((function(t,e){a.onload=Object(n["a"])(Object(i["a"])().m((function e(){var r,l,u,c,s;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(200!==this.status){e.n=2;break}return r=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),l=new FileReader,l.readAsArrayBuffer(r),u=new Promise((function(t,e){l.onload=Object(n["a"])(Object(i["a"])().m((function e(){var n,r,l;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return n=a.response,e.n=1,Object(o["convertToHtml"])({arrayBuffer:n});case 1:r=e.v,l=r.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),t(l);case 2:return e.a(2)}}),e)})))})),c=t,e.n=1,u;case 1:s=e.v,c(s);case 2:return e.a(2)}}),e,this)})))})),e.n=1,r;case 1:return e.a(2,e.v)}}),e)})))()},downloadIamge:function(t,e){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var t=document.createElement("canvas");t.width=a.width,t.height=a.height;var i=t.getContext("2d");i.drawImage(a,0,0,a.width,a.height);var n=t.toDataURL("image/png"),o=document.createElement("a"),r=new MouseEvent("click");o.download=e||"photo",o.href=n,o.dispatchEvent(r)},a.src=t},compressBlob:function(t){var e=new FileReader;return e.readAsArrayBuffer(t),new Promise((function(a){e.onload=function(){var i=e.result,n=new Uint8Array(i),o=r["a"].deflate(n),l=new Blob([o],{type:t.type});a(l)}}))}}},"41a0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.filesDialogVisible,title:"附件上传",width:"80%"},on:{"update:visible":function(e){t.filesDialogVisible=e},closed:t.closeFilesLook}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:t.fileAction,"auto-upload":!0,"before-upload":t.fileBeforeUpload,data:{qualityMonitorDetailsId:t.info.qualityMonitorDetailsId},headers:t.uploadHeader,"on-error":t.onError,"on-success":t.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[a("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[t._v("附件上传")])],1)],1),a("div",[a("lims-table",{key:"tableData",attrs:{tableData:t.tableData,column:t.columnData,tableLoading:t.tableLoading,height:"calc(100vh - 270px)"}})],1)]),a("el-dialog",{attrs:{visible:t.lookDialogVisible,fullscreen:"",title:"查看附件",width:"800px"},on:{"update:visible":function(e){t.lookDialogVisible=e}}},[t.lookDialogVisible?a("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto",top:"0"},attrs:{currentFile:{},fileUrl:t.javaApi+"/word/"+t.currentInfo.fileUrl}}):t._e()],1)],1)},n=[],o=(a("d3b7"),a("0e9a")),r=a("a408"),l=a("00d5"),u=a("a1e1"),c={name:"ViewRecord",components:{limsTable:l["a"],filePreview:r["a"]},data:function(){var t=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(e){t.handleLook(e)}},{name:"下载",type:"text",clickFun:function(e){t.upload(e)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(e){t.delete(e)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},methods:{openDia:function(t){this.filesDialogVisible=!0,this.info=t,this.searchTableList()},searchTableList:function(){var t=this;this.tableLoading=!0,Object(u["m"])({qualityMonitorDetailsId:this.info.qualityMonitorDetailsId}).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data)})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))},closeFilesLook:function(){this.filesDialogVisible=!1},upload:function(t){var e="";if(1==t.type)e=this.javaApi+"/img/"+t.fileUrl,o["a"].downloadIamge(e,t.fileName);else{e=this.javaApi+"/word/"+t.fileUrl;var a=document.createElement("a");a.href=e,a.download=t.fileName,a.click()}},delete:function(t){var e=this;this.tableLoading=!0,Object(u["h"])({evaluateFileId:t.evaluateFileId}).then((function(t){e.tableLoading=!1,e.$message.success("删除成功"),e.searchTableList()})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},fileBeforeUpload:function(t){var e=!0;if(t.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),e=!1),!e)return Promise.reject(e)},onError:function(t,e,a,i){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(t){this.upLoading=!1,200==t.code?(this.$message.success("上传成功"),this.searchTableList()):this.$message.error(t.msg)},handleLook:function(t){this.currentInfo=t,this.lookDialogVisible=!0}},computed:{fileAction:function(){return this.javaApi+"/qualityMonitor/uploadEvaluateFile"}}},s=c,d=a("2877"),f=Object(d["a"])(s,i,n,!1,null,"332d2382",null);e["default"]=f.exports},a1e1:function(t,e,a){"use strict";a.d(e,"p",(function(){return n})),a.d(e,"i",(function(){return o})),a.d(e,"s",(function(){return r})),a.d(e,"r",(function(){return l})),a.d(e,"j",(function(){return u})),a.d(e,"g",(function(){return c})),a.d(e,"q",(function(){return s})),a.d(e,"l",(function(){return d})),a.d(e,"k",(function(){return f})),a.d(e,"f",(function(){return p})),a.d(e,"b",(function(){return h})),a.d(e,"t",(function(){return b})),a.d(e,"o",(function(){return m})),a.d(e,"d",(function(){return y})),a.d(e,"e",(function(){return g})),a.d(e,"n",(function(){return v})),a.d(e,"a",(function(){return w})),a.d(e,"c",(function(){return M})),a.d(e,"m",(function(){return j})),a.d(e,"h",(function(){return O}));var i=a("b775");function n(t){return Object(i["a"])({url:"/qualityMonitor/pageQualityMonitor",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/qualityMonitor/examineQualityMonitor",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/qualityMonitor/ratifyQualityMonitor",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/qualityMonitor/ratifyFinishReport",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/qualityMonitor/exportQualityMonitorDetail",method:"get",params:t,responseType:"blob"})}function c(t){return Object(i["a"])({url:"/qualityMonitor/delQualitySupervise",method:"delete",params:t})}function s(t){return Object(i["a"])({url:"/qualityMonitor/pageQualityMonitorDetail",method:"get",params:t})}function d(t){return Object(i["a"])({url:"/qualityMonitor/exportQualityMonitorRatify",method:"get",params:t,responseType:"blob"})}function f(t){return Object(i["a"])({url:"/qualityMonitor/exportQualityMonitorEvaluate",method:"get",params:t,responseType:"blob"})}function p(t){return Object(i["a"])({url:"/qualityMonitor/delQualityMonitorDetail",method:"delete",params:t})}function h(t){return Object(i["a"])({url:"/qualityMonitor/addQualityMonitorDetail",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/qualityMonitor/updateQualityMonitorDetail",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/qualityMonitor/getQualityMonitorRatify",method:"get",params:t})}function y(t){return Object(i["a"])({url:"/qualityMonitor/addQualityMonitorRatify",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/qualityMonitor/addQualityMonitorRatifyOpinion",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/qualityMonitor/getQualityMonitorEvaluate",method:"get",params:t})}function w(t){return Object(i["a"])({url:"/qualityMonitor/addMonitorEvaluateOpinion",method:"post",data:t})}function M(t){return Object(i["a"])({url:"/qualityMonitor/addQualityMonitorEvaluate",method:"post",data:t})}function j(t){return Object(i["a"])({url:"/qualityMonitor/getEvaluateFileList",method:"get",params:t})}function O(t){return Object(i["a"])({url:"/qualityMonitor/delVerifyEvaluateFileList",method:"delete",params:t})}}}]);