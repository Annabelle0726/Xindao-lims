(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47f24315"],{"31ac":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("报告名称")]),a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.reportName,callback:function(t){e.$set(e.queryParams,"reportName",t)},expression:"queryParams.reportName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleDown0}},[e._v("导出")]),a("el-upload",{ref:"upload",staticStyle:{display:"inline-block"},attrs:{action:e.action,headers:e.uploadHeader,"on-change":e.beforeUpload,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[a("el-button",{attrs:{loading:e.upLoading,size:"small",type:"primary"}},[e._v("导入")])],1)],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.column,tableLoading:e.tableLoading,height:"calc(100vh - 270px)",page:e.page},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{visible:e.addDialogVisible,title:"评价",width:"400px"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("评价：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.note,callback:function(t){e.$set(e.addInfo,"note",t)},expression:"addInfo.note"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("日期：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.evaluateTime,callback:function(t){e.$set(e.addInfo,"evaluateTime",t)},expression:"addInfo.evaluateTime"}})],1)])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{"max-height":"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.reportUrl}}):e._e()],1)],1)},n=[],o=a("5530"),l=a("00d5"),s=a("a408"),r=a("b775");function c(e){return Object(r["a"])({url:"/processEvaluate/exportProcessEvaluate",method:"get",responseType:"blob",params:e})}function d(e){return Object(r["a"])({url:"/processEvaluate/doProcessEvaluate",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/processEvaluate/delProcessEvaluate",method:"delete",params:e})}function p(e){return Object(r["a"])({url:"/processEvaluate/pageProcessEvaluate",method:"get",params:e})}var h=a("2f62"),f={name:"Uncertainty",components:{limsTable:l["a"],filePreview:s["a"]},data:function(){var e=this;return{addPower:!1,outPower:!1,outLoading:!1,upLoading:!1,addDialogVisible:!1,addInfo:{},addLoading:!1,currentInfo:{},lookDialogVisible:!1,queryParams:{},tableData:[],column:[{label:"报告名称",prop:"reportName"},{label:"评价人",prop:"evaluateUserName"},{label:"评价日期",prop:"evaluateTime"},{label:"备注",prop:"note"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"评价",type:"text",clickFun:function(t){e.handleTell(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"查看附件",type:"text",clickFun:function(t){e.handleLook(t)}}]}],page:{total:0,size:10,current:0},tableLoading:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(h["b"])(["userId"])),{},{action:function(){return this.javaApi+"/processEvaluate/addProcessEvaluate"}}),mounted:function(){this.getList()},methods:{handleDown0:function(){var e=this;this.outLoading=!0,c(this.queryParams).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"测量不确定度的评定.xlsx")}))},handleDown:function(e){e.reportUrl?this.$download.saveAs(e.reportUrl,e.reportName):this.$message.warning("暂无文件")},beforeUpload:function(e){return!(e.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(e,t,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.refreshTable())},handleTell:function(e){this.addInfo=e,this.addDialogVisible=!0},handleAdd:function(){var e=this;this.addLoading=!0,d({id:this.addInfo.id,note:this.addInfo.note,evaluateTime:this.addInfo.evaluateTime,evaluateUser:this.userId}).then((function(t){e.addLoading=!1,e.$message.success("评价成功"),e.addDialogVisible=!1,e.refreshTable()}))},getList:function(){var e=this;this.tableLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.queryParams),this.page);delete t.total,p(Object(o["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},g=f,b=(a("dec7"),a("2877")),m=Object(b["a"])(g,i,n,!1,null,"d76f805c",null);t["default"]=m.exports},ab44:function(e,t,a){},dec7:function(e,t,a){"use strict";a("ab44")}}]);