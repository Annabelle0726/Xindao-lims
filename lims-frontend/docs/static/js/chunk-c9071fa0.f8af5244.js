(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9071fa0"],{"5fd5":function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return o}));var n=r("b775");function a(e){return Object(n["a"])({url:"/system/custom/selectCustomPageList",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/system/custom/addCustom",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/system/custom/upCustom",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/system/custom/delCustomById",method:"delete",params:e})}},"8f86":function(e,t,r){"use strict";r("9c88")},"9c88":function(e,t,r){},bfc7:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[r("div",{staticStyle:{display:"flex"}},[r("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[r("span",{staticStyle:{width:"48px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("姓名")]),r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getPersonnelTraining(e.departId)}},model:{value:e.search.userName,callback:function(t){e.$set(e.search,"userName",t)},expression:"search.userName"}})],1),r("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[r("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("奖惩日期")]),r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,align:"right",clearable:"","end-placeholder":"结束日期",format:"yyyy-MM-dd","range-separator":"至",size:"small","start-placeholder":"开始日期",type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd 00:00:00"},on:{change:function(t){return e.getPersonnelTraining(e.departId)}},model:{value:e.search.searchTimeList,callback:function(t){e.$set(e.search,"searchTimeList",t)},expression:"search.searchTimeList"}})],1),r("div",{staticStyle:{"line-height":"30px"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getPersonnelTraining(e.departId)}}},[e._v("查询")])],1)]),r("div",{staticStyle:{"line-height":"30px"}},[r("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleDown}},[e._v("导出")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("新增")])],1)]),r("div",{staticClass:"table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"",height:"66.5vh"}},[r("el-table-column",{attrs:{label:"序号",type:"index",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s((e.search.current-1)*e.search.size+t.$index+1))])]}}])}),r("el-table-column",{attrs:{label:"员工编号","min-width":"180",prop:"account"}}),r("el-table-column",{attrs:{label:"姓名","min-width":"180",prop:"userName"}}),r("el-table-column",{attrs:{label:"奖惩级别","min-width":"180",prop:"rewardPunishLevel"}}),r("el-table-column",{attrs:{label:"奖惩时间","min-width":"180",prop:"rewardPunishTime"}}),r("el-table-column",{attrs:{label:"奖惩名称","min-width":"180",prop:"rewardPunishName"}}),r("el-table-column",{attrs:{label:"奖惩具体内容","min-width":"120",prop:"rewardPunishContent"}}),r("el-table-column",{attrs:{label:"奖惩单位","min-width":"180",prop:"rewardPunishWorkUnit"}}),r("el-table-column",{attrs:{label:"创建人","min-width":"180",prop:"createUserName"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(r){return e.editForm(t.row)}}},[e._v("编辑")]),r("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(r){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":1,"page-size":e.search.size,"page-sizes":[10,20,30,50,100],total:e.search.total,layout:"->,total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{visible:e.dialogVisible,title:"奖惩记录",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.getUserList}},[r("div",{staticStyle:{height:"40vh"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"员工编号"}},[r("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"员工姓名",prop:"userId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small","value-key":"id",disabled:!e.isDepartment},on:{change:e.selectUserChange},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.responsibleOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"奖惩级别",prop:"rewardPunishLevel"}},[r("el-input",{attrs:{size:"small"},model:{value:e.form.rewardPunishLevel,callback:function(t){e.$set(e.form,"rewardPunishLevel",t)},expression:"form.rewardPunishLevel"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"奖惩名称",prop:"rewardPunishName"}},[r("el-input",{attrs:{size:"small"},model:{value:e.form.rewardPunishName,callback:function(t){e.$set(e.form,"rewardPunishName",t)},expression:"form.rewardPunishName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"奖惩时间",prop:"rewardPunishTime"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.rewardPunishTime,callback:function(t){e.$set(e.form,"rewardPunishTime",t)},expression:"form.rewardPunishTime"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"奖惩单位",prop:"rewardPunishWorkUnit"}},[r("el-input",{attrs:{size:"small"},model:{value:e.form.rewardPunishWorkUnit,callback:function(t){e.$set(e.form,"rewardPunishWorkUnit",t)},expression:"form.rewardPunishWorkUnit"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"奖惩内容"}},[r("el-input",{attrs:{rows:2,size:"small",type:"textarea"},model:{value:e.form.rewardPunishContent,callback:function(t){e.$set(e.form,"rewardPunishContent",t)},expression:"form.rewardPunishContent"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)])],1)},a=[],s=r("5530"),i=r("c14f"),o=r("1da1"),l=(r("c740"),r("b0c0"),r("a9e3"),r("ac1f"),r("841c"),r("b775"));function u(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/rewardPunishmentPage",method:"get",params:e})}function c(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/rewardPunishmentExport",method:"get",params:e,responseType:"blob"})}function d(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/addOrUpdateRewardPunishment",method:"post",data:e})}function m(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/deleteRewardPunishment",method:"delete",params:e})}var h=r("c0c7"),p=(r("5fd5"),{props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},data:function(){return{tableData:[],tableLoading:!1,search:{size:20,current:1,total:0,userName:"",searchTimeList:[]},form:{},dialogVisible:!1,outLoading:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]},rules:{userId:[{required:!0,message:"请选择员工",trigger:"change"}],rewardPunishLevel:[{required:!0,message:"请输入奖惩级别",trigger:"blur"}],rewardPunishName:[{required:!0,message:"请输入奖惩名称",trigger:"blur"}],rewardPunishTime:[{required:!0,message:"请输入奖惩时间",trigger:"blur"}],rewardPunishWorkUnit:[{required:!0,message:"请输入奖惩单位",trigger:"blur"}]},responsibleOptions:[]}},mounted:function(){this.getPersonnelTraining(this.departId)},methods:{handleSizeChange:function(e){this.search.size=e,this.getPersonnelTraining(this.departId)},handleCurrentChange:function(e){this.search.current=e,this.getPersonnelTraining(this.departId)},getPersonnelTraining:function(){var e=this;return Object(o["a"])(Object(i["a"])().m((function t(){var r;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:r={userId:e.isDepartment?"":e.departId,departmentId:e.isDepartment?e.departId:"",current:e.search.curent,size:e.search.size,userName:e.search.userName,startTime:e.search.searchTimeList&&e.search.searchTimeList[0],endTime:e.search.searchTimeList&&e.search.searchTimeList[1]},e.tableLoading=!0,u(r).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.search.total=t.data.total})).catch((function(t){e.tableLoading=!1}));case 1:return t.a(2)}}),t)})))()},addRow:function(){this.dialogVisible=!0,this.isDepartment||(this.form.userId=this.departId,this.selectUserChange(this.form.userId))},handleDown:function(){var e=this;this.outLoading=!0,c({userId:this.isDepartment?"":this.departId,departmentId:this.isDepartment?this.departId:"",userName:this.search.userName,startTime:this.search.searchTimeList&&this.search.searchTimeList[0],endTime:this.search.searchTimeList&&this.search.searchTimeList[1]}).then((function(t){e.outLoading=!1;var r=new Blob([t],{type:"application/force-download"});e.$download.saveAs(r,"奖惩记录.xlsx")}))},getUserList:function(){var e=this;Object(h["o"])({type:2}).then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))},selectUserChange:function(e){var t=this.responsibleOptions.findIndex((function(t){return t.id===e}));t>-1&&(this.form.userName=this.responsibleOptions[t].name,this.form.account=this.responsibleOptions[t].account)},editForm:function(e){this.dialogVisible=!0,this.form=Object(s["a"])({},e)},saveOrUpdate:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(Object(i["a"])().m((function t(r){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:r&&d(e.form).then((function(t){e.dialogVisible=!1,e.$message.success("操作成功"),e.getPersonnelTraining(e.departId)}));case 1:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteRow:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m({id:e.id}).then((function(e){500!==e.code&&(t.$message.success("删除成功"),t.getPersonnelTraining(t.departId))})).catch((function(e){t.$message.error("删除失败")}))})).catch((function(){}))}},watch:{departId:{handler:function(e,t){this.getPersonnelTraining(e)}},dialogVisible:function(e){!1===e&&(this.form={},this.$refs["form"].resetFields())}}}),f=p,b=(r("8f86"),r("2877")),g=Object(b["a"])(f,n,a,!1,null,"118e83e8",null);t["default"]=g.exports},c0c7:function(e,t,r){"use strict";r.d(t,"j",(function(){return s})),r.d(t,"h",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"r",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"k",(function(){return c})),r.d(t,"d",(function(){return d})),r.d(t,"i",(function(){return m})),r.d(t,"s",(function(){return h})),r.d(t,"t",(function(){return p})),r.d(t,"u",(function(){return f})),r.d(t,"g",(function(){return b})),r.d(t,"q",(function(){return g})),r.d(t,"f",(function(){return w})),r.d(t,"l",(function(){return y})),r.d(t,"n",(function(){return v})),r.d(t,"b",(function(){return P})),r.d(t,"m",(function(){return O})),r.d(t,"a",(function(){return k})),r.d(t,"p",(function(){return x})),r.d(t,"o",(function(){return T}));var n=r("b775"),a=r("c38a");function s(e){return Object(n["a"])({url:"/system/user/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/system/user/"+Object(a["e"])(e),method:"get"})}function o(e){return Object(n["a"])({url:"/system/user",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/system/user",method:"put",data:e})}function u(e){return Object(n["a"])({url:"/system/user/"+e,method:"delete"})}function c(e,t){var r={userId:e,password:t};return Object(n["a"])({url:"/system/user/resetPwd",method:"put",data:r})}function d(e,t){var r={userId:e,status:t};return Object(n["a"])({url:"/system/user/changeStatus",method:"put",data:r})}function m(){return Object(n["a"])({url:"/system/user/profile",method:"get"})}function h(e){return Object(n["a"])({url:"/system/user/profile",method:"put",data:e})}function p(e,t){var r={oldPassword:e,newPassword:t};return Object(n["a"])({url:"/system/user/profile/updatePwd",method:"put",data:r})}function f(e){return Object(n["a"])({url:"/system/user/profile/avatar",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function b(e){return Object(n["a"])({url:"/system/user/authRole/"+e,method:"get"})}function g(e){return Object(n["a"])({url:"/system/user/authRole",method:"put",params:e})}function w(){return Object(n["a"])({url:"/system/user/deptTree",method:"get"})}function y(){return Object(n["a"])({url:"/companies/selectCompaniesList",method:"get"})}function v(e){return Object(n["a"])({url:"/companies/selectSimpleList",method:"post",params:e})}function P(e){return Object(n["a"])({url:"/companies/addPersonUser",method:"post",data:e})}function O(){return Object(n["a"])({url:"/system/custom/selectCustomEnum",method:"get"})}function k(e){return Object(n["a"])({url:"/department/addDepartment",method:"post",data:e})}function x(e){return Object(n["a"])({url:"/system/newUser/selectUserDepartmentLimsName",method:"get"})}function T(e){return Object(n["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}}}]);