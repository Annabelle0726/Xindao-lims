(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-518311ba","chunk-25f8276c"],{"016e":function(e,t,a){},"07f7":function(e,t,a){"use strict";a("4b7c")},"127c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"受审部门",prop:"department"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.department,callback:function(t){e.$set(e.searchForm,"department",t)},expression:"searchForm.department"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.auditInspectionDia?a("audit-inspection-dia",{ref:"auditInspectionDia",on:{closeImplementDia:e.closeImplementDia}}):e._e()],1)},n=[],o=a("5530"),r=a("00d5"),l=a("a082"),s=a("5545"),c={name:"auditInspection",components:{AuditInspectionDia:l["default"],limsTable:r["a"]},data:function(){var e=this;return{searchForm:{department:""},tableColumn:[{label:"受审部门",prop:"department"},{label:"部门负责人",prop:"departmentHead"},{label:"审核员",prop:"auditor"},{label:"审核日期",prop:"reviewDate"},{dataType:"tag",label:"批准状态",prop:"ratifyStatus",minWidth:"100",formatData:function(e){return 0===e?"不批准":1===e?"批准":null},formatType:function(e){return 0===e?"danger":1===e?"success":null}},{label:"批准内容",prop:"ratifyRemark",minWidth:"140"},{dataType:"action",minWidth:"220",label:"操作",operation:[{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)},disabled:function(e){return 1!==e.ratifyStatus}},{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)},disabled:function(e){return 1===e.ratifyStatus}},{name:"批准",type:"text",clickFun:function(t){e.openFormDia("ratify",t)},disabled:function(e){return 1===e.ratifyStatus}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)},disabled:function(e){return 1===e.ratifyStatus}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},auditInspectionDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t=this.searchForm,a=this.page;this.tableLoading=!0,Object(s["B"])(Object(o["a"])(Object(o["a"])({},t),a)).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},openFormDia:function(e,t){var a=this;this.auditInspectionDia=!0,this.$nextTick((function(){a.$refs.auditInspectionDia.openDia(e,t)}))},closeImplementDia:function(){this.auditInspectionDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.department="",this.searchList()},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(s["g"])({checkId:e.checkId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleDown:function(e){var t=this;Object(s["o"])({checkId:e.checkId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"内审检查.docx")}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()}}},p=c,m=(a("07f7"),a("2877")),d=Object(m["a"])(p,i,n,!1,null,"66e822cc",null);t["default"]=d.exports},"2a52":function(e,t,a){},"345e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"审核目的",prop:"purposes"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.purpose,callback:function(t){e.$set(e.searchForm,"purpose",t)},expression:"searchForm.purpose"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.implementPlanDia?a("implement-plan-dia",{ref:"implementPlanDia",on:{closeImplementDia:e.closeImplementDia}}):e._e()],1)},n=[],o=a("5530"),r=a("5545"),l=a("00d5"),s=a("4249"),c={name:"implementationPlan",components:{ImplementPlanDia:s["default"],limsTable:l["a"]},data:function(){var e=this;return{searchForm:{purposes:""},tableColumn:[{label:"审核目的",prop:"purposes",minWidth:"100"},{label:"审核性质",prop:"nature",minWidth:"100"},{label:"审核范围",prop:"scope",minWidth:"100"},{label:"审核依据",prop:"basis",minWidth:"100"},{label:"审核组长",prop:"teamLeader",minWidth:"100"},{label:"内审员",prop:"internalAuditor",minWidth:"100"},{label:"审核日期",prop:"reviewDate",minWidth:"100"},{label:"审核方法",prop:"auditMethod",minWidth:"100"},{label:"首次会议时间",prop:"firstMeetingTime",minWidth:"100"},{label:"末次会议时间",prop:"lastMeetingTime",minWidth:"100"},{label:"审核报告提交日期",prop:"submitTime",minWidth:"100"},{label:"审核报告发放范围",prop:"submitScope",minWidth:"100"},{dataType:"tag",label:"批准状态",prop:"ratifyStatus",minWidth:"100",formatData:function(e){return 0===e?"不批准":1===e?"批准":null},formatType:function(e){return 0===e?"danger":1===e?"success":null}},{label:"批准内容",prop:"ratifyRemark",minWidth:"100"},{dataType:"action",minWidth:"220",fixed:"right",label:"操作",operation:[{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)},disabled:function(e){return 1===e.ratifyStatus}},{name:"批准",type:"text",clickFun:function(t){e.openFormDia("ratify",t)},disabled:function(e){return 1===e.ratifyStatus}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)},disabled:function(e){return 1===e.ratifyStatus}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},implementPlanDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t=this.searchForm,a=this.page;this.tableLoading=!0,Object(r["D"])(Object(o["a"])(Object(o["a"])({},t),a)).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},openFormDia:function(e,t){var a=this;this.implementPlanDia=!0,this.$nextTick((function(){a.$refs.implementPlanDia.openDia(e,t)}))},closeImplementDia:function(){this.implementPlanDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.purposes="",this.searchList()},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(r["i"])({implementId:e.implementId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleDown:function(e){var t=this;Object(r["q"])({implementId:e.implementId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"内审实施计划.docx")}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()}}},p=c,m=(a("60e8"),a("2877")),d=Object(m["a"])(p,i,n,!1,null,"2d31fbd6",null);t["default"]=d.exports},"3c2c":function(e,t,a){"use strict";a("4ad1")},4249:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"内部审核实施计划",width:"80%"},on:{"update:visible":function(t){e.formDia=t},close:e.closeImplementDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审核目的",prop:"purposes"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.purposes,callback:function(t){e.$set(e.form,"purposes",t)},expression:"form.purposes"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审核性质",prop:"nature"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.nature,callback:function(t){e.$set(e.form,"nature",t)},expression:"form.nature"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审核范围",prop:"scope"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.scope,callback:function(t){e.$set(e.form,"scope",t)},expression:"form.scope"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审核依据",prop:"basis"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.basis,callback:function(t){e.$set(e.form,"basis",t)},expression:"form.basis"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核组长",prop:"teamLeader"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.teamLeader,callback:function(t){e.$set(e.form,"teamLeader",t)},expression:"form.teamLeader"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内审员",prop:"internalAuditor"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.internalAuditor,callback:function(t){e.$set(e.form,"internalAuditor",t)},expression:"form.internalAuditor"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核日期",prop:"reviewDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"ratify"===e.operationType,clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.reviewDate,callback:function(t){e.$set(e.form,"reviewDate",t)},expression:"form.reviewDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核方法",prop:"auditMethod"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.auditMethod,callback:function(t){e.$set(e.form,"auditMethod",t)},expression:"form.auditMethod"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"首次会议时间",prop:"firstMeetingTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"ratify"===e.operationType,clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.firstMeetingTime,callback:function(t){e.$set(e.form,"firstMeetingTime",t)},expression:"form.firstMeetingTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"末次会议时间",prop:"lastMeetingTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"ratify"===e.operationType,clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.lastMeetingTime,callback:function(t){e.$set(e.form,"lastMeetingTime",t)},expression:"form.lastMeetingTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核报告提交日期",prop:"submitTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"ratify"===e.operationType,clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.submitTime,callback:function(t){e.$set(e.form,"submitTime",t)},expression:"form.submitTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核报告发放范围",prop:"submitScope"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.submitScope,callback:function(t){e.$set(e.form,"submitScope",t)},expression:"form.submitScope"}})],1)],1)],1),"ratify"!==e.operationType?a("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e(),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.implementDetailList,height:"300","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"60"}}),a("el-table-column",{attrs:{"header-align":"center",label:"时间",prop:"implement"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.implement,callback:function(t){e.$set(i,"implement",t)},expression:"row.implement"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"受审核部门",prop:"department"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.department,callback:function(t){e.$set(i,"department",t)},expression:"row.department"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"责任人",prop:"responsible"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.responsible,callback:function(t){e.$set(i,"responsible",t)},expression:"row.responsible"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"审核员",prop:"auditor",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.auditor,callback:function(t){e.$set(i,"auditor",t)},expression:"row.auditor"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"审核内容",prop:"reviewContent",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.reviewContent,callback:function(t){e.$set(i,"reviewContent",t)},expression:"row.reviewContent"}})]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.ratify(0)}}},[e._v("不批准")]):e._e(),"ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.ratify(1)}}},[e._v("批 准")]):e._e(),"ratify"!==e.operationType?a("el-button",{on:{click:e.closeImplementDia}},[e._v("取 消")]):e._e(),"ratify"!==e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")]):e._e()],1)],1),a("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalDialog=!1}}},[a("span",[e._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.ratifyRemark,callback:function(t){e.ratifyRemark=t},expression:"ratifyRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){e.approvalDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.approvalLoading,type:"primary"},on:{click:function(t){return e.handleApproval(0)}}},[e._v("确 定")])],1)])],1)},n=[],o=(a("14d9"),a("5545")),r={name:"implementPlanDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{purposes:"",nature:"",scope:"",basis:"",teamLeader:"",internalAuditor:"",reviewDate:"",auditMethod:"",firstMeetingTime:"",lastMeetingTime:"",submitTime:"",submitScope:""},rules:{purposes:[{required:!0,message:"请填写审核目的",trigger:"blur"}],nature:[{required:!0,message:"请填写审核性质",trigger:"blur"}],scope:[{required:!0,message:"请填写审核范围",trigger:"blur"}],basis:[{required:!0,message:"请填写审核依据",trigger:"blur"}],teamLeader:[{required:!0,message:"请填写审核组长",trigger:"blur"}],internalAuditor:[{required:!0,message:"请填写内审员",trigger:"blur"}],reviewDate:[{required:!0,message:"请填写审核时间",trigger:"blur"}],auditMethod:[{required:!0,message:"请填写审核方法",trigger:"blur"}],firstMeetingTime:[{required:!0,message:"请填写首次会议时间",trigger:"blur"}],lastMeetingTime:[{required:!0,message:"请填写末次会议时间",trigger:"blur"}],submitTime:[{required:!0,message:"请填写审核报告提交日期",trigger:"blur"}],submitScope:[{required:!0,message:"请填写审核报告发放范围",trigger:"blur"}]},implementDetailList:[],operationType:"",approvalDialog:!1,approvalLoading:!1,ratifyRemark:""}},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,"add"!==e&&this.searchInfo(t)},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(o["x"])({implementId:e.implementId}).then((function(e){t.diaLoading=!1,t.form=e.data,t.implementDetailList=t.form.implementDetailList})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(0!==e.implementDetailList.length){e.loading=!0;var a=e.HaveJson(e.form);a.implementDetailList=e.HaveJson(e.implementDetailList),"add"===e.operationType?Object(o["c"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeImplementDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(o["M"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeImplementDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}else e.$message.warning("请添加表格数据")}))},ratify:function(e){0===e?this.approvalDialog=!0:this.handleApproval(e)},handleApproval:function(e){var t=this;this.approvalLoading=!0;var a=this.HaveJson(this.form);a.ratifyStatus=e,a.ratifyRemark=0===e?this.ratifyRemark:"",Object(o["J"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeImplementDia(t.departId)),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},addRow:function(){this.implementDetailList.push({implement:"",department:"",responsible:"",auditor:"",reviewContent:""})},clearTable:function(){this.implementDetailList=[]},closeImplementDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeImplementDia")}}},l=r,s=(a("aba0"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"60f366f0",null);t["default"]=c.exports},4398:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"内审目的",prop:"purpose"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.purpose,callback:function(t){e.$set(e.searchForm,"purpose",t)},expression:"searchForm.purpose"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.yearPlanDia?a("year-plan-dia",{ref:"yearPlanDia",on:{closeYearDia:e.closeYearDia}}):e._e()],1)},n=[],o=a("5530"),r=a("00d5"),l=a("e2b9"),s=a("5545"),c={name:"yearPlan",components:{YearPlanDia:l["default"],limsTable:r["a"]},data:function(){var e=this;return{searchForm:{purpose:""},tableColumn:[{label:"内审目的",prop:"purpose",minWidth:"100"},{label:"内审范围",prop:"scope",minWidth:"100"},{label:"内审依据",prop:"basis",minWidth:"100"},{label:"组长",prop:"leader",minWidth:"100"},{label:"组员",prop:"crew",minWidth:"100"},{dataType:"tag",label:"审核状态",prop:"examineStatus",minWidth:"100",formatData:function(e){return 0===e?"不通过":1===e?"通过":null},formatType:function(e){return 0===e?"danger":1===e?"success":null}},{label:"审核内容",prop:"examineRemark",minWidth:"100"},{label:"审核人",prop:"examineUserName",minWidth:"100"},{label:"审核日期",prop:"examineTime",minWidth:"160"},{dataType:"tag",label:"批准状态",prop:"ratifyStatus",minWidth:"100",formatData:function(e){return 0===e?"不批准":1===e?"批准":null},formatType:function(e){return 0===e?"danger":1===e?"success":null}},{label:"批准内容",prop:"ratifyRemark",minWidth:"100"},{label:"批准人",prop:"ratifyUserName",minWidth:"100"},{label:"批准日期",prop:"ratifyTime",minWidth:"160"},{dataType:"action",fixed:"right",minWidth:"220",label:"操作",operation:[{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)},disabled:function(e){return 1===e.ratifyStatus}},{name:"审核",type:"text",clickFun:function(t){e.openFormDia("examine",t)},disabled:function(e){return 1===e.examineStatus}},{name:"批准",type:"text",clickFun:function(t){e.openFormDia("ratify",t)},disabled:function(e){return 1===e.ratifyStatus||0===e.examineStatus||null===e.examineStatus}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)},disabled:function(e){return 1===e.ratifyStatus}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},yearPlanDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t=this.searchForm,a=this.page;this.tableLoading=!0,Object(s["F"])(Object(o["a"])(Object(o["a"])({},t),a)).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(s["k"])({planId:e.planId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},openFormDia:function(e,t){var a=this;this.yearPlanDia=!0,this.$nextTick((function(){a.$refs.yearPlanDia.openDia(e,t)}))},handleDown:function(e){var t=this;Object(s["s"])({planId:e.planId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"内审年度计划.docx")}))},closeYearDia:function(){this.yearPlanDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.purpose="",this.searchList()},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()}}},p=c,m=(a("eef3"),a("2877")),d=Object(m["a"])(p,i,n,!1,null,"4963c654",null);t["default"]=d.exports},"4ad1":function(e,t,a){},"4b7c":function(e,t,a){},"60e8":function(e,t,a){"use strict";a("fb7e")},"678f":function(e,t,a){},"70db":function(e,t,a){"use strict";a("e6ce")},"93a6":function(e,t,a){"use strict";a("016e")},a082:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"内部审核实施计划",width:"80%"},on:{"update:visible":function(t){e.formDia=t},close:e.closeImplementDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"受审部门",prop:"department"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部门负责人",prop:"departmentHead"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.departmentHead,callback:function(t){e.$set(e.form,"departmentHead",t)},expression:"form.departmentHead"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核员",prop:"auditor"}},[a("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.auditor,callback:function(t){e.$set(e.form,"auditor",t)},expression:"form.auditor"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核日期",prop:"reviewDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"ratify"===e.operationType,clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.reviewDate,callback:function(t){e.$set(e.form,"reviewDate",t)},expression:"form.reviewDate"}})],1)],1)],1),"ratify"!==e.operationType?a("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e(),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkDetailList,border:"",height:"300","header-cell-style":{background:"#f8f8f9",color:"#515a6e"}}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"60"}}),a("el-table-column",{attrs:{"header-align":"center",label:"涉及要素和质量体系文件条款",prop:"element"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.element,callback:function(t){e.$set(i,"element",t)},expression:"row.element"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"审核内容",prop:"content"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.content,callback:function(t){e.$set(i,"content",t)},expression:"row.content"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"审核方式",prop:"method"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.method,callback:function(t){e.$set(i,"method",t)},expression:"row.method"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"审核结果记录",prop:"resultRecords",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.resultRecords,callback:function(t){e.$set(i,"resultRecords",t)},expression:"row.resultRecords"}})]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"不符合性质",prop:"nonNature",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:i.nonNature,callback:function(t){e.$set(i,"nonNature",t)},expression:"row.nonNature"}})]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.ratify(0)}}},[e._v("不批准")]):e._e(),"ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.ratify(1)}}},[e._v("批 准")]):e._e(),"ratify"!==e.operationType?a("el-button",{on:{click:e.closeImplementDia}},[e._v("取 消")]):e._e(),"ratify"!==e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")]):e._e()],1)],1),a("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalDialog=!1}}},[a("span",[e._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.ratifyRemark,callback:function(t){e.ratifyRemark=t},expression:"ratifyRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){e.approvalDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.approvalLoading,type:"primary"},on:{click:function(t){return e.handleApproval(0)}}},[e._v("确 定")])],1)])],1)},n=[],o=(a("14d9"),a("5545")),r={name:"auditInspectionDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{department:"",departmentHead:"",auditor:"",reviewDate:""},rules:{department:[{required:!0,message:"请填写受审部门",trigger:"blur"}],departmentHead:[{required:!0,message:"请填写部门负责人",trigger:"blur"}],auditor:[{required:!0,message:"请填写审核员",trigger:"blur"}],reviewDate:[{required:!0,message:"请填写审核日期",trigger:"blur"}]},checkDetailList:[],operationType:"",approvalDialog:!1,approvalLoading:!1,ratifyRemark:""}},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,"add"!==e&&this.searchInfo(t)},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(o["u"])({checkId:e.checkId}).then((function(e){t.diaLoading=!1,t.form=e.data,t.checkDetailList=t.form.checkDetailList})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(0!==e.checkDetailList.length){e.loading=!0;var a=e.HaveJson(e.form);a.checkDetailList=e.HaveJson(e.checkDetailList),"add"===e.operationType?Object(o["a"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeImplementDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(o["L"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeImplementDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}else e.$message.warning("请添加表格数据")}))},ratify:function(e){0===e?this.approvalDialog=!0:this.handleApproval(e)},handleApproval:function(e){var t=this;this.approvalLoading=!0;var a=this.HaveJson(this.form);a.ratifyStatus=e,a.ratifyRemark=0===e?this.ratifyRemark:"",Object(o["I"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeImplementDia(t.departId)),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},addRow:function(){this.checkDetailList.push({element:"",content:"",method:"",resultRecords:"",nonNature:""})},clearTable:function(){this.checkDetailList=[]},closeImplementDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeImplementDia")}}},l=r,s=a("2877"),c=Object(s["a"])(l,i,n,!1,null,"ccc71550",null);t["default"]=c.exports},a207:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{correctId:e.info.correctId},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[a("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),a("div",[a("limsTable",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:e.columnData,height:"calc(100vh - 30em)",highlightCurrentRow:!0,"table-data":e.tableData,"table-loading":e.tableLoading,page:e.page}})],1)]),a("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.fileUrl}}):e._e()],1)],1)},n=[],o=(a("d3b7"),a("00d5")),r=a("a408"),l=a("5545"),s={name:"ViewTestRecord",components:{filePreview:r["a"],limsTable:o["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1,page:{total:0,size:-1,current:-1}}},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,this.searchTableList()},searchTableList:function(){var e=this;this.tableLoading=!0,Object(l["w"])({correctId:this.info.correctId}).then((function(t){e.tableLoading=!1,e.tableData=t.data})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},closeFilesLook:function(){this.filesDialogVisible=!1},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0},upload:function(e){this.$download.saveAs(e.fileUrl,e.fileName)},delete:function(e){var t=this;this.tableLoading=!0,Object(l["h"])({correctFileId:e.correctFileId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchTableList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,a,i){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.searchTableList()):this.$message.error(e.message)}},computed:{fileAction:function(){return this.javaApi+"/internalCorrect/uploadInternalCorrectFile"}}},c=s,p=a("2877"),m=Object(p["a"])(c,i,n,!1,null,"2c564480",null);t["default"]=m.exports},a4ac:function(e,t,a){"use strict";a("e0a5")},aba0:function(e,t,a){"use strict";a("2a52")},ad8c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("el-tabs",{staticClass:"tab-panel",attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"年度计划",name:"yearPlan"}},[a("year-plan")],1),a("el-tab-pane",{attrs:{label:"内部实施计划",name:"implementationPlan"}},[a("implementation-plan")],1),a("el-tab-pane",{attrs:{label:"内审会议签到",name:"meetingSignIn"}},[a("audit-meeting-sign")],1),a("el-tab-pane",{attrs:{label:"内审检查",name:"auditInspection"}},[a("audit-inspection")],1),a("el-tab-pane",{attrs:{label:"纠正措施",name:"correctiveAction"}},[a("corrective-action")],1),a("el-tab-pane",{attrs:{label:"内审报告",name:"auditReport"}},[a("audit-report")],1)],1)],1)},n=[],o=a("4398"),r=a("345e"),l=a("127c"),s=a("93dd"),c=a("f10b"),p=a("fbfe"),m={name:"InternalAuditManagement",components:{CorrectiveAction:p["default"],AuditMeetingSign:c["default"],AuditReport:s["default"],AuditInspection:l["default"],YearPlan:o["default"],implementationPlan:r["default"]},data:function(){return{activeName:"yearPlan"}},methods:{}},d=m,u=a("2877"),f=Object(u["a"])(d,i,n,!1,null,"13e2ffe8",null);t["default"]=f.exports},b18c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"内审会议签到表",width:"1000px"},on:{"update:visible":function(t){e.formDia=t},close:e.closeYearDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"auto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间",prop:"meetingDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",format:"yyyy-MM-dd HH:mm:ss",placeholder:"请选择",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.meetingDate,callback:function(t){e.$set(e.form,"meetingDate",t)},expression:"form.meetingDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"主持人",prop:"compere"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.compere,callback:function(t){e.$set(e.form,"compere",t)},expression:"form.compere"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地点",prop:"place"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.place,callback:function(t){e.$set(e.form,"place",t)},expression:"form.place"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"会议主题",prop:"subject"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"参会人员",prop:"participant"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",multiple:"",placeholder:"请选择",size:"small"},model:{value:e.form.participant,callback:function(t){e.$set(e.form,"participant",t)},expression:"form.participant"}},e._l(e.personList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeYearDia}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")])],1)],1)],1)},n=[],o=(a("a15b"),a("d81d"),a("14d9"),a("b0c0"),a("a9e3"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("b558")),r=a("5545"),l={name:"auditMeetingSignDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{meetingDate:"",compere:"",place:"",subject:"",participant:[]},rules:{meetingDate:[{required:!0,message:"请填写会议时间",trigger:"blur"}],compere:[{required:!0,message:"请填写主持人",trigger:"blur"}],place:[{required:!0,message:"请填写地点",trigger:"blur"}],subject:[{required:!0,message:"请填写会议主题",trigger:"blur"}],participant:[{required:!0,message:"请选择参加人员",trigger:"change"}]},operationType:"",personList:[]}},mounted:function(){},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,this.getAuthorizedPerson(),"add"!==e&&this.searchInfo(t)},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(r["y"])({meetingId:e.meetingId}).then((function(e){t.diaLoading=!1,t.form=e.data,t.form.participant=t.form.participant.split(",").map(Number)})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a=e.HaveJson(e.form);a.participant=a.participant.join(","),"add"===e.operationType?Object(r["d"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(r["N"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}))},closeYearDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeYearDia")},getAuthorizedPerson:function(){var e=this;Object(o["w"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))}}},s=l,c=(a("70db"),a("2877")),p=Object(c["a"])(s,i,n,!1,null,"0c22ea8e",null);t["default"]=p.exports},e0a5:function(e,t,a){},e2b9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"内部审核年度计划",width:"1000px"},on:{"update:visible":function(t){e.formDia=t},close:e.closeYearDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"auto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内审目的",prop:"purpose"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,rows:3,clearable:"",size:"small",type:"textarea"},model:{value:e.form.purpose,callback:function(t){e.$set(e.form,"purpose",t)},expression:"form.purpose"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内审范围",prop:"scope"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,rows:3,clearable:"",size:"small",type:"textarea"},model:{value:e.form.scope,callback:function(t){e.$set(e.form,"scope",t)},expression:"form.scope"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内审依据",prop:"basis"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.basis,callback:function(t){e.$set(e.form,"basis",t)},expression:"form.basis"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组长",prop:"leader"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组员",prop:"crew"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.crew,callback:function(t){e.$set(e.form,"crew",t)},expression:"form.crew"}})],1)],1)],1)],1),a("table",{staticClass:"table",attrs:{border:"1",cellspacing:"10"}},[a("tr",[a("td",{staticClass:"div-with-line"},[a("span",{staticStyle:{float:"left"}},[e._v("部门")]),a("span",{staticStyle:{float:"right"}},[e._v("月份")])]),e._l(e.dic1,(function(t,i){return a("th",{key:i},[e._v(e._s(t))])}))],2),e._l(e.planDetailList,(function(t,i){return a("tr",{key:i},[a("td",[e._v(e._s(t.department))]),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.january,callback:function(a){e.$set(t,"january",a)},expression:"item.january"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.february,callback:function(a){e.$set(t,"february",a)},expression:"item.february"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.march,callback:function(a){e.$set(t,"march",a)},expression:"item.march"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.april,callback:function(a){e.$set(t,"april",a)},expression:"item.april"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.may,callback:function(a){e.$set(t,"may",a)},expression:"item.may"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.june,callback:function(a){e.$set(t,"june",a)},expression:"item.june"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.july,callback:function(a){e.$set(t,"july",a)},expression:"item.july"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.august,callback:function(a){e.$set(t,"august",a)},expression:"item.august"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.september,callback:function(a){e.$set(t,"september",a)},expression:"item.september"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.october,callback:function(a){e.$set(t,"october",a)},expression:"item.october"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.november,callback:function(a){e.$set(t,"november",a)},expression:"item.november"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.december,callback:function(a){e.$set(t,"december",a)},expression:"item.december"}})],1)])}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["examine"===e.operationType?a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.examine(0)}}},[e._v("不通过")]):e._e(),"examine"===e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.examine(1)}}},[e._v("通 过")]):e._e(),"ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.approval(0)}}},[e._v("不批准")]):e._e(),"ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleApproval(1)}}},[e._v("批 准")]):e._e(),"ratify"!==e.operationType&&"examine"!==e.operationType?a("el-button",{on:{click:e.closeYearDia}},[e._v("取 消")]):e._e(),"ratify"!==e.operationType&&"examine"!==e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")]):e._e()],1)],1),a("el-dialog",{attrs:{visible:e.examineDialog,title:"审核",width:"30%"},on:{"update:visible":function(t){e.examineDialog=t},close:function(t){e.examineDialog=!1}}},[a("span",[e._v(" 审核备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.examineRemark,callback:function(t){e.examineRemark=t},expression:"examineRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.examineLoading},on:{click:function(t){e.examineDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.examineLoading,type:"primary"},on:{click:function(t){return e.handleExamine(0)}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalDialog=!1}}},[a("span",[e._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.ratifyRemark,callback:function(t){e.ratifyRemark=t},expression:"ratifyRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){e.approvalDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.approvalLoading,type:"primary"},on:{click:function(t){return e.handleApproval(0)}}},[e._v("确 定")])],1)])],1)},n=[],o=a("5545"),r={name:"yearPlanDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{purpose:"",scope:"",basis:"",leader:"",crew:""},rules:{purpose:[{required:!0,message:"请填写内审目的",trigger:"blur"}],scope:[{required:!0,message:"请填写内审范围",trigger:"blur"}],basis:[{required:!0,message:"请填写内审依据",trigger:"blur"}],leader:[{required:!0,message:"请填写组长",trigger:"blur"}],crew:[{required:!0,message:"请填写组员",trigger:"blur"}]},operationType:"",approvalDialog:!1,approvalLoading:!1,examineDialog:!1,examineLoading:!1,ratifyRemark:"",examineRemark:"",dic1:[1,2,3,4,5,6,7,8,9,10,11,12],planDetailList:[{department:"装备电缆实验室"},{department:"通信产品实验室"},{department:"电力产品实验室"},{department:"储能产品实验室"},{department:"射频线缆实验室"}]}},mounted:function(){},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,"add"!==e&&this.searchInfo(t)},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(o["z"])({planId:e.planId}).then((function(e){t.diaLoading=!1,t.form=e.data,t.planDetailList=t.form.planDetailList})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a=e.HaveJson(e.form);a.planDetailList=e.HaveJson(e.planDetailList),"add"===e.operationType?Object(o["e"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(o["O"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}))},examine:function(e){0===e?this.examineDialog=!0:this.handleExamine(e)},handleExamine:function(e){var t=this;this.examineLoading=!0;var a=this.HaveJson(this.form);a.examineStatus=e,a.examineRemark=this.examineRemark,Object(o["m"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeYearDia(t.departId)),t.examineLoading=!1})).catch((function(){t.examineLoading=!1}))},approval:function(e){0===e?this.approvalDialog=!0:this.handleApproval(e)},handleApproval:function(e){var t=this;this.approvalLoading=!0;var a=this.HaveJson(this.form);a.ratifyStatus=e,a.ratifyRemark=this.ratifyRemark,Object(o["K"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeYearDia(t.departId)),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},closeYearDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeYearDia")}}},l=r,s=(a("93a6"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"b74444bc",null);t["default"]=c.exports},e6ce:function(e,t,a){},eef3:function(e,t,a){"use strict";a("678f")},f10b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"时间",prop:"meetingDate"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.meetingDate,callback:function(t){e.$set(e.searchForm,"meetingDate",t)},expression:"searchForm.meetingDate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.auditMeetingSignDia?a("audit-meeting-sign-dia",{ref:"auditMeetingSignDia",on:{closeYearDia:e.closeYearDia}}):e._e()],1)},n=[],o=a("5530"),r=a("00d5"),l=a("b18c"),s=a("5545"),c={name:"auditMeetingSign",components:{AuditMeetingSignDia:l["default"],limsTable:r["a"]},data:function(){var e=this;return{searchForm:{meetingDate:""},tableColumn:[{label:"时间",prop:"meetingDate",minWidth:"100"},{label:"主持人",prop:"compere",minWidth:"100"},{label:"地点",prop:"place",minWidth:"100"},{label:"会议主题",prop:"subject",minWidth:"100"},{label:"参会人员",prop:"participantName",minWidth:"120"},{dataType:"action",fixed:"right",minWidth:"220",label:"操作",operation:[{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},auditMeetingSignDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t=this.searchForm,a=this.page;this.tableLoading=!0,Object(s["E"])(Object(o["a"])(Object(o["a"])({},t),a)).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},openFormDia:function(e,t){var a=this;this.auditMeetingSignDia=!0,this.$nextTick((function(){a.$refs.auditMeetingSignDia.openDia(e,t)}))},closeYearDia:function(){this.auditMeetingSignDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.meetingDate="",this.searchList()},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(s["j"])({meetingId:e.meetingId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleDown:function(e){var t=this;Object(s["r"])({meetingId:e.meetingId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"内审会议签到.docx")}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()}}},p=c,m=(a("a4ac"),a("2877")),d=Object(m["a"])(p,i,n,!1,null,"638eb438",null);t["default"]=d.exports},fb7e:function(e,t,a){},fbfe:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"不合格描述",prop:"laboratoryName"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.raiseResult,callback:function(t){e.$set(e.searchForm,"raiseResult",t)},expression:"searchForm.raiseResult"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.correctiveActionDIa?a("corrective-action-d-ia",{ref:"correctiveActionDIa",on:{closeRectifyDia:e.closeRectifyDia}}):e._e(),e.viewTestRecordDialog?a("view-test-record",{ref:"viewTestRecordDialog"}):e._e()],1)},n=[],o=a("5530"),r=a("00d5"),l=a("8ca5"),s=a("a207"),c=a("5545"),p={name:"correctiveAction",components:{CorrectiveActionDIa:l["default"],limsTable:r["a"],ViewTestRecord:s["default"]},data:function(){var e=this;return{searchForm:{raiseResult:""},tableColumn:[{label:"不合格或偏离事实的描述",prop:"raiseResult",minWidth:"100"},{label:"原因分析",prop:"causeResult",minWidth:"100"},{label:"纠正措施",prop:"correctResult",minWidth:"100"},{label:"实施验证结果",prop:"validationResult",minWidth:"100"},{dataType:"action",minWidth:"220",label:"操作",operation:[{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"纠正",type:"text",clickFun:function(t){e.openFormDia("rectify",t)}},{name:"查看附件",type:"text",clickFun:function(t){e.viewFiles(t)}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},correctiveActionDIa:!1,viewTestRecordDialog:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t={raiseResult:this.searchForm.raiseResult},a=this.page;this.tableLoading=!0,Object(c["C"])(Object(o["a"])(Object(o["a"])({},t),a)).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},resetSearchForm:function(){this.searchForm.raiseResult="",this.searchList()},viewFiles:function(e){var t=this;this.viewTestRecordDialog=!0,this.$nextTick((function(){t.$refs.viewTestRecordDialog.openDia(e)}))},openFormDia:function(e,t){var a=this;this.correctiveActionDIa=!0,this.$nextTick((function(){a.$refs.correctiveActionDIa.openDia(e,t)}))},handleDown:function(e){var t=this;Object(c["p"])({correctId:e.correctId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"内审纠正措施.docx")}))},closeRectifyDia:function(){this.correctiveActionDIa=!1,this.searchList()},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()}}},m=p,d=(a("3c2c"),a("2877")),u=Object(d["a"])(m,i,n,!1,null,"edb70bba",null);t["default"]=u.exports}}]);