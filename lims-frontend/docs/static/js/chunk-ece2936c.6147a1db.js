(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ece2936c"],{"0e9a":function(e,t,n){"use strict";var a=n("c14f"),i=n("1da1"),r=(n("c19f"),n("ace4"),n("2c66"),n("249d"),n("40e9"),n("d3b7"),n("ac1f"),n("5319"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("6ce5"),n("2834"),n("72f7"),n("4ea1"),n("c343")),o=n("acff"),c=n("2b0e");t["a"]={convertFileToHtml:function(e){return Object(i["a"])(Object(a["a"])().m((function t(){var n,o;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return n=new XMLHttpRequest,n.open("GET",c["default"].prototype.javaApi+e,!0),n.send(),n.responseType="blob",o=new Promise((function(e,t){n.onload=Object(i["a"])(Object(a["a"])().m((function t(){var o,c,s,l,u;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:if(200!==this.status){t.n=2;break}return o=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),c=new FileReader,c.readAsArrayBuffer(o),s=new Promise((function(e,t){c.onload=Object(i["a"])(Object(a["a"])().m((function t(){var i,o,c;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return i=n.response,t.n=1,Object(r["convertToHtml"])({arrayBuffer:i});case 1:o=t.v,c=o.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(c);case 2:return t.a(2)}}),t)})))})),l=e,t.n=1,s;case 1:u=t.v,l(u);case 2:return t.a(2)}}),t,this)})))})),t.n=1,o;case 1:return t.a(2,t.v)}}),t)})))()},downloadIamge:function(e,t){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height;var a=e.getContext("2d");a.drawImage(n,0,0,n.width,n.height);var i=e.toDataURL("image/png"),r=document.createElement("a"),o=new MouseEvent("click");r.download=t||"photo",r.href=i,r.dispatchEvent(o)},n.src=e},compressBlob:function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(n){t.onload=function(){var a=t.result,i=new Uint8Array(a),r=o["a"].deflate(i),c=new Blob([r],{type:e.type});n(c)}}))}}},"5fd5":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n("b775");function i(e){return Object(a["a"])({url:"/system/custom/selectCustomPageList",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/system/custom/addCustom",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/system/custom/upCustom",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/system/custom/delCustomById",method:"delete",params:e})}},9695:function(e,t,n){"use strict";n.d(t,"k",(function(){return i})),n.d(t,"m",(function(){return r})),n.d(t,"l",(function(){return o})),n.d(t,"n",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"q",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"e",(function(){return m})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return v})),n.d(t,"h",(function(){return w})),n.d(t,"c",(function(){return T}));var a=n("b775");function i(e){return Object(a["a"])({url:"/personTraining/personTrainingSelect",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/personTraining/queryTheAnnualPlanDetailsTable",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/personTraining/personTrainingDelete",method:"delete",params:e})}function c(e){return Object(a["a"])({url:"/personTraining/reviewAnnualPersonnelTraining",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/personTraining/approveAnnualPersonnelTraining",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/personTraining/exportPersonTraining",method:"get",params:e,responseType:"blob"})}function u(e){return Object(a["a"])({url:"/personTraining/exportPersonTrainingRecord",method:"get",params:e,responseType:"blob"})}function d(e){return Object(a["a"])({url:"/personTraining/deleteAnnualPlanDetailTable",method:"delete",params:e})}function f(e){return Object(a["a"])({url:"/personTraining/addOrUpdatePersonTrainingDetailed",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/personTraining/trainingAndAssessmentRecordsPage",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/personTraining/outOfFocusPreservation",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/personTraining/newPersonnelAddedToTrainingRecords",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/personTraining/deleteTrainingAndAssessmentRecords",method:"delete",params:e})}function b(e){return Object(a["a"])({url:"/personTraining/trainingAndAssessmentRecordsAdded",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/personTraining/trainingAndAssessmentRecordsEvaluate",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/personTraining/getTrainingDetailedFileList",method:"get",params:e})}function T(e){return Object(a["a"])({url:"/personTraining/delTrainingDetailedFileList",method:"delete",params:e})}},c600:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件上传",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{trainingDetailedId:e.info.id},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[n("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),n("div",[n("lims-table",{attrs:{tableData:e.tableData,column:e.columnData,height:"calc(100vh - 47em)",highlightCurrentRow:!0,tableLoading:e.tableLoading}})],1)]),n("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?n("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto",top:"0"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.fileUrl}}):e._e()],1)],1)},i=[],r=(n("d3b7"),n("0e9a")),o=n("a408"),c=n("00d5"),s=n("9695"),l=(n("5fd5"),{name:"ViewRecord",components:{limsTable:c["a"],filePreview:o["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,this.searchTableList()},searchTableList:function(){var e=this;this.tableLoading=!0,Object(s["h"])({trainingDetailedId:this.info.id}).then((function(t){e.tableLoading=!1,e.tableData=t.data})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},closeFilesLook:function(){this.filesDialogVisible=!1},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,r["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var n=document.createElement("a");n.href=t,n.download=e.fileName,n.click()}},delete:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(s["c"])({detailedFileId:e.detailedFileId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchTableList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,n,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.searchTableList())},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0}},computed:{fileAction:function(){return this.javaApi+"/personTraining/uploadTrainingDetailedFile"}}}),u=l,d=n("2877"),f=Object(d["a"])(u,a,i,!1,null,"013314ba",null);t["default"]=f.exports}}]);