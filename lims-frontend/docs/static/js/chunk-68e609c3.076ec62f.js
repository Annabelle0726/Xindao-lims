(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68e609c3","chunk-139236d8","chunk-563a1d42"],{"099a":function(e,t,a){},"1e1b":function(e,t,a){"use strict";a("099a")},"2c97":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parent-class"},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addContents}},[e._v("添加子节点")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.deletetContents}},[e._v("删除子节点")]),a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-edit"},on:{click:e.updateContents}},[e._v("更新子节点")])],1),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.nodeName,callback:function(t){e.$set(e.form,"nodeName",t)},expression:"form.nodeName"}})],1),a("el-form-item",{attrs:{label:"代号"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-form-item",{attrs:{label:"更新人"}},[a("el-select",{model:{value:e.form.updateUser,callback:function(t){e.$set(e.form,"updateUser",t)},expression:"form.updateUser"}},e._l(e.users,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"更新时间"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.updateTime,callback:function(t){e.$set(e.form,"updateTime",t)},expression:"form.updateTime"}})],1)],1),a("el-dialog",{attrs:{title:"添加节点",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addForm",attrs:{"label-width":"100px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"父节点名称"}},[a("el-cascader",{attrs:{options:e.treeData,props:{checkStrictly:!0,value:"id",label:"nodeName"},clearable:""},model:{value:e.addForm.parentId,callback:function(t){e.$set(e.addForm,"parentId",t)},expression:"addForm.parentId"}})],1),a("el-form-item",{attrs:{label:"节点名称",prop:"nodeName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.addForm.nodeName,callback:function(t){e.$set(e.addForm,"nodeName",t)},expression:"addForm.nodeName"}})],1),a("el-form-item",{attrs:{label:"代号"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},o=[],l=a("c14f"),i=a("1da1"),s=(a("a9e3"),a("b64b"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("27bc")),r={props:{id:{type:Number,default:0},treeData:{type:Array,default:function(){return[]}},from:{type:String,default:"耗材树"}},data:function(){return{nodeNames:[],users:[],dialogVisible:!1,form:{nodeName:"",code:"",updateUser:"",updateTime:""},addForm:{nodeName:"",code:"",updateUser:"",updateTime:"",parentId:null},rules:{nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"}]}}},mounted:function(){0!==this.id&&this.getContentsDetail(),this.getNodeNames(),this.getUserList()},watch:{id:function(e,t){0!==e&&(console.log(e,t),this.getContentsDetail())}},methods:{getContentsDetail:function(){var e=this;Object(s["r"])({id:this.id}).then((function(t){null!=t.data?e.form=t.data:e.form={nodeName:"",code:"",updateUser:"",updateTime:""}}))},addContents:function(){this.dialogVisible=!0,this.resetForm()},resetForm:function(){this.addForm={nodeName:"",code:"",updateUser:"",updateTime:"",parentId:null}},submitForm:function(){var e=this;return Object(i["a"])(Object(l["a"])().m((function t(){var a,n;return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:if(a=!0,e.$refs.addForm.validate((function(e){if(!e)return a=!1,!1})),e.addForm.parentId&&(e.addForm.parentId=e.addForm.parentId[e.addForm.parentId.length-1]),a){t.n=1;break}return t.a(2);case 1:if(t.p=1,n=null,console.log("this.from",e.from),"耗材树"!=e.from){t.n=3;break}return console.log("111"),t.n=2,Object(s["a"])(e.addForm);case 2:n=t.v,t.n=5;break;case 3:return console.log("222"),t.n=4,Object(s["e"])(e.addForm);case 4:n=t.v;case 5:200===n.code&&(e.$message.success("添加成功"),e.dialogVisible=!1,e.$emit("contentsUpdate",n.data),e.getContentsDetail()),t.n=7;break;case 6:t.p=6,t.v,e.$message.error("添加失败");case 7:return t.a(2)}}),t,null,[[1,6]])})))()},updateContents:function(){var e=this;Object.keys(this.form).forEach((function(t){"children"==t&&delete e.form[t]})),Object(s["y"])(this.form).then((function(t){200===t.code&&(e.$message.success("更新成功"),e.$emit("contentsUpdate",e.id),e.dialogVisible=!1,e.getContentsDetail())}))},deletetContents:function(){var e=this;null!=this.form.id&&""!=this.form.id&&void 0!=this.form.id?this.$confirm("此操作将删除该节点, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"耗材树"==e.from?Object(s["f"])({id:e.form.id}).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.$emit("contentsUpdate",e.form.parentId,!0),e.getContentsDetail())})):Object(s["j"])({id:e.form.id}).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.$emit("contentsUpdate",e.form.parentId,!0),e.getContentsDetail())}))})):this.$message.error("请选择要删除的节点")},getNodeNames:function(){var e=this;"耗材树"==this.from?Object(s["n"])().then((function(t){e.nodeNames=t.data})):Object(s["o"])().then((function(t){e.nodeNames=t.data}))},getUserList:function(){var e=this;Object(s["u"])().then((function(t){e.users=t.data}))}},created:function(){}},c=r,d=(a("1e1b"),a("2877")),u=Object(d["a"])(c,n,o,!1,null,"52c7fea5",null);t["default"]=u.exports},3797:function(e,t,a){},4548:function(e,t,a){"use strict";a("5a3f")},"492f":function(e,t,a){},"4c2d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex"},[a("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){return e.showDialog(void 0)}}},[e._v(" 新建 ")]),a("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:e.exportExcel}},[e._v(" 导出Excel ")])],1),a("limsTable",{staticStyle:{"margin-top":"18px"},attrs:{column:e.columns,currentChange:e.rowClick,height:"25vh",highlightCurrentRow:!0,isSelection:!1,rowStyle:e.tableRowStyle,"table-data":e.tableData,rowKey:"id",page:e.page},on:{pagination:e.pagination},scopedSlots:e._u([{key:"consumablesTypeSlot",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.findType(a.consumablesType))+" ")]}},{key:"operation",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.showDialog(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),a("el-divider"),a("div",[a("ConsumableProject",{ref:"consumableProject"})],1),a("Edit",{ref:"editRef",attrs:{contentsId:e.contentsId},on:{submit:e.fetchData}})],1)},o=[],l=a("c14f"),i=a("5530"),s=a("1da1"),r=(a("7db0"),a("a9e3"),a("d3b7"),a("0643"),a("fffc"),a("7239")),c=a("00d5"),d=a("27bc"),u=a("395b"),m={dicts:["consumables_type"],components:{limsTable:c["a"],Edit:r["default"],ConsumableProject:u["default"]},props:{contentsId:{type:Number,required:!0}},watch:{contentsId:function(e,t){0!==e&&this.fetchData()}},data:function(){return{columns:[{label:"货号",prop:"itemNumber"},{label:"类别",prop:"consumablesType",dataType:"slot",slot:"consumablesTypeSlot"},{label:"名称",prop:"consumablesName"},{label:"规格",prop:"specifications"},{label:"参考供应商",prop:"supplierName"},{label:"库存下限",prop:"lowerLimit"},{label:"当前库存",prop:"currentAmount"},{label:"计量单位",prop:"unit"},{label:"备注",prop:"remark"},{label:"负责人",prop:"personInChargeName"},{label:"最近更新人",prop:"updateUserName"},{label:"最近更新日期",prop:"updateTime"},{fixed:"right",label:"操作",width:120,dataType:"slot",slot:"operation"}],tableData:[],page:{current:1,size:20,total:0},options:[]}},mounted:function(){this.fetchData(),this.options=this.dict.type.consumables_type},methods:{fetchData:function(){var e=this;return Object(s["a"])(Object(l["a"])().m((function t(){return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:Object(d["q"])(Object(i["a"])({contentId:e.contentsId},e.page)).then((function(t){200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total,e.tableData.length>0&&e.rowClick(e.tableData[0]))}));case 1:return t.a(2)}}),t)})))()},findType:function(e){var t;this.$nextTick();var a=this.options.find((function(t){return t.value==e}));return t=a?a.label:"-",t},showDialog:function(e){this.$refs.editRef.openDialog(e)},exportExcel:function(){var e=this;return Object(s["a"])(Object(l["a"])().m((function t(){return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:Object(d["l"])({parentId:e.contentsId}).then((function(t){var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"耗材列表.xlsx")}));case 1:return t.a(2)}}),t)})))()},pagination:function(e){this.page.size=e.limit,this.fetchData()},handleDelete:function(e){var t=this;Object(d["h"])({id:e.id}).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.fetchData())}))},rowClick:function(e){this.$refs.consumableProject.fetchListId(e)},tableRowStyle:function(e){var t=e.row;return t.currentAmount<=t.lowerLimit?{background:"#ffcaca"}:{background:"#fff"}}}},f=m,p=(a("4548"),a("2877")),b=Object(p["a"])(f,n,o,!1,null,"02cade9e",null);t["default"]=b.exports},"5a3f":function(e,t,a){},"64f5":function(e,t,a){"use strict";a("492f")},"6a43":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-container",on:{click:e.handleCard}},[a("div",{staticClass:"card-panel",class:[e.isActive==e.index?"isActive":""]},[a("el-image",{staticStyle:{width:"80%",height:"140px"},attrs:{src:e.javaApi+"/img/"+e.data.logo,fit:"fill"}})],1),a("div",{staticClass:"title"},[e._v(" "+e._s(e.data.supplierRef)+" ")])])},o=[],l=(a("a9e3"),{props:{data:{type:Object,default:function(){}},index:{type:Number,default:-1},isActive:{type:Number,default:-1}},data:function(){return{}},mounted:function(){},methods:{handleCard:function(){this.$emit("handleCard",this.data,this.index)}}}),i=l,s=(a("aff4"),a("2877")),r=Object(s["a"])(i,n,o,!1,null,"19fc5b08",null);t["default"]=r.exports},7078:function(e,t,a){"use strict";a("3797")},"89ae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.searchList}},[e._v("刷新")]),a("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){return e.addOrUpdateStore("add")}}},[e._v("添加")]),a("el-button",{attrs:{icon:"el-icon-download",size:"small"},on:{click:e.importExcel}},[e._v("导出excel")])],1),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 20em)","table-data":e.storageTableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.title,visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{"margin-left":"10px"}},[e._v("入库单")])]),a("el-form",{ref:"formModel",attrs:{model:e.form,"label-width":"auto"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库单号"}},[a("el-input",{attrs:{placeholder:"请输入入库单号",size:"small"},model:{value:e.form.oddNumbers,callback:function(t){e.$set(e.form,"oddNumbers",t)},expression:"form.oddNumbers"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库库存"}},[a("el-input",{attrs:{placeholder:"请输入入库库存",size:"small"},model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库总金额"}},[a("el-input",{attrs:{placeholder:"请输入入库总金额",size:"small"},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount",t)},expression:"form.totalAmount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.storageTime,callback:function(t){e.$set(e.form,"storageTime",t)},expression:"form.storageTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库人"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.form.storageUser,callback:function(t){e.$set(e.form,"storageUser",t)},expression:"form.storageUser"}},e._l(e.users,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库说明"}},[a("el-input",{attrs:{rows:2,placeholder:"请输入内容",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),a("div",[a("div",[e._v("入库明细")]),a("div",{staticClass:"input-form"},[a("div",[a("div",[a("span",[e._v("耗材名称:")]),a("el-select",{staticStyle:{width:"70%"},attrs:{filterable:"",placeholder:"请选择耗材名称",size:"small"},model:{value:e.formTwo.id,callback:function(t){e.$set(e.formTwo,"id",t)},expression:"formTwo.id"}},e._l(e.consumableOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.consumablesName,value:e.id}})})),1)],1)]),a("div",[a("div",[a("span",[e._v("单价:")]),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入单价",size:"small"},model:{value:e.formTwo.unitPrice,callback:function(t){e.$set(e.formTwo,"unitPrice",t)},expression:"formTwo.unitPrice"}})],1)]),a("div",[a("div",[a("span",[e._v("入库数量:")]),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入入库数量",size:"small"},model:{value:e.formTwo.storeNumber,callback:function(t){e.$set(e.formTwo,"storeNumber",t)},expression:"formTwo.storeNumber"}})],1)]),a("div",[a("div",[a("span",[e._v("总价:")]),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入总价",size:"small"},model:{value:e.formTwo.totalPrice,callback:function(t){e.$set(e.formTwo,"totalPrice",t)},expression:"formTwo.totalPrice"}})],1)]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addTableData}},[e._v("添加 ")])],1),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:e.consumables,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"120px"}}),a("el-table-column",{attrs:{label:"货号",prop:"itemNumber"}}),a("el-table-column",{attrs:{label:"类别",prop:"type"}}),a("el-table-column",{attrs:{label:"名称",prop:"consumablesName"}}),a("el-table-column",{attrs:{label:"规格",prop:"specifications"}}),a("el-table-column",{attrs:{label:"参考供应商",prop:"supplier"}}),a("el-table-column",{attrs:{label:"计量单位",prop:"unit"}}),a("el-table-column",{attrs:{label:"单价",prop:"unitPrice"}}),a("el-table-column",{attrs:{label:"入库数量",prop:"storeNumber"}}),a("el-table-column",{attrs:{label:"总价",prop:"totalPrice"}}),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.deleteTableData(t.$index)}}},[e._v("删除 ")])]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.save}},[e._v("保 存")])],1)])],1)},o=[],l=a("c14f"),i=a("1da1"),s=a("5530"),r=(a("7db0"),a("14d9"),a("a434"),a("a9e3"),a("d3b7"),a("0643"),a("fffc"),a("4e3e"),a("159b"),a("27bc")),c=a("00d5"),d={computed:{title:function(){return"add"==this.dialogType?"新建入库":"编辑入库"}},dicts:["consumables_type"],props:{contentsId:{type:Number,default:0}},watch:{},data:function(){var e=this;return{mutiList:[],consumables:[],users:[],form:{oddNumbers:null,inventory:null,totalAmount:null,storageTime:null,storageUser:null,remark:null},formTwo:{consumablesName:null,unitPrice:null,storeNumber:null,totalPrice:null},dialogVisible:!1,dialogType:"",upIndex:0,tableColumn:[{label:"入库单号",prop:"oddNumbers",minWidth:"100"},{label:"耗材名称",prop:"consumablesName",minWidth:"100"},{label:"入库数量",prop:"storeNumber",minWidth:"100"},{label:"入库总价",prop:"totalPrice",minWidth:"100"},{label:"入库人",prop:"storageUserName",minWidth:"100"},{label:"入库日期",prop:"storageTime",minWidth:"100"},{label:"说明",prop:"remark",minWidth:"100"},{label:"登记人",prop:"registrantName",minWidth:"160"},{label:"登记日期",prop:"registrantTime",minWidth:"100"},{dataType:"action",fixed:"right",minWidth:"120",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.addOrUpdateStore("edit",t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.deleteStore(t)}}]}],tableLoading:!1,page:{total:0,size:10,current:1},consumableOptions:[],options:[],storageTableData:[],saveLoading:!1}},components:{limsTable:c["a"]},mounted:function(){this.searchList(),this.getUserList(),this.fetchListOptions(),this.options=this.dict.type.consumables_type},methods:{save:function(){var e=this,t={store:this.form,consumables:this.consumables};this.saveLoading=!0,"update"===this.dialogType?Object(r["x"])(t).then((function(t){e.saveLoading=!1,200==t.code&&(e.$message.success("修改成功"),e.handleClose(),e.searchList())})).catch((function(t){e.saveLoading=!1})):Object(r["d"])(t).then((function(t){e.saveLoading=!1,200==t.code&&(e.$message.success("新增成功"),e.handleClose(),e.searchList())})).catch((function(t){e.saveLoading=!1}))},findType:function(e){return console.log(e),this.options.find((function(t){return t.value===e})).label},addTableData:function(){var e=this;this.$nextTick(),console.log("this.consumableOptions",this.consumableOptions),this.consumableOptions.forEach((function(t){t.id===e.formTwo.id&&e.consumables.push({itemNumber:null,type:e.findType(t.consumablesType),consumablesName:t.consumablesName,specifications:t.specifications,supplier:t.supplierName,unit:t.unit,unitPrice:e.formTwo.unitPrice,storeNumber:e.formTwo.storeNumber,totalPrice:e.formTwo.totalPrice})}))},deleteTableData:function(e){this.consumables.splice(e,1)},addOrUpdateStore:function(e,t){var a=this;"edit"===e?(this.dialogType="update",Object(r["s"])({id:t.id}).then((function(e){a.consumables=e.data.consumables,a.form=Object(s["a"])({},e.data.store)})).catch((function(e){console.log("err---",e)}))):this.dialogType="add",this.dialogVisible=!0},searchList:function(){var e=this;this.tableLoading=!0,Object(r["v"])(Object(s["a"])({},this.page)).then((function(t){e.tableLoading=!1,200===t.code&&(e.storageTableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},importExcel:function(){var e=this;return Object(i["a"])(Object(l["a"])().m((function t(){return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:Object(r["m"])({parentId:e.contentsId}).then((function(t){var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"耗材入库.xlsx")}));case 1:return t.a(2)}}),t)})))()},handleClose:function(){this.form={oddNumbers:null,inventory:null,totalAmount:null,storageTime:null,storageUser:null,remark:null},this.formTwo={consumablesName:null,unitPrice:null,storeNumber:null,totalPrice:null},this.consumables=[],this.dialogVisible=!1},viewIssued:function(e){console.log(e)},getUserList:function(){var e=this;Object(r["u"])().then((function(t){e.users=t.data}))},fetchListOptions:function(){var e=this;return Object(i["a"])(Object(l["a"])().m((function t(){return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:Object(r["q"])({contentsId:e.contentsId}).then((function(t){200===t.code&&(e.consumableOptions=t.data.records)}));case 1:return t.a(2)}}),t)})))()},deleteStore:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,console.log("row>>>>>>>>>>>>>>s",e),Object(r["i"])({id:e.id,consumablesId:e.consumablesId}).then((function(e){t.tableLoading=!1,200===e.code&&(t.$message.success("删除成功"),t.searchList())})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},pagination:function(e){this.page.size=e.limit,this.searchList()}}},u=d,m=(a("7078"),a("2877")),f=Object(m["a"])(u,n,o,!1,null,"698823c8",null);t["default"]=f.exports},ae7d:function(e,t,a){},aff4:function(e,t,a){"use strict";a("fbf2")},e11a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"card-box"},[e._l(e.cardList,(function(t,n){return a("el-col",{key:n,attrs:{span:4}},[a("CardPanel",{attrs:{isActive:e.isActive,data:t,index:n},on:{handleCard:e.handleCard}})],1)})),0==e.cardList.length?a("el-col",{staticStyle:{color:"#909399","font-size":"14px","text-align":"center","margin-top":"20px"},attrs:{span:24}},[e._v("暂无数据")]):e._e()],2),a("div",{staticClass:"title"},[e._v("耗材信息")]),a("limsTable",{staticStyle:{"margin-top":"18px",padding:"0 15px"},attrs:{height:"20vh",column:e.columns,"table-data":e.tableData}})],1)},o=[],l=a("c14f"),i=a("1da1"),s=(a("d81d"),a("a9e3"),a("d3b7"),a("0643"),a("a573"),a("6a43")),r=a("27bc"),c=a("00d5"),d={components:{CardPanel:s["default"],limsTable:c["a"]},props:{contentsId:{type:Number,default:0}},data:function(){return{isActive:-1,columns:[{label:"耗材编号",prop:"itemNumber"},{label:"耗材名称",prop:"consumablesName"},{label:"耗材类型",prop:"consumablesType"},{label:"规格",prop:"specifications"},{label:"单位",prop:"unit"},{label:"单价",prop:"referencePrice"},{label:"当前库存",prop:"currentAmount"},{label:"负责人",prop:"personInChargeName"},{label:"上次更新时间",prop:"updateTime"}],cardList:[],tableData:[]}},watch:{contentsId:function(e,t){this.getTableData(e)}},mounted:function(){this.getTableData(this.contentsId)},methods:{handleCard:function(e,t){this.isActive=t,this.tableData=[e]},getTableData:function(e){var t=this;return Object(i["a"])(Object(l["a"])().m((function a(){return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:Object(r["q"])({contentsId:e}).then((function(e){200==e.code&&(t.cardList=e.data.records.map((function(e){return e.logo=e.consumablesIcon,e})))}));case 1:return a.a(2)}}),a)})))()}}},u=d,m=(a("64f5"),a("2877")),f=Object(m["a"])(u,n,o,!1,null,"54fdb099",null);t["default"]=f.exports},e299:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"purchase-page"},[a("div",{staticClass:"purchase-left"},[a("el-input",{attrs:{placeholder:"请输入节点名称","suffix-icon":"el-icon-search",size:"small",clearable:""},on:{blur:function(t){return e.searchFilter(e.treeData)},clear:function(t){return e.searchFilter(e.treeData)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchFilter(e.treeData)}},model:{value:e.form.nodeName,callback:function(t){e.$set(e.form,"nodeName",t)},expression:"form.nodeName"}}),a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expanded-keys":e.expandedKeys,"node-key":"id"},on:{"node-click":e.handleNodeClick}})],1),a("div",{staticClass:"purchase-right"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"耗材总览",name:"first",lazy:!0}},["first"==e.activeName?a("ConsumableOverview",{attrs:{contentsId:e.contentsId}}):e._e()],1),a("el-tab-pane",{attrs:{label:"耗材列表",name:"second",lazy:!0}},["second"==e.activeName?a("ConsumableList",{attrs:{contentsId:e.contentsId}}):e._e()],1),a("el-tab-pane",{attrs:{label:"耗材入库",name:"third",lazy:!0}},["third"==e.activeName?a("Store",{attrs:{contentsId:e.contentsId}}):e._e()],1),a("el-tab-pane",{attrs:{label:"目录维护",name:"fourth",lazy:!0}},["fourth"==e.activeName?a("Contents",{attrs:{id:e.contentsId,treeData:e.treeData,from:"耗材树"},on:{contentsUpdate:e.contentsUpdate}}):e._e()],1)],1)],1)])},o=[],l=(a("4de4"),a("caad"),a("14d9"),a("e9c4"),a("b64b"),a("d3b7"),a("2532"),a("0643"),a("2382"),a("4e3e"),a("159b"),a("2c97")),i=a("89ae"),s=a("e11a"),r=a("4c2d"),c=a("27bc"),d={name:"ServiceAndSupplyPro",data:function(){return{tabsKey:0,contentsId:0,activeName:"first",form:{nodeName:""},treeData:[],expandedKeys:[],defaultProps:{children:"children",label:"nodeName"}}},components:{Contents:l["default"],Store:i["default"],ConsumableOverview:s["default"],ConsumableList:r["default"]},watch:{contentsId:function(e,t){e!=t&&(this.tabsKey=Math.random())}},methods:{searchFilter:function(){var e=this;if(this.treeData=JSON.parse(JSON.stringify(this.treeData)),this.expandedKeys=[],""!=this.form.nodeName){var t=function(a){a.forEach((function(a){a.nodeName&&a.nodeName.includes(e.form.nodeName)&&e.expandedKeys.push(a.id),a.children&&a.children.length>0&&t(a.children)}))};t(this.treeData)}},contentsUpdate:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)if(this.getTreeData(),this.expandedKeys=[],a){var n=function(a){a.forEach((function(a){a.parentId==e&&t.expandedKeys.push(a.id),a.children&&a.children.length>0&&n(a.children)}))};n(this.treeData),this.expandedKeys=this.expandedKeys.filter((function(t){return t!==e}))}else this.expandedKeys.push(e);else this.getTreeData()},getTreeData:function(){var e=this;Object(c["k"])().then((function(t){e.treeData=t.data}))},handleNodeClick:function(e){this.contentsId=e.id}},created:function(){this.getTreeData()}},u=d,m=(a("f4b6"),a("2877")),f=Object(m["a"])(u,n,o,!1,null,"706b5d6e",null);t["default"]=f.exports},f4b6:function(e,t,a){"use strict";a("ae7d")},fbf2:function(e,t,a){}}]);