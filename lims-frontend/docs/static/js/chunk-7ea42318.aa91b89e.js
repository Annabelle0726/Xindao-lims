(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ea42318"],{"004a":function(e,t,a){"use strict";a("0e39")},"0e39":function(e,t,a){},"3ef4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible,title:"仪器设备期间核查比对记录表",width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-steps",{attrs:{active:e.currentStep,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"填写设备核查对比记录"}}),a("el-step",{attrs:{title:"审核"}})],1),a("div",{staticClass:"form"},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("核查方式：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.checkMethod,callback:function(t){e.$set(e.form,"checkMethod",t)},expression:"form.checkMethod"}})],1)]),a("div",{staticClass:"form"},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("A仪器名称：")]),a("el-select",{staticClass:"table_input",staticStyle:{width:"200px"},attrs:{disabled:0!==e.currentStep,clearable:"",filterable:"",placeholder:"设备名称",size:"small"},on:{change:function(t){return e.changeMachineName(t,"A")}},model:{value:e.form.adeviceId,callback:function(t){e.$set(e.form,"adeviceId",t)},expression:"form.adeviceId"}},e._l(e.equipOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.id}},[e._v(" "+e._s(t.label+"-"+t.value)+" ")])})),1)],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("A仪器编号：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.adeviceNumber,callback:function(t){e.$set(e.form,"adeviceNumber",t)},expression:"form.adeviceNumber"}})],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"150px"}},[e._v("A仪器测定范围/不确定度：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.arangeUncertainty,callback:function(t){e.$set(e.form,"arangeUncertainty",t)},expression:"form.arangeUncertainty"}})],1)]),a("div",{staticClass:"form"},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("B仪器名称：")]),a("el-select",{staticClass:"table_input",staticStyle:{width:"200px"},attrs:{disabled:0!==e.currentStep,clearable:"",filterable:"",placeholder:"设备名称",size:"small"},on:{change:function(t){return e.changeMachineName(t,"B")}},model:{value:e.form.bdeviceId,callback:function(t){e.$set(e.form,"bdeviceId",t)},expression:"form.bdeviceId"}},e._l(e.equipOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.id}},[e._v(" "+e._s(t.label+"-"+t.value)+" ")])})),1)],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("B仪器编号：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.bdeviceNumber,callback:function(t){e.$set(e.form,"bdeviceNumber",t)},expression:"form.bdeviceNumber"}})],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"150px"}},[e._v("B仪器测定范围/不确定度：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.brangeUncertainty,callback:function(t){e.$set(e.form,"brangeUncertainty",t)},expression:"form.brangeUncertainty"}})],1)]),a("div",{staticClass:"form"},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("C仪器名称：")]),a("el-select",{staticClass:"table_input",staticStyle:{width:"200px"},attrs:{disabled:0!==e.currentStep,clearable:"",filterable:"",placeholder:"设备名称",size:"small"},on:{change:function(t){return e.changeMachineName(t,"C")}},model:{value:e.form.cdeviceId,callback:function(t){e.$set(e.form,"cdeviceId",t)},expression:"form.cdeviceId"}},e._l(e.equipOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.id}},[e._v(" "+e._s(t.label+"-"+t.value)+" ")])})),1)],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("C仪器编号：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.cdeviceNumber,callback:function(t){e.$set(e.form,"cdeviceNumber",t)},expression:"form.cdeviceNumber"}})],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"150px"}},[e._v("C仪器测定范围/不确定度：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.crangeUncertainty,callback:function(t){e.$set(e.form,"crangeUncertainty",t)},expression:"form.crangeUncertainty"}})],1)]),a("div",[0===e.currentStep?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addTableRow}},[e._v("添加")]):e._e()],1),a("div",{staticStyle:{margin:"10px 0"}},[a("el-table",{ref:"yearTable",staticStyle:{width:"100%"},attrs:{data:e.recordContrastDetailsList,height:"300px","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{align:"center","header-align":"center",label:"序号",type:"index",width:"60"}}),a("el-table-column",{attrs:{label:"核查项目","min-width":"170",prop:"checkItems"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.checkItems,callback:function(a){e.$set(t.row,"checkItems",a)},expression:"scope.row.checkItems"}})]}}])}),a("el-table-column",{attrs:{label:"A仪器示值","min-width":"120",prop:"indicationA"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.indicationA,callback:function(a){e.$set(t.row,"indicationA",a)},expression:"scope.row.indicationA"}})]}}])}),a("el-table-column",{attrs:{label:"B仪器示值","min-width":"120",prop:"indicationB"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.indicationB,callback:function(a){e.$set(t.row,"indicationB",a)},expression:"scope.row.indicationB"}})]}}])}),a("el-table-column",{attrs:{label:"C仪器示值","min-width":"120",prop:"indicationC"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.indicationC,callback:function(a){e.$set(t.row,"indicationC",a)},expression:"scope.row.indicationC"}})]}}])}),a("el-table-column",{attrs:{label:"差值","min-width":"90",prop:"dvalue"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dvalue,callback:function(a){e.$set(t.row,"dvalue",a)},expression:"scope.row.dvalue"}})]}}])}),a("el-table-column",{attrs:{label:"相对偏差","min-width":"90",prop:"deviation"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.deviation,callback:function(a){e.$set(t.row,"deviation",a)},expression:"scope.row.deviation"}})]}}])}),a("el-table-column",{attrs:{label:"判定","min-width":"110",prop:"determine"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.determine,callback:function(a){e.$set(t.row,"determine",a)},expression:"scope.row.determine"}})]}}])})],1)],1),a("div",{staticClass:"form"},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("综合判定：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.judgment,callback:function(t){e.$set(e.form,"judgment",t)},expression:"form.judgment"}})],1),a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("审核人：")]),a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:0!==e.currentStep,placeholder:"请选择",size:"small"},model:{value:e.form.reviewUserId,callback:function(t){e.$set(e.form,"reviewUserId",t)},expression:"form.reviewUserId"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),0===e.currentStep&&e.userId==e.checkChargerUserId?a("el-button",{attrs:{loading:e.submitFormLoading,type:"primary"},on:{click:e.submitCheck}},[e._v("确 定")]):e._e(),1===e.currentStep&&e.userId==e.reviewUserId?a("el-button",{attrs:{loading:e.submitFormLoading},on:{click:function(t){return e.examine(0)}}},[e._v("不通过")]):e._e(),1===e.currentStep&&e.userId==e.reviewUserId?a("el-button",{attrs:{loading:e.submitFormLoading,type:"primary"},on:{click:function(t){return e.examine(1)}}},[e._v("通 过")]):e._e()],1)],1)],1)},i=[],n=a("5530"),l=(a("c740"),a("d81d"),a("14d9"),a("d3b7"),a("0643"),a("a573"),a("abac")),s=a("b558"),o=a("2f62"),c={name:"equipment-check",components:{},data:function(){return{dialogVisible:!1,submitFormLoading:!1,currentStep:0,showStep:0,form:{checkerTime:"",checkMethod:"",adeviceId:"",adeviceNumber:"",arangeUncertainty:"",bdeviceId:"",bdeviceNumber:"",brangeUncertainty:"",cdeviceId:"",cdeviceNumber:"",crangeUncertainty:"",recordContrastDetailsList:[],judgment:"",reviewUserId:"",reviewStatus:"",planDetailsId:""},equipOptions:[],recordContrastDetailsList:[],userList:[],checkChargerUserId:"",reviewUserId:""}},mounted:function(){},computed:Object(n["a"])({},Object(o["b"])(["userId"])),methods:{openDialog:function(e){this.dialogVisible=!0,this.form.planDetailsId=e.planDetailsId,this.checkChargerUserId=e.checkChargerUserId,this.getEquipOptions(),this.getUserList(),this.searchInfo()},searchInfo:function(){var e=this;Object(l["Gb"])({planDetailsId:this.form.planDetailsId}).then((function(t){200===t.code&&(e.form=Object(n["a"])({},t.data),e.recordContrastDetailsList=e.form.recordContrastDetailsList||[],e.form.reviewUserId?e.currentStep=1:e.currentStep=0,1===e.form.reviewStatus&&(e.currentStep=2),e.reviewUserId=e.form.reviewUserId)})).catch((function(e){console.error(e)}))},changeMachineName:function(e,t){var a=this.equipOptions.findIndex((function(t){return t.id===e}));a>-1&&("A"===t&&this.$set(this.form,"adeviceNumber",this.equipOptions[a].value),"B"===t&&this.$set(this.form,"bdeviceNumber",this.equipOptions[a].value),"C"===t&&this.$set(this.form,"cdeviceNumber",this.equipOptions[a].value))},addTableRow:function(){this.recordContrastDetailsList.push({checkItems:""})},submitCheck:function(){var e=this;this.form.recordContrastDetailsList=this.HaveJson(this.recordContrastDetailsList),this.submitFormLoading=!0,Object(l["o"])(this.form).then((function(t){200==t.code&&(e.$message.success("新增成功"),e.resetForm()),e.submitFormLoading=!1})).catch((function(t){e.submitFormLoading=!1}))},examine:function(e){var t=this,a={planDetailsId:this.form.planDetailsId,reviewStatus:e};Object(l["gc"])(a).then((function(e){200==e.code&&(t.$message.success("审核成功"),t.resetForm()),t.submitFormLoading=!1})).catch((function(e){t.submitFormLoading=!1}))},resetForm:function(){this.dialogVisible=!1,this.$emit("closeDialog")},getEquipOptions:function(){var e=this;this.equipOptions=[],Object(l["W"])({status:0}).then((function(t){200===t.code&&t.data&&(e.equipOptions=t.data.map((function(e){return e.value=e.managementNumber,e.label=e.deviceName,e.id=e.id,e})))})).catch((function(e){console.error(e)}))},getUserList:function(){var e=this;Object(s["w"])().then((function(t){e.userList=t.data}))}}},u=c,d=(a("004a"),a("2877")),m=Object(d["a"])(u,r,i,!1,null,"dcfb1f90",null);t["default"]=m.exports},"413e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible,title:"仪器设备期间核查比对记录表",width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-steps",{attrs:{active:e.currentStep,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"填写设备核查对比记录"}}),a("el-step",{attrs:{title:"审核"}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"110px"}},[e._v("仪器名称：")]),a("el-select",{staticClass:"table_input",staticStyle:{width:"200px"},attrs:{disabled:0!==e.currentStep,clearable:"",filterable:"",placeholder:"设备名称",size:"small"},on:{change:function(t){return e.changeMachineName(t)}},model:{value:e.form.deviceName,callback:function(t){e.$set(e.form,"deviceName",t)},expression:"form.deviceName"}},e._l(e.equipOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}},[e._v(" "+e._s(t.label+"-"+t.value)+" ")])})),1)],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("仪器编号：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.deviceNumber,callback:function(t){e.$set(e.form,"deviceNumber",t)},expression:"form.deviceNumber"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("精度等级：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.accuracyGrade,callback:function(t){e.$set(e.form,"accuracyGrade",t)},expression:"form.accuracyGrade"}})],1)])],1),a("div",{staticStyle:{margin:"10px"}},[e._v("核查使用物质")]),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("名称：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.materialName,callback:function(t){e.$set(e.form,"materialName",t)},expression:"form.materialName"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("编号：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.materialNumber,callback:function(t){e.$set(e.form,"materialNumber",t)},expression:"form.materialNumber"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("精度/不确定度：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.materialAccuracyUncertainty,callback:function(t){e.$set(e.form,"materialAccuracyUncertainty",t)},expression:"form.materialAccuracyUncertainty"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("型号：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.materialModel,callback:function(t){e.$set(e.form,"materialModel",t)},expression:"form.materialModel"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("核查方式：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.materialCheckMethod,callback:function(t){e.$set(e.form,"materialCheckMethod",t)},expression:"form.materialCheckMethod"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("核查项目：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.materialCheckItems,callback:function(t){e.$set(e.form,"materialCheckItems",t)},expression:"form.materialCheckItems"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("温度：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.temperature,callback:function(t){e.$set(e.form,"temperature",t)},expression:"form.temperature"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"130px"}},[e._v("湿度：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.humidity,callback:function(t){e.$set(e.form,"humidity",t)},expression:"form.humidity"}})],1)])],1),a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("添加")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.recordDetailList,height:"300","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{label:"测试点","min-width":"130",prop:"testPoint"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.row.testPoint,callback:function(a){e.$set(t.row,"testPoint",a)},expression:"scope.row.testPoint"}})]}}])}),a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,size:"small"},model:{value:e.form.dataValue1,callback:function(t){e.$set(e.form,"dataValue1",t)},expression:"form.dataValue1"}})]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dataValue1,callback:function(a){e.$set(t.row,"dataValue1",a)},expression:"scope.row.dataValue1"}})]}}])}),a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,size:"small"},model:{value:e.form.dataValue2,callback:function(t){e.$set(e.form,"dataValue2",t)},expression:"form.dataValue2"}})]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dataValue2,callback:function(a){e.$set(t.row,"dataValue2",a)},expression:"scope.row.dataValue2"}})]}}])}),a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,size:"small"},model:{value:e.form.dataValue3,callback:function(t){e.$set(e.form,"dataValue3",t)},expression:"form.dataValue3"}})]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dataValue3,callback:function(a){e.$set(t.row,"dataValue3",a)},expression:"scope.row.dataValue3"}})]}}])}),a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,size:"small"},model:{value:e.form.dataValue4,callback:function(t){e.$set(e.form,"dataValue4",t)},expression:"form.dataValue4"}})]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dataValue4,callback:function(a){e.$set(t.row,"dataValue4",a)},expression:"scope.row.dataValue4"}})]}}])}),a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,size:"small"},model:{value:e.form.dataValue5,callback:function(t){e.$set(e.form,"dataValue5",t)},expression:"form.dataValue5"}})]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dataValue5,callback:function(a){e.$set(t.row,"dataValue5",a)},expression:"scope.row.dataValue5"}})]}}])}),a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,size:"small"},model:{value:e.form.dataValue6,callback:function(t){e.$set(e.form,"dataValue6",t)},expression:"form.dataValue6"}})]}},{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:t.row.dataValue6,callback:function(a){e.$set(t.row,"dataValue6",a)},expression:"scope.row.dataValue6"}})]}}])})],1),a("table",{staticClass:"table",attrs:{border:"1",cellspacing:"10"}},[a("tr",[a("td",[e._v("最大偏差")]),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.maximun1,callback:function(t){e.$set(e.form,"maximun1",t)},expression:"form.maximun1"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.maximun2,callback:function(t){e.$set(e.form,"maximun2",t)},expression:"form.maximun2"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.maximun3,callback:function(t){e.$set(e.form,"maximun3",t)},expression:"form.maximun3"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.maximun4,callback:function(t){e.$set(e.form,"maximun4",t)},expression:"form.maximun4"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.maximun5,callback:function(t){e.$set(e.form,"maximun5",t)},expression:"form.maximun5"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.maximun6,callback:function(t){e.$set(e.form,"maximun6",t)},expression:"form.maximun6"}})],1)]),a("tr",[a("td",[e._v("相对偏差")]),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.relative1,callback:function(t){e.$set(e.form,"relative1",t)},expression:"form.relative1"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.relative2,callback:function(t){e.$set(e.form,"relative2",t)},expression:"form.relative2"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.relative3,callback:function(t){e.$set(e.form,"relative3",t)},expression:"form.relative3"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.relative4,callback:function(t){e.$set(e.form,"relative4",t)},expression:"form.relative4"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.relative5,callback:function(t){e.$set(e.form,"relative5",t)},expression:"form.relative5"}})],1),a("th",[a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.relative6,callback:function(t){e.$set(e.form,"relative6",t)},expression:"form.relative6"}})],1)])]),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("判定：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small"},model:{value:e.form.determine,callback:function(t){e.$set(e.form,"determine",t)},expression:"form.determine"}})],1)]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("备注：")]),a("el-input",{attrs:{disabled:0!==e.currentStep,clearable:"",size:"small",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"form-item"},[a("span",{staticStyle:{width:"116px"}},[e._v("审核人：")]),a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:0!==e.currentStep,placeholder:"请选择",size:"small"},model:{value:e.form.reviewUserId,callback:function(t){e.$set(e.form,"reviewUserId",t)},expression:"form.reviewUserId"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),0===e.currentStep&&e.checkChargerUserId==e.userId?a("el-button",{attrs:{loading:e.submitFormLoading,type:"primary"},on:{click:e.submitCheck}},[e._v("确 定")]):e._e(),1===e.currentStep&&e.userId==e.reviewUserId?a("el-button",{attrs:{loading:e.submitFormLoading},on:{click:function(t){return e.examine(0)}}},[e._v("不通过")]):e._e(),1===e.currentStep&&e.userId==e.reviewUserId?a("el-button",{attrs:{loading:e.submitFormLoading,type:"primary"},on:{click:function(t){return e.examine(1)}}},[e._v("通 过")]):e._e()],1)],1)],1)},i=[],n=a("5530"),l=(a("c740"),a("d81d"),a("14d9"),a("d3b7"),a("0643"),a("a573"),a("abac")),s=a("b9fe"),o=a("2f62"),c={name:"check-record",components:{},data:function(){return{dialogVisible:!1,recordDetailList:[],search:"",form:{deviceName:"",deviceNumber:"",accuracyGrade:"",materialName:"",materialNumber:"",materialAccuracyUncertainty:"",materialModel:"",materialCheckMethod:"",materialCheckItems:"",temperature:"",humidity:"",recordDetailList:[],dataValue1:"",dataValue2:"",dataValue3:"",dataValue4:"",dataValue5:"",dataValue6:"",maximun1:"",maximun2:"",maximun3:"",maximun4:"",maximun5:"",maximun6:"",relative1:"",relative2:"",relative3:"",relative4:"",relative5:"",relative6:"",determine:"",remark:"",planDetailsId:"",reviewUserId:""},currentStep:0,distributionDetailList:[{label:"最大偏差",value:1},{label:"相对偏差",value:2}],equipOptions:[],submitFormLoading:!1,userList:[],reviewUserId:"",checkChargerUserId:""}},mounted:function(){},computed:Object(n["a"])({},Object(o["b"])(["userId"])),methods:{openDialog:function(e){this.dialogVisible=!0,this.form.planDetailsId=e.planDetailsId,this.checkChargerUserId=e.checkChargerUserId,this.getEquipOptions(),this.getUserList(),this.searchInfo()},searchInfo:function(){var e=this;Object(l["Fb"])({planDetailsId:this.form.planDetailsId}).then((function(t){if(200===t.code){var a=e.form.planDetailsId;e.form=Object(n["a"])({},t.data),e.form.planDetailsId=a,e.recordDetailList=e.form.recordDetailList||[],e.form.reviewUserId?e.currentStep=1:e.currentStep=0,1===e.form.reviewStatus&&(e.currentStep=2),e.reviewUserId=e.form.reviewUserId}})).catch((function(e){console.error(e)}))},changeMachineName:function(e){var t=this.equipOptions.findIndex((function(t){return t.deviceName===e}));this.form.deviceNumber=this.equipOptions[t].managementNumber},addRow:function(){this.recordDetailList.push({testPoint:""})},submitCheck:function(){var e=this;console.log(333,this.form),this.form.recordDetailList=this.HaveJson(this.recordDetailList),this.submitFormLoading=!0,Object(l["n"])(this.form).then((function(t){200==t.code&&(e.$message.success("新增成功"),e.resetForm()),e.submitFormLoading=!1})).catch((function(t){e.submitFormLoading=!1}))},examine:function(e){var t=this,a={planDetailsId:this.form.planDetailsId,reviewStatus:e};Object(l["fc"])(a).then((function(e){200==e.code&&(t.$message.success("审核成功"),t.resetForm()),t.submitFormLoading=!1})).catch((function(e){t.submitFormLoading=!1}))},resetForm:function(){this.dialogVisible=!1,this.$emit("closeDialog1")},getEquipOptions:function(){var e=this;this.equipOptions=[],Object(l["W"])({status:0}).then((function(t){200===t.code&&t.data&&(e.equipOptions=t.data.map((function(e){return e.value=e.managementNumber,e.label=e.deviceName,e.id=e.id,e})))})).catch((function(e){console.error(e)}))},getUserList:function(){var e=this;Object(s["g"])().then((function(t){e.userList=t.data}))}}},u=c,d=(a("feca"),a("2877")),m=Object(d["a"])(u,r,i,!1,null,"457b4560",null);t["default"]=m.exports},6286:function(e,t,a){},"71dc":function(e,t,a){"use strict";a("6286")},"8c17":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{margin:"10px 0",display:"flex","align-items":"center","justify-content":"space-between"}},[e._m(0),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getYearTableData}},[e._v("刷新")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addYearPlan("add")}}},[e._v("新增")])],1)]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.yearTableDataLoading,expression:"yearTableDataLoading"}],ref:"yearTable",attrs:{data:e.yearTableData,height:"calc(60vh - 16em)","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"","highlight-current-row":""},on:{"current-change":e.currentChange}},[a("el-table-column",{attrs:{align:"center","header-align":"center",label:"序号",prop:"prop",type:"index",width:"70"}}),a("el-table-column",{attrs:{label:"年份","min-width":"80",prop:"planYear"}}),a("el-table-column",{attrs:{label:"计划名称","min-width":"180",prop:"planName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"编制人","min-width":"100",prop:"writeName"}}),a("el-table-column",{attrs:{label:"编制日期","min-width":"160",prop:"writeTime"}}),a("el-table-column",{attrs:{label:"批准状态","min-width":"100",prop:"ratifyStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.ratifyStatus?a("el-tag",{attrs:{type:"success"}},[e._v("批准")]):e._e(),0===t.row.ratifyStatus?a("el-tag",{attrs:{type:"danger"}},[e._v("不批准")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"批准内容","min-width":"150",prop:"ratifyRemark"}}),a("el-table-column",{attrs:{label:"批准人","min-width":"100",prop:"ratifyName"}}),a("el-table-column",{attrs:{label:"批准时间","min-width":"150",prop:"ratifyTime"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:1===t.row.ratifyStatus,size:"small",type:"text"},on:{click:function(a){return e.addYearPlan("edit",t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{disabled:1===t.row.ratifyStatus,size:"small",type:"text"},on:{click:function(a){return e.tellApprove(t.row.planId)}}},[e._v("批准通知")]),a("el-button",{attrs:{disabled:1===t.row.ratifyStatus||e.userId!=t.row.ratifyUserId,size:"small",type:"text"},on:{click:function(a){return e.handleApprove(t.row.planId)}}},[e._v("批准")]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.downLoadPost(t.row.planId)}}},[e._v("导出")]),a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{disabled:1===t.row.ratifyStatus,size:"small",type:"text"},on:{click:function(a){return e.deleteFun(t.row.planId)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":1,"page-size":e.pagination.size,"page-sizes":[10,20,30,50,100],background:"",total:e.pagination.total,layout:"->,total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("div",[e._m(1),a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"设备编号",prop:"deviceNumber"}},[a("el-input",{attrs:{clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getYearTableDetailData(e.currentRow)}},model:{value:e.searchForm.deviceNumber,callback:function(t){e.$set(e.searchForm,"deviceNumber",t)},expression:"searchForm.deviceNumber"}})],1),a("el-form-item",{attrs:{label:"设备名称",prop:"deviceName"}},[a("el-input",{attrs:{clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getYearTableDetailData(e.currentRow)}},model:{value:e.searchForm.deviceName,callback:function(t){e.$set(e.searchForm,"deviceName",t)},expression:"searchForm.deviceName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getYearTableDetailData(e.currentRow)}}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleForm("add")}}},[e._v("新增")])],1)]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.yearTableDetailDataLoading,expression:"yearTableDetailDataLoading"}],ref:"yearTableDetailData",staticStyle:{width:"100%"},attrs:{data:e.yearTableDetailData,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"",height:"calc(100vh - 34em)"}},[a("el-table-column",{attrs:{align:"center","header-align":"center",label:"序号",prop:"prop",type:"index",width:"70"}}),a("el-table-column",{attrs:{label:"设备编号","min-width":"180",prop:"deviceNumber"}}),a("el-table-column",{attrs:{label:"设备名称","min-width":"180",prop:"deviceName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"核查时间","min-width":"150",prop:"checkTime"}}),a("el-table-column",{attrs:{label:"核查指标","min-width":"150",prop:"checkIndex"}}),a("el-table-column",{attrs:{label:"核查方法","min-width":"150",prop:"checkMethod"}}),a("el-table-column",{attrs:{label:"结果如何判定","min-width":"150",prop:"howResults"}}),a("el-table-column",{attrs:{label:"核查负责人","min-width":"150",prop:"checkChargerUser"}}),a("el-table-column",{attrs:{label:"记录状态","min-width":"100",prop:"recordStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.recordStatus?a("el-tag",{attrs:{type:"","disable-transitions":""}},[e._v("未开始")]):e._e(),1===t.row.recordStatus?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("待批准")]):e._e(),2===t.row.recordStatus?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("通过")]):e._e(),3===t.row.recordStatus?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[e._v("不通过")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"对比状态","min-width":"100",prop:"recordContrastStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.recordContrastStatus?a("el-tag",{attrs:{type:"","disable-transitions":""}},[e._v("未开始")]):e._e(),1===t.row.recordContrastStatus?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("待批准")]):e._e(),2===t.row.recordContrastStatus?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("通过")]):e._e(),3===t.row.recordContrastStatus?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[e._v("不通过")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"备注","min-width":"150",prop:"remark"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleForm("edit",t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleForm("view",t.row)}}},[e._v("查看")]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleRecord(t.row)}}},[e._v("记录")]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleCheck(t.row)}}},[e._v("对比")]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDown(t.row)}}},[e._v("导出")]),a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteFun1(t.row.planDetailsId)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":1,"page-size":e.pagination1.size,"page-sizes":[10,20,30,50,100],total:e.pagination1.total,layout:"->,total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1}})],1)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible,title:"设备核查计划",width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-form",{ref:"modelForm",attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备编号：",prop:"deviceNumber"}},[a("el-input",{attrs:{disabled:"view"===e.operationType,clearable:"",size:"small"},model:{value:e.form.deviceNumber,callback:function(t){e.$set(e.form,"deviceNumber",t)},expression:"form.deviceNumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备名称：",prop:"deviceName"}},[a("el-input",{attrs:{disabled:"view"===e.operationType,clearable:"",size:"small"},model:{value:e.form.deviceName,callback:function(t){e.$set(e.form,"deviceName",t)},expression:"form.deviceName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"核查时间：",prop:"checkTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"view"===e.operationType,clearable:"",format:"yyyy-MM",placeholder:"选择日期",size:"small",type:"month","value-format":"yyyy-MM"},model:{value:e.form.checkTime,callback:function(t){e.$set(e.form,"checkTime",t)},expression:"form.checkTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"核查指标：",prop:"checkIndex"}},[a("el-input",{attrs:{disabled:"view"===e.operationType,clearable:"",size:"small"},model:{value:e.form.checkIndex,callback:function(t){e.$set(e.form,"checkIndex",t)},expression:"form.checkIndex"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"核查方法：",prop:"checkMethod"}},[a("el-input",{attrs:{disabled:"view"===e.operationType,clearable:"",size:"small",type:"textarea"},model:{value:e.form.checkMethod,callback:function(t){e.$set(e.form,"checkMethod",t)},expression:"form.checkMethod"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结果如何判定：",prop:"howResults"}},[a("el-input",{attrs:{disabled:"view"===e.operationType,clearable:"",size:"small",type:"textarea"},model:{value:e.form.howResults,callback:function(t){e.$set(e.form,"howResults",t)},expression:"form.howResults"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"核查责任人：",prop:"checkChargerUserId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"view"===e.operationType,placeholder:"请选择",size:"small"},on:{change:e.setCheckChargerUser},model:{value:e.form.checkChargerUserId,callback:function(t){e.$set(e.form,"checkChargerUserId",t)},expression:"form.checkChargerUserId"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{disabled:"view"===e.operationType,clearable:"",size:"small"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),"view"!==e.operationType?a("el-button",{attrs:{loading:e.submitFormLoading,type:"primary"},on:{click:e.submitForm}},[e._v("确 认")]):e._e()],1)],1),a("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalDialog=!1}}},[a("span",[e._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.ratifyRemark,callback:function(t){e.ratifyRemark=t},expression:"ratifyRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){return e.handleApproval(0)}}},[e._v("不批准")]),a("el-button",{attrs:{loading:e.approvalLoading,type:"primary"},on:{click:function(t){return e.handleApproval(1)}}},[e._v("批 准")])],1)]),a("el-dialog",{attrs:{visible:e.downloadDialog,title:"导出",width:"600px"},on:{"update:visible":function(t){e.downloadDialog=t}}},[a("span",[a("el-button",{attrs:{loading:e.outLoading,plain:"",type:"primary"},on:{click:e.controlDown}},[e._v("核查记录")]),a("el-button",{attrs:{loading:e.outLoading,plain:"",type:"primary"},on:{click:e.processingDown}},[e._v("核查比对记录")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.downloadDialog=!1}}},[e._v("取 消")])],1)]),a("el-dialog",{attrs:{visible:e.notificationDia,title:"提交批准",width:"30%"},on:{"update:visible":function(t){e.notificationDia=t},close:e.closeNotificationDia}},[a("span",{staticStyle:{"margin-top":"10px",display:"inline-block"}},[e._v(" 请选择批准人： "),a("el-select",{staticStyle:{width:"90%"},attrs:{clearable:"",filterable:"",size:"small"},model:{value:e.ratifyUserId,callback:function(t){e.ratifyUserId=t},expression:"ratifyUserId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.notificationLoading},on:{click:e.closeNotificationDia}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.notificationLoading,type:"primary"},on:{click:e.notification}},[e._v("提 交")])],1)]),e.equipmentCheck?a("equipment-check",{ref:"equipmentCheck",on:{closeDialog:e.closeDialog}}):e._e(),e.checkRecord?a("check-record",{ref:"checkRecord",on:{closeDialog1:e.closeDialog1}}):e._e(),e.addYearPlanDia?a("add-verification-year-plan-dia",{ref:"addYearPlanDia",on:{closeDia:e.closeDia}}):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("年度计划表")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("年度计划明细表")])])}],n=a("5530"),l=(a("c740"),a("b0c0"),a("3ef4")),s=a("413e"),o=a("d0d7"),c=a("abac"),u=a("b9fe"),d=a("2f62"),m={name:"equipment-verification-plan",components:{AddVerificationYearPlanDia:o["default"],CheckRecord:s["default"],EquipmentCheck:l["default"]},props:{clickNodeVal:{type:Object,default:function(){return{}}}},data:function(){return{upLoading:!1,dialogVisible:!1,searchForm:{deviceName:"",deviceNumber:""},yearTableData:[],yearTableDetailData:[],pagination:{size:10,current:1,total:0},pagination1:{size:10,current:1,total:0},form:{deviceNumber:"",deviceName:"",checkTime:"",checkIndex:"",checkMethod:"",howResults:"",checkChargerUserId:"",checkChargerUser:"",remark:"",planId:"",planDetailsId:""},operationType:"",rules:{deviceNumber:[{required:!0,message:"请填写设备编号",trigger:"blur"}],checkMethod:[{required:!0,message:"请填写核查方法",trigger:"blur"}]},yearTableDataLoading:!1,yearTableDetailDataLoading:!1,currentRow:{},approvalDialog:!1,approvalLoading:!1,submitFormLoading:!1,ratifyRemark:"",currentRowId:"",userList:[],equipmentCheck:!1,checkRecord:!1,addYearPlanDia:!1,downloadDialog:!1,outLoading:!1,downRow:{},responsibleOptions:[],notificationDia:!1,notificationLoading:!1,ratifyUserId:"",planId:""}},mounted:function(){this.getYearTableData()},methods:{getYearTableData:function(){var e=this;this.yearTableDataLoading=!0,Object(c["Wb"])({current:1,size:99}).then((function(t){200==t.code&&(e.yearTableData=t.data.records,e.pagination.total=t.data.total,e.yearTableData.length>0&&(e.currentRow=e.yearTableData[0],e.$refs.yearTable.setCurrentRow(e.currentRow))),e.yearTableDataLoading=!1})).catch((function(t){e.yearTableDataLoading=!1}))},handleSizeChange:function(e){this.pagination.size=e,this.getYearTableData()},handleCurrentChange:function(e){this.pagination.current=e,this.getYearTableData()},addYearPlan:function(e,t){var a=this;this.addYearPlanDia=!0,this.$nextTick((function(){a.$refs.addYearPlanDia.openDialog(e,t)}))},closeDia:function(){this.addYearPlanDia=!1,this.getYearTableData()},tellApprove:function(e){this.getUserList1(),this.notificationDia=!0,this.planId=e},closeNotificationDia:function(){this.notificationDia=!1,this.ratifyUserId=""},notification:function(){var e=this;this.ratifyUserId?(this.notificationLoading=!0,Object(c["vc"])({ratifyUserId:this.ratifyUserId,planId:this.planId}).then((function(t){e.notificationLoading=!1,200==t.code&&(e.closeNotificationDia(),e.getYearTableData())})).catch((function(t){e.notificationLoading=!1}))):this.$message.warning("请选择批准人")},handleApprove:function(e){this.currentRowId=e,this.approvalDialog=!0},downLoadPost:function(e){var t=this;Object(c["cb"])({planId:e}).then((function(e){var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"仪器设备期间核查计划表.docx")}))},deleteFun:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["z"])({planId:e}).then((function(e){t.$message.success("删除成功！"),t.getYearTableData()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},deleteFun1:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["A"])({planDetailsId:e}).then((function(e){t.$message.success("删除成功！"),t.getYearTableDetailData(t.currentRow)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},currentChange:function(e){this.currentRow=e,this.getYearTableDetailData(this.currentRow)},getYearTableDetailData:function(e){var t=this;this.yearTableDetailDataLoading=!0,Object(c["Xb"])({current:this.pagination1.current,size:this.pagination1.size,planId:e.planId,deviceName:this.searchForm.deviceName,deviceNumber:this.searchForm.deviceNumber}).then((function(e){200==e.code&&(t.yearTableDetailData=e.data.records,t.pagination1.total=e.data.total),t.yearTableDetailDataLoading=!1})).catch((function(e){t.yearTableDetailDataLoading=!1}))},reset:function(){this.searchForm={deviceName:"",deviceNumber:""},this.getYearTableDetailData(this.currentRow)},handleSizeChange1:function(e){this.pagination1.size=e,this.getYearTableDetailData(this.currentRow)},handleCurrentChange1:function(e){this.pagination1.current=e,this.getYearTableDetailData(this.currentRow)},handleForm:function(e,t){var a=this;this.getUserList(),this.operationType=e,this.dialogVisible=!0,this.form.planId=this.currentRow.planId,"add"!==this.operationType?this.$nextTick((function(){a.form=a.HaveJson(t)})):this.form={deviceNumber:"",deviceName:"",checkTime:"",checkIndex:"",checkMethod:"",howResults:"",checkChargerUserId:"",checkChargerUser:"",remark:"",planId:this.currentRow.planId,planDetailsId:""}},submitForm:function(){var e=this;this.$refs.modelForm.validate((function(t){t&&("add"===e.operationType?(e.submitFormLoading=!0,Object(c["g"])(e.form).then((function(t){200==t.code&&(e.$message.success("新增成功"),e.dialogVisible=!1,e.getYearTableData()),e.submitFormLoading=!1})).catch((function(t){e.submitFormLoading=!1}))):(e.submitFormLoading=!0,Object(c["Ec"])(e.form).then((function(t){200==t.code&&(e.$message.success("新增成功"),e.dialogVisible=!1,e.getYearTableData()),e.submitFormLoading=!1})).catch((function(t){e.submitFormLoading=!1}))))}))},handleApproval:function(e){var t=this,a={planId:this.currentRowId,ratifyRemark:this.ratifyRemark,ratifyStatus:e};this.approvalLoading=!0,Object(c["dc"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.getYearTableData()),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},resetForm:function(){this.$refs.modelForm.resetFields(),this.dialogVisible=!1},handleCheck:function(e){var t=this;this.equipmentCheck=!0,this.$nextTick((function(){t.$refs.equipmentCheck.openDialog(e)}))},closeDialog:function(){this.equipmentCheck=!1,this.getYearTableDetailData(this.currentRow)},handleRecord:function(e){var t=this;this.checkRecord=!0,this.$nextTick((function(){t.$refs.checkRecord.openDialog(e)}))},closeDialog1:function(){this.checkRecord=!1,this.getYearTableDetailData(this.currentRow)},handleDown:function(e){this.downRow=e,this.downloadDialog=!0},controlDown:function(){var e=this;this.outLoading=!0,Object(c["nb"])({planDetailsId:this.downRow.planDetailsId}).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"仪器设备期间核查记录表.doc")}))},processingDown:function(){var e=this;this.outLoading=!0,Object(c["mb"])({planDetailsId:this.downRow.planDetailsId}).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"仪器设备期间核查比对记录表.doc")}))},beforeUpload:function(e){return e.size>10485760?(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1):(this.upLoading=!0,!0)},onError:function(e,t,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.getYearTableData()):this.$message.error(e.message)},getUserList:function(){var e=this;Object(u["g"])().then((function(t){e.userList=t.data}))},setCheckChargerUser:function(e){var t=this.userList.findIndex((function(t){return t.id===e}));t>-1&&(this.form.checkChargerUser=this.userList[t].name)},getUserList1:function(){var e=this;Object(u["g"])().then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))}},computed:Object(n["a"])({action:function(){return this.javaApi+"/deviceExaminePlan/importDeviceExaminePlan"}},Object(d["b"])(["userId"]))},p=m,f=(a("71dc"),a("2877")),b=Object(f["a"])(p,r,i,!1,null,"3aa1b256",null);t["default"]=b.exports},b558:function(e,t,a){"use strict";a.d(t,"v",(function(){return i})),a.d(t,"A",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"z",(function(){return s})),a.d(t,"y",(function(){return o})),a.d(t,"w",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"n",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"u",(function(){return f})),a.d(t,"g",(function(){return b})),a.d(t,"j",(function(){return h})),a.d(t,"p",(function(){return v})),a.d(t,"o",(function(){return g})),a.d(t,"d",(function(){return w})),a.d(t,"D",(function(){return y})),a.d(t,"l",(function(){return k})),a.d(t,"t",(function(){return x})),a.d(t,"C",(function(){return S})),a.d(t,"b",(function(){return D})),a.d(t,"x",(function(){return _})),a.d(t,"s",(function(){return I})),a.d(t,"h",(function(){return C})),a.d(t,"k",(function(){return O})),a.d(t,"f",(function(){return z})),a.d(t,"r",(function(){return $})),a.d(t,"m",(function(){return L})),a.d(t,"q",(function(){return T})),a.d(t,"B",(function(){return N}));var r=a("b775");function i(e){return Object(r["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function c(e){return Object(r["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function f(e){return Object(r["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function w(e){return Object(r["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function k(e){return Object(r["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/deviceScope/search",method:"get",params:e})}function S(e){return Object(r["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function D(e){return Object(r["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function _(e){return Object(r["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function I(e){return Object(r["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function C(e){return Object(r["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function O(e){return Object(r["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function z(e){return Object(r["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function $(e){return Object(r["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function L(e){return Object(r["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function T(e){return Object(r["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function N(e){return Object(r["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},dabc:function(e,t,a){},feca:function(e,t,a){"use strict";a("dabc")}}]);