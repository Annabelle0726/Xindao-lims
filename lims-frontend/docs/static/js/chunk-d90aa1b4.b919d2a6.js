(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d90aa1b4","chunk-1aefab62","chunk-ff9ae806","chunk-07f627d0","chunk-5cef4527","chunk-5f42ef82","chunk-7491d929"],{"0e8a":function(t,e,a){},"17b0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",[a("div",{staticClass:"search"},[a("el-form",{ref:"entity",attrs:{model:t.entity,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"批号",prop:"updateBatchNo"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.entity.updateBatchNo,callback:function(e){t.$set(t.entity,"updateBatchNo",e)},expression:"entity.updateBatchNo"}})],1),0!==t.tabIndex?a("el-form-item",{attrs:{label:"委托编号",prop:"entrustCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.entity.entrustCode,callback:function(e){t.$set(t.entity,"entrustCode",e)},expression:"entity.entrustCode"}})],1):t._e(),a("el-form-item",{attrs:{label:"零件号",prop:"partNo"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.entity.partNo,callback:function(e){t.$set(t.entity,"partNo",e)},expression:"entity.partNo"}})],1),a("el-form-item",{attrs:{label:"零件描述",prop:"partDesc"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.entity.partDesc,callback:function(e){t.$set(t.entity,"partDesc",e)},expression:"entity.partDesc"}})],1),a("el-form-item",[2===t.tabIndex||3===t.tabIndex||4===t.tabIndex?a("el-button",{staticStyle:{color:"#3A7BFA"},attrs:{icon:t.more?"el-icon-arrow-up":"el-icon-arrow-down",type:"text"},on:{click:function(e){t.more=!t.more}}},[t._v(t._s(t.more?"收起":"更多"))]):t._e(),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.goSearch}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.refresh()}}},[t._v("重置")])],1),2!==t.tabIndex&&3!==t.tabIndex&&4!==t.tabIndex||!t.more?t._e():a("el-form-item",{attrs:{label:"供应商名称",prop:"supplierName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.entity.supplierName,callback:function(e){t.$set(t.entity,"supplierName",e)},expression:"entity.supplierName"}})],1),2!==t.tabIndex&&3!==t.tabIndex&&4!==t.tabIndex||!t.more?t._e():a("el-form-item",{attrs:{label:"样品型号",prop:"sampleModel"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch(e)}},model:{value:t.entity.sampleModel,callback:function(e){t.$set(t.entity,"sampleModel",e)},expression:"entity.sampleModel"}})],1),2!==t.tabIndex&&3!==t.tabIndex&&4!==t.tabIndex||!t.more?t._e():a("el-form-item",{attrs:{label:"检验状态",prop:"inspectStatus"}},[a("el-select",{attrs:{clearable:"",size:"small"},on:{change:t.goSearch},model:{value:t.entity.inspectStatus,callback:function(e){t.$set(t.entity,"inspectStatus",e)},expression:"entity.inspectStatus"}},t._l(t.inspectStatusList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),2!==t.tabIndex&&3!==t.tabIndex&&4!==t.tabIndex||!t.more?t._e():a("el-form-item",{attrs:{label:"下发时间",prop:"date"}},[a("el-date-picker",{attrs:{"end-placeholder":"结束日期",format:"yyyy-MM-dd",placeholder:"选择日期","range-separator":"至",size:"small","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},on:{change:t.goSearch},model:{value:t.entity.date,callback:function(e){t.$set(t.entity,"date",e)},expression:"entity.date"}})],1)],1)],1),a("div",{staticClass:"table"},[a("div",{staticClass:"table-tab"},[a("div",[a("ul",{staticClass:"tab"},[t.checkPermi(["get:raw:await"])?a("li",{class:{active:0===t.tabIndex},on:{click:function(e){return t.handleTab(0)}}},[t._v("待下单")]):t._e(),t.checkPermi(["get:raw:testing"])?a("li",{class:{active:1===t.tabIndex},on:{click:function(e){return t.handleTab(1)}}},[t._v("检验中")]):t._e(),t.checkPermi(["get:raw:check"])?a("li",{class:{active:2===t.tabIndex},on:{click:function(e){return t.handleTab(2)}}},[t._v("已检验")]):t._e(),t.checkPermi(["get:raw:quarterCheck"])?a("li",{class:{active:4===t.tabIndex},on:{click:function(e){return t.handleTab(4)}}},[t._v("季度检验")]):t._e(),t.checkPermi(["get:Ifs:ByAll"])?a("li",{class:{active:3===t.tabIndex},on:{click:function(e){return t.handleTab(3)}}},[t._v("全部")]):t._e()])]),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:3===t.tabIndex||2===t.tabIndex,expression:"tabIndex === 3 || tabIndex === 2"}],attrs:{loading:t.outLoading,size:"small",type:"primary"},on:{click:t.handleOut}},[t._v("导出")]),0===t.tabIndex?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.copper}},[t._v("铜材料下单")]):t._e(),0!==t.tabIndex?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.openPrint}},[t._v("标签打印")]):t._e()],1)]),a("div",{staticClass:"table"},[0===t.tabIndex?a("lims-table",{key:"tableData",ref:"tableData",attrs:{tableData:t.tableData,column:t.column,rowClassName:t.changeRowClass,height:"calc(100vh - 290px)",page:t.page,tableLoading:t.tableLoading},on:{pagination:t.pagination}}):t._e()],1),a("div",{staticClass:"table"},[1===t.tabIndex?a("lims-table",{key:"tableData1",attrs:{tableData:t.tableData1,column:t.column1,isSelection:!0,rowClassName:t.changeRowClass,handleSelectionChange:t.selectMethod,height:"calc(100vh - 290px)",page:t.page1,tableLoading:t.tableLoading1},on:{pagination:t.pagination1}}):t._e()],1),a("div",{staticClass:"table"},[2===t.tabIndex?a("lims-table",{key:"tableData2",attrs:{tableData:t.tableData2,column:t.column2,isSelection:!0,rowClassName:t.changeRowClass,handleSelectionChange:t.selectMethod,height:"calc(100vh - 290px)",page:t.page2,tableLoading:t.tableLoading2},on:{pagination:t.pagination2}}):t._e()],1),a("div",{staticClass:"table"},[3===t.tabIndex?a("lims-table",{key:"tableData3",attrs:{tableData:t.tableData3,column:t.column3,isSelection:!0,rowClassName:t.changeRowClass,handleSelectionChange:t.selectMethod,height:"calc(100vh - 290px)",page:t.page3,tableLoading:t.tableLoading3},on:{pagination:t.pagination3}}):t._e()],1),a("div",{staticClass:"table"},[4===t.tabIndex?a("lims-table",{key:"tableData4",attrs:{tableData:t.tableData4,column:t.column4,isSelection:!0,rowClassName:t.changeRowClass,handleSelectionChange:t.selectMethod,height:"calc(100vh - 290px)",page:t.page4,tableLoading:t.tableLoading4},on:{pagination:t.pagination4}}):t._e()],1)])]),a("el-dialog",{attrs:{visible:t.exemptionVisible,title:"确认免检",width:"42%"},on:{"update:visible":function(e){t.exemptionVisible=e}}},[a("div",{staticStyle:{display:"flex"}},[a("span",{staticStyle:{width:"90px","line-height":"32px"}},[t._v("规格型号：")]),a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:t.exemptionInfo.partDetail,callback:function(e){t.$set(t.exemptionInfo,"partDetail",e)},expression:"exemptionInfo.partDetail"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:function(e){t.exemptionVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.exemptionLoading,type:"primary"},on:{click:t.submitExemption}},[t._v("确 定")])],1)],1)]),a("el-dialog",{attrs:{visible:t.declareDialogVisible,title:"报检撤销",width:"30%"},on:{"update:visible":function(e){t.declareDialogVisible=e}}},[a("p",{staticStyle:{"font-size":"16px",color:"#333333"}},[t._v("批号"),a("span",{staticStyle:{color:"#34BD66"}},[t._v(t._s(this.insOrderRow.updateBatchNo))]),t._v("的信息是否"),a("span",{staticStyle:{color:"#FF4902"}},[t._v("撤销报检")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:function(e){t.declareDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitDeclare}},[t._v("确 定")])],1)],1)]),a("el-dialog",{attrs:{visible:t.quashDialogVisible,title:"下单撤销",width:"30%"},on:{"update:visible":function(e){t.quashDialogVisible=e}}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.cancelQuashOrder("enterOrderId")}}},[t._v("撤销进厂检验下单")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.cancelQuashOrder("quarterOrderId")}}},[t._v("撤销季度检验下单")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:function(e){t.quashDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1),a("el-dialog",{attrs:{visible:t.entrustCodeVisible,title:"提示",width:"30%"},on:{"update:visible":function(e){t.entrustCodeVisible=e}}},[a("el-input",{model:{value:t.entrustCodeInfo.entrustCode,callback:function(e){t.$set(t.entrustCodeInfo,"entrustCode",e)},expression:"entrustCodeInfo.entrustCode"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.entrustCodeVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.submitCodeLoading,type:"primary"},on:{click:t.submitCode}},[t._v("确 定")])],1)],1),t.printDialog?a("print-dialog",{ref:"printDialog",attrs:{printDialog:t.printDialog},on:{closePrintDialog:t.closePrintDialog}}):t._e(),t.dataDialogVisible?a("data-look-visible",{ref:"dataDialogVisible",attrs:{dataDialogVisible:t.dataDialogVisible,dataLookInfo:t.dataLookInfo},on:{closeDataLook:t.closeDataLook}}):t._e(),t.filesDialogVisible?a("files-look-visible",{ref:"filesDialogVisible",attrs:{filesDialogVisible:t.filesDialogVisible,filesLookInfo:t.filesLookInfo},on:{closeFilesLook:t.closeFilesLook}}):t._e(),t.downFileDialogVisible?a("down-file-dialog",{ref:"downFileDialogVisible",attrs:{downFileDialogVisible:t.downFileDialogVisible,downLoadInfo:t.downLoadInfo},on:{closeDownFileDialog:t.closeDownFileDialog}}):t._e(),t.showInfoDialog?a("ShowInfo",{ref:"showInfoDialog",attrs:{showInfoDialog:t.showInfoDialog}}):t._e(),a("el-dialog",{attrs:{visible:t.InspectInfoDialog,title:"数据查看",width:"400px"},on:{"update:visible":function(e){t.InspectInfoDialog=e},closed:t.closeInsInfoDialog}},[a("div",{staticStyle:{"margin-bottom":"8px"}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("进厂检验原始数据")]),a("el-link",{staticStyle:{"vertical-align":"bottom","margin-left":"6px"},attrs:{disabled:!t.insInfo.enterOrderId,underline:!1,type:"primary"},on:{click:t.viewInsInfo0}},[t._v("查看")])],1),a("div",[a("span",{staticStyle:{"font-size":"16px"}},[t._v("季度检验原始数据")]),a("el-link",{staticStyle:{"vertical-align":"bottom","margin-left":"6px"},attrs:{disabled:!t.insInfo.quarterOrderId,underline:!1,type:"primary"},on:{click:t.viewInsInfo1}},[t._v("查看")])],1)])],1)},i=[],r=a("5530"),l=(a("14d9"),a("beb0")),o=a("1869"),s=a("5949"),c=a("f1f0"),d=a("be52"),u=a("00d5"),p=a("2381"),f=a("f0bc"),h=a("2f62"),b={name:"MaterialOrder",components:{limsTable:u["a"],DownFileDialog:d["default"],FilesLookVisible:c["default"],DataLookVisible:s["default"],ShowInfo:o["default"],PrintDialog:l["default"]},data:function(){var t=this;return{tableData:[],tableLoading:!1,column:[{label:"批号",prop:"updateBatchNo"},{label:"零件号",prop:"partNo"},{label:"零件描述",prop:"partDesc"},{dataType:"tag",label:"物料类型",prop:"isExpire",formatData:function(t){return 1==t?"过期物料":null},formatType:function(t){return 1==t?"info":null}},{label:"抵达的采购数量",prop:"qtyArrived"},{label:"单位",prop:"buyUnitMeas"},{label:"订单号",prop:"orderNo"},{label:"接收时间",prop:"receiverDate"},{label:"报检时间",prop:"declareDate"},{dataType:"action",label:"操作",operation:[{name:"下单",type:"text",clickFun:function(e){t.playOrder(e)}},{name:"免检",type:"text",clickFun:function(e){t.exemption(e)}},{name:"撤销报检",type:"text",clickFun:function(e){t.cancelDeclare(e)}}]}],page:{total:0,size:20,current:1},tableData1:[],tableLoading1:!1,column1:[{label:"批号",prop:"updateBatchNo"},{label:"委托编号",prop:"entrustCode",width:"160px",dataType:"link",linkMethod:"changeEntrustCode"},{label:"零件号",prop:"partNo"},{label:"零件描述",prop:"partDesc"},{label:"样品名称",prop:"sampleName",width:"160px",dataType:"link",linkMethod:"selectAllByOne"},{label:"样品型号",prop:"sampleModel"},{label:"检验人",prop:"userName"},{label:"下发时间",prop:"sendTime"},{dataType:"tag",label:"物料类型",prop:"isExpire",formatData:function(t){return 1==t?"过期物料":null},formatType:function(t){return 1==t?"info":null}},{label:"抵达的采购数量",prop:"qtyArrived"},{label:"单位",prop:"buyUnitMeas"},{label:"订单号",prop:"orderNo"},{label:"接收时间",prop:"receiverDate"},{label:"报检时间",prop:"declareDate"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"数据查看",type:"text",clickFun:function(e){t.handleDataLook(e)}},{name:"附件查看",type:"text",clickFun:function(e){t.handleFileLook(e)}},{name:"撤销下单",type:"text",clickFun:function(e){t.cancelOrder(e)}}]}],page1:{total:0,size:20,current:1},tableData2:[],tableLoading2:!1,column2:[{label:"委托编号",prop:"entrustCode",width:"160px",dataType:"link",linkMethod:"changeEntrustCode"},{dataType:"tag",label:"检验状态",prop:"inspectStatus",formatData:function(t){return 0==t?"检验中":1==t?"合格":2==t?"不合格":3==t?"未下单":4==t?"让步放行":null},formatType:function(t){return 0==t?"warning":1==t?"success":2==t?"danger":3==t?"info":4==t?"":null}},{label:"订单号",prop:"orderNo"},{label:"抵达的采购数量",prop:"qtyArrived"},{label:"下发时间",prop:"sendTime"},{label:"批号",prop:"updateBatchNo"},{label:"零件号",prop:"partNo"},{label:"零件描述",prop:"partDesc"},{label:"供应商名称",prop:"supplierName"},{label:"不合格描述",prop:"unqualifiedDesc"},{dataType:"tag",label:"免检",prop:"isExemption",formatData:function(t){return 1==t?"免检":null},formatType:function(t){return 1==t?"success":null}},{label:"样品名称",prop:"sampleName",width:"160px",dataType:"link",linkMethod:"selectAllByOne"},{label:"样品型号",prop:"sampleModel"},{label:"检验人",prop:"userName"},{dataType:"tag",label:"物料类型",prop:"isExpire",formatData:function(t){return 1==t?"过期物料":null},formatType:function(t){return 1==t?"info":null}},{label:"单位",prop:"buyUnitMeas"},{label:"接收时间",prop:"receiverDate"},{label:"报检时间",prop:"declareDate"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"季度检验",type:"text",clickFun:function(e){t.playOrderSec(e)},disabled:function(t){return 0==t.isQuarter},showHide:function(e){return t.checkPermi(["get:raw:check:operation"])}},{name:"数据查看",type:"text",clickFun:function(e){t.handleDataLook(e)}},{name:"附件查看",type:"text",clickFun:function(e){t.handleFileLook(e)}},{name:"报告下载",type:"text",clickFun:function(e){t.download(e)}},{name:"原始记录",type:"text",clickFun:function(e){t.viewInspectInfo(e)},disabled:function(t){return null===t.sampleName}},{name:"放行",type:"text",clickFun:function(e){t.goPass(e)},disabled:function(t){return 2!=t.inspectStatus},showHide:function(e){return t.checkPermi(["get:raw:check:operation"])}},{name:"季度撤销",type:"text",clickFun:function(e){t.repealQuarter(e)},disabled:function(t){return null==t.quarterOrderId||null!=t.quarterReportId},showHide:function(e){return t.checkPermi(["get:raw:check:operation"])}}]}],page2:{total:0,size:20,current:1},tableData3:[],tableLoading3:!1,column3:[{label:"委托编号",prop:"entrustCode",width:"160px"},{dataType:"tag",label:"检验状态",prop:"inspectStatus",formatData:function(t){return 0==t?"检验中":1==t?"合格":2==t?"不合格":3==t?"未下单":4==t?"让步放行":null},formatType:function(t){return 0==t?"warning":1==t?"success":2==t?"danger":3==t?"info":4==t?"":null}},{label:"订单号",prop:"orderNo"},{label:"抵达的采购数量",prop:"qtyArrived"},{label:"下发时间",prop:"sendTime"},{label:"批号",prop:"updateBatchNo"},{label:"零件号",prop:"partNo"},{label:"零件描述",prop:"partDesc"},{label:"供应商名称",prop:"supplierName"},{label:"不合格描述",prop:"unqualifiedDesc"},{dataType:"tag",label:"免检",prop:"isExemption",formatData:function(t){return 1==t?"免检":null},formatType:function(t){return 1==t?"success":null}},{label:"样品名称",prop:"sampleName",width:"160px",dataType:"link",linkMethod:"selectAllByOne"},{label:"样品型号",prop:"sampleModel"},{label:"检验人",prop:"userName"},{dataType:"tag",label:"物料类型",prop:"isExpire",formatData:function(t){return 1==t?"过期物料":null},formatType:function(t){return 1==t?"info":null}},{label:"单位",prop:"buyUnitMeas"},{label:"接收时间",prop:"receiverDate"},{label:"报检时间",prop:"declareDate"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"数据查看",type:"text",clickFun:function(e){t.handleDataLook(e)}},{name:"附件查看",type:"text",clickFun:function(e){t.handleFileLook(e)}}]}],page3:{total:0,size:20,current:1},tableData4:[],tableLoading4:!1,column4:[{label:"委托编号",prop:"entrustCode",width:"160px"},{dataType:"tag",label:"检验状态",prop:"inspectStatus",formatData:function(t){return 0==t?"检验中":1==t?"合格":2==t?"不合格":3==t?"未下单":4==t?"让步放行":null},formatType:function(t){return 0==t?"warning":1==t?"success":2==t?"danger":3==t?"info":4==t?"":null}},{label:"订单号",prop:"orderNo"},{label:"抵达的采购数量",prop:"qtyArrived"},{label:"下发时间",prop:"sendTime"},{label:"批号",prop:"updateBatchNo"},{label:"零件号",prop:"partNo"},{label:"零件描述",prop:"partDesc"},{label:"供应商名称",prop:"supplierName"},{label:"不合格描述",prop:"unqualifiedDesc"},{dataType:"tag",label:"免检",prop:"isExemption",formatData:function(t){return 1==t?"免检":null},formatType:function(t){return 1==t?"success":null}},{label:"样品名称",prop:"sampleName",width:"160px",dataType:"link",linkMethod:"selectAllByOne"},{label:"样品型号",prop:"sampleModel"},{label:"检验人",prop:"userName"},{dataType:"tag",label:"物料类型",prop:"isExpire",formatData:function(t){return 1==t?"过期物料":null},formatType:function(t){return 1==t?"info":null}},{label:"单位",prop:"buyUnitMeas"},{label:"接收时间",prop:"receiverDate"},{label:"报检时间",prop:"declareDate"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"季度检验",type:"text",clickFun:function(e){t.playOrderSec(e)},disabled:function(t,e){return 0==t.isQuarter}},{name:"数据查看",type:"text",clickFun:function(e){t.handleDataLook(e)}},{name:"附件查看",type:"text",clickFun:function(e){t.handleFileLook(e)}},{name:"报告下载",type:"text",clickFun:function(e){t.download(e)}}]}],page4:{total:0,size:20,current:1},entity:{updateBatchNo:null,entrustCode:null,partDesc:null,supplierName:null,sampleModel:null,partNo:null,inspectStatus:null,date:null,beginDeclareDate:null,endDeclareDate:null},tabList:[{label:"待下单",value:0},{label:"检验中",value:1},{label:"已检验",value:2},{label:"季度检验",value:4},{label:"全部",value:3}],more:!1,tabIndex:"",multipleSelection:[],active:0,orderType:0,currentId:null,btnLoading:!1,quashDialogVisible:!1,declareDialogVisible:!1,insOrderRow:{},upLoad:!1,filesDialogVisible:!1,printDialog:!1,showInfoDialog:!1,dataDialogVisible:!1,dataLookInfo:{},filesLookInfo:{},downFileDialogVisible:!1,downLoadInfo:{},entrustCodeVisible:!1,entrustCodeInfo:{},submitCodeLoading:!1,exemptionVisible:!1,exemptionLoading:!1,exemptionInfo:{},inspectStatusList:[{label:"检验中",value:0},{label:"合格",value:1},{label:"不合格",value:2},{label:"未下单",value:3},{label:"让步放行",value:4}],state:0,orderId:0,inspectorList:[],InspectionKey:1,typeSource:null,InspectInfoDialog:!1,insInfo:{},outLoading:!1}},computed:Object(r["a"])({},Object(h["b"])(["nickName"])),mounted:function(){this.checkPermi(["get:raw:await"])?this.tabIndex=0:this.tabIndex=2,this.refreshTable()},activated:function(){this.refreshTable()},methods:{goSearch:function(){this.page.current=1,this.page1.current=1,this.page2.current=1,this.page3.current=1,this.page4.current=1,this.refreshTable()},refreshTable:function(){0===this.tabIndex?this.getPurchaseOrderList():1===this.tabIndex?this.getIfsByStateOneList():2===this.tabIndex?this.getIfsByOverList():4===this.tabIndex?this.getIfsByQuarterList():this.getIfsByAllList()},getPurchaseOrderList:function(){var t=this;this.tableLoading=!0;var e=Object(r["a"])(Object(r["a"])({},this.entity),{},{isInspect:1,state:0},this.page);Object(f["h"])(e).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},getIfsByStateOneList:function(){var t=this;this.tableLoading1=!0;var e=Object(r["a"])(Object(r["a"])({},this.entity),{},{orderState:1,state:1},this.page1);Object(p["n"])(e).then((function(e){t.tableLoading1=!1,200===e.code&&(t.tableData1=e.data.records,t.page1.total=e.data.total)})).catch((function(e){t.tableLoading1=!1}))},getIfsByOverList:function(){var t=this;this.tableLoading2=!0,null!=this.entity.date?(this.entity.beginDeclareDate=this.entity.date[0],this.entity.endDeclareDate=this.entity.date[1]):(this.entity.beginDeclareDate="",this.entity.endDeclareDate="");var e=Object(r["a"])(Object(r["a"])({},this.entity),{},{orderState:4,state:2},this.page2);Object(p["l"])(e).then((function(e){t.tableLoading2=!1,200===e.code&&(t.tableData2=e.data.records,t.page2.total=e.data.total)})).catch((function(e){t.tableLoading2=!1}))},getIfsByQuarterList:function(){var t=this;this.tableLoading4=!0,null!=this.entity.date?(this.entity.beginDeclareDate=this.entity.date[0],this.entity.endDeclareDate=this.entity.date[1]):(this.entity.beginDeclareDate="",this.entity.endDeclareDate="");var e=Object(r["a"])(Object(r["a"])({},this.entity),this.page4);Object(p["m"])(e).then((function(e){t.tableLoading4=!1,200===e.code&&(t.tableData4=e.data.records,t.page4.total=e.data.total)})).catch((function(e){t.tableLoading4=!1}))},getIfsByAllList:function(){var t=this;this.tableLoading3=!0,null!=this.entity.date?(this.entity.beginDeclareDate=this.entity.date[0],this.entity.endDeclareDate=this.entity.date[1]):(this.entity.beginDeclareDate="",this.entity.endDeclareDate="");var e=Object(r["a"])(Object(r["a"])({},this.entity),{},{isInspect:1},this.page3);Object(p["k"])(e).then((function(e){t.tableLoading3=!1,200===e.code&&(t.tableData3=e.data.records,t.page3.total=e.data.total)})).catch((function(e){t.tableLoading3=!1}))},refresh:function(){this.resetForm("entity"),this.refreshTable()},pagination:function(t){this.page.size=t.limit,this.refreshTable()},pagination1:function(t){this.page1.size=t.limit,this.refreshTable()},pagination2:function(t){this.page2.size=t.limit,this.refreshTable()},pagination3:function(t){this.page3.size=t.limit,this.refreshTable()},pagination4:function(t){this.page4.size=t.limit,this.refreshTable()},viewInspectInfo:function(t){var e=[];t.userName&&(e=t.userName.split(",")),e.push(this.nickName),this.inspectorList=e,this.insInfo=t,this.InspectInfoDialog=!0},closeInsInfoDialog:function(){this.InspectInfoDialog=!1},goPass:function(t){var e=this;this.$confirm("是否放行当前数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["f"])({ifsInventoryId:t.id}).then((function(t){200===t.code&&(e.$message({type:"success",message:"放行成功!"}),e.refresh())}))})).catch((function(){e.$message({type:"error",message:"放行失败"})}))},repealQuarter:function(t){var e=this;this.$confirm("是否撤销季度下单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["w"])({quarterOrderId:t.quarterOrderId}).then((function(t){200===t.code&&(e.$message.success("撤销成功"),e.refreshTable("page"))}))})).catch((function(){}))},viewInsInfo0:function(){var t=[];t.push(this.nickName),this.InspectInfoDialog=!1,this.checkPermi(["business:inspectionView"])?this.$router.push({name:"InspectionView",query:{sonLaboratory:"原材料",state:3,typeSource:this.insInfo.typeSource,orderId:this.insInfo.enterOrderId,inspectorList:t}}):this.$router.push({path:"/inspectionTask/inspection",query:{sonLaboratory:"原材料",state:3,typeSource:this.insInfo.typeSource,orderId:this.insInfo.enterOrderId,inspectorList:t}})},viewInsInfo1:function(){var t=[];t.push(this.nickName),this.InspectInfoDialog=!1,this.checkPermi(["business:inspectionView"])?this.$router.push({name:"InspectionView",query:{sonLaboratory:"原材料",state:3,typeSource:this.insInfo.typeSource,orderId:this.insInfo.quarterOrderId,inspectorList:t}}):this.$router.push({path:"/inspectionTask/inspection",query:{sonLaboratory:"原材料",state:3,typeSource:this.insInfo.typeSource,orderId:this.insInfo.quarterOrderId,inspectorList:t}})},goback:function(){this.state=0,this.refreshTable("page")},refreshView:function(){this.InspectionKey++},copper:function(){this.$router.push({path:"/materialOrder/copperOrder",query:{active:1}})},openPrint:function(){var t=this;this.multipleSelection.length>0?(this.printDialog=!0,this.$nextTick((function(){var e=t.multipleSelection;t.$refs.printDialog.getLabelPrinting(e)}))):this.$message.error("请选择需要打印的数据")},closePrintDialog:function(){this.printDialog=!1},playOrder:function(t){this.$router.push({path:"/materialOrder/customsInspectionOrder",query:{orderType:0,customsInspection:t,active:1}})},playOrderSec:function(t){this.$router.push({path:"/materialOrder/customsInspectionOrder",query:{orderType:1,customsInspection:t,active:1}})},selectAllByOne:function(t){1==t.isCopper?(this.currentId=t.enterOrderId,this.$router.push({path:"/materialOrder/CopperView",query:{customsInspection:t,active:2,currentId:this.currentId}})):(this.currentId=t.insOrderId,this.$router.push({path:"/materialOrder/customsInspectionView",query:{customsInspection:t,active:2,currentId:this.currentId}}))},exemption:function(t){this.exemptionVisible=!0,this.exemptionInfo=t,this.$set(this.exemptionInfo,"partDetail",t.partDesc)},submitExemption:function(){var t=this;this.exemptionLoading=!0,Object(p["u"])({ifsInventoryId:this.exemptionInfo.id,partDetail:this.exemptionInfo.partDetail}).then((function(e){200===e.code&&(t.exemptionVisible=!1,t.$message.success("操作成功"),t.refresh()),t.exemptionLoading=!1})).catch((function(e){console.log(e),t.exemptionLoading=!1}))},cancelDeclare:function(t){this.declareDialogVisible=!0,this.insOrderRow=t},submitDeclare:function(){var t=this;Object(p["x"])({id:this.insOrderRow.id}).then((function(e){200===e.code&&(t.declareDialogVisible=!1,t.refreshTable(),t.$message.success("撤销报检成功"))})).catch((function(t){console.log(t)}))},cancelOrder:function(t){var e=this;t.enterOrderId&&t.quarterOrderId?this.quashDialogVisible=!0:t.enterOrderId&&!t.quarterOrderId?this.$confirm("是否撤销进厂下单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["v"])({enterOrderId:t.enterOrderId}).then((function(t){200===t.code&&(e.$message.success("撤销成功"),e.refreshTable("page"))}))})).catch((function(){})):!t.enterOrderId&&t.quarterOrderId&&this.$confirm("是否撤销季度下单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["w"])({quarterOrderId:t.quarterOrderId}).then((function(t){200===t.code&&(e.$message.success("撤销成功"),e.refreshTable("page"))}))})).catch((function(){})),this.insOrderRow=t},cancelQuashOrder:function(t){var e=this;"enterOrderId"===t?this.$confirm("是否撤销当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["v"])({enterOrderId:e.insOrderRow.enterOrderId}).then((function(t){200===t.code&&(e.$message.success("撤销成功"),e.refreshTable("page"))}))})).catch((function(){})):this.$confirm("是否撤销当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["w"])({quarterOrderId:e.insOrderRow.quarterOrderId}).then((function(t){200===t.code&&(e.$message.success("撤销成功"),e.refreshTable())}))})).catch((function(){}))},handleDataLook:function(t){this.dataLookInfo=t,this.dataDialogVisible=!0},closeDataLook:function(){this.dataDialogVisible=!1},handleFileLook:function(t){this.filesDialogVisible=!0,this.filesLookInfo=t},closeFilesLook:function(){this.filesDialogVisible=!1},download:function(t){this.downFileDialogVisible=!0,this.downLoadInfo=t},closeDownFileDialog:function(){this.downFileDialogVisible=!1},openInfoDialog:function(t){var e=this;this.showInfoDialog=!0,this.$nextTick((function(){e.$refs.showInfoDialog.getInfo(t.id)}))},changeEntrustCode:function(t){this.entrustCodeVisible=!0,this.entrustCodeInfo=Object(r["a"])({},t)},handleOut:function(){var t=this,e=3===this.tabIndex?Object(r["a"])(Object(r["a"])({},this.entity),{},{isInspect:2}):Object(r["a"])(Object(r["a"])({},this.entity),{},{state:2,orderState:4});delete e.orderBy,this.outLoading=!0,Object(p["t"])({entity:e}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"原材料检测信息导出.xlsx")}))},submitCode:function(){var t=this;this.submitCodeLoading=!0;try{Object(p["I"])({id:this.entrustCodeInfo.id,entrustCode:this.entrustCodeInfo.entrustCode}).then((function(e){200===e.code&&(t.entrustCodeVisible=!1,t.$message.success("修改成功")),t.refreshTable(),t.submitCodeLoading=!1}))}catch(e){this.submitCodeLoading=!1}},handleTab:function(t){this.tabIndex=t,this.refreshTable()},selectMethod:function(t){this.multipleSelection=t},changeRowClass:function(t){var e=t.row;t.rowIndex;return 1==e.isFirst?"highlight-danger-row-border":""}}},m=b,g=(a("f342"),a("2877")),y=Object(g["a"])(m,n,i,!1,null,"d82e639a",null);e["default"]=y.exports},1869:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"产业链信息",visible:t.isShow,width:"600px"},on:{"update:visible":function(e){t.isShow=e},close:function(e){t.$parent.showInfoDialog=!1}}},[t._l(t.infoLIst,(function(e){return a("div",{key:e.fieldNameCn,staticClass:"info"},[a("span",{staticClass:"title"},[t._v(t._s(e.fieldNameCn))]),t._v("： "),a("span",{staticClass:"information"},[t._v(t._s(e.fieldNameValue))])])})),0===t.infoLIst.length?a("div",{staticClass:"info"},[a("span",[t._v("暂无产业链数据")])]):t._e()],2)],1)},i=[],r=(a("b64b"),{name:"showInfo",components:{},props:{showInfoDialog:{type:Boolean,default:function(){return!1}}},data:function(){return{isShow:this.showInfoDialog,infoLIst:[]}},methods:{getInfo:function(t){var e=this;console.log("id----",t),this.$axios.get(this.$api.rawMaterialOrder.getIndustryChain+"?id="+t).then((function(t){200===t.code&&null!==t.data&&(e.infoLIst=JSON.parse(t.data),console.log("this.infoLIst----",e.infoLIst))}))}}}),l=r,o=(a("74ac"),a("2877")),s=Object(o["a"])(l,n,i,!1,null,"6fe4d7da",null);e["default"]=s.exports},2381:function(t,e,a){"use strict";a.d(e,"n",(function(){return i})),a.d(e,"l",(function(){return r})),a.d(e,"k",(function(){return l})),a.d(e,"m",(function(){return o})),a.d(e,"q",(function(){return s})),a.d(e,"D",(function(){return c})),a.d(e,"o",(function(){return d})),a.d(e,"r",(function(){return u})),a.d(e,"G",(function(){return p})),a.d(e,"h",(function(){return f})),a.d(e,"B",(function(){return h})),a.d(e,"A",(function(){return b})),a.d(e,"e",(function(){return m})),a.d(e,"a",(function(){return g})),a.d(e,"E",(function(){return y})),a.d(e,"H",(function(){return v})),a.d(e,"b",(function(){return I})),a.d(e,"c",(function(){return x})),a.d(e,"d",(function(){return O})),a.d(e,"F",(function(){return w})),a.d(e,"z",(function(){return k})),a.d(e,"f",(function(){return D})),a.d(e,"w",(function(){return _})),a.d(e,"u",(function(){return L})),a.d(e,"x",(function(){return C})),a.d(e,"v",(function(){return S})),a.d(e,"t",(function(){return T})),a.d(e,"I",(function(){return j})),a.d(e,"s",(function(){return V})),a.d(e,"C",(function(){return F})),a.d(e,"p",(function(){return $})),a.d(e,"j",(function(){return M})),a.d(e,"i",(function(){return N})),a.d(e,"g",(function(){return B})),a.d(e,"y",(function(){return q}));var n=a("b775");function i(t){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByStateOne",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByOver",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByAll",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByQuarter",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/system/newUser/getUserNow",method:"get"})}function c(t){return Object(n["a"])({url:"/standardTree/selectStandardMethodEnum",method:"get"})}function d(t){return Object(n["a"])({url:"/insOrder/getInsOrder",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/rawMaterialOrder/notificationRawOrder",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/rawMaterialOrder/selectStandardTreeListByPartNo",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/rawMaterialOrder/delRawMaterOrderTemplate",method:"delete",params:t})}function h(t){return Object(n["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplateById",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplate",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/rawMaterialOrder/addRawMaterOrderTemplate",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/rawMaterialOrder/addExemptionOrder",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/standardTree/selectStandardProductList",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/standardTree/selectsStandardMethodByFLSSM",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/insOrder/addInsOrder",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/rawMaterialOrder/addRawCopperOrder",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/rawMaterialOrder/addRawCopperOrderExemptionOrder",method:"post",data:t})}function w(){return Object(n["a"])({url:"/standardTree/selectStandardTreeList2",method:"get"})}function k(t){return Object(n["a"])({url:"/insOrder/selectInsOrderTemplate",method:"get",params:t})}function D(t){return Object(n["a"])({url:"/rawMaterialOrder/concessionRelease",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/rawMaterialOrder/repealQuarterRawOrder",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/rawMaterialOrder/rawOrderRelease",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/rawMaterialOrder/revokeInspectionReport",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/rawMaterialOrder/repealEnterRawOrder",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/rawMaterialOrder/rawAllExport",method:"get",data:t,responseType:"blob"})}function j(t){return Object(n["a"])({url:"/insOrder/updateEntrustCode",method:"post",data:t})}function V(t){return Object(n["a"])({url:"/rawMaterialOrder/printLabel",method:"post",data:t})}function F(t){return Object(n["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:t})}function $(t){return Object(n["a"])({url:"/insOrder/getRetestResult",method:"get",params:t})}function M(t){return Object(n["a"])({url:"/insOrderPlan/getFileList",method:"get",params:t})}function N(t){return Object(n["a"])({url:"/insOrderPlan/downFile",method:"get",params:t})}function B(t){return Object(n["a"])({url:"/insOrderPlan/delfile",method:"delete",params:t})}function q(t){return Object(n["a"])({url:"/insOrderPlan/saveUnqualifiedContext",method:"post",data:t})}},"3b31":function(t,e,a){"use strict";a("90bc")},"49ef":function(t,e,a){},5949:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"数据查看",visible:t.isShow,width:"80%"},on:{"update:visible":function(e){t.isShow=e},closed:function(e){return t.$emit("closeDataLook")}}},[a("ul",{staticClass:"tab"},t._l(t.dataVisibleTitle,(function(e,n){return a("li",{key:n,class:{active:n===t.dataVisibleIndex},on:{click:function(a){return t.handleDataVisibleTab(e,n)}}},[t._v(t._s(e.label))])})),0),a("div",[a("lims-table",{key:"tableData",attrs:{tableData:t.tableData,column:t.column,height:"500px",page:t.page,tableLoading:t.tableLoading},on:{pagination:t.pagination}})],1)]),t.retestVisible?a("un-pass-retest-result",{attrs:{retestVisible:t.retestVisible,retestInfo:t.retestInfo},on:{closeRetestLook:t.closeRetestLook}}):t._e()],1)},i=[],r=a("5530"),l=a("6428c"),o=a("00d5"),s=a("2381"),c={name:"dataLookVisible",components:{limsTable:o["a"],UnPassRetestResult:l["default"]},props:{dataDialogVisible:{type:Boolean,default:function(){return!1}},dataLookInfo:{type:Object,default:function(){}}},data:function(){var t=this;return{tableData:[],tableLoading:!1,column:[{label:"样品编号",prop:"sampleCode"},{label:"样品名称",prop:"sample"},{label:"检验项分类",prop:"inspectionItemClass"},{label:"检验项",prop:"inspectionItem"},{label:"检验子项",prop:"inspectionItemSubclass"},{label:"单位",prop:"unit"},{label:"样品型号",prop:"model"},{label:"条件",prop:"radius"},{label:"电缆标识",prop:"cableTag"},{label:"试验要求",prop:"tell"},{label:"检验结果",prop:"lastValue"},{dataType:"tag",label:"结果判定",prop:"insResult",formatData:function(t){return 1==t?"合格":0==t?"不合格":3==t?"不判定":null},formatType:function(t){return 1==t?"success":0==t?"danger":3==t?"":null}},{dataType:"action",fixed:"right",label:"操作",width:"170px",operation:[{name:"不合格复测查看",type:"text",clickFun:function(e){t.getRetestResult(e)},disabled:function(t,e){return 0!=t.insResult}}]}],page:{total:0,size:10,current:1},isShow:this.dataDialogVisible,dataVisibleTitle:[{label:"进厂检验",value:0},{label:"季度检验",value:1}],dataVisibleIndex:0,entity:{id:null},retestVisible:!1,retestInfo:[]}},mounted:function(){this.refreshTable()},methods:{handleDataVisibleTab:function(t,e){this.dataVisibleIndex=e,this.refreshTable()},refreshTable:function(){var t=this;0===this.dataVisibleIndex?this.entity.id=this.dataLookInfo.enterOrderId:this.entity.id=this.dataLookInfo.quarterOrderId,this.tableLoading=!0;var e=Object(r["a"])(Object(r["a"])({},this.entity),this.page);Object(s["C"])(e).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},pagination:function(t){this.page.size=t.limit,this.refreshTable()},getRetestResult:function(t){var e=this;Object(s["p"])({insProductId:t.insProductId}).then((function(t){e.retestVisible=!0,e.retestInfo=t.data}))},closeRetestLook:function(){this.retestVisible=!1}}},d=c,u=(a("5c7e"),a("2877")),p=Object(u["a"])(d,n,i,!1,null,"3a5df128",null);e["default"]=p.exports},"5c7e":function(t,e,a){"use strict";a("49ef")},"6428c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"不合格复测查看",visible:t.isShow,width:"40%"},on:{"update:visible":function(e){t.isShow=e},closed:function(e){return t.$emit("closeRetestLook")}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.retestInfo,border:""}},[a("el-table-column",{attrs:{type:"index",label:"复测次数",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"tell",label:"试验要求",width:"120"}}),a("el-table-column",{attrs:{prop:"lastValue",label:"检验结果",width:"120"}}),a("el-table-column",{attrs:{prop:"insResult",label:"结果判定"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.insResult?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[t._v("不合格")]):t._e(),1===e.row.insResult?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[t._v("合格")]):t._e(),3===e.row.insResult?a("el-tag",{attrs:{"disable-transitions":""}},[t._v("不判定")]):t._e()]}}])})],1)],1)],1)},i=[],r={name:"unPassRetestResult",components:{},props:{retestVisible:{type:Boolean,default:function(){return!1}},retestInfo:{type:Array,default:function(){return[]}}},data:function(){return{isShow:this.retestVisible}},methods:{}},l=r,o=a("2877"),s=Object(o["a"])(l,n,i,!1,null,"9e5dd77c",null);e["default"]=s.exports},"74ac":function(t,e,a){"use strict";a("928a")},"90bc":function(t,e,a){},"928a":function(t,e,a){},"94c5":function(t,e,a){"use strict";a("f012")},be52:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"报告查看下载",visible:t.isShow,width:"500px"},on:{"update:visible":function(e){t.isShow=e},closed:function(e){return t.$emit("closeDownFileDialog")}}},[a("div",{staticStyle:{"margin-bottom":"18px"}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("进厂检验报告下载")]),a("i",{staticClass:"el-icon-paperclip",staticStyle:{color:"#409EFF","margin-left":"6px"}}),a("el-link",{staticStyle:{"vertical-align":"bottom","font-size":"16px"},attrs:{underline:!1,disabled:!t.downLoadInfo.enterUrls&&!t.downLoadInfo.enterUrl,type:"primary"},on:{click:t.downLoad0}},[t._v("查看")])],1),a("div",[a("span",{staticStyle:{"font-size":"16px"}},[t._v("季度检验报告下载")]),a("i",{staticClass:"el-icon-paperclip",staticStyle:{color:"#409EFF","margin-left":"6px"}}),a("el-link",{staticStyle:{"vertical-align":"bottom","font-size":"16px"},attrs:{underline:!1,disabled:!t.downLoadInfo.quarterUrls&&!t.downLoadInfo.quarterUrl,type:"primary"},on:{click:t.downLoad1}},[t._v("查看")])],1)])],1)},i=[],r={name:"downFileDialog",components:{},props:{downFileDialogVisible:{type:Boolean,default:function(){return!1}},downLoadInfo:{type:Object,default:function(){}}},data:function(){return{isShow:this.downFileDialogVisible}},methods:{downLoad0:function(){var t=this.downLoadInfo.enterUrlS?this.downLoadInfo.enterUrlS:this.downLoadInfo.enterUrl;if(t){t=t.split(".")[0]+".pdf";var e=document.createElement("a");e.href=this.javaApi+t,e.target="_blank",document.body.appendChild(e),e.click()}},downLoad1:function(){var t=this.downLoadInfo.quarterUrlS?this.downLoadInfo.quarterUrlS:this.downLoadInfo.quarterUrl;if(t){t=t.split(".")[0]+".pdf";var e=document.createElement("a");e.href=this.javaApi+t,e.target="_blank",document.body.appendChild(e),e.click()}}}},l=r,o=(a("94c5"),a("2877")),s=Object(o["a"])(l,n,i,!1,null,"0420d408",null);e["default"]=s.exports},beb0:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"标签打印",visible:t.isShow,width:"600px",top:"5vh"},on:{"update:visible":function(e){t.isShow=e},close:function(e){return t.$emit("closePrintDialog")}}},[a("div",{staticStyle:{width:"100%",height:"400px","overflow-y":"auto","text-align":"left"}},[a("div",{staticClass:"dia_body"},[a("el-checkbox",{staticStyle:{margin:"10px 5px"},attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:function(e){return t.changePrintCode()}},model:{value:t.checkIndexList,callback:function(e){t.checkIndexList=e},expression:"checkIndexList"}},t._l(t.barcodeData,(function(e,n){return a("el-card",{key:n,staticClass:"box-card",staticStyle:{"margin-bottom":"15px","font-size":"16px !important"}},[a("el-checkbox",{key:n,staticStyle:{position:"relative",top:"0",left:"10px"},attrs:{label:n}},[a("br")]),a("div",[a("div",{staticClass:"titleH1",staticStyle:{"text-align":"center","margin-bottom":"2px","font-size":"16px"}},[t._v("检测中心样品标识卡")]),a("div",{staticStyle:{"text-align":"center"}},[a("barcode",{attrs:{value:e.barcode,height:34,width:2,displayValue:!1}})],1),a("div",{staticStyle:{"margin-left":"20px","text-align":"left"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("材料名称")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sampleName))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("材料厂家")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.supplierName))])]),a("div",{staticClass:"item2"},[a("span",{staticClass:"full-title"},[t._v("规格型号")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.partDesc))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("委托日期")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sendTime))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("委托人")]),t._v(": "),a("span",{staticClass:"info2"},[t._v(t._s(e.prepareUser))]),a("span",{staticClass:"full-title"},[t._v("检测编号")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.entrustCode))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("样品数量")]),t._v(": "),a("span",{staticClass:"info2"},[t._v(t._s(e.sampleNumber))]),a("span",{staticClass:"full-title"},[t._v("样品标识")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.color))])]),a("div",{staticStyle:{"font-weight":"bold",display:"flex","align-items":"center"}},[a("span",{staticClass:"full-title"},[t._v("样品状态")]),t._v(": "),a("el-radio-group",{staticStyle:{"margin-top":"7px","margin-left":"4px"},model:{value:e.labelStatus,callback:function(a){t.$set(e,"labelStatus",a)},expression:"item.labelStatus"}},[a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:"0"}},[t._v("待检")]),a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:"1"}},[t._v("在检")]),a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:"2"}},[t._v("已检")])],1),a("span",[a("el-radio",{staticStyle:{"margin-left":"14px","margin-top":"3px"},attrs:{label:!0,size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.changeIsLeave(e)}},model:{value:e.isLeave,callback:function(a){t.$set(e,"isLeave",a)},expression:"item.isLeave"}},[t._v("留样")])],1)],1)])])],1)})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:function(e){return t.$emit("closePrintDialog")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitPrint}},[t._v("打 印")])],1)],1)]),a("div",{staticClass:"el-dialog-body",staticStyle:{"overflow-y":"auto","margin-top":"0",position:"fixed",top:"20px",right:"10px","z-index":"99999"}},[a("div",{ref:"printOrder",staticClass:"printOrder",attrs:{id:"printOrder"}},t._l(t.checkDataList,(function(e,n){return a("el-card",{key:n,staticClass:"box-card",staticStyle:{"font-size":"0.29cm !important","font-weight":"700","page-break-after":"always",color:"#000","box-shadow":"none",margin:"0 !important",padding:"0 !important"}},[a("div",[a("div",{staticClass:"titleH1",staticStyle:{"text-align":"center","margin-bottom":"1px"}},[t._v("检测中心样品标识卡")]),a("div",{staticStyle:{"text-align":"center"}},[a("barcode",{attrs:{value:e.barcode,height:22,width:1.6,displayValue:!1}})],1),a("div",{staticStyle:{"margin-left":"12px","text-align":"left"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"full-title4"},[t._v("材料名称:")]),a("span",{staticClass:"info4"},[t._v(t._s(e.sampleName))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("材料厂家")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.supplierName))])]),a("div",{staticClass:"item2"},[a("span",{staticClass:"full-title4"},[t._v("规格型号:")]),a("span",{staticClass:"info4"},[t._v(t._s(e.partDesc))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("委托日期")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sendTime))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("委托人")]),t._v(": "),a("span",{staticClass:"info3"},[t._v(t._s(e.prepareUser))]),a("span",{staticClass:"full-title2"},[t._v("检测编号")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.entrustCode))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("样品数量")]),t._v(": "),a("span",{staticClass:"info3"},[t._v(t._s(e.sampleNumber))]),a("span",{staticClass:"full-title2"},[t._v("样品标识")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.color))])]),a("div",[a("span",{staticClass:"full-title2"},[t._v("样品状态")]),t._v(": "),a("span",{staticStyle:{"white-space":"nowrap","margin-left":"2px"}},[t._v(" 待检"),"0"!=e.labelStatus?a("span",{staticClass:"scor"}):t._e(),"0"==e.labelStatus?a("span",{staticClass:"checked"},[t._v("√")]):t._e(),t._v(" 在检"),"1"!=e.labelStatus?a("span",{staticClass:"scor"}):t._e(),"1"==e.labelStatus?a("span",{staticClass:"checked"},[t._v("√")]):t._e(),t._v(" 已检"),"2"!=e.labelStatus?a("span",{staticClass:"scor"}):t._e(),"2"==e.labelStatus?a("span",{staticClass:"checked"},[t._v("√")]):t._e(),t._v(" 留样"),e.isLeave?t._e():a("span",{staticClass:"scor"}),e.isLeave?a("span",{staticClass:"checked"},[t._v("√")]):t._e()])])])])])})),1)])],1)},i=[],r=(a("c740"),a("d81d"),a("14d9"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("add5")),l=a.n(r),o=a("2381"),s={name:"printDialog",components:{},props:{printDialog:{type:Boolean,default:function(){return!1}}},data:function(){return{isShow:this.printDialog,loadPint:!1,isIndeterminate:!1,checkAll:!1,checkIndexList:[],barcodeData:[],printLoading:!1,checkDataList:[]}},methods:{getLabelPrinting:function(t){var e=this;try{this.loadPint=!0;var a=[];t.map((function(t){a.push(t.id)})),Object(o["s"])({ids:a}).then((function(t){200===t.code&&t.data.length>0&&(t.data.forEach((function(t){console.log("item---",t),t.sendTime=t.sendTime&&t.sendTime.substring(0,10),t.sampleNumber=t.qtyArrived+t.buyUnitMeas,e.$set(t,"barcode",t.entrustCode),e.$set(t,"isLeave","2"===t.labelStatus)})),e.barcodeData=t.data)}))}catch(n){console.log("获取要打印的数据---",n)}},changeIsLeave:function(t){var e=this.barcodeData.findIndex((function(e){return e.entrustCode===t.entrustCode}));e>-1&&(this.barcodeData[e].isLeave=!this.barcodeData[e].isLeave)},handleCheckAllChange:function(t){if(t){for(var e=0;e<this.barcodeData.length;e++)this.checkIndexList.push(e);this.checkDataList=this.barcodeData}else this.checkIndexList=[],this.checkDataList=[];this.isIndeterminate=!1},changeType:function(t){t="1"===t?"0":"1"},changePrintCode:function(){var t=this,e=this.checkIndexList,a=[];e.forEach((function(e){void 0!==e&&a.push(t.barcodeData[e])})),console.log("arr---",a),this.checkDataList=a},submitPrint:function(){this.checkDataList.length<1?this.$message.warning("请选择要打印的条形码"):(this.printDialogVisible=!1,l()({targetStyles:["*"],printable:"printOrder",type:"html",maxWidth:360,header:"",style:"@page {\n            margin: 0.4cm;\n            margin-right: 0.4cm;\n            margin-top: 0.4cm;\n            margin-bottom: 0.4cm;\n            padding-bottom: 0px;\n            size: 400px 75px collapse;\n          }\n          html{\n            zoom:100%;\n\n          }\n          @media print{\n            width: 400px;\n            height: 75px;\n            margin:0;\n          }",onPrintDialogClose:this.erexcel=!1,font_size:"0.29cm"}))}},watch:{printDialog:function(t){t||(this.barcodeData=[],this.checkIndexList=[],this.checkDataList=[],this.isIndeterminate=!0)}}},c=s,d=(a("3b31"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,"2493992a",null);e["default"]=u.exports},cf73:function(t,e,a){"use strict";a("fd5b")},f012:function(t,e,a){},f0bc:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"h",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"e",(function(){return o})),a.d(e,"l",(function(){return s})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return d})),a.d(e,"i",(function(){return u})),a.d(e,"a",(function(){return p})),a.d(e,"j",(function(){return f})),a.d(e,"d",(function(){return h})),a.d(e,"k",(function(){return b}));var n=a("b775");function i(t){return Object(n["a"])({url:"insOrder/getIfsOrder",method:"get"})}function r(t){return Object(n["a"])({url:"/rawMaterialOrder/getWarehouseSubmit",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByFinish",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByAll",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/rawMaterialOrder/revokeInspectionReport",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/rawMaterialOrder/concessionRelease",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/rawMaterialOrder/advancedGodown",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/rawMaterialOrder/inspectionReport",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/rawMaterialOrder/addIfsInventoryQuantity",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/rawMaterialOrder/inspectionReportOne",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/rawMaterialOrder/delIfsInventory",method:"delete",params:t})}function b(t){return Object(n["a"])({url:"/rawMaterialOrder/rawAllExport",method:"get",data:t,responseType:"blob"})}},f1f0:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"附件查看",visible:t.isShow,width:"80%"},on:{"update:visible":function(e){t.isShow=e},closed:function(e){return t.$emit("closeFilesLook")}}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("ul",{staticClass:"tab"},t._l(t.dataVisibleTitle,(function(e,n){return a("li",{key:n,class:{active:n===t.dataVisibleIndex},on:{click:function(a){return t.handleDataVisibleTab(e,n)}}},[t._v(t._s(e.label))])})),0),a("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:t.action,"auto-upload":!0,data:{orderId:0===t.dataVisibleIndex?t.filesLookInfo.enterOrderId:t.filesLookInfo.quarterOrderId},"on-success":t.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar",headers:t.uploadHeader,"before-upload":t.beforeUpload,"on-error":t.onError}},[a("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[t._v("附件上传")])],1)],1),t.filesDialogVisible?a("div",[a("lims-table",{key:"tableDataFile",attrs:{tableData:t.tableDataFile,column:t.columnFile,height:"500px",page:t.pageFile,tableLoading:t.tableLoadingFile},on:{pagination:t.paginationFile}})],1):t._e()])],1)},i=[],r=a("5530"),l=(a("d3b7"),a("00d5")),o=a("2381"),s={name:"filesLookVisible",components:{limsTable:l["a"]},props:{filesDialogVisible:{type:Boolean,default:function(){return!1}},filesLookInfo:{type:Object,default:function(){}}},data:function(){var t=this;return{tableDataFile:[],tableLoadingFile:!1,columnFile:[{dataType:"tag",label:"类型",prop:"type",formatData:function(t){return 1==t?"图片":2==t?"文件":""},formatType:function(t){return 1==t?"success":2==t?"warning":""}},{label:"附件名称",prop:"fileName"},{label:"上传人",prop:"name"},{label:"上传时间",prop:"createTime"},{dataType:"action",fixed:"right",label:"操作",width:"170px",operation:[{name:"下载",type:"text",clickFun:function(e){t.handleDown(e)}},{name:"删除",type:"text",clickFun:function(e){t.delete(e)}}]}],pageFile:{total:0,size:10,current:1},isShow:this.filesDialogVisible,dataVisibleTitle:[{label:"进厂检验",value:0},{label:"季度检验",value:1}],dataVisibleIndex:0,entity:{insOrderId:""}}},mounted:function(){this.getFileList()},methods:{handleDataVisibleTab:function(t,e){this.dataVisibleIndex=e,this.getFileList()},getFileList:function(){var t=this;0===this.dataVisibleIndex?this.entity.insOrderId=this.filesLookInfo.enterOrderId:this.entity.insOrderId=this.filesLookInfo.quarterOrderId,this.tableLoadingFile=!0;var e=Object(r["a"])({},this.entity);Object(o["j"])(e).then((function(e){t.tableLoadingFile=!1,200===e.code&&(t.tableDataFile=e.data.records,t.pageFile.total=e.data.total)})).catch((function(e){t.tableLoadingFile=!1}))},paginationFile:function(t){this.pageFile.size=t.limit,this.getFileList()},handleDown:function(t){var e=this;Object(o["i"])({id:t.id}).then((function(a){e.$download.saveAs(a.data.fileUrl,t.fileName)})).catch((function(t){}))},handleSuccessUp:function(t){this.upLoading=!1,200==t.code?(this.$message.success("上传成功"),this.getFileList()):this.$message.error(t.msg)},beforeUpload:function(t){var e=!0;if(0!==this.dataVisibleIndex||this.filesLookInfo.enterOrderId){if(1!==this.dataVisibleIndex||this.filesLookInfo.quarterOrderId)return t.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),e=!1),e?void 0:Promise.reject(e);this.$message.warning("没有相应的检验任务")}else this.$message.warning("没有相应的检验任务")},onError:function(t,e,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},delete:function(t){var e=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["g"])({id:t.id}).then((function(t){e.$message.success("删除成功"),e.getFileList()}))})).catch((function(){}))}},computed:{action:function(){return this.javaApi+"/insOrderPlan/uploadFile"}}},c=s,d=(a("cf73"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,"fe01df5e",null);e["default"]=u.exports},f342:function(t,e,a){"use strict";a("0e8a")},fd5b:function(t,e,a){}}]);