(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ee08d80"],{"2a38":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"capacity-scope"},[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"样品编号",prop:"sampleCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.queryParams.sampleCode,callback:function(e){t.$set(t.queryParams,"sampleCode",e)},expression:"queryParams.sampleCode"}})],1),a("el-form-item",{attrs:{label:"投诉名称",prop:"complainName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.queryParams.complainName,callback:function(e){t.$set(t.queryParams,"complainName",e)},expression:"queryParams.complainName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.refreshTable}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.refresh}},[t._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{loading:t.outLoading,size:"small",type:"primary"},on:{click:t.handleDown}},[t._v("导出")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.openAdd}},[t._v("新增")])],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:t.tableData,column:t.column,tableLoading:t.tableLoading,height:"calc(100vh - 290px)",page:t.page},on:{pagination:t.pagination}})],1),a("el-dialog",{attrs:{visible:t.addDialogVisible,title:"新增",width:"400px"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("投诉方名称：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:t.addInfo.complainName,callback:function(e){t.$set(t.addInfo,"complainName",e)},expression:"addInfo.complainName"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("检验报告编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:t.addInfo.code,callback:function(e){t.$set(t.addInfo,"code",e)},expression:"addInfo.code"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("样品编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:t.addInfo.sampleCode,callback:function(e){t.$set(t.addInfo,"sampleCode",e)},expression:"addInfo.sampleCode"}})],1)])]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("投诉方式：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:t.addInfo.complainMethod,callback:function(e){t.$set(t.addInfo,"complainMethod",e)},expression:"addInfo.complainMethod"}})],1)])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.addLoading,type:"primary"},on:{click:t.handleAdd}},[t._v("确 定")])],1)],1),a("el-dialog",{class:{downPdf:"导出"==t.title},attrs:{modal:"导出"!=t.title,title:t.title,visible:t.handleDialogVisible,width:"800px"},on:{"update:visible":function(e){t.handleDialogVisible=e}}},[a("div",{staticClass:"dialog-body"},[a("div",{attrs:{id:"dialogBody"}},[a("h4",{staticStyle:{display:"flex","align-items":"center","flex-direction":"column","justify-content":"center"}},[a("span",{staticStyle:{"font-size":"20px"}},[t._v("客户投诉受理单")]),a("span",[t._v("Customer complaint receipts")])]),a("p",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"16px"}},[a("span",[t._v(t._s(t.currentInfo0.complainNo))]),a("span",[t._v("NO:")])]),a("table",{staticClass:"tables",attrs:{border:"1",cellpadding:"10"}},[a("tr",[a("td",{attrs:{colspan:"3"}},[a("p",[t._v("投诉方名称")]),a("p",{staticClass:"en"},[t._v("Name of the complaining party")])]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.currentInfo0.complainName))])]),a("tr",[a("td",[a("p",[t._v("检测报告编号")]),a("p",{staticClass:"en"},[t._v("Test report number")])]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.currentInfo0.code))]),a("td",[a("p",[t._v("样品编号")]),a("p",{staticClass:"en"},[t._v("Sample number")])]),a("td",[t._v(t._s(t.currentInfo0.sampleCode))])]),a("tr",[a("td",[a("p",[t._v("投诉人")]),a("p",{staticClass:"en"},[t._v("Complainant")])]),a("td",[t._v(t._s(t.currentInfo0.createUser))]),a("td",[a("p",[t._v("电话")]),a("p",{staticClass:"en"},[t._v("Phone")])]),a("td",[t._v(t._s(t.currentInfo0.phone))]),a("td",[a("p",[t._v("E-Mail")]),a("p",{staticClass:"en"},[t._v("E-mail")])]),a("td",[t._v(t._s(t.currentInfo0.email))])]),a("tr",[a("td",[a("p",[t._v("投诉方式")]),a("p",{staticClass:"en"},[t._v("Complaint method")])]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.currentInfo0.complainMethod))]),a("td",[a("p",[t._v("投诉日期")]),a("p",{staticClass:"en"},[t._v("Date of complaint")])]),a("td",[t._v(t._s(t.currentInfo0.createTime?t.currentInfo0.createTime.split(" ")[0]:""))])]),a("tr",[a("td",[a("p",[t._v("问题记录")]),a("p",{staticClass:"en"},[t._v("Problem logging")])]),a("td",{attrs:{colspan:"5"}},[a("div",{staticClass:"user-content"},["处理投诉"==t.title?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",type:"textarea"},model:{value:t.currentInfo0.problemRecords,callback:function(e){t.$set(t.currentInfo0,"problemRecords",e)},expression:"currentInfo0.problemRecords"}}):a("p",{staticStyle:{"text-align":"left","line-height":"26px"}},[t._v(t._s(t.currentInfo0.problemRecords))])],1),"处理投诉"!=t.title?a("div",{staticClass:"user-info"},[a("div",{staticStyle:{width:"200px","margin-right":"10px"}},[a("p",{staticStyle:{"text-align":"end"}},[t._v("质量负责人:")]),a("p",{staticClass:"en",staticStyle:{"text-align":"end"}},[t._v("Quality Manager:")])]),a("span",[t._v(t._s(t.currentInfo0.problemRecordsUserName))]),a("div",{staticStyle:{width:"70px"}},[a("p",[t._v("日期:")]),a("p",{staticClass:"en"},[t._v("Date:")])]),a("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t.currentInfo0.problemRecordsTime))])]):t._e()])]),a("tr",[a("td",[a("p",[t._v("责任归属及投诉是否成立")]),a("p",{staticClass:"en"},[t._v("Attribution of responsibility and whether the complaint is established")])]),a("td",{attrs:{colspan:"5"}},[a("div",{staticClass:"user-content"},["处理投诉"==t.title?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",type:"textarea"},model:{value:t.currentInfo0.dutyOwnership,callback:function(e){t.$set(t.currentInfo0,"dutyOwnership",e)},expression:"currentInfo0.dutyOwnership"}}):a("p",{staticStyle:{"text-align":"left","line-height":"26px"}},[t._v(t._s(t.currentInfo0.dutyOwnership))])],1),"处理投诉"!=t.title?a("div",{staticClass:"user-info"},[a("div",{staticStyle:{width:"200px","margin-right":"10px"}},[a("p",{staticStyle:{"text-align":"end"}},[t._v("质量负责人:")]),a("p",{staticClass:"en",staticStyle:{"text-align":"end"}},[t._v("Quality Manager:")])]),a("span",[t._v(t._s(t.currentInfo0.dutyOwnershipUserName))]),a("div",{staticStyle:{width:"70px"}},[a("p",[t._v("日期:")]),a("p",{staticClass:"en"},[t._v("Date:")])]),a("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t.currentInfo0.dutyOwnershipTime))])]):t._e()])]),a("tr",[a("td",[a("p",[t._v("原因分析")]),a("p",{staticClass:"en"},[t._v("Cause analysis")])]),a("td",{attrs:{colspan:"5"}},[a("div",{staticClass:"user-content"},["处理投诉"==t.title?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",type:"textarea"},model:{value:t.currentInfo0.causeAnalysis,callback:function(e){t.$set(t.currentInfo0,"causeAnalysis",e)},expression:"currentInfo0.causeAnalysis"}}):a("p",{staticStyle:{"text-align":"left","line-height":"26px"}},[t._v(t._s(t.currentInfo0.causeAnalysis))])],1),"处理投诉"!=t.title?a("div",{staticClass:"user-info"},[a("div",{staticStyle:{width:"200px","margin-right":"10px"}},[a("p",{staticStyle:{"text-align":"end"}},[t._v("责任部门负责人:")]),a("p",{staticClass:"en",staticStyle:{"text-align":"end"}},[t._v("Head of Responsible Department:")])]),a("span",[t._v(t._s(t.currentInfo0.causeAnalysisUserName))]),a("div",{staticStyle:{width:"70px"}},[a("p",[t._v("日期:")]),a("p",{staticClass:"en"},[t._v("Date:")])]),a("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t.currentInfo0.causeAnalysisTime))])]):t._e()])]),a("tr",[a("td",[a("p",[t._v("纠正措施")]),a("p",{staticClass:"en"},[t._v("Corrective actions")])]),a("td",{attrs:{colspan:"5"}},[a("div",{staticClass:"user-content"},["处理投诉"==t.title?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",type:"textarea"},model:{value:t.currentInfo0.correctiveAction,callback:function(e){t.$set(t.currentInfo0,"correctiveAction",e)},expression:"currentInfo0.correctiveAction"}}):a("p",{staticStyle:{"text-align":"left","line-height":"26px"}},[t._v(t._s(t.currentInfo0.correctiveAction))])],1),"处理投诉"!=t.title?a("div",{staticClass:"user-info"},[a("div",{staticStyle:{width:"200px","margin-right":"10px"}},[a("p",{staticStyle:{"text-align":"end"}},[t._v("责任部门负责人:")]),a("p",{staticClass:"en",staticStyle:{"text-align":"end"}},[t._v("Head of Responsible Department:")])]),a("span",[t._v(t._s(t.currentInfo0.correctiveActionUserName))]),a("div",{staticStyle:{width:"70px"}},[a("p",[t._v("日期:")]),a("p",{staticClass:"en"},[t._v("Date:")])]),a("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t.currentInfo0.correctiveActionTime))])]):t._e()])]),a("tr",[a("td",[a("p",[t._v("纠正措施确认")]),a("p",{staticClass:"en"},[t._v("Corrective actions confirmation")])]),a("td",{attrs:{colspan:"5"}},[a("div",{staticClass:"user-content"},["处理投诉"==t.title?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",type:"textarea"},model:{value:t.currentInfo0.correctiveActionConfirmation,callback:function(e){t.$set(t.currentInfo0,"correctiveActionConfirmation",e)},expression:"currentInfo0.correctiveActionConfirmation"}}):a("p",{staticStyle:{"text-align":"left","line-height":"26px"}},[t._v(t._s(t.currentInfo0.correctiveActionConfirmation)+" ")])],1),"处理投诉"!=t.title?a("div",{staticClass:"user-info"},[a("div",{staticStyle:{width:"200px","margin-right":"10px"}},[a("p",{staticStyle:{"text-align":"end"}},[t._v("质量负责人:")]),a("p",{staticClass:"en",staticStyle:{"text-align":"end"}},[t._v("Quality Manager:")])]),a("span",[t._v(t._s(t.currentInfo0.correctiveActionConfirmationUserName))]),a("div",{staticStyle:{width:"70px"}},[a("p",[t._v("日期:")]),a("p",{staticClass:"en"},[t._v("Date:")])]),a("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t.currentInfo0.correctiveActionConfirmationTime))])]):t._e()])])])])]),"处理投诉"==t.title?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.handleDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.addLoading,type:"primary"},on:{click:t.submit}},[t._v("提 交")])],1):t._e()])],1)},i=[],s=a("5530"),r=a("00d5"),l=a("c466"),o=a("d3b5"),c=a("b775");function d(t){return Object(c["a"])({url:"/processComplain/addProcessComplain",method:"post",data:t})}function p(t){return Object(c["a"])({url:"/processComplain/getProcessComplain",method:"get",params:t})}function u(t){return Object(c["a"])({url:"/processComplain/doProcessComplain",method:"post",data:t})}function f(t){return Object(c["a"])({url:"/processComplain/exportProcessComplain",method:"get",responseType:"blob",params:t})}function m(t){return Object(c["a"])({url:"/processComplain/pageProcessComplain",method:"get",params:t})}function h(t){return Object(c["a"])({url:"/processComplain/delProcessComplain",method:"delete",params:t})}var v=a("2f62"),g={name:"Complaint",components:{limsTable:r["a"]},data:function(){var t=this;return{tableLoading:!1,addPower:!1,outLoading:!1,addDialogVisible:!1,addLoading:!1,handleDialogVisible:!1,title:"处理投诉",addInfo:{},currentInfo:null,currentInfo0:{},outPower:!1,queryParams:{},tableData:[],column:[{label:"投诉名称",prop:"complainName"},{label:"投诉人",prop:"complainant"},{label:"投诉日期",prop:"createTime"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"查看",type:"text",clickFun:function(e){t.handleLook(e)}},{name:"处理",type:"text",clickFun:function(e){t.handleWork(e)}},{name:"导出",type:"text",clickFun:function(e){t.handleOut(e)}},{name:"删除",type:"text",clickFun:function(e){t.handleDelete(e)}}]}],page:{total:0,size:10,current:0}}},computed:Object(s["a"])({},Object(v["b"])(["userId"])),mounted:function(){this.getList()},methods:{openAdd:function(){this.addInfo={},this.addDialogVisible=!0},handleAdd:function(){var t=this;this.addLoading=!0,d(this.addInfo).then((function(e){t.addLoading=!1,t.$message({type:"success",message:"新增成功"}),t.addDialogVisible=!1,t.refresh()}))},handleWork:function(t){var e=this;p({id:t.id}).then((function(t){e.currentInfo=t.data,e.currentInfo0=e.HaveJson(t.data),e.title="处理投诉",e.handleDialogVisible=!0}))},submit:function(){var t=this;for(var e in this.handleParam("problemRecords"),this.handleParam("dutyOwnership"),this.handleParam("causeAnalysis"),this.handleParam("correctiveAction"),this.handleParam("correctiveActionConfirmation"),this.addLoading=!0,this.currentInfo0)this.currentInfo0[e]||delete this.currentInfo0[e];u(this.currentInfo0).then((function(e){t.addLoading=!1,t.$message({type:"success",message:"提交成功"}),t.handleDialogVisible=!1,t.refresh()}))},handleParam:function(t){this.currentInfo0[t]!=this.currentInfo[t]&&(this.currentInfo0[t+"User"]=this.userId,this.currentInfo0[t+"Time"]=Object(l["b"])())},handleLook:function(t){var e=this;d({id:t.id}).then((function(t){e.currentInfo=t.data,e.currentInfo0=e.HaveJson(t.data),e.title="查看投诉",e.handleDialogVisible=!0}))},getList:function(){var t=this;this.tableLoading=!0;var e=Object(s["a"])(Object(s["a"])({},this.queryParams),this.page);delete e.total,m(Object(s["a"])({},e)).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},pagination:function(t){var e=t.page,a=t.limit;this.page.current=e,this.page.size=a,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},handleDown:function(){var t=this;this.outLoading=!0,f(this.queryParams).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"投诉情况汇总表.xlsx")}))},handleOut:function(t){var e=this;p({id:t.id}).then((function(t){e.currentInfo=t.data,e.currentInfo0=e.HaveJson(t.data),e.title="导出",e.handleDialogVisible=!0,setTimeout((function(){e.$nextTick((function(){var t=document.getElementById("dialogBody");Object(o["a"])(t,"投诉详情").then((function(t){e.handleDialogVisible=!1}))}))}),500)}))},handleDelete:function(t){var e=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){h({id:t.id}).then((function(t){e.$message.success("删除成功"),e.refresh()}))})).catch((function(){}))}}},_=g,b=(a("69ca"),a("2877")),y=Object(b["a"])(_,n,i,!1,null,"4abea85e",null);e["default"]=y.exports},3341:function(t,e,a){},"69ca":function(t,e,a){"use strict";a("3341")},c466:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return s}));a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319");function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getFullYear(),a=t.getMonth()+1;a<10?a="0"+a+"-":a+="-",e+="-";var n=t.getDate();return n=n<10?"0"+n:n,e+a+n}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("Invalid Date"!==t){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e}return""}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getFullYear(),a=t.getMonth(),n=t.getDate();return 26===n&&(a++,a>11&&(a=0,e++)),a+=1,a=a<10?"0"+a+"-":a+"-",e+="-",n=n<10?"0"+n:n,e+a+n}},d3b5:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("c14f"),i=a("1da1"),s=a("c0e9"),r=a.n(s),l=a("8baf");function o(t){return c.apply(this,arguments)}function c(){return c=Object(i["a"])(Object(n["a"])().m((function t(e){var a,i,s,o,c,d,p,u=arguments;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"exported",t.p=1,console.log("正在将 HTML 转换为 canvas...",e),t.n=2,r()(e,{useCORS:!0});case 2:i=t.v,s=i.toDataURL("image/png"),o=new l["a"]("p","mm","a4"),c=o.internal.pageSize.getWidth(),d=i.height*c/i.width,o.addImage(s,"PNG",10,10,c-20,d-20),o.save(a+".pdf"),console.log("PDF 导出成功！"),t.n=4;break;case 3:t.p=3,p=t.v,console.error("导出 PDF 失败：",p);case 4:return t.a(2)}}),t,null,[[1,3]])}))),c.apply(this,arguments)}}}]);