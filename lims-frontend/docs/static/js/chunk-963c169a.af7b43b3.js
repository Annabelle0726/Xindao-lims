(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-963c169a"],{"24c3a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"capacity-scope"},[r("div",{staticClass:"search"},[r("div",[r("el-form",{ref:"queryParams",attrs:{model:e.queryParams,size:"small",inline:!0}},[r("el-form-item",{attrs:{label:"编号",prop:"number"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.number,callback:function(t){e.$set(e.queryParams,"number",t)},expression:"queryParams.number"}})],1),r("el-form-item",{attrs:{label:"实验室",prop:"laboratory"}},[r("el-select",{attrs:{placeholder:"全部",size:"small",clearable:""},on:{change:function(t){return e.refreshTable()}},model:{value:e.queryParams.laboratory,callback:function(t){e.$set(e.queryParams,"laboratory",t)},expression:"queryParams.laboratory"}},e._l(e.laboratoryList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"部门",prop:"department"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.department,callback:function(t){e.$set(e.queryParams,"department",t)},expression:"queryParams.department"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),r("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),r("div",[e.checkPermi(["performance:manHour:workTimeConfig:add"])?r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openAdd("新增")}}},[e._v("新 增")]):e._e()],1)]),r("div",{staticClass:"table"},[r("lims-table",{attrs:{tableData:e.tableData,column:e.column,tableLoading:e.tableLoading,height:"calc(100vh - 290px)",page:e.page},on:{pagination:e.pagination}})],1),r("el-dialog",{attrs:{title:e.title,visible:e.timeDia,width:"500px"},on:{"update:visible":function(t){e.timeDia=t}}},[r("el-form",{ref:"timeForm",attrs:{model:e.timeForm,rules:e.timeRules,"label-position":"right","label-width":"120px"}},[r("el-form-item",{attrs:{label:"编号",prop:"number"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.timeForm.number,callback:function(t){e.$set(e.timeForm,"number",t)},expression:"timeForm.number"}})],1),r("el-form-item",{attrs:{label:"辅助项目名称",prop:"auxiliaryProject"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.timeForm.auxiliaryProject,callback:function(t){e.$set(e.timeForm,"auxiliaryProject",t)},expression:"timeForm.auxiliaryProject"}})],1),r("el-form-item",{attrs:{label:"部门",prop:"department"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.timeForm.department,callback:function(t){e.$set(e.timeForm,"department",t)},expression:"timeForm.department"}})],1),r("el-form-item",{attrs:{label:"实验室",prop:"laboratory"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.timeForm.laboratory,callback:function(t){e.$set(e.timeForm,"laboratory",t)},expression:"timeForm.laboratory"}},e._l(e.laboratoryList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.timeForm.unit,callback:function(t){e.$set(e.timeForm,"unit",t)},expression:"timeForm.unit"}},e._l(e.unitList,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),r("el-form-item",{attrs:{label:"核准工时",prop:"approvedWorkingHour"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.timeForm.approvedWorkingHour,callback:function(t){e.$set(e.timeForm,"approvedWorkingHour",t)},expression:"timeForm.approvedWorkingHour"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",type:"textarea",rows:2,clearable:""},model:{value:e.timeForm.remarks,callback:function(t){e.$set(e.timeForm,"remarks",t)},expression:"timeForm.remarks"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.timeDia=!1}}},[e._v("取 消")]),r("el-button",{attrs:{loading:e.uploading,type:"primary"},on:{click:function(t){return e.submitProduct("timeForm")}}},[e._v("确 认")])],1)],1)],1)},i=[],o=r("5530"),n=(r("7db0"),r("14d9"),r("a9e3"),r("d3b7"),r("0643"),r("fffc"),r("4e3e"),r("159b"),r("00d5")),l=r("4f37"),u={components:{limsTable:n["a"]},dicts:["sys_unit"],data:function(){var e=this;return{laboratoryList:[],queryParams:{},tableData:[],column:[{label:"编号",prop:"number"},{label:"辅助项目名称",prop:"auxiliaryProject",width:"120px"},{label:"实验室",prop:"laboratory",dataType:"tag",formatData:function(t){return e.laboratoryList.find((function(e){return e.value==t})).label}},{label:"单位",prop:"unit"},{label:"核准工时",prop:"approvedWorkingHour"},{label:"部门",prop:"department"},{label:"备注",prop:"remarks"},{dataType:"action",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openAdd("编辑",t)},showHide:function(t){return e.checkPermi(["performance:manHour:workTimeConfig:edit"])}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},showHide:function(t){return e.checkPermi(["performance:manHour:workTimeConfig:del"])}}]}],page:{total:0,size:20,current:0},tableLoading:!1,unitList:[],title:"新增",timeDia:!1,timeForm:{},timeRules:{number:[{required:!0,message:"请输入编号",trigger:"blur"}],auxiliaryProject:[{required:!0,message:"请输入辅助项目名称",trigger:"blur"}],laboratory:[{required:!0,message:"请选择实验室",trigger:"change"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}],approvedWorkingHour:[{required:!0,message:"请输入核准工时",trigger:"blur"}]},uploading:!1}},mounted:function(){this.obtainItemParameterList(),this.selectEnumByCategoryForUnit(),this.getList()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.queryParams),this.page);delete t.total,Object(l["l"])(Object(o["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,r=e.limit;this.page.current=t,this.page.size=r,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},openAdd:function(e,t){this.title=e,t?(this.timeForm=t,this.timeForm.laboratory=Number(this.timeForm.laboratory)):this.timeForm={},this.timeDia=!0},obtainItemParameterList:function(){var e=this;Object(l["i"])().then((function(t){var r=[];t.data.forEach((function(e){r.push({label:e.laboratoryName,value:e.id})})),e.laboratoryList=r}))},selectEnumByCategoryForUnit:function(){var e=this;this.getDicts("sys_unit").then((function(t){e.unitList=t.data}))},submitProduct:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.uploading=!0,"新增"==t.title?Object(l["g"])(t.timeForm).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.refresh(),t.timeDia=!1)})).catch((function(e){t.uploading=!1})):Object(l["p"])(t.timeForm).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.refresh(),t.timeDia=!1)})).catch((function(e){t.uploading=!1}))}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])({id:e.id}).then((function(e){200==e.code&&(t.$message.success("删除成功"),t.refresh())}))})).catch((function(){}))}}},s=u,c=(r("bfa9"),r("2877")),m=Object(c["a"])(s,a,i,!1,null,"c9054d0e",null);t["default"]=m.exports},"4f37":function(e,t,r){"use strict";r.d(t,"j",(function(){return i})),r.d(t,"n",(function(){return o})),r.d(t,"k",(function(){return n})),r.d(t,"d",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"q",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return m})),r.d(t,"o",(function(){return p})),r.d(t,"m",(function(){return d})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return f})),r.d(t,"l",(function(){return y})),r.d(t,"i",(function(){return g})),r.d(t,"g",(function(){return h})),r.d(t,"p",(function(){return k})),r.d(t,"c",(function(){return x}));var a=r("b775");function i(e){return Object(a["a"])({url:"/auxiliaryOriginalHours/selectAuxiliaryAllByMonth",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/selectAuxiliaryWorkingHoursDay",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/auxiliaryOutputWorkingHours/selectAuxiliaryOutputWorkingHours",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/deleteAuxiliaryWorkingHoursDay",method:"delete",params:e})}function u(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/insertAuxiliaryWorkingHoursDay",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/updateAuxiliaryWorkingHoursDay",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/approve",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/auxiliaryOutputWorkingHours/collectWorkingHours",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/selectshiftByUser",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/selectAuxiliaryWorkingHoursByNumber",method:"get",params:e})}function b(e){return Object(a["a"])({url:"/auxiliaryWorkingHoursDay/exportAssistantHours",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/auxiliaryOutputWorkingHours/exportOutputHours",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/auxiliaryWorkingHours/selectAuxiliaryWorkingHours",method:"get",params:e})}function g(e){return Object(a["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/auxiliaryWorkingHours/insertAuxiliaryWorkingHours",method:"post",data:e})}function k(e){return Object(a["a"])({url:"/auxiliaryWorkingHours/upAuxiliaryWorkingHours",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/auxiliaryWorkingHours/deleteAuxiliaryWorkingHours",method:"delete",params:e})}},bfa9:function(e,t,r){"use strict";r("fa3d")},fa3d:function(e,t,r){}}]);