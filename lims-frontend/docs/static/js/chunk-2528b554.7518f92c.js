(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2528b554","chunk-5302233a","chunk-2d0c8617"],{"016e":function(e,t,a){},4398:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"内审目的",prop:"purpose"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.purpose,callback:function(t){e.$set(e.searchForm,"purpose",t)},expression:"searchForm.purpose"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.yearPlanDia?a("year-plan-dia",{ref:"yearPlanDia",on:{closeYearDia:e.closeYearDia}}):e._e()],1)},r=[],i=a("5530"),o=a("00d5"),l=a("e2b9"),s=a("5545"),c={name:"yearPlan",components:{YearPlanDia:l["default"],limsTable:o["a"]},data:function(){var e=this;return{searchForm:{purpose:""},tableColumn:[{label:"内审目的",prop:"purpose",minWidth:"100"},{label:"内审范围",prop:"scope",minWidth:"100"},{label:"内审依据",prop:"basis",minWidth:"100"},{label:"组长",prop:"leader",minWidth:"100"},{label:"组员",prop:"crew",minWidth:"100"},{dataType:"tag",label:"审核状态",prop:"examineStatus",minWidth:"100",formatData:function(e){return 0===e?"不通过":1===e?"通过":null},formatType:function(e){return 0===e?"danger":1===e?"success":null}},{label:"审核内容",prop:"examineRemark",minWidth:"100"},{label:"审核人",prop:"examineUserName",minWidth:"100"},{label:"审核日期",prop:"examineTime",minWidth:"160"},{dataType:"tag",label:"批准状态",prop:"ratifyStatus",minWidth:"100",formatData:function(e){return 0===e?"不批准":1===e?"批准":null},formatType:function(e){return 0===e?"danger":1===e?"success":null}},{label:"批准内容",prop:"ratifyRemark",minWidth:"100"},{label:"批准人",prop:"ratifyUserName",minWidth:"100"},{label:"批准日期",prop:"ratifyTime",minWidth:"160"},{dataType:"action",fixed:"right",minWidth:"220",label:"操作",operation:[{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)},disabled:function(e){return 1===e.ratifyStatus}},{name:"审核",type:"text",clickFun:function(t){e.openFormDia("examine",t)},disabled:function(e){return 1===e.examineStatus}},{name:"批准",type:"text",clickFun:function(t){e.openFormDia("ratify",t)},disabled:function(e){return 1===e.ratifyStatus||0===e.examineStatus||null===e.examineStatus}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)},disabled:function(e){return 1===e.ratifyStatus}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},yearPlanDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t=this.searchForm,a=this.page;this.tableLoading=!0,Object(s["F"])(Object(i["a"])(Object(i["a"])({},t),a)).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(s["k"])({planId:e.planId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},openFormDia:function(e,t){var a=this;this.yearPlanDia=!0,this.$nextTick((function(){a.$refs.yearPlanDia.openDia(e,t)}))},handleDown:function(e){var t=this;Object(s["s"])({planId:e.planId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"内审年度计划.docx")}))},closeYearDia:function(){this.yearPlanDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.purpose="",this.searchList()},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()}}},u=c,p=(a("eef3"),a("2877")),d=Object(p["a"])(u,n,r,!1,null,"4963c654",null);t["default"]=d.exports},5545:function(e,t,a){"use strict";a.d(t,"F",(function(){return r})),a.d(t,"k",(function(){return i})),a.d(t,"s",(function(){return o})),a.d(t,"z",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"O",(function(){return c})),a.d(t,"m",(function(){return u})),a.d(t,"K",(function(){return p})),a.d(t,"D",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"q",(function(){return f})),a.d(t,"x",(function(){return b})),a.d(t,"c",(function(){return h})),a.d(t,"M",(function(){return g})),a.d(t,"J",(function(){return y})),a.d(t,"E",(function(){return v})),a.d(t,"j",(function(){return x})),a.d(t,"r",(function(){return k})),a.d(t,"y",(function(){return I})),a.d(t,"d",(function(){return j})),a.d(t,"N",(function(){return T})),a.d(t,"B",(function(){return O})),a.d(t,"g",(function(){return D})),a.d(t,"o",(function(){return L})),a.d(t,"u",(function(){return C})),a.d(t,"a",(function(){return _})),a.d(t,"L",(function(){return $})),a.d(t,"I",(function(){return R})),a.d(t,"C",(function(){return w})),a.d(t,"p",(function(){return P})),a.d(t,"v",(function(){return z})),a.d(t,"b",(function(){return F})),a.d(t,"l",(function(){return S})),a.d(t,"G",(function(){return W})),a.d(t,"t",(function(){return M})),a.d(t,"A",(function(){return Y})),a.d(t,"f",(function(){return E})),a.d(t,"P",(function(){return q})),a.d(t,"n",(function(){return J})),a.d(t,"H",(function(){return A})),a.d(t,"w",(function(){return H})),a.d(t,"h",(function(){return B}));var n=a("b775");function r(e){return Object(n["a"])({url:"/internalPlan/pageInternalPlan",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/internalPlan/delInternalPlan",method:"delete",params:e})}function o(e){return Object(n["a"])({url:"/internalPlan/exportInternalPlan",method:"get",responseType:"blob",params:e})}function l(e){return Object(n["a"])({url:"/internalPlan/getInternalPlanOne",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/internalPlan/addInternalPlan",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/internalPlan/updateInternalPlan",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/internalPlan/examineInternalPlan",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/internalPlan/ratifyInternalPlan",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/internalImplement/pageInternalImplement",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/internalImplement/delInternalImplement",method:"delete",params:e})}function f(e){return Object(n["a"])({url:"/internalImplement/exportInternalImplement",method:"get",responseType:"blob",params:e})}function b(e){return Object(n["a"])({url:"/internalImplement/getInternalImplementOne",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/internalImplement/addInternalImplement",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/internalImplement/updateInternalImplement",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/internalImplement/ratifyInternalImplement",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/internalMeeting/pageInternalMeeting",method:"get",params:e})}function x(e){return Object(n["a"])({url:"/internalMeeting/delInternalMeeting",method:"delete",params:e})}function k(e){return Object(n["a"])({url:"/internalMeeting/exportInternalMeeting",method:"get",responseType:"blob",params:e})}function I(e){return Object(n["a"])({url:"/internalMeeting/getInternalMeetingOne",method:"get",params:e})}function j(e){return Object(n["a"])({url:"/internalMeeting/addInternalMeeting",method:"post",data:e})}function T(e){return Object(n["a"])({url:"/internalMeeting/updateInternalMeeting",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/internalCheck/pageInternalCheck",method:"get",params:e})}function D(e){return Object(n["a"])({url:"/internalCheck/delInternalCheck",method:"delete",params:e})}function L(e){return Object(n["a"])({url:"/internalCheck/exportInternalCheck",method:"get",responseType:"blob",params:e})}function C(e){return Object(n["a"])({url:"/internalCheck/getInternalCheckOne",method:"get",params:e})}function _(e){return Object(n["a"])({url:"/internalCheck/addInternalCheck",method:"post",data:e})}function $(e){return Object(n["a"])({url:"/internalCheck/updateInternalCheck",method:"post",data:e})}function R(e){return Object(n["a"])({url:"/internalCheck/ratifyInternalCheck",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/internalCorrect/pageInternalCorrect",method:"get",params:e})}function P(e){return Object(n["a"])({url:"/internalCorrect/exportInternalCorrect",method:"get",responseType:"blob",params:e})}function z(e){return Object(n["a"])({url:"/internalCorrect/getInternalCorrect",method:"get",params:e})}function F(e){return Object(n["a"])({url:"/internalCorrect/addInternalCorrect",method:"post",data:e})}function S(e){return Object(n["a"])({url:"/internalReport/delInternalReport",method:"delete",params:e})}function W(e){return Object(n["a"])({url:"/internalReport/pageInternalReport",method:"get",params:e})}function M(e){return Object(n["a"])({url:"/internalReport/exportInternalReport",method:"get",responseType:"blob",params:e})}function Y(e){return Object(n["a"])({url:"/internalReport/getInternalReportOne",method:"get",params:e})}function E(e){return Object(n["a"])({url:"/internalReport/addInternalReport",method:"post",data:e})}function q(e){return Object(n["a"])({url:"/internalReport/updateInternalReport",method:"post",data:e})}function J(e){return Object(n["a"])({url:"/internalReport/examineInternalReport",method:"post",data:e})}function A(e){return Object(n["a"])({url:"/internalReport/qualityInternalReport",method:"post",data:e})}function H(e){return Object(n["a"])({url:"/internalCorrect/getInternalCorrectFileList",method:"get",params:e})}function B(e){return Object(n["a"])({url:"/internalCorrect/delInternalCorrectFile",method:"delete",params:e})}},"678f":function(e,t,a){},"93a6":function(e,t,a){"use strict";a("016e")},e2b9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"内部审核年度计划",width:"1000px"},on:{"update:visible":function(t){e.formDia=t},close:e.closeYearDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"auto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内审目的",prop:"purpose"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,rows:3,clearable:"",size:"small",type:"textarea"},model:{value:e.form.purpose,callback:function(t){e.$set(e.form,"purpose",t)},expression:"form.purpose"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内审范围",prop:"scope"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,rows:3,clearable:"",size:"small",type:"textarea"},model:{value:e.form.scope,callback:function(t){e.$set(e.form,"scope",t)},expression:"form.scope"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"内审依据",prop:"basis"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.basis,callback:function(t){e.$set(e.form,"basis",t)},expression:"form.basis"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组长",prop:"leader"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组员",prop:"crew"}},[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.crew,callback:function(t){e.$set(e.form,"crew",t)},expression:"form.crew"}})],1)],1)],1)],1),a("table",{staticClass:"table",attrs:{border:"1",cellspacing:"10"}},[a("tr",[a("td",{staticClass:"div-with-line"},[a("span",{staticStyle:{float:"left"}},[e._v("部门")]),a("span",{staticStyle:{float:"right"}},[e._v("月份")])]),e._l(e.dic1,(function(t,n){return a("th",{key:n},[e._v(e._s(t))])}))],2),e._l(e.planDetailList,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.department))]),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.january,callback:function(a){e.$set(t,"january",a)},expression:"item.january"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.february,callback:function(a){e.$set(t,"february",a)},expression:"item.february"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.march,callback:function(a){e.$set(t,"march",a)},expression:"item.march"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.april,callback:function(a){e.$set(t,"april",a)},expression:"item.april"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.may,callback:function(a){e.$set(t,"may",a)},expression:"item.may"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.june,callback:function(a){e.$set(t,"june",a)},expression:"item.june"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.july,callback:function(a){e.$set(t,"july",a)},expression:"item.july"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.august,callback:function(a){e.$set(t,"august",a)},expression:"item.august"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.september,callback:function(a){e.$set(t,"september",a)},expression:"item.september"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.october,callback:function(a){e.$set(t,"october",a)},expression:"item.october"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.november,callback:function(a){e.$set(t,"november",a)},expression:"item.november"}})],1),a("th",[a("el-input",{attrs:{disabled:"examine"===e.operationType||"ratify"===e.operationType,clearable:"",size:"small"},model:{value:t.december,callback:function(a){e.$set(t,"december",a)},expression:"item.december"}})],1)])}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["examine"===e.operationType?a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.examine(0)}}},[e._v("不通过")]):e._e(),"examine"===e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.examine(1)}}},[e._v("通 过")]):e._e(),"ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.approval(0)}}},[e._v("不批准")]):e._e(),"ratify"===e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleApproval(1)}}},[e._v("批 准")]):e._e(),"ratify"!==e.operationType&&"examine"!==e.operationType?a("el-button",{on:{click:e.closeYearDia}},[e._v("取 消")]):e._e(),"ratify"!==e.operationType&&"examine"!==e.operationType?a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")]):e._e()],1)],1),a("el-dialog",{attrs:{visible:e.examineDialog,title:"审核",width:"30%"},on:{"update:visible":function(t){e.examineDialog=t},close:function(t){e.examineDialog=!1}}},[a("span",[e._v(" 审核备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.examineRemark,callback:function(t){e.examineRemark=t},expression:"examineRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.examineLoading},on:{click:function(t){e.examineDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.examineLoading,type:"primary"},on:{click:function(t){return e.handleExamine(0)}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalDialog=!1}}},[a("span",[e._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.ratifyRemark,callback:function(t){e.ratifyRemark=t},expression:"ratifyRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){e.approvalDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.approvalLoading,type:"primary"},on:{click:function(t){return e.handleApproval(0)}}},[e._v("确 定")])],1)])],1)},r=[],i=a("5545"),o={name:"yearPlanDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{purpose:"",scope:"",basis:"",leader:"",crew:""},rules:{purpose:[{required:!0,message:"请填写内审目的",trigger:"blur"}],scope:[{required:!0,message:"请填写内审范围",trigger:"blur"}],basis:[{required:!0,message:"请填写内审依据",trigger:"blur"}],leader:[{required:!0,message:"请填写组长",trigger:"blur"}],crew:[{required:!0,message:"请填写组员",trigger:"blur"}]},operationType:"",approvalDialog:!1,approvalLoading:!1,examineDialog:!1,examineLoading:!1,ratifyRemark:"",examineRemark:"",dic1:[1,2,3,4,5,6,7,8,9,10,11,12],planDetailList:[{department:"装备电缆实验室"},{department:"通信产品实验室"},{department:"电力产品实验室"},{department:"储能产品实验室"},{department:"射频线缆实验室"}]}},mounted:function(){},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,"add"!==e&&this.searchInfo(t)},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(i["z"])({planId:e.planId}).then((function(e){t.diaLoading=!1,t.form=e.data,t.planDetailList=t.form.planDetailList})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a=e.HaveJson(e.form);a.planDetailList=e.HaveJson(e.planDetailList),"add"===e.operationType?Object(i["e"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(i["O"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}))},examine:function(e){0===e?this.examineDialog=!0:this.handleExamine(e)},handleExamine:function(e){var t=this;this.examineLoading=!0;var a=this.HaveJson(this.form);a.examineStatus=e,a.examineRemark=this.examineRemark,Object(i["m"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeYearDia(t.departId)),t.examineLoading=!1})).catch((function(){t.examineLoading=!1}))},approval:function(e){0===e?this.approvalDialog=!0:this.handleApproval(e)},handleApproval:function(e){var t=this;this.approvalLoading=!0;var a=this.HaveJson(this.form);a.ratifyStatus=e,a.ratifyRemark=this.ratifyRemark,Object(i["K"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeYearDia(t.departId)),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},closeYearDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeYearDia")}}},l=o,s=(a("93a6"),a("2877")),c=Object(s["a"])(l,n,r,!1,null,"b74444bc",null);t["default"]=c.exports},eef3:function(e,t,a){"use strict";a("678f")}}]);