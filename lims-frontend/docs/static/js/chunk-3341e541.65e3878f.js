(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3341e541","chunk-2d0c8617"],{5545:function(e,t,n){"use strict";n.d(t,"F",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"s",(function(){return l})),n.d(t,"z",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"O",(function(){return c})),n.d(t,"m",(function(){return d})),n.d(t,"K",(function(){return s})),n.d(t,"D",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"q",(function(){return f})),n.d(t,"x",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"M",(function(){return g})),n.d(t,"J",(function(){return y})),n.d(t,"E",(function(){return I})),n.d(t,"j",(function(){return v})),n.d(t,"r",(function(){return k})),n.d(t,"y",(function(){return O})),n.d(t,"d",(function(){return j})),n.d(t,"N",(function(){return D})),n.d(t,"B",(function(){return w})),n.d(t,"g",(function(){return C})),n.d(t,"o",(function(){return R})),n.d(t,"u",(function(){return T})),n.d(t,"a",(function(){return x})),n.d(t,"L",(function(){return L})),n.d(t,"I",(function(){return _})),n.d(t,"C",(function(){return M})),n.d(t,"p",(function(){return P})),n.d(t,"v",(function(){return $})),n.d(t,"b",(function(){return z})),n.d(t,"l",(function(){return H})),n.d(t,"G",(function(){return S})),n.d(t,"t",(function(){return N})),n.d(t,"A",(function(){return q})),n.d(t,"f",(function(){return J})),n.d(t,"P",(function(){return A})),n.d(t,"n",(function(){return E})),n.d(t,"H",(function(){return F})),n.d(t,"w",(function(){return B})),n.d(t,"h",(function(){return G}));var r=n("b775");function a(e){return Object(r["a"])({url:"/internalPlan/pageInternalPlan",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/internalPlan/delInternalPlan",method:"delete",params:e})}function l(e){return Object(r["a"])({url:"/internalPlan/exportInternalPlan",method:"get",responseType:"blob",params:e})}function i(e){return Object(r["a"])({url:"/internalPlan/getInternalPlanOne",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/internalPlan/addInternalPlan",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/internalPlan/updateInternalPlan",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/internalPlan/examineInternalPlan",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/internalPlan/ratifyInternalPlan",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/internalImplement/pageInternalImplement",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/internalImplement/delInternalImplement",method:"delete",params:e})}function f(e){return Object(r["a"])({url:"/internalImplement/exportInternalImplement",method:"get",responseType:"blob",params:e})}function h(e){return Object(r["a"])({url:"/internalImplement/getInternalImplementOne",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/internalImplement/addInternalImplement",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/internalImplement/updateInternalImplement",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/internalImplement/ratifyInternalImplement",method:"post",data:e})}function I(e){return Object(r["a"])({url:"/internalMeeting/pageInternalMeeting",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/internalMeeting/delInternalMeeting",method:"delete",params:e})}function k(e){return Object(r["a"])({url:"/internalMeeting/exportInternalMeeting",method:"get",responseType:"blob",params:e})}function O(e){return Object(r["a"])({url:"/internalMeeting/getInternalMeetingOne",method:"get",params:e})}function j(e){return Object(r["a"])({url:"/internalMeeting/addInternalMeeting",method:"post",data:e})}function D(e){return Object(r["a"])({url:"/internalMeeting/updateInternalMeeting",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/internalCheck/pageInternalCheck",method:"get",params:e})}function C(e){return Object(r["a"])({url:"/internalCheck/delInternalCheck",method:"delete",params:e})}function R(e){return Object(r["a"])({url:"/internalCheck/exportInternalCheck",method:"get",responseType:"blob",params:e})}function T(e){return Object(r["a"])({url:"/internalCheck/getInternalCheckOne",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/internalCheck/addInternalCheck",method:"post",data:e})}function L(e){return Object(r["a"])({url:"/internalCheck/updateInternalCheck",method:"post",data:e})}function _(e){return Object(r["a"])({url:"/internalCheck/ratifyInternalCheck",method:"post",data:e})}function M(e){return Object(r["a"])({url:"/internalCorrect/pageInternalCorrect",method:"get",params:e})}function P(e){return Object(r["a"])({url:"/internalCorrect/exportInternalCorrect",method:"get",responseType:"blob",params:e})}function $(e){return Object(r["a"])({url:"/internalCorrect/getInternalCorrect",method:"get",params:e})}function z(e){return Object(r["a"])({url:"/internalCorrect/addInternalCorrect",method:"post",data:e})}function H(e){return Object(r["a"])({url:"/internalReport/delInternalReport",method:"delete",params:e})}function S(e){return Object(r["a"])({url:"/internalReport/pageInternalReport",method:"get",params:e})}function N(e){return Object(r["a"])({url:"/internalReport/exportInternalReport",method:"get",responseType:"blob",params:e})}function q(e){return Object(r["a"])({url:"/internalReport/getInternalReportOne",method:"get",params:e})}function J(e){return Object(r["a"])({url:"/internalReport/addInternalReport",method:"post",data:e})}function A(e){return Object(r["a"])({url:"/internalReport/updateInternalReport",method:"post",data:e})}function E(e){return Object(r["a"])({url:"/internalReport/examineInternalReport",method:"post",data:e})}function F(e){return Object(r["a"])({url:"/internalReport/qualityInternalReport",method:"post",data:e})}function B(e){return Object(r["a"])({url:"/internalCorrect/getInternalCorrectFileList",method:"get",params:e})}function G(e){return Object(r["a"])({url:"/internalCorrect/delInternalCorrectFile",method:"delete",params:e})}},a082:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"内部审核实施计划",width:"80%"},on:{"update:visible":function(t){e.formDia=t},close:e.closeImplementDia}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"受审部门",prop:"department"}},[n("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"部门负责人",prop:"departmentHead"}},[n("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.departmentHead,callback:function(t){e.$set(e.form,"departmentHead",t)},expression:"form.departmentHead"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"审核员",prop:"auditor"}},[n("el-input",{attrs:{disabled:"ratify"===e.operationType,clearable:"",size:"small"},model:{value:e.form.auditor,callback:function(t){e.$set(e.form,"auditor",t)},expression:"form.auditor"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"审核日期",prop:"reviewDate"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"ratify"===e.operationType,clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.reviewDate,callback:function(t){e.$set(e.form,"reviewDate",t)},expression:"form.reviewDate"}})],1)],1)],1),"ratify"!==e.operationType?n("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("添加")]),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e(),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkDetailList,border:"",height:"300","header-cell-style":{background:"#f8f8f9",color:"#515a6e"}}},[n("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"60"}}),n("el-table-column",{attrs:{"header-align":"center",label:"涉及要素和质量体系文件条款",prop:"element"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:r.element,callback:function(t){e.$set(r,"element",t)},expression:"row.element"}})]}}])}),n("el-table-column",{attrs:{"header-align":"center",label:"审核内容",prop:"content"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:r.content,callback:function(t){e.$set(r,"content",t)},expression:"row.content"}})]}}])}),n("el-table-column",{attrs:{"header-align":"center",label:"审核方式",prop:"method"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:r.method,callback:function(t){e.$set(r,"method",t)},expression:"row.method"}})]}}])}),n("el-table-column",{attrs:{"header-align":"center",label:"审核结果记录",prop:"resultRecords",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:r.resultRecords,callback:function(t){e.$set(r,"resultRecords",t)},expression:"row.resultRecords"}})]}}])}),n("el-table-column",{attrs:{"header-align":"center",label:"不符合性质",prop:"nonNature",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-input",{attrs:{disabled:"ratify"===e.operationType,size:"small"},model:{value:r.nonNature,callback:function(t){e.$set(r,"nonNature",t)},expression:"row.nonNature"}})]}}])})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["ratify"===e.operationType?n("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.ratify(0)}}},[e._v("不批准")]):e._e(),"ratify"===e.operationType?n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.ratify(1)}}},[e._v("批 准")]):e._e(),"ratify"!==e.operationType?n("el-button",{on:{click:e.closeImplementDia}},[e._v("取 消")]):e._e(),"ratify"!==e.operationType?n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")]):e._e()],1)],1),n("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalDialog=!1}}},[n("span",[e._v(" 批准备注： "),n("el-input",{attrs:{type:"textarea"},model:{value:e.ratifyRemark,callback:function(t){e.ratifyRemark=t},expression:"ratifyRemark"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){e.approvalDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.approvalLoading,type:"primary"},on:{click:function(t){return e.handleApproval(0)}}},[e._v("确 定")])],1)])],1)},a=[],o=(n("14d9"),n("5545")),l={name:"auditInspectionDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{department:"",departmentHead:"",auditor:"",reviewDate:""},rules:{department:[{required:!0,message:"请填写受审部门",trigger:"blur"}],departmentHead:[{required:!0,message:"请填写部门负责人",trigger:"blur"}],auditor:[{required:!0,message:"请填写审核员",trigger:"blur"}],reviewDate:[{required:!0,message:"请填写审核日期",trigger:"blur"}]},checkDetailList:[],operationType:"",approvalDialog:!1,approvalLoading:!1,ratifyRemark:""}},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,"add"!==e&&this.searchInfo(t)},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(o["u"])({checkId:e.checkId}).then((function(e){t.diaLoading=!1,t.form=e.data,t.checkDetailList=t.form.checkDetailList})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(0!==e.checkDetailList.length){e.loading=!0;var n=e.HaveJson(e.form);n.checkDetailList=e.HaveJson(e.checkDetailList),"add"===e.operationType?Object(o["a"])(n).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeImplementDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(o["L"])(n).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeImplementDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}else e.$message.warning("请添加表格数据")}))},ratify:function(e){0===e?this.approvalDialog=!0:this.handleApproval(e)},handleApproval:function(e){var t=this;this.approvalLoading=!0;var n=this.HaveJson(this.form);n.ratifyStatus=e,n.ratifyRemark=0===e?this.ratifyRemark:"",Object(o["I"])(n).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.closeImplementDia(t.departId)),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},addRow:function(){this.checkDetailList.push({element:"",content:"",method:"",resultRecords:"",nonNature:""})},clearTable:function(){this.checkDetailList=[]},closeImplementDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeImplementDia")}}},i=l,u=n("2877"),c=Object(u["a"])(i,r,a,!1,null,"ccc71550",null);t["default"]=c.exports}}]);