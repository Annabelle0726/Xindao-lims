(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c4b0906"],{"241ce":function(e,t,n){},"5afa":function(e,t,n){"use strict";n.d(t,"C",(function(){return r})),n.d(t,"B",(function(){return o})),n.d(t,"o",(function(){return c})),n.d(t,"t",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"r",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"m",(function(){return m})),n.d(t,"z",(function(){return f})),n.d(t,"y",(function(){return p})),n.d(t,"w",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"s",(function(){return b})),n.d(t,"j",(function(){return y})),n.d(t,"A",(function(){return O})),n.d(t,"n",(function(){return v})),n.d(t,"u",(function(){return C})),n.d(t,"a",(function(){return D})),n.d(t,"p",(function(){return j})),n.d(t,"f",(function(){return I})),n.d(t,"e",(function(){return x})),n.d(t,"k",(function(){return P})),n.d(t,"x",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"q",(function(){return _})),n.d(t,"g",(function(){return L})),n.d(t,"v",(function(){return M})),n.d(t,"l",(function(){return T}));var a=n("b775");function r(e){return Object(a["a"])({url:"/manageDocumentList/uploadFileManageDocumentList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function o(e){return Object(a["a"])({url:"/manageDocumentList/pageManageDocumentList",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/manageDocumentList/delManageDocumentList",method:"delete",params:e})}function i(e){return Object(a["a"])({url:"/manageDocumentList/doManageDocumentList",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/manageDocumentControlled/addManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function l(e){return Object(a["a"])({url:"/manageDocumentControlled/doManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function u(e){return Object(a["a"])({url:"/manageDocumentControlled/checkManageDocumentControlledPdf",method:"get",responseType:"blob",params:e})}function d(e){return Object(a["a"])({url:"/manageDocumentControlled/checkManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function m(e){return Object(a["a"])({url:"/manageDocumentControlled/delManageDocumentControlled",method:"delete",params:e})}function f(e){return Object(a["a"])({url:"/manageDocumentControlled/pageManageDocumentControlled",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/manageDocumentCancel/pageManageDocumentCancel",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/exportManageDocumentIssueRecycle",method:"get",responseType:"blob",params:e})}function g(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/addManageDocumentIssueRecycle",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function b(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/doManageDocumentIssueRecycle",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/checkManageDocumentIssueRecycle",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/pageManageDocumentIssueRecycle",method:"get",params:e})}function v(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/delManageDocumentIssueRecycle",method:"delete",params:e})}function C(e){return Object(a["a"])({url:"/manageDocumentAlter/exportManageDocumentAlter",method:"get",responseType:"blob",params:e})}function D(e){return Object(a["a"])({url:"/manageDocumentAlter/addManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function j(e){return Object(a["a"])({url:"/manageDocumentAlter/doManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function I(e){return Object(a["a"])({url:"/manageDocumentAlter/checkManageDocumentAlterPdf",method:"get",responseType:"blob",params:e})}function x(e){return Object(a["a"])({url:"/manageDocumentAlter/checkManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function P(e){return Object(a["a"])({url:"/manageDocumentAlter/delManageDocumentAlter",method:"delete",params:e})}function w(e){return Object(a["a"])({url:"/manageDocumentAlter/pageManageDocumentAlter",method:"get",params:e})}function k(e){return Object(a["a"])({url:"/manageDocumentCancel/addManageDocumentCancel",method:"post",data:e})}function _(e){return Object(a["a"])({url:"/manageDocumentCancel/doManageDocumentCancel",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/manageDocumentCancel/checkManageDocumentCancel",method:"post",data:e})}function M(e){return Object(a["a"])({url:"/manageDocumentCancel/exportManageDocumentCancel",method:"get",responseType:"blob",params:e})}function T(e){return Object(a["a"])({url:"/manageDocumentCancel/delManageDocumentCancel",method:"delete",params:e})}},"984a":function(e,t,n){"use strict";n("241ce")},b558:function(e,t,n){"use strict";n.d(t,"v",(function(){return r})),n.d(t,"A",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"z",(function(){return i})),n.d(t,"y",(function(){return s})),n.d(t,"w",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"u",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"p",(function(){return b})),n.d(t,"o",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"D",(function(){return v})),n.d(t,"l",(function(){return C})),n.d(t,"t",(function(){return D})),n.d(t,"C",(function(){return j})),n.d(t,"b",(function(){return I})),n.d(t,"x",(function(){return x})),n.d(t,"s",(function(){return P})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return k})),n.d(t,"f",(function(){return _})),n.d(t,"r",(function(){return L})),n.d(t,"m",(function(){return M})),n.d(t,"q",(function(){return T})),n.d(t,"B",(function(){return S}));var a=n("b775");function r(e){return Object(a["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function p(e){return Object(a["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function g(e){return Object(a["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function b(e){return Object(a["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function y(e){return Object(a["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function O(e){return Object(a["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function C(e){return Object(a["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function D(e){return Object(a["a"])({url:"/deviceScope/search",method:"get",params:e})}function j(e){return Object(a["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function I(e){return Object(a["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function x(e){return Object(a["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function P(e){return Object(a["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function k(e){return Object(a["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function _(e){return Object(a["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function L(e){return Object(a["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function M(e){return Object(a["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function T(e){return Object(a["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function S(e){return Object(a["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},f3cf:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[n("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("文件编号")]),n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.documentCode,callback:function(t){e.$set(e.queryParams,"documentCode",t)},expression:"queryParams.documentCode"}})],1),n("div",{staticStyle:{"line-height":"30px"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),n("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),n("div",{staticStyle:{"line-height":"30px"}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0,e.addInfo={}}}},[e._v("文件作废申请")]),n("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleOut}},[e._v("导出")])],1)]),n("div",{staticClass:"table"},[n("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),n("el-dialog",{attrs:{visible:e.addDialogVisible,title:"文件作废申请",top:"10vh",width:"800px"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[n("el-row",[n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[n("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("申请编号：")]),n("div",{staticClass:"search_input"},[n("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"",filterable:"",size:"small"},on:{change:e.changeFileList},model:{value:e.addInfo.documentCode,callback:function(t){e.$set(e.addInfo,"documentCode",t)},expression:"addInfo.documentCode"}},e._l(e.fileList,(function(e){return n("el-option",{key:e.documentCode,attrs:{label:e.documentCode,value:e.documentCode}})})),1)],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("审批人：")]),n("div",{staticClass:"search_input"},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small"},model:{value:e.addInfo.checkUser,callback:function(t){e.$set(e.addInfo,"checkUser",t)},expression:"addInfo.checkUser"}},e._l(e.personList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("文件名称：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.name,callback:function(t){e.$set(e.addInfo,"name",t)},expression:"addInfo.name"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("文件版本：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.version,callback:function(t){e.$set(e.addInfo,"version",t)},expression:"addInfo.version"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("文件状态：")]),n("div",{staticClass:"search_input"},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.addInfo.state,callback:function(t){e.$set(e.addInfo,"state",t)},expression:"addInfo.state"}},e._l(e.fileState,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("期望作废时间：")]),n("div",{staticClass:"search_input"},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.expectCancelDate,callback:function(t){e.$set(e.addInfo,"expectCancelDate",t)},expression:"addInfo.expectCancelDate"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("实际作废时间：")]),n("div",{staticClass:"search_input"},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.actuallyCancelDate,callback:function(t){e.$set(e.addInfo,"actuallyCancelDate",t)},expression:"addInfo.actuallyCancelDate"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("作废说明：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{rows:2,clearable:"",placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.addInfo.cancelNote,callback:function(t){e.$set(e.addInfo,"cancelNote",t)},expression:"addInfo.cancelNote"}})],1)])])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)],1)},r=[],o=n("5530"),c=(n("7db0"),n("14d9"),n("b0c0"),n("d3b7"),n("0643"),n("fffc"),n("4e3e"),n("159b"),n("00d5")),i=n("b558"),s=n("5afa"),l=n("2f62"),u={components:{limsTable:c["a"]},computed:Object(o["a"])({},Object(l["b"])(["userId"])),data:function(){var e=this;return{addPower:!1,outPower:!1,addInfo:{},addLoading:!1,addDialogVisible:!1,personList:[],fileList:[],outLoading:!1,fileState:[],queryParams:{},tableData:[],column:[{label:"文件编号",prop:"documentCode"},{label:"申请人",prop:"createUserName",width:"120px"},{label:"作废说明",prop:"cancelNote"},{label:"期望作废时间",prop:"expectCancelDate"},{label:"实际作废日期",prop:"actuallyCancelDate"},{label:"作废状态",prop:"state",dataType:"tag",formatData:function(e){return e},formatType:function(e){return"通过"==e?"success":"danger"}},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.handleUpdate(t)},disabled:function(e,t){return"通过"==e.state}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(e,t){return"通过"==e.state}},{name:"审核",type:"text",clickFun:function(t){e.handleCheck(t)},disabled:function(t,n){return t.checkUser!=e.userId||"通过"==t.state}}]}],page:{total:0,size:10,current:0},tableLoading:!1}},mounted:function(){this.getList(),this.getAuthorizedPerson(),this.getFileList(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.queryParams),this.page);delete t.total,Object(s["y"])(Object(o["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,n=e.limit;this.page.current=t,this.page.size=n,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},selectEnumByCategory:function(){var e=this;this.getDicts("document_state").then((function(t){e.fileState=e.dictToValue(t.data)}))},getAuthorizedPerson:function(){var e=this;Object(i["w"])().then((function(t){var n=[];t.data.forEach((function(e){n.push({label:e.name,value:e.id})})),e.personList=n}))},getFileList:function(){var e=this;Object(s["B"])({current:-1,size:-1}).then((function(t){e.fileList=t.data.records})).catch((function(e){}))},handleAdd:function(){var e=this;if(!this.addInfo.documentCode)return this.$message.error("请输入申请编号"),!1;this.addInfo.method="作废",this.addLoading=!0,this.addInfo.id?Object(s["q"])({id:this.addInfo.id,method:"作废",documentCode:this.addInfo.documentCode,checkUser:this.addInfo.checkUser,name:this.addInfo.name,version:this.addInfo.version,documentState:this.addInfo.documentState,expectCancelDate:this.addInfo.expectCancelDate,actuallyCancelDate:this.addInfo.actuallyCancelDate,cancelNote:this.addInfo.cancelNote}).then((function(t){e.addLoading=!1,e.refreshTable(),e.$message({type:"success",message:"提交成功"}),e.addDialogVisible=!1})).catch((function(e){})):Object(s["b"])(this.addInfo).then((function(t){e.addLoading=!1,e.refreshTable(),e.$message({type:"success",message:"提交成功"}),e.addDialogVisible=!1})).catch((function(e){}))},changeFileList:function(e){if(e){var t=this.fileList.find((function(t){return t.documentCode==e}));t&&(this.addInfo.name=t.name,this.addInfo.version=t.version,this.addInfo.documentState=t.state)}},handleUpdate:function(e){this.addInfo=this.HaveJson(e),this.addDialogVisible=!0},handleCheck:function(e){var t=this;this.$confirm("是否审核通过?","提示",{confirmButtonText:"通过",cancelButtonText:"不通过",type:"warning",closeOnClickModal:!1,distinguishCancelAndClose:!0,beforeClose:function(n,a,r){"confirm"===n?Object(s["g"])({id:e.id,state:"通过"}).then((function(e){t.refreshTable(),r(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"cancel"===n?Object(s["g"])({id:e.id,state:"不通过"}).then((function(e){t.refreshTable(),r(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"close"===n&&(r(),console.log("×按钮点击事件，不关闭弹框"))}})},handleOut:function(){var e=this;this.outLoading=!0,Object(s["v"])(this.queryParams).then((function(t){e.outLoading=!1;var n=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(n,"文件作废表.xlsx")}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["l"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},d=u,m=(n("984a"),n("2877")),f=Object(m["a"])(d,a,r,!1,null,"6e07bdac",null);t["default"]=f.exports}}]);