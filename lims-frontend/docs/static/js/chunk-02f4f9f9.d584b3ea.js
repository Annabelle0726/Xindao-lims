(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02f4f9f9","chunk-32bac40a","chunk-7dba1596"],{2381:function(t,e,a){"use strict";a.d(e,"n",(function(){return n})),a.d(e,"l",(function(){return s})),a.d(e,"k",(function(){return l})),a.d(e,"m",(function(){return o})),a.d(e,"q",(function(){return r})),a.d(e,"D",(function(){return c})),a.d(e,"o",(function(){return d})),a.d(e,"r",(function(){return u})),a.d(e,"G",(function(){return p})),a.d(e,"h",(function(){return b})),a.d(e,"B",(function(){return h})),a.d(e,"A",(function(){return f})),a.d(e,"e",(function(){return m})),a.d(e,"a",(function(){return g})),a.d(e,"E",(function(){return v})),a.d(e,"H",(function(){return y})),a.d(e,"b",(function(){return w})),a.d(e,"c",(function(){return x})),a.d(e,"d",(function(){return k})),a.d(e,"F",(function(){return _})),a.d(e,"z",(function(){return D})),a.d(e,"f",(function(){return L})),a.d(e,"w",(function(){return O})),a.d(e,"u",(function(){return C})),a.d(e,"x",(function(){return I})),a.d(e,"v",(function(){return S})),a.d(e,"t",(function(){return T})),a.d(e,"I",(function(){return j})),a.d(e,"s",(function(){return P})),a.d(e,"C",(function(){return V})),a.d(e,"p",(function(){return z})),a.d(e,"j",(function(){return M})),a.d(e,"i",(function(){return $})),a.d(e,"g",(function(){return F})),a.d(e,"y",(function(){return R}));var i=a("b775");function n(t){return Object(i["a"])({url:"/rawMaterialOrder/getIfsByStateOne",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/rawMaterialOrder/getIfsByOver",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/rawMaterialOrder/getIfsByAll",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/rawMaterialOrder/getIfsByQuarter",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/system/newUser/getUserNow",method:"get"})}function c(t){return Object(i["a"])({url:"/standardTree/selectStandardMethodEnum",method:"get"})}function d(t){return Object(i["a"])({url:"/insOrder/getInsOrder",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/rawMaterialOrder/notificationRawOrder",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/rawMaterialOrder/selectStandardTreeListByPartNo",method:"get",params:t})}function b(t){return Object(i["a"])({url:"/rawMaterialOrder/delRawMaterOrderTemplate",method:"delete",params:t})}function h(t){return Object(i["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplateById",method:"get",params:t})}function f(t){return Object(i["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplate",method:"get",params:t})}function m(t){return Object(i["a"])({url:"/rawMaterialOrder/addRawMaterOrderTemplate",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/rawMaterialOrder/addExemptionOrder",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/standardTree/selectStandardProductList",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/standardTree/selectsStandardMethodByFLSSM",method:"get",params:t})}function w(t){return Object(i["a"])({url:"/insOrder/addInsOrder",method:"post",data:t})}function x(t){return Object(i["a"])({url:"/rawMaterialOrder/addRawCopperOrder",method:"post",data:t})}function k(t){return Object(i["a"])({url:"/rawMaterialOrder/addRawCopperOrderExemptionOrder",method:"post",data:t})}function _(){return Object(i["a"])({url:"/standardTree/selectStandardTreeList2",method:"get"})}function D(t){return Object(i["a"])({url:"/insOrder/selectInsOrderTemplate",method:"get",params:t})}function L(t){return Object(i["a"])({url:"/rawMaterialOrder/concessionRelease",method:"post",data:t})}function O(t){return Object(i["a"])({url:"/rawMaterialOrder/repealQuarterRawOrder",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/rawMaterialOrder/rawOrderRelease",method:"post",data:t})}function I(t){return Object(i["a"])({url:"/rawMaterialOrder/revokeInspectionReport",method:"post",data:t})}function S(t){return Object(i["a"])({url:"/rawMaterialOrder/repealEnterRawOrder",method:"post",data:t})}function T(t){return Object(i["a"])({url:"/rawMaterialOrder/rawAllExport",method:"get",data:t,responseType:"blob"})}function j(t){return Object(i["a"])({url:"/insOrder/updateEntrustCode",method:"post",data:t})}function P(t){return Object(i["a"])({url:"/rawMaterialOrder/printLabel",method:"post",data:t})}function V(t){return Object(i["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:t})}function z(t){return Object(i["a"])({url:"/insOrder/getRetestResult",method:"get",params:t})}function M(t){return Object(i["a"])({url:"/insOrderPlan/getFileList",method:"get",params:t})}function $(t){return Object(i["a"])({url:"/insOrderPlan/downFile",method:"get",params:t})}function F(t){return Object(i["a"])({url:"/insOrderPlan/delfile",method:"delete",params:t})}function R(t){return Object(i["a"])({url:"/insOrderPlan/saveUnqualifiedContext",method:"post",data:t})}},"64ad":function(t,e,a){},"8b9f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.isShow,title:"标签打印",top:"5vh",width:"600px"},on:{"update:visible":function(e){t.isShow=e},close:function(e){return t.$emit("closePrintDialog")}}},[a("div",{staticStyle:{width:"100%",height:"400px","overflow-y":"auto","text-align":"left"}},[a("div",{staticClass:"dia_body"},[a("el-checkbox",{staticStyle:{margin:"10px 5px"},attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:function(e){return t.changePrintCode()}},model:{value:t.checkIndexList,callback:function(e){t.checkIndexList=e},expression:"checkIndexList"}},t._l(t.barcodeData,(function(e,i){return a("el-card",{key:i,staticClass:"box-card",staticStyle:{"margin-bottom":"15px","font-size":"16px !important"}},[a("el-checkbox",{key:i,staticStyle:{position:"relative",top:"0",left:"10px"},attrs:{label:i}},[a("br")]),a("div",[a("div",{staticClass:"titleH1",staticStyle:{"text-align":"center","margin-bottom":"2px","font-size":"16px"}},[t._v("检测中心样品标识卡")]),a("div",{staticStyle:{"text-align":"center"}},[a("barcode",{attrs:{displayValue:!1,height:34,value:e.barcode,width:2}})],1),a("div",{staticStyle:{"margin-left":"20px","text-align":"left"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("样品名称")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sampleView))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("生产单位")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.production))])]),a("div",{staticClass:"item2"},[a("span",{staticClass:"full-title"},[t._v("规格型号")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sampleModel))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("委托日期")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sendTime))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("委托人")]),t._v(": "),a("span",{staticClass:"info2"},[t._v(t._s(e.prepareUser))]),a("span",{staticClass:"full-title"},[t._v("检测编号")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.entrustCode))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title"},[t._v("样品数量")]),t._v(": "),a("span",{staticClass:"info2"},[t._v(t._s(e.testQuantity))])]),a("div",{staticStyle:{"font-weight":"bold",display:"flex","align-items":"center"}},[a("span",{staticClass:"full-title"},[t._v("样品状态")]),t._v(": "),a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],staticStyle:{"margin-top":"7px","margin-left":"4px"},model:{value:e.insState,callback:function(a){t.$set(e,"insState",a)},expression:"item.insState"}},[a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:0}},[t._v("待检")]),a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:1}},[t._v("在检")]),a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:2}},[t._v("已检")])],1),a("span",[a("el-radio",{staticStyle:{"margin-left":"14px","margin-top":"3px"},attrs:{label:!0,size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.changeIsLeave(e)}},model:{value:e.isLeave,callback:function(a){t.$set(e,"isLeave",a)},expression:"item.isLeave"}},[t._v("留样")])],1)],1)])])],1)})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:function(e){return t.$emit("closePrintDialog")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitPrint}},[t._v("打 印")])],1)],1)]),a("div",{staticClass:"el-dialog-body",staticStyle:{"overflow-y":"auto","margin-top":"0",position:"fixed",top:"20px",right:"10px","z-index":"99999"}},[a("div",{ref:"printOrder",staticClass:"printOrder",attrs:{id:"printOrder"}},t._l(t.checkDataList,(function(e,i){return a("el-card",{key:i,staticClass:"box-card",staticStyle:{"font-size":"0.29cm !important","font-weight":"700","page-break-after":"always",color:"#000","box-shadow":"none",margin:"0 !important",padding:"0 !important"}},[a("div",[a("div",{staticClass:"titleH1",staticStyle:{"text-align":"center","margin-bottom":"1px"}},[t._v("检测中心样品标识卡")]),a("div",{staticStyle:{"text-align":"center"}},[a("barcode",{attrs:{displayValue:!1,height:22,value:e.barcode,width:1.6}})],1),a("div",{staticStyle:{"margin-left":"12px","text-align":"left"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"full-title4"},[t._v("样品名称:")]),a("span",{staticClass:"info4"},[t._v(t._s(e.sampleView))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("生产单位")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.production))])]),a("div",{staticClass:"item2"},[a("span",{staticClass:"full-title4"},[t._v("规格型号:")]),a("span",{staticClass:"info4"},[t._v(t._s(e.sampleModel))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("委托日期")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.sendTime))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("委托人")]),t._v(": "),a("span",{staticClass:"info3"},[t._v(t._s(e.prepareUser))]),a("span",{staticClass:"full-title2"},[t._v("检测编号")]),t._v(": "),a("span",{staticClass:"info"},[t._v(t._s(e.entrustCode))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"full-title2"},[t._v("样品数量")]),t._v(": "),a("span",{staticClass:"info3"},[t._v(t._s(e.testQuantity))])]),a("div",[a("span",{staticClass:"full-title2"},[t._v("样品状态")]),t._v(": "),a("span",{staticStyle:{"white-space":"nowrap","margin-left":"2px"}},[t._v(" 待检"),0!==e.insState?a("span",{staticClass:"scor"}):t._e(),0===e.insState?a("span",{staticClass:"checked"},[t._v("√")]):t._e(),t._v(" 在检"),1!==e.insState?a("span",{staticClass:"scor"}):t._e(),1===e.insState?a("span",{staticClass:"checked"},[t._v("√")]):t._e(),t._v(" 已检"),2!==e.insState?a("span",{staticClass:"scor"}):t._e(),2===e.insState?a("span",{staticClass:"checked"},[t._v("√")]):t._e(),t._v(" 留样"),e.isLeave?t._e():a("span",{staticClass:"scor"}),e.isLeave?a("span",{staticClass:"checked"},[t._v("√")]):t._e()])])])])])})),1)])],1)},n=[],s=(a("c740"),a("d81d"),a("14d9"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("add5")),l=a.n(s),o=a("a8f1"),r={name:"printDialog",components:{},props:{printDialog:{type:Boolean,default:function(){return!1}}},data:function(){return{isShow:this.printDialog,loadPint:!1,isIndeterminate:!1,checkAll:!1,checkIndexList:[],barcodeData:[],printLoading:!1,checkDataList:[]}},methods:{getLabelPrinting:function(t){var e=this;try{this.loadPint=!0;var a=[];t.map((function(t){a.push(t.id)})),Object(o["f"])({ids:a}).then((function(t){200===t.code&&t.data.length>0&&(t.data.forEach((function(t){t.sendTime=t.sendTime&&t.sendTime.substring(0,10),t.sampleNumber=t.qtyArrived+t.buyUnitMeas,e.$set(t,"barcode",t.entrustCode),e.$set(t,"isLeave","2"===t.insState)})),e.barcodeData=t.data)}))}catch(i){console.log("获取要打印的数据---",i)}},changeIsLeave:function(t){var e=this.barcodeData.findIndex((function(e){return e.entrustCode===t.entrustCode}));e>-1&&(this.barcodeData[e].isLeave=!this.barcodeData[e].isLeave)},handleCheckAllChange:function(t){if(t){for(var e=0;e<this.barcodeData.length;e++)this.checkIndexList.push(e);this.checkDataList=this.barcodeData}else this.checkIndexList=[],this.checkDataList=[];this.isIndeterminate=!1},changeType:function(t){t="1"===t?"0":"1"},changePrintCode:function(){var t=this,e=this.checkIndexList,a=[];e.forEach((function(e){void 0!==e&&a.push(t.barcodeData[e])})),console.log("arr---",a),this.checkDataList=a},submitPrint:function(){this.checkDataList.length<1?this.$message.warning("请选择要打印的条形码"):(this.printDialogVisible=!1,l()({targetStyles:["*"],printable:"printOrder",type:"html",maxWidth:360,header:"",style:"@page {\n            margin: 0.4cm;\n            margin-right: 0.4cm;\n            margin-top: 0.4cm;\n            margin-bottom: 0.4cm;\n            padding-bottom: 0px;\n            size: 400px 75px collapse;\n          }\n          html{\n            zoom:100%;\n\n          }\n          @media print{\n            width: 400px;\n            height: 75px;\n            margin:0;\n          }",onPrintDialogClose:this.erexcel=!1,font_size:"0.29cm"}))}},watch:{printDialog:function(t){t||(this.barcodeData=[],this.checkIndexList=[],this.checkDataList=[],this.isIndeterminate=!0)}}},c=r,d=(a("f9c0"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"48fe5289",null);e["default"]=u.exports},"906e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.dialogVisible,title:"添加检验项",width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{ref:"sampleTable",staticClass:"el-table sampleTable",attrs:{data:t.sampleList,border:"","highlight-current-row":"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},"max-height":"400px","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"65"}}),a("el-table-column",{attrs:{align:"center",label:"样品名称","min-width":"100",prop:"sample"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:"",disabled:"",size:"small"},model:{value:e.row.sample,callback:function(a){t.$set(e.row,"sample",a)},expression:"scope.row.sample"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"样品编号","min-width":"100",prop:"sampleCode"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"不填写则系统自动生成",size:"small"},model:{value:e.row.sampleCode,callback:function(a){t.$set(e.row,"sampleCode",a)},expression:"scope.row.sampleCode"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"样品型号","min-width":"60",prop:"model"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"不填写则系统自动生成",size:"small"},model:{value:e.row.model,callback:function(a){t.$set(e.row,"model",a)},expression:"scope.row.model"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"检验标准","min-width":"100",prop:"standardMethodName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"不填写则系统自动生成",size:"small"},model:{value:e.row.standardMethodName,callback:function(a){t.$set(e.row,"standardMethodName",a)},expression:"scope.row.standardMethodName"}})]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.openAddItemDia(i)}}},[t._v("添加")])]}}])})],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.itemDialogVisible,title:"添加检验项",width:"90%"},on:{"update:visible":function(e){t.itemDialogVisible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.getProductLoad,expression:"getProductLoad"}],ref:"productTable",staticClass:"el-table",attrs:{data:t.productList,"row-class-name":t.tableRowClassName,border:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},"max-height":"580px","tooltip-effect":"dark"},on:{"selection-change":t.selectProduct}},[a("el-table-column",{attrs:{type:"selection",width:"65"}}),a("el-table-column",{attrs:{label:"检验项分类","min-width":"140",prop:"inspectionItemClass","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"检验项","min-width":"140",prop:"inspectionItem","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"检验项子项","min-width":"140",prop:"inspectionItemSubclass","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"要求值","min-width":"220px",prop:"ask"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.active&&"5"!=e.row.inspectionValueType?a("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"要求值",size:"small",type:"textarea"},model:{value:e.row.ask,callback:function(a){t.$set(e.row,"ask",a)},expression:"scope.row.ask"}}):a("span",[[t._v(t._s(e.row.ask))]],2)]}}])}),a("el-table-column",{attrs:{label:"要求描述","min-width":"220px",prop:"tell"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.active?a("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"要求描述",size:"small",type:"textarea"},model:{value:e.row.tell,callback:function(a){t.$set(e.row,"tell",a)},expression:"scope.row.tell"}}):a("span",[[t._v(t._s(e.row.tell))]],2)]}}])}),a("el-table-column",{attrs:{label:"条件","min-width":"140",prop:"radius","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=t.active||e.row.inspectionItem.includes("高温压力试验")?e.row.inspectionItem.includes("高温压力试验")&&1==t.active?a("el-select",{attrs:{clearable:"",placeholder:"条件",size:"small"},model:{value:e.row.radius,callback:function(a){t.$set(e.row,"radius",a)},expression:"scope.row.radius"}},t._l(JSON.parse(e.row.radiusList),(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1):a("span",[t._v(t._s(e.row.radius))]):a("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"条件",size:"small",type:"textarea"},model:{value:e.row.radius,callback:function(a){t.$set(e.row,"radius",a)},expression:"scope.row.radius"}})]}}])}),a("el-table-column",{attrs:{label:"线芯","min-width":"120",prop:"cableTag","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.active?a("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"线芯",size:"small",type:"textarea"},model:{value:e.row.cableTag,callback:function(a){t.$set(e.row,"cableTag",a)},expression:"scope.row.cableTag"}}):t._e()]}}])}),a("el-table-column",{attrs:{label:"试验方法","min-width":"120",prop:"methodS","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"计量单位",prop:"unit","show-overflow-tooltip":"",width:"100"}}),a("el-table-column",{attrs:{label:"单价",prop:"price","show-overflow-tooltip":"",width:"100"}}),a("el-table-column",{attrs:{label:"区间","min-width":"120",prop:"section","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{"filter-method":t.filterHandler,filters:t.filters,label:"子实验室","min-width":"130",prop:"sonLaboratory","show-overflow-tooltip":""}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.itemDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitList}},[t._v("确 定")])],1)],1)],1)},n=[],s=(a("c740"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("a8f1")),l={name:"addInspectionDia",components:{},data:function(){return{dialogVisible:!1,itemDialogVisible:!1,getProductLoad:!1,sampleList:[],productList:[],productListSelected:[],active:1,methodS:null,id:null,filters:[],upLoad:!1}},mounted:function(){},methods:{getDataList:function(t){var e=this;this.dialogVisible=!0,Object(s["e"])({insOrderId:t.id}).then((function(t){e.sampleList=t.data}))},openAddItemDia:function(t){var e=this;this.itemDialogVisible=!0,this.getProductLoad=!0,this.id=t.id,Object(s["d"])({insSampleId:t.id}).then((function(t){e.getProductLoad=!1,e.productList=t.data})).catch((function(t){e.getProductLoad=!1}))},selectProduct:function(t){t.forEach((function(t){t.state=1}));var e=this.productList.findIndex((function(e){return e.id===t.id}));e>-1&&(this.productList[e].state=1),this.productListSelected=t},submitList:function(){var t=this;this.$confirm("确认添加此检验项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.upLoad=!0,Object(s["a"])({insProductBindingList:t.productListSelected,insSampleId:t.id}).then((function(e){t.upLoad=!1,t.$message.success("添加成功！"),t.itemDialogVisible=!1})).catch((function(e){t.upLoad=!1}))})).catch((function(){t.$message({type:"info",message:"已取消添加"})}))},tableRowClassName:function(t){var e=t.row;t.rowIndex;return 0===e.state?"":"warning-row"},filterHandler:function(t,e,a){var i=a["property"];return e[i]===t}}},o=l,r=(a("b73e"),a("2877")),c=Object(r["a"])(o,i,n,!1,null,"0f7e2f6f",null);e["default"]=c.exports},a8f1:function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"n",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"m",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"j",(function(){return c})),a.d(e,"l",(function(){return d})),a.d(e,"k",(function(){return u})),a.d(e,"p",(function(){return p})),a.d(e,"c",(function(){return b})),a.d(e,"i",(function(){return h})),a.d(e,"f",(function(){return f})),a.d(e,"e",(function(){return m})),a.d(e,"d",(function(){return g})),a.d(e,"a",(function(){return v})),a.d(e,"o",(function(){return y}));var i=a("b775");function n(t){return Object(i["a"])({url:"/insOrder/selectInsOrderParameter",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/insOrder/updateOrderEntrustCode",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/insOrder/rawAllInsOrderExport",method:"get",params:t,responseType:"blob"})}function o(t){return Object(i["a"])({url:"/insOrder/updateInspected",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/insOrder/checkUpdate",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/insOrder/selectOrderManDay",method:"get",params:t})}function d(t){return Object(i["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/insOrder/upInsOrder",method:"post",params:t})}function p(t){return Object(i["a"])({url:"/insOrder/updateStatus",method:"post",data:t})}function b(t){return Object(i["a"])({url:"/insOrder/delInsOrder",method:"delete",params:t})}function h(t){return Object(i["a"])({url:"/insOrder/selectNoProducts",method:"get",params:t})}function f(t){return Object(i["a"])({url:"/insOrder/labelOrderPrinting",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/insOrder/getSampleByOrderId",method:"get",params:t})}function g(t){return Object(i["a"])({url:"/insOrder/getProductTreeBySampleId",method:"get",params:t})}function v(t){return Object(i["a"])({url:"/insOrder/addOmitOrderProduct",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/insOrder/updateSampleModel",method:"post",data:t})}},acc2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"search"},[a("el-form",{ref:"entity",attrs:{model:t.entity,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"委托编号",prop:"entrustCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable(e)}},model:{value:t.entity.entrustCode,callback:function(e){t.$set(t.entity,"entrustCode",e)},expression:"entity.entrustCode"}})],1),a("el-form-item",{attrs:{label:"样品名称",prop:"sampleName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable(e)}},model:{value:t.entity.sampleName,callback:function(e){t.$set(t.entity,"sampleName",e)},expression:"entity.sampleName"}})],1),a("el-form-item",{attrs:{label:"样品型号",prop:"sampleModel"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.entity.sampleModel,callback:function(e){t.$set(t.entity,"sampleModel",e)},expression:"entity.sampleModel"}})],1),t.more?a("el-form-item",{attrs:{label:"下单时间",prop:"createTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.refreshTable},model:{value:t.entity.createTime,callback:function(e){t.$set(t.entity,"createTime",e)},expression:"entity.createTime"}})],1):t._e(),t.more?a("el-form-item",{attrs:{label:"委托人",prop:"prepareUser"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable(e)}},model:{value:t.entity.prepareUser,callback:function(e){t.$set(t.entity,"prepareUser",e)},expression:"entity.prepareUser"}})],1):t._e(),t.more?a("el-form-item",{attrs:{label:"委托单位",prop:"company"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable(e)}},model:{value:t.entity.company,callback:function(e){t.$set(t.entity,"company",e)},expression:"entity.company"}})],1):t._e(),a("el-form-item",[a("el-button",{staticStyle:{color:"#3A7BFA"},attrs:{icon:t.more?"el-icon-arrow-up":"el-icon-arrow-down",type:"text"},on:{click:function(e){t.more=!t.more}}},[t._v(t._s(t.more?"收起":"更多"))]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.refreshTable()}}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.refresh()}}},[t._v("重置")])],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"container"},[a("div",{staticClass:"table-tab"},[a("div",[a("ul",{staticClass:"tab"},[t.checkPermi(["get:insOrder:reviewed"])?a("li",{class:{active:0===t.tabIndex},on:{click:function(e){return t.handleTab(0)}}},[t._v("待审核")]):t._e(),t.checkPermi(["get:insOrder:checkout"])?a("li",{class:{active:1===t.tabIndex},on:{click:function(e){return t.handleTab(1)}}},[t._v("检验中")]):t._e(),t.checkPermi(["get:insOrder:customerOrdered"])?a("li",{class:{active:2===t.tabIndex},on:{click:function(e){return t.handleTab(2)}}},[t._v("委托已检")]):t._e(),t.checkPermi(["get:insOrder:spotCheck"])?a("li",{class:{active:3===t.tabIndex},on:{click:function(e){return t.handleTab(3)}}},[t._v("抽样已检")]):t._e(),t.checkPermi(["get:insOrder:sendBack"])?a("li",{class:{active:4===t.tabIndex},on:{click:function(e){return t.handleTab(4)}}},[t._v("退回")]):t._e(),t.checkPermi(["get:insOrder:revocation"])?a("li",{class:{active:5===t.tabIndex},on:{click:function(e){return t.handleTab(5)}}},[t._v("撤销")]):t._e(),t.checkPermi(["get:insOrder:all"])?a("li",{class:{active:6===t.tabIndex},on:{click:function(e){return t.handleTab(6)}}},[t._v("全部")]):t._e()])]),a("div",[2===t.tabIndex||3===t.tabIndex||6===t.tabIndex?a("el-button",{attrs:{size:"small"},on:{click:t.downLoad}},[t._v("导出")]):t._e(),1===t.tabIndex?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.openAddIns}},[t._v("添加检验项")]):t._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.openPrint}},[t._v("标签打印")]),t.checkPermi(["add:insOrder"])?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.playOrder(1)}}},[t._v("下单")]):t._e()],1)]),a("div",{staticClass:"table"},[a("lims-table",{key:t.upIndex,attrs:{tableData:t.tableData,column:t.column,isSelection:!0,handleSelectionChange:t.selectMethod,height:"calc(100vh - 280px)",page:t.page,tableLoading:t.tableLoading},on:{pagination:t.pagination}})],1)]),a("div",[a("el-dialog",{attrs:{"before-close":t.handleClose,visible:t.verifyDialogVisible,title:"下单审核",width:"30%"},on:{"update:visible":function(e){t.verifyDialogVisible=e}}},[t.isPass?a("el-form",{ref:"ruleForm",attrs:{"label-position":t.labelPosition,model:t.formData,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"请输入样品库位号："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{size:"small"},model:{value:t.formData.specificationModel,callback:function(e){t.$set(t.formData,"specificationModel",e)},expression:"formData.specificationModel"}})],1)],1):a("p",{staticStyle:{"font-size":"16px",color:"#333333"}},[t._v("委托编号"),a("span",{staticStyle:{color:"#34BD66"}},[t._v("ZTMS2023071001")]),t._v("的信息是否通过")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isPass?a("el-row",[a("el-button",{on:{click:t.handleClose}},[t._v("返 回")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1):a("el-row",[a("el-button",{on:{click:t.handleClose}},[t._v("退 回")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitForm}},[t._v("通 过")])],1)],1)],1),a("el-dialog",{attrs:{"before-close":t.handleClose,visible:t.quashDialogVisible,title:"下单撤销",width:"30%"},on:{"update:visible":function(e){t.quashDialogVisible=e}}},[t.isQuash?a("el-form",{ref:"ruleForm",attrs:{"label-position":t.labelPosition,model:t.formData,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"请输入撤销原因："}},[a("el-input",{staticStyle:{width:"60%"},attrs:{size:"small"},model:{value:t.formData.specificationModel,callback:function(e){t.$set(t.formData,"specificationModel",e)},expression:"formData.specificationModel"}})],1)],1):a("p",{staticStyle:{"font-size":"16px",color:"#333333"}},[t._v("委托编号"),a("span",{staticStyle:{color:"#34BD66"}},[t._v(t._s(this.insOrderRow.entrustCode))]),t._v("的信息是否撤销")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isQuash?a("el-row",[a("el-button",{on:{click:t.handleClose}},[t._v("返 回")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1):a("el-row",[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1),a("el-dialog",{attrs:{"before-close":t.handleClose,visible:t.issuedDialogVisible,title:"检验分配",width:"400px"},on:{"update:visible":function(e){t.issuedDialogVisible=e}}},[a("div",{staticClass:"body",staticStyle:{"max-height":"60vh"}},[a("el-row",[a("el-col",{staticClass:"search_thing",staticStyle:{width:"95%"}},[a("div",{staticClass:"search_label"},[a("span",{staticClass:"required-span"},[t._v("* ")]),t._v("约定时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:t.distributeData.appointed,callback:function(e){t.$set(t.distributeData,"appointed",e)},expression:"distributeData.appointed"}})],1)]),a("el-col",{staticClass:"search_thing",staticStyle:{width:"95%"}},[a("div",{staticClass:"search_label"},[a("span",{staticClass:"required-span"},[t._v("* ")]),t._v("指派人员：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},on:{change:t.changeUser},model:{value:t.distributeData.userId,callback:function(e){t.$set(t.distributeData,"userId",e)},expression:"distributeData.userId"}},t._l(t.personList,(function(t,e){return a("el-option",{key:e+"gbnm.",attrs:{label:t.label,value:t.value}})})),1)],1)]),a("el-col",{staticClass:"search_thing",staticStyle:{width:"95%"}},[a("div",{staticClass:"search_label"},[a("span",{staticClass:"required-span"},[t._v("* ")]),t._v("试验室：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:t.distributeData.sonLaboratory,callback:function(e){t.$set(t.distributeData,"sonLaboratory",e)},expression:"distributeData.sonLaboratory"}},t._l(t.sonLaboratoryList,(function(t,e){return a("el-option",{key:e+"oooo",attrs:{label:t.label,value:t.value}})})),1)],1)])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:t.handleClose2}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.upLoad,type:"primary"},on:{click:t.submitForm2}},[t._v("确 定")])],1)],1)]),a("el-dialog",{attrs:{visible:t.dataDialogVisible,title:"数据查看",width:"80%"},on:{"update:visible":function(e){t.dataDialogVisible=e},close:t.closeDia}},[t.dataDialogVisible?a("div",[a("lims-table",{key:"tableDataLook",attrs:{tableData:t.tableDataLook,column:t.tableDataLookColumn,height:"500px",page:t.tableDataLookPage,tableLoading:t.tableDataLookTableLoading},on:{pagination:t.tableDataLookPagination}})],1):t._e()]),a("el-dialog",{attrs:{visible:t.filesDialogVisible,title:"附件查看",width:"80%"},on:{"update:visible":function(e){t.filesDialogVisible=e}}},[t.filesDialogVisible?a("div",[a("lims-table",{key:"tableDataFile",attrs:{tableData:t.tableDataFile,column:t.columnFile,height:"500px",page:t.pageFile,tableLoading:t.tableLoadingFile},on:{pagination:t.paginationFile}})],1):t._e()]),a("el-dialog",{attrs:{title:t.deleteTilte,visible:t.deleteDialogVisible,width:"80%"},on:{"update:visible":function(e){t.deleteDialogVisible=e}}},[t.deleteDialogVisible?a("div",{staticStyle:{height:"70vh","overflow-y":"auto"}},[a("lims-table",{key:"componentDataDelete",attrs:{tableData:t.componentDataDelete,column:t.columnDelete,isSelection:!0,handleSelectionChange:t.selectDelete,height:"500px",page:t.pageDelete,tableLoading:t.tableLoadingDelete},on:{pagination:t.paginationDelete}})],1):t._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:t.handleNo}},[t._v(t._s("撤销"==t.deleteTilte?"取 消":"不通过"))]),a("el-button",{attrs:{loading:t.printLoading,type:"primary"},on:{click:t.submitDelete}},[t._v(t._s("撤销"==t.deleteTilte?"确 定":"通过"))])],1)],1)])],1),a("el-dialog",{attrs:{visible:t.printDialogVisible,title:"标签打印",top:"5vh",width:"40%"},on:{"update:visible":function(e){t.printDialogVisible=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadPint,expression:"loadPint"}],staticStyle:{width:"100%",height:"400px","overflow-y":"auto"}},[a("div",{staticClass:"dia_body"},[a("el-checkbox",{staticStyle:{margin:"10px 5px"},attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:function(e){return t.changePrintCode()}},model:{value:t.checkIndexList,callback:function(e){t.checkIndexList=e},expression:"checkIndexList"}},t._l(t.qrData,(function(e,i){return a("el-card",{key:i+"wwwww",staticClass:"box-card",staticStyle:{"margin-bottom":"15px","font-size":"16px !important"}},[a("el-checkbox",{key:i,staticStyle:{position:"relative",top:"-20px",left:"5px"},attrs:{label:i}},[a("br")]),a("div",[a("el-row",{staticStyle:{"font-size":"14px","padding-left":"20px"}},[a("el-col",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.pName))])],1),a("div",{staticStyle:{display:"flex"}},[a("div",[a("el-col",{attrs:{offset:4,span:8}},[a("vueQr",{attrs:{margin:2,size:140,text:JSON.stringify(e.sampleCode)}})],1)],1),a("div",{staticStyle:{"margin-left":"50px",width:"100%"}},[a("el-row",[a("el-col",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a("span",[t._v("样品编号: ")]),t._v(t._s(e.sampleCode))])],1),a("el-row",{staticStyle:{"margin-top":"1px","font-size":"14px"}},[a("el-col",{staticStyle:{"font-weight":"bold"}},[a("span",[t._v("委托单号: ")]),t._v(t._s(e.code))])],1),a("el-row",{staticStyle:{"margin-top":"1px","font-size":"14px"}},[a("el-col",{staticStyle:{"font-weight":"bold"}},[a("span",[t._v("规格型号: ")]),t._v(t._s(e.model))])],1),a("el-row",{staticStyle:{"margin-top":"1px","font-size":"14px"}},[a("el-col",{staticStyle:{"font-weight":"bold"}},[a("span",[t._v("样品名称: ")]),t._v(t._s(e.sample))])],1),a("el-row",{staticClass:"ellipsis-multiline",staticStyle:{"margin-top":"1px","font-size":"14px"}},[a("el-col",{staticStyle:{"font-weight":"bold"}},[a("span",[t._v("检测项目: ")]),t._v(t._s(e.item))])],1),a("el-row",{staticStyle:{"margin-top":"3px","font-size":"14px"}},[a("el-col",{staticStyle:{"font-weight":"bold",display:"flex","align-items":"center"}},[a("span",[t._v("样品状态: ")]),a("el-radio-group",{staticStyle:{"margin-top":"7px","margin-left":"4px"},attrs:{value:e.insState,disabled:""}},[a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:0}},[t._v("待检")]),a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:1}},[t._v("在检")]),a("el-radio",{staticStyle:{"font-weight":"bold","margin-right":"7px"},attrs:{label:2}},[t._v("已检")])],1),a("el-radio",{staticStyle:{"font-weight":"bold","margin-top":"7px"},attrs:{label:1,disabled:""},model:{value:e.isLeave,callback:function(a){t.$set(e,"isLeave",a)},expression:"item.isLeave"}},[t._v("留样")])],1)],1)],1)])],1)],1)})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:function(e){t.printDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.printLoading,type:"primary"},on:{click:t.submitPrint}},[t._v("打 印")])],1)],1)]),a("div",{staticClass:"el-dialog__body",staticStyle:{"overflow-y":"auto","margin-top":"0",position:"fixed",top:"999px","z-index":"99999",display:"none"}},[a("div",{ref:"printMOrder",staticClass:"printMOrder",attrs:{id:"printMOrder"}},t._l(t.checkDataList,(function(e,i){return a("el-card",{key:i+"uuuuu",staticClass:"box-card",staticStyle:{"font-size":"0.20cm !important","page-break-after":"always",color:"#000","box-shadow":"none",margin:"0 !important",padding:"0 !important"}},[a("div",{staticStyle:{display:"flex"}},[a("div",[a("el-col",{attrs:{offset:2,span:10}},[a("vueQr",{attrs:{margin:2,size:60,text:JSON.stringify(e.sampleCode)}})],1)],1),a("div",{staticStyle:{"margin-left":"0.32cm","line-height":"0.22cm"}},[a("el-row",[a("el-col",{staticClass:"single-line-ellipsis",staticStyle:{"font-size":"0.20cm",width:"4cm"}},[a("span",[t._v("样品编号: ")]),t._v(t._s(e.sampleCode))])],1),a("el-row",{staticStyle:{"font-size":"0.20cm"}},[a("el-col",[a("span",[t._v("委托单号: ")]),t._v(t._s(e.code))])],1),a("el-row",{staticStyle:{"font-size":"0.20cm"}},[a("el-col",[a("span",[t._v("规格型号: ")]),t._v(t._s(e.model))])],1),a("el-row",{staticStyle:{"font-size":"0.20cm"}},[a("el-col",[a("span",[t._v("样品名称: ")]),t._v(t._s(e.sample))])],1),a("el-row",{staticStyle:{"font-size":"0.20cm",width:"4cm"}},[a("el-col",{staticClass:"ellipsis-multiline"},[a("span",[t._v("检测项目: ")]),t._v(t._s(e.item))])],1),a("el-row",{staticStyle:{"margin-top":"0.01cm","font-size":"0.20cm"}},[a("el-col",{staticStyle:{display:"flex","align-items":"center"}},[a("span",[t._v("样品状态: ")]),a("span",{staticStyle:{"white-space":"nowrap"}},[0==e.insState?a("span",[t._v("√")]):t._e(),0!=e.insState?a("span",{staticClass:"scor"}):t._e(),t._v("待检 "),1==e.insState?a("span",[t._v("√")]):t._e(),1!=e.insState?a("span",{staticClass:"scor"}):t._e(),t._v("在检 "),2==e.insState?a("span",[t._v("√")]):t._e(),2!=e.insState?a("span",{staticClass:"scor"}):t._e(),t._v("已检 "),1==e.isLeave?a("span",[t._v("√")]):t._e(),1!=e.isLeave?a("span",{staticClass:"scor"}):t._e(),t._v("留样")])])],1)],1)])])})),1)]),a("el-dialog",{attrs:{visible:t.entrustCodeVisible,title:"提示",width:"30%"},on:{"update:visible":function(e){t.entrustCodeVisible=e}}},[a("el-input",{model:{value:t.entrustCodeInfo.entrustCode,callback:function(e){t.$set(t.entrustCodeInfo,"entrustCode",e)},expression:"entrustCodeInfo.entrustCode"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.entrustCodeVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.submitCodeLoading,type:"primary"},on:{click:t.submitCode}},[t._v("确 定")])],1)],1),t.printDialog?a("print-dialog",{ref:"printDialog",attrs:{printDialog:t.printDialog},on:{closePrintDialog:t.closePrintDialog}}):t._e(),t.addInspectionDia?a("add-inspection-dia",{ref:"addInspectionDia"}):t._e(),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.dialogVisible,title:"修改样品型号",width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{ref:"sampleTable",attrs:{data:t.sampleList,border:"","highlight-current-row":"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},"max-height":"400px","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"65"}}),a("el-table-column",{attrs:{align:"center",label:"样品名称","min-width":"100",prop:"sample"}}),a("el-table-column",{attrs:{align:"center",label:"样品编号","min-width":"100",prop:"sampleCode"}}),a("el-table-column",{attrs:{align:"center",label:"样品型号","min-width":"60",prop:"model"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:"",placeholder:"不填写则系统自动生成",size:"small"},model:{value:e.row.model,callback:function(a){t.$set(e.row,"model",a)},expression:"scope.row.model"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"检验标准","min-width":"100",prop:"standardMethodName"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.submitListLoad,type:"primary"},on:{click:t.submitList}},[t._v("确 定")])],1)],1)],1)},n=[],s=a("5530"),l=(a("a15b"),a("d81d"),a("14d9"),a("b0c0"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("658f5")),o=a.n(l),r=a("add5"),c=a.n(r),d=a("8b9f"),u=a("906e"),p=a("00d5"),b=a("a8f1"),h=a("b9fe"),f=a("2381"),m=a("2f62"),g={name:"ProductOrder",components:{limsTable:p["a"],AddInspectionDia:u["default"],PrintDialog:d["default"],vueQr:o.a},data:function(){var t=this;return{isLoading:!1,entity:{orderType:"",state:""},upIndex:0,tableData:[],tableLoading:!1,column:[{label:"委托编号",prop:"entrustCode",width:"160px",dataType:"link",linkMethod:"changeEntrustCode"},{label:"委托单位",prop:"company"},{label:"样品名称",prop:"sampleName",width:"160px",dataType:"link",linkMethod:"selectAllByOne"},{label:"样品型号",prop:"sampleModel",width:"160px",dataType:"link",linkMethod:"editSampleModel"},{label:"样品数量",prop:"sampleNum"},{label:"检验人",prop:"testingName"},{dataType:"tag",label:"紧急程度",prop:"type",formatData:function(t){return 0==t?"普通":1==t?"优先":"紧急"},formatType:function(t){return 0==t?"success":1==t?"warning":"danger"}},{label:"备注",prop:"remark"},{label:"检验进度%",prop:"insProgress"},{label:"约定时间",prop:"appointed"},{dataType:"tag",label:"检验结果",prop:"insResult",formatData:function(t){return 1==t?"合格":0==t?"不合格":3==t?"不判定":null},formatType:function(t){return 1==t?"success":0==t?"danger":3==t?"":null}},{label:"下单时间",prop:"createTime"},{label:"下发时间",prop:"sendTime"},{label:"退回理由",prop:"tell"},{label:"委托人",prop:"prepareUser"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"数据查看",type:"text",clickFun:function(e){t.handleDataLook(e)},disabled:function(t,e){return 1!=t.state&&4!=t.state},showHide:function(e){return 1===t.tabIndex||2===t.tabIndex||3===t.tabIndex||6===t.tabIndex}},{name:"附件查看",type:"text",clickFun:function(e){t.handleFileLook(e)},disabled:function(t,e){return 1!=t.state&&4!=t.state},showHide:function(e){return 1===t.tabIndex||2===t.tabIndex||3===t.tabIndex||6===t.tabIndex}},{name:"报告下载",type:"text",clickFun:function(e){t.download(e)},disabled:function(t,e){return 4!=t.state||null==t.reportId},showHide:function(e){return 2===t.tabIndex||3===t.tabIndex||6===t.tabIndex}},{name:"审核",type:"text",clickFun:function(e){t.handleVerify(e)},disabled:function(t,e){return 0!=t.state},showHide:function(e){return 0===t.tabIndex}},{name:"撤销",type:"text",clickFun:function(e){t.handlEquash(e)},disabled:function(t,e){return 1!=t.state&&0!=t.state},showHide:function(e){return 0===t.tabIndex||1===t.tabIndex}},{name:"撤销审核",type:"text",clickFun:function(e){t.handlEquashCheck(e)},disabled:function(e,a){return 1!=e.state&&0!=e.state||1!=t.tabIndex||1!=e.isRevocation},showHide:function(e){return 1===t.tabIndex}},{name:"分配",type:"text",clickFun:function(e){t.handleIssued(e)},disabled:function(t,e){return 1!=t.state||!!t.assign},showHide:function(e){return 1===t.tabIndex}},{name:"删除",type:"text",clickFun:function(e){t.handleDelete(e)},showHide:function(e){return 4===t.tabIndex||5===t.tabIndex}},{name:"原始记录",type:"text",clickFun:function(e){t.viewInspectInfo(e)},showHide:function(e){return 2===t.tabIndex||3===t.tabIndex||6===t.tabIndex}}]}],page:{total:0,size:20,current:1},state:0,InspectionKey:1,inspectorList:[],sonLaboratory:null,typeSource:null,deleteTilte:"撤销",examine:null,deleteList:[],loadPint:!1,checkAll:!1,isIndeterminate:!0,printLoading:!1,printDialogVisible:!1,isPass:!1,isQuash:!1,verifyDialogVisible:!1,quashDialogVisible:!1,issuedDialogVisible:!1,dataDialogVisible:!1,currentRow:{},tableDataLookTableLoading:!1,tableDataLook:[],tableDataLookPage:{total:0,size:20,current:1},tableDataLookColumn:[{label:"样品编号",prop:"sampleCode",width:"160px"},{label:"样品名称",prop:"sample"},{label:"检验项分类",prop:"inspectionItemClass"},{label:"检验项",prop:"inspectionItem"},{label:"检验子项",prop:"inspectionItemSubclass"},{label:"单位",prop:"unit"},{label:"样品型号",prop:"model"},{label:"条件",prop:"radius"},{label:"电缆标识",prop:"cableTag"},{label:"试验要求",prop:"tell"},{label:"检验结果",prop:"lastValue"},{dataType:"tag",label:"结果判定",prop:"insResult",formatData:function(t){return 1==t?"合格":0==t?"不合格":3==t?"不判定":""},formatType:function(t){return 1==t?"success":0==t?"danger":""}}],filesDialogVisible:!1,tableDataFile:[],tableLoadingFile:!1,columnFile:[{dataType:"tag",label:"类型",prop:"type",formatData:function(t){return 1==t?"图片":2==t?"文件":""},formatType:function(t){return 1==t?"success":2==t?"warning":""}},{label:"附件名称",prop:"fileName"},{label:"上传人",prop:"name"},{label:"上传时间",prop:"createTime"},{dataType:"action",fixed:"right",label:"操作",width:"170px",operation:[{name:"下载",type:"text",clickFun:function(e){t.handleDown(e)}}]}],pageFile:{total:0,size:20,current:1},formData:{},formData0:{},formData1:{},distributeData:{orderId:"",sampleId:"",appointed:"",userId:"",sonLaboratory:""},entrustCodeVisible:!1,entrustCodeInfo:{},submitCodeLoading:!1,personList:[],orderId:"",revocationInsProductIds:"",componentDataDelete:[],tableLoadingDelete:!1,columnDelete:[{label:"样品编号",prop:"sampleCode",width:"160px"},{label:"检验项分类",prop:"inspectionItemClass"},{label:"检验项",prop:"inspectionItem"},{label:"检验项子类",prop:"inspectionItemSubclass"},{label:"样品分类",prop:"sampleType"},{label:"样品",prop:"sample"},{label:"型号",prop:"model"},{label:"线芯",prop:"cableTag"},{label:"试验室",prop:"sonLaboratory"},{label:"要求值",prop:"ask"},{label:"要求描述",prop:"tell"}],pageDelete:{total:0,size:20,current:1},deleteDialogVisible:!1,upLoad:!1,tabList:[{label:"待审核",value:0},{label:"检验中",value:1},{label:"委托已检",value:4},{label:"抽样已检",value:4},{label:"退回",value:2},{label:"撤销",value:3},{label:"全部",value:-2}],tabIndex:0,active:0,currentId:null,more:!1,insOrderRow:{},checkIndexList:[],checkDataList:[{sampleCode:"11111"}],qrData:[],multipleSelection:[],sonLaboratoryList:[],printDialog:!1,addInspectionDia:!1,dialogVisible:!1,submitListLoad:!1,sampleList:[]}},watch:{printDialogVisible:function(t){t||(this.qrData=[],this.checkIndexList=[],this.checkDataList=[],this.isIndeterminate=!0)}},computed:Object(s["a"])({},Object(m["b"])(["nickName"])),mounted:function(){this.checkPermi(["get:raw:await"])?this.tabIndex=0:this.tabIndex=2,this.refreshTable(),this.getAuthorizedPerson()},activated:function(){this.refreshTable()},methods:{refreshTable:function(){var t=this;2!==this.tabIndex&&3!==this.tabIndex?this.entity.orderType="":2===this.tabIndex?this.entity.orderType="Customer-ordered test":this.entity.orderType="抽检";var e=Object(s["a"])(Object(s["a"])({},this.entity),{},{state:this.tabList[this.tabIndex].value});this.isLoading=!0,Object(b["h"])(Object(s["a"])(Object(s["a"])({},this.page),e)).then((function(e){t.isLoading=!1,t.upIndex++,t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.isLoading=!1}))},refresh:function(){this.resetForm("entity"),this.refreshTable()},pagination:function(t){this.page.size=t.limit,this.refreshTable()},changeEntrustCode:function(t){1===this.tabIndex&&(this.entrustCodeVisible=!0,this.entrustCodeInfo=Object(s["a"])({},t))},submitCode:function(){var t=this;this.submitCodeLoading=!0,Object(b["n"])({id:this.entrustCodeInfo.id,entrustCode:this.entrustCodeInfo.entrustCode}).then((function(e){200===e.code&&(t.entrustCodeVisible=!1,t.refreshTable(),t.$message.success("修改成功")),t.submitCodeLoading=!1})).catch((function(e){t.submitCodeLoading=!1}))},selectMethod:function(t){this.multipleSelection=t},changePrintCode:function(){var t=this,e=this.checkIndexList,a=[];e.forEach((function(e){a.push(t.qrData[e])})),this.checkDataList=a},handleCheckAllChange:function(t){if(t){for(var e=0;e<this.qrData.length;e++)this.checkIndexList.push(e);this.checkDataList=this.qrData}else this.checkIndexList=[],this.checkDataList=[];this.isIndeterminate=!1},submitPrint:function(){this.checkDataList.length<1?this.$message.warning("请选择要打印的二维码"):(this.printDialogVisible=!1,c()({printable:"printMOrder",type:"html",maxWidth:360,style:"@page {\n                margin:0;\n                size: 400px 75px collapse;\n                margin-top:3px;\n                &:first-of-type{\n                  margin-top:0 !important;\n                }\n              }\n              html{\n                zoom:100%;\n              }\n              @media print{\n                width: 400px;\n                height: 75px;\n                margin:0;\n              }",onPrintDialogClose:this.erexcel=!1,targetStyles:["*"],font_size:"0.20cm"}))},openAddIns:function(){var t=this;0!==this.multipleSelection.length?this.multipleSelection.length>1?this.$message.warning("只能选择一条数据"):(this.addInspectionDia=!0,this.$nextTick((function(){t.$refs.addInspectionDia.getDataList(t.multipleSelection[0])}))):this.$message.warning("请选择需要添加检验项的数据")},downLoad:function(){var t=this,e=Object(s["a"])(Object(s["a"])({},this.entity),{},{state:this.tabList[this.tabIndex].value});Object(b["g"])(Object(s["a"])({},e)).then((function(e){var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"委托检测信息导出.xlsx")})).catch((function(t){console.log("err---",t)}))},openPrint:function(){var t=this;this.multipleSelection.length>0?(this.printDialog=!0,this.$nextTick((function(){var e=t.multipleSelection;t.$refs.printDialog.getLabelPrinting(e)}))):this.$message.error("请选择需要打印的数据")},closePrintDialog:function(){this.printDialog=!1},getAuthorizedPerson:function(){var t=this;Object(h["g"])({type:1}).then((function(e){var a=[];e.data.forEach((function(t){a.push({label:t.name,value:t.id})})),t.personList=a}))},handleClose:function(){this.verifyDialogVisible=!1,this.quashDialogVisible=!1,this.issuedDialogVisible=!1,this.dataDialogVisible=!1,this.upLoad=!1},handleClose2:function(){this.verifyDialogVisible=!1,this.quashDialogVisible=!1,this.issuedDialogVisible=!1,this.dataDialogVisible=!1,this.upLoad=!1},selectAllByOne:function(t){this.$router.push({path:"/productOrder/addView",query:{examine:1,active:2,currentId:t.id,tabIndex:this.tabIndex}})},editSampleModel:function(t){1===this.tabIndex&&(this.dialogVisible=!0,this.getDataList(t))},getDataList:function(t){var e=this;this.dialogVisible=!0,Object(b["e"])({insOrderId:t.id}).then((function(t){e.sampleList=t.data}))},submitList:function(){var t=this;this.submitListLoad=!0,Object(b["o"])(this.sampleList).then((function(e){t.submitListLoad=!1,t.dialogVisible=!1,t.$message.success("修改成功"),t.refreshTable()})).catch((function(e){t.submitListLoad=!1}))},handleDataLook:function(t){this.dataDialogVisible=!0,this.currentRow=t,this.getDataTableList(this.currentRow)},getDataTableList:function(t){var e=this;this.tableDataLookTableLoading=!0,Object(f["C"])(Object(s["a"])({id:t.id},this.tableDataLookPage)).then((function(t){e.tableDataLookTableLoading=!1,200===t.code&&(e.tableDataLook=t.data.records,e.tableDataLookPage.total=t.data.total)})).catch((function(t){e.tableDataLookTableLoading=!1}))},tableDataLookPagination:function(t){this.tableDataLookPage.size=t.limit,this.getDataTableList(this.currentRow)},closeDia:function(){this.tableDataLookPage={total:0,size:20,current:1},this.dataDialogVisible=!1},handleFileLook:function(t){this.filesDialogVisible=!0,this.getFileList(t)},getFileList:function(t){var e=this;this.tableLoadingFile=!0,Object(f["j"])({insOrderId:t.id}).then((function(t){e.tableLoadingFile=!1,200===t.code&&(e.tableDataFile=t.data.records,e.pageFile.total=t.data.total)})).catch((function(t){e.tableLoadingFile=!1}))},paginationFile:function(t){this.pageFile.size=t.limit,this.getFileList()},handleDown:function(t){var e=this;Object(f["i"])({id:t.id}).then((function(a){e.$download.saveAs(a.data.fileUrl,t.fileName)})).catch((function(t){}))},download:function(t){var e=t.urlS?t.urlS:t.url;if(e){e=e.split(".")[0]+".pdf";var a=document.createElement("a");a.href=this.javaApi+e,a.target="_blank",document.body.appendChild(a),a.click()}},handlEquash:function(t){1!=this.tabIndex?(this.quashDialogVisible=!0,this.insOrderRow=t):(this.orderId=t.id,this.revocationInsProductIds="",this.deleteTilte="撤销",this.deleteDialogVisible=!0,this.getDeleteList())},getDeleteList:function(){var t=this;this.tableLoadingDelete=!0,Object(b["i"])(Object(s["a"])({orderId:this.orderId,revocationInsProductIds:this.revocationInsProductIds},this.pageDelete)).then((function(e){t.tableLoadingDelete=!1,t.componentDataDelete=e.data.records,t.pageDelete.total=e.data.total})).catch((function(e){t.tableLoadingDelete=!1}))},paginationDelete:function(t){this.pageDelete.size=t.limit,this.getDeleteList()},selectDelete:function(t){this.deleteList=t},submitDelete:function(){var t=this;if("撤销"==this.deleteTilte){if(0==this.deleteList.length)return void this.$message.error("请选择要撤销的项");var e=this.deleteList.map((function(t){return t.id})).join(",");this.printLoading=!0,Object(b["m"])({ids:e,orderId:this.orderId}).then((function(e){200===e.code&&(t.printLoading=!1,t.deleteDialogVisible=!1,t.refreshTable("page"),t.$message.success("更新成功"))}))}else Object(b["b"])({orderId:this.orderId,state:1}).then((function(e){200===e.code&&(t.printLoading=!1,t.deleteDialogVisible=!1,t.refreshTable("page"),t.$message.success("更新成功"))}))},handlEquashCheck:function(t){this.orderId=t.id,this.revocationInsProductIds=t.revocationInsProductIds,this.deleteTilte="撤销审核",this.deleteDialogVisible=!0},handleNo:function(){var t=this;"撤销"==this.deleteTilte?this.deleteDialogVisible=!1:Object(b["b"])({orderId:this.orderId,state:0}).then((function(e){200===e.code&&(t.printLoading=!1,t.deleteDialogVisible=!1,t.refreshTable("page"),t.$message.success("更新成功"))}))},handleIssued:function(t){var e=this;this.issuedDialogVisible=!0,Object(b["j"])({id:t.id}).then((function(a){e.distributeData.orderId=t.id,e.distributeData.sampleId=t.sampleId,e.distributeData.appointed=a.data,e.distributeData.type=t.type})),Object(b["l"])({orderId:t.id}).then((function(t){200===t.code&&t.data.length>0&&(e.sonLaboratoryList=[],t.data.forEach((function(t){e.sonLaboratoryList.push({value:t,label:t})})))}))},submitForm2:function(){var t=this;null!=this.distributeData.appointed&&""!=this.distributeData.appointed?null!=this.distributeData.userId&&""!=this.distributeData.userId?!this.distributeData.userId||null!=this.distributeData.sonLaboratory&&""!=this.distributeData.sonLaboratory?(this.upLoad=!0,Object(b["k"])({orderId:this.distributeData.orderId,sampleId:this.distributeData.sampleId,appointed:this.distributeData.appointed,userId:this.distributeData.userId,sonLaboratory:this.distributeData.sonLaboratory}).then((function(e){t.$message.success("修改成功"),t.upLoad=!1,t.issuedDialogVisible=!1,t.refreshTable()})).catch((function(e){t.$message.error("修改失败"),t.upLoad=!1}))):this.$message.error("试验室未填写"):this.$message.error("指派人员未填写"):this.$message.error("约定时间未填写")},submitForm:function(){var t=this;this.upLoad=!0,1==this.tabIndex?Object(b["m"])({id:this.insOrderRow.id}).then((function(e){200===e.code&&(t.upLoad=!1,t.quashDialogVisible=!1,t.refreshTable(),t.$message.success("更新成功"))})):Object(b["p"])({id:this.insOrderRow.id}).then((function(e){200===e.code&&(t.upLoad=!1,t.quashDialogVisible=!1,t.refreshTable("page"),t.$message.success("更新成功"))}));var e=this.formData.authorizedPerson&&this.formData.authorizedPerson.length>0?this.formData.authorizedPerson.join(","):"";delete this.formData.createTime,delete this.formData.updateTime,delete this.formData.createUser,delete this.formData.updateUser,this.formData.authorizedPerson=e},playOrder:function(t){this.$router.push({path:"/productOrder/addOrder",query:{examine:0,active:t,tabIndex:this.tabIndex}})},handleVerify:function(t){this.$router.push({path:"/productOrder/addView",query:{examine:1,active:3,currentId:t.id}})},handleTab:function(t){this.tabIndex=t,this.refreshTable()},viewInspectInfo:function(t){var e=[];t.userName&&(e=t.userName.split(",")),e.push(this.nickName),this.checkPermi(["business:inspectionView"])?this.$router.push({name:"InspectionView",query:{sonLaboratory:t.sonLaboratory,state:3,typeSource:t.typeSource,orderId:t.id,inspectorList:e}}):this.$router.push({path:"/inspectionTask/inspection",query:{sonLaboratory:t.sonLaboratory,state:3,typeSource:t.typeSource,orderId:t.id,inspectorList:e}})},goback:function(){this.state=0,this.refreshTable("page")},refreshView:function(){this.InspectionKey++},changeUser:function(){this.sonLaboratoryList.length>0&&(this.distributeData.sonLaboratory=this.sonLaboratoryList[0].value)},handleDelete:function(t){var e=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(b["c"])({insOrderId:t.id}).then((function(t){e.$message.success("删除成功"),e.refreshTable()})).catch((function(t){e.$message.error("删除失败")}))})).catch((function(){}))}}},v=g,y=(a("b8dd"),a("2877")),w=Object(y["a"])(v,i,n,!1,null,"4b983bb4",null);e["default"]=w.exports},b73e:function(t,e,a){"use strict";a("eb8c")},b8dd:function(t,e,a){"use strict";a("64ad")},b9fe:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return o})),a.d(e,"h",(function(){return r})),a.d(e,"j",(function(){return c})),a.d(e,"i",(function(){return d})),a.d(e,"b",(function(){return u})),a.d(e,"d",(function(){return p})),a.d(e,"k",(function(){return b})),a.d(e,"g",(function(){return h}));var i=a("b775");function n(t){return Object(i["a"])({url:"/performanceShift/page",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/performanceShift/pageYear",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/performanceShift/add",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/shiftTime/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/shiftTime/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/shiftTime/update",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/shiftTime/remove",method:"delete",params:t})}function u(t){return Object(i["a"])({url:"/performanceShift/export",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:t})}function b(t){return Object(i["a"])({url:"/performanceShift/update",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:t})}},e044:function(t,e,a){},eb8c:function(t,e,a){},f9c0:function(t,e,a){"use strict";a("e044")}}]);