(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-601e6c85","chunk-3b3441e8","chunk-592c1bc0"],{"04d1":function(e,t,r){"use strict";var a=r("342f"),n=a.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},"1cb7":function(e,t,r){"use strict";r("ed71")},2381:function(e,t,r){"use strict";r.d(t,"n",(function(){return n})),r.d(t,"l",(function(){return i})),r.d(t,"k",(function(){return s})),r.d(t,"m",(function(){return l})),r.d(t,"q",(function(){return o})),r.d(t,"D",(function(){return c})),r.d(t,"o",(function(){return u})),r.d(t,"r",(function(){return d})),r.d(t,"G",(function(){return p})),r.d(t,"h",(function(){return f})),r.d(t,"B",(function(){return m})),r.d(t,"A",(function(){return v})),r.d(t,"e",(function(){return _})),r.d(t,"a",(function(){return h})),r.d(t,"E",(function(){return g})),r.d(t,"H",(function(){return b})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return P})),r.d(t,"F",(function(){return w})),r.d(t,"z",(function(){return I})),r.d(t,"f",(function(){return E})),r.d(t,"w",(function(){return L})),r.d(t,"u",(function(){return j})),r.d(t,"x",(function(){return T})),r.d(t,"v",(function(){return k})),r.d(t,"t",(function(){return D})),r.d(t,"I",(function(){return x})),r.d(t,"s",(function(){return M})),r.d(t,"C",(function(){return S})),r.d(t,"p",(function(){return F})),r.d(t,"j",(function(){return C})),r.d(t,"i",(function(){return N})),r.d(t,"g",(function(){return A})),r.d(t,"y",(function(){return R}));var a=r("b775");function n(e){return Object(a["a"])({url:"/rawMaterialOrder/getIfsByStateOne",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/rawMaterialOrder/getIfsByOver",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/rawMaterialOrder/getIfsByAll",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/rawMaterialOrder/getIfsByQuarter",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/system/newUser/getUserNow",method:"get"})}function c(e){return Object(a["a"])({url:"/standardTree/selectStandardMethodEnum",method:"get"})}function u(e){return Object(a["a"])({url:"/insOrder/getInsOrder",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/rawMaterialOrder/notificationRawOrder",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/rawMaterialOrder/selectStandardTreeListByPartNo",method:"get",params:e})}function f(e){return Object(a["a"])({url:"/rawMaterialOrder/delRawMaterOrderTemplate",method:"delete",params:e})}function m(e){return Object(a["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplateById",method:"get",params:e})}function v(e){return Object(a["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplate",method:"get",params:e})}function _(e){return Object(a["a"])({url:"/rawMaterialOrder/addRawMaterOrderTemplate",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/rawMaterialOrder/addExemptionOrder",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/standardTree/selectStandardProductList",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/standardTree/selectsStandardMethodByFLSSM",method:"get",params:e})}function y(e){return Object(a["a"])({url:"/insOrder/addInsOrder",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/rawMaterialOrder/addRawCopperOrder",method:"post",data:e})}function P(e){return Object(a["a"])({url:"/rawMaterialOrder/addRawCopperOrderExemptionOrder",method:"post",data:e})}function w(){return Object(a["a"])({url:"/standardTree/selectStandardTreeList2",method:"get"})}function I(e){return Object(a["a"])({url:"/insOrder/selectInsOrderTemplate",method:"get",params:e})}function E(e){return Object(a["a"])({url:"/rawMaterialOrder/concessionRelease",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/rawMaterialOrder/repealQuarterRawOrder",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/rawMaterialOrder/rawOrderRelease",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/rawMaterialOrder/revokeInspectionReport",method:"post",data:e})}function k(e){return Object(a["a"])({url:"/rawMaterialOrder/repealEnterRawOrder",method:"post",data:e})}function D(e){return Object(a["a"])({url:"/rawMaterialOrder/rawAllExport",method:"get",data:e,responseType:"blob"})}function x(e){return Object(a["a"])({url:"/insOrder/updateEntrustCode",method:"post",data:e})}function M(e){return Object(a["a"])({url:"/rawMaterialOrder/printLabel",method:"post",data:e})}function S(e){return Object(a["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function F(e){return Object(a["a"])({url:"/insOrder/getRetestResult",method:"get",params:e})}function C(e){return Object(a["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function N(e){return Object(a["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function A(e){return Object(a["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function R(e){return Object(a["a"])({url:"/insOrderPlan/saveUnqualifiedContext",method:"post",data:e})}},"4e82":function(e,t,r){"use strict";var a=r("23e7"),n=r("e330"),i=r("59ed"),s=r("7b0b"),l=r("07fa"),o=r("083a"),c=r("577e"),u=r("d039"),d=r("addb"),p=r("a640"),f=r("04d1"),m=r("d998"),v=r("2d00"),_=r("512ce"),h=[],g=n(h.sort),b=n(h.push),y=u((function(){h.sort(void 0)})),O=u((function(){h.sort(null)})),P=p("sort"),w=!u((function(){if(v)return v<70;if(!(f&&f>3)){if(m)return!0;if(_)return _<603;var e,t,r,a,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)h.push({k:t+a,v:r})}for(h.sort((function(e,t){return t.v-e.v})),a=0;a<h.length;a++)t=h[a].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),I=y||!O||!P||!w,E=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:c(t)>c(r)?1:-1}};a({target:"Array",proto:!0,forced:I},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(w)return void 0===e?g(t):g(t,e);var r,a,n=[],c=l(t);for(a=0;a<c;a++)a in t&&b(n,t[a]);d(n,E(e)),r=l(n),a=0;while(a<r)t[a]=n[a++];while(a<c)o(t,a++);return t}})},"512ce":function(e,t,r){"use strict";var a=r("342f"),n=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},"59f4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{"close-on-press-escape":!1,visible:e.isShow,"custom-class":"unPassCheck",title:"不合格复测",width:"90%"},on:{"update:visible":function(t){e.isShow=t},close:function(t){return e.$emit("closeUnPassCheckDialog")}}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"inspection"},[r("div",{staticClass:"center"},[r("div",{staticClass:"search",staticStyle:{"text-align":"left",display:"flex","align-items":"center","justify-content":"space-between"}},[r("div",{staticStyle:{display:"flex","align-items":"center"}},[e.tableList.length>0?r("span",[e._v("检验模板：")]):e._e(),r("el-radio-group",{attrs:{size:"small"},model:{value:e.currentTable,callback:function(t){e.currentTable=t},expression:"currentTable"}},e._l(e.tableLists,(function(t,a){return r("el-radio-button",{key:a,attrs:{label:t.templateId,size:"small"}},[e._v(e._s(t.templateName))])})),1)],1),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("span",[e._v(" 复测次数：")]),r("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:function(t){return e.handleChangeCableTag(e.currentSample.id,4,"cableTag",t)}},model:{value:e.retestTag,callback:function(t){e.retestTag=t},expression:"retestTag"}},e._l(e.unPassNumList,(function(e){return r("el-option",{key:e.retestTag,attrs:{label:e.retestTag,value:e.retestTag}})})),1)],1)]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"center-box",attrs:{id:"tableBox"}},e._l(e.tableList,(function(t,a){return r("table",{key:a+e.currentTable+e.currentSample.id,staticClass:"tables",attrs:{border:"1",cellpadding:"10"}},[r("tbody",e._l(t.arr,(function(n,i){return r("tr",{key:i},e._l(n,(function(n,s){return void 0==n.v.mc||4===Object.keys(n.v.mc).length?r("td",{key:s,style:"background:"+(n.v.bg?n.v.bg:"")+";color:"+n.v.fc+";font-size:"+n.v.fs+"px;width:"+e.handleWidth(n)+"px !important;height:"+t.style.rowlen[n.r]+"px;font-wight:"+(n.v.bl?"bold":"")+";",attrs:{id:t.templateId+"-"+n.i+"-"+n.r+"-"+n.c,colspan:n.v.mc&&n.v.mc.cs?n.v.mc.cs:1,rowspan:n.v.mc&&n.v.mc.rs?n.v.mc.rs:1}},[r("div",{staticClass:"content",class:"content-h-"+n.v.ht+" content-v-"+n.v.vt,style:"width:"+e.handleWidth(n)+"px !important;min-height:"+t.style.rowlen[n.r]+"px;"},[void 0!=n.v.ps&&"string"===typeof n.v.ps.value&&n.v.ps.value.includes("检验值")&&1==e.state?[1==e.getInspectionValueType(n.i)?r("el-input",{key:"abc-000"+a+"000"+i+"000"+s,staticClass:"table_input",attrs:{disabled:1==e.getInspectionItemType(n.i)&&!e.dataAcquisitionEidtAble||n.u!=e.userId&&void 0!=n.u&&""!=n.u},on:{change:function(r){return e.changeInput(r,t.templateId+"-"+n.r+"-"+n.c+"-"+n.i,n,"getDataType")},input:function(t){return e.handleInput(n)},keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.changeInput("",t.templateId+"-"+n.r+"-"+n.c+"-"+n.i,n,"getDataType")}},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:n.v.v,callback:function(t){e.$set(n.v,"v",t)},expression:"n.v.v"}}):2==e.getInspectionValueType(n.i)?r("el-input",{staticClass:"table_input",attrs:{disabled:1==e.getInspectionItemType(n.i)||n.u!=e.userId&&void 0!=n.u&&""!=n.u,type:"textarea"},on:{change:function(r){return e.changeInput(r,t.templateId+"-"+n.r+"-"+n.c+"-"+n.i,n,"getDataType")}},model:{value:n.v.v,callback:function(t){e.$set(n.v,"v",t)},expression:"n.v.v"}}):4==e.getInspectionValueType(n.i)?r("span",{style:"font-family:"+n.v.ff+" !important;"},[e._v("/")]):e._e()]:void 0!=n.v.ps&&"结论"===n.v.ps.value?[2!=e.getInspectionValueType(n.i)&&5!=e.getInspectionValueType(n.i)||1!=e.state||"装备电缆"!=e.PROJECT?e._e():r("el-select",{staticClass:"table_input",on:{change:function(r){return e.changeInput(r,t.templateId+"-"+n.r+"-"+n.c+"-"+n.i,n,"getDataType")}},model:{value:n.v.v,callback:function(t){e.$set(n.v,"v",t)},expression:"n.v.v"}},[r("el-option",{attrs:{value:1,label:"合格"}}),r("el-option",{attrs:{value:0,label:"不合格"}}),r("el-option",{attrs:{value:3,label:"不判定"}}),r("el-option",{attrs:{value:2,label:"待定"}})],1),e.state>1?[1===n.v.v?r("span",{style:"font-family:"+n.v.ff+" !important;color: green;"},[e._v("合格")]):0===n.v.v?r("span",{style:"font-family:"+n.v.ff+" !important;color: red;"},[e._v("不合格")]):3===n.v.v?r("span",{style:"font-family:"+n.v.ff+" !important;color: #3A7BFA;"},[e._v("不判定")]):r("span",{style:"font-family:"+n.v.ff+" !important;"},[e._v("待定")])]:e._e(),2!=e.getInspectionValueType(n.i)&&1==e.state?[1===n.v.v?r("span",{style:"font-family:"+n.v.ff+" !important;color: green;"},[e._v("合格")]):0===n.v.v?r("span",{style:"font-family:"+n.v.ff+" !important;color: red;"},[e._v("不合格")]):3===n.v.v?r("span",{style:"font-family:"+n.v.ff+" !important;color: #3A7BFA;"},[e._v("不判定")]):r("span",{style:"font-family:"+n.v.ff+" !important;"},[e._v("待定")])]:e._e()]:void 0!=n.v.ps&&"设备编码"===n.v.ps.value&&1==e.state?[r("span",[e._v(e._s(n.v.v))])]:void 0!=n.v.ps&&"设备名称"===n.v.ps.value?[r("el-select",{staticClass:"table_input",attrs:{disabled:e.state>1,filterable:"",multiple:"",placeholder:"设备",remote:""},on:{change:function(t){return e.changeEquip(t,n)},"visible-change":function(t){return e.getEquipOptions(t,n.i)}},model:{value:n.v.v,callback:function(t){e.$set(n.v,"v",t)},expression:"n.v.v"}},e._l(e.equipOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[e._v(" "+e._s(t.label+"--"+t.value)+" ")])})),1)]:void 0!=n.v.ps&&"要求值"===n.v.ps.value&&1==e.state?[r("span",{style:"font-family:"+n.v.ff+" !important;"},[e._v(e._s(e.getTell(n.i)))])]:void 0!=n.v.ps&&"计算值"===n.v.ps.value&&1==e.state||void 0!=n.v.ps&&"最终值"===n.v.ps.value&&1==e.state?[r("span",{style:"font-family:"+n.v.ff+" !important;"},[e._v(e._s(e.toFixed(n.v.v,n.v.ct)))])]:void 0!=n.v.ps&&"样品编号"===n.v.ps.value?[r("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","align-items":"center",width:"100%"},attrs:{title:e.currentSample.sampleCode}},[e.currentFiberOpticTape||e.currentFiberOptic?e._e():r("i",{staticClass:"el-icon-caret-left table_caret",staticStyle:{width:"16px"},on:{click:function(t){return e.caretSample(-1)}}}),r("div",{style:"font-family:"+n.v.ff+" !important;overflow: hidden;white-space: nowrap;width: calc(100% - 32px);"},[e._v(" "+e._s(e.currentSample.sampleCode))]),e.currentFiberOpticTape||e.currentFiberOptic?e._e():r("i",{staticClass:"el-icon-caret-right table_caret",staticStyle:{width:"16px"},on:{click:function(t){return e.caretSample(1)}}})])]:void 0!=n.v.ps&&"样品型号"===n.v.ps.value?[void 0!==e.currentSample.model&&null!==e.currentSample.model?r("div",{style:"font-family:"+n.v.ff+" !important;"},[e._v(e._s(e.currentSample.model))]):e._e()]:void 0!=n.v.ps&&"套管"===n.v.ps.value?[r("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","align-items":"center"}},[r("div",{style:"font-family:"+n.v.ff+" !important;"},[e._v(e._s(e.currentBushing?e.currentBushing.color:"")+" ")])])]:void 0!=n.v.ps&&"光纤带"===n.v.ps.value?[r("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","align-items":"center"}},[e.currentFiberOpticTape?r("i",{staticClass:"el-icon-caret-left table_caret",on:{click:function(t){return e.caretTape(-1)}}}):e._e(),r("div",{style:"font-family:"+n.v.ff+" !important;"},[e._v(" "+e._s(e.currentFiberOpticTape?e.currentFiberOpticTape.code:""))]),e.currentFiberOpticTape?r("i",{staticClass:"el-icon-caret-right table_caret",on:{click:function(t){return e.caretTape(1)}}}):e._e()])]:void 0!=n.v.ps&&"光纤"===n.v.ps.value?[r("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","align-items":"center"}},[e.currentFiberOptic?r("i",{staticClass:"el-icon-caret-left table_caret",on:{click:function(t){return e.caretOptic(-1)}}}):e._e(),r("div",{style:"font-family:"+n.v.ff+" !important;"},[e._v(" "+e._s(e.currentFiberOptic?e.currentFiberOptic.color:"")+" ")]),e.currentFiberOptic?r("i",{staticClass:"el-icon-caret-right table_caret",on:{click:function(t){return e.caretOptic(1)}}}):e._e()])]:r("span",{style:"font-family:"+n.v.ff+" !important;",domProps:{innerHTML:e._s(e.getValue(n.v))}})],2)]):e._e()})),0)})),0)])})),0)]),r("el-dialog",{attrs:{visible:e.reviewDia,title:"检验复核",width:"500px"},on:{"update:visible":function(t){e.reviewDia=t}}},[e.reviewDia?r("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px"}},[r("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[r("span",{staticClass:"required-span"},[e._v("* ")]),e._v("不通过的理由：")]),r("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[r("el-input",{attrs:{autosize:{minRows:4},clearable:"",size:"small",type:"textarea"},model:{value:e.noReason,callback:function(t){e.noReason=t},expression:"noReason"}})],1)]):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.reviewDia=!1}}},[e._v("取 消")]),r("el-button",{attrs:{loading:e.reviewLoading,type:"primary"},on:{click:e.handleReviewDia}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{visible:e.addVerifyDia,title:"指定复核人员",width:"400px"},on:{"update:visible":function(t){e.addVerifyDia=t}}},[r("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px","align-items":"center"}},[r("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[r("span",{staticClass:"required-span"},[e._v("*")]),e._v("复核人")]),r("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.verifyUser,callback:function(t){e.verifyUser=t},expression:"verifyUser"}},e._l(e.personList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addVerifyDia=!1}}},[e._v("取 消")]),r("el-button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.dataGetDia,"custom-class":"custom-dialog",title:"数据采集"},on:{"update:visible":function(t){e.dataGetDia=t}}},[r("div",[r("table",{staticClass:"thermal-table",attrs:{border:"1",cellpadding:"10"}},[r("tr",[r("td",{staticStyle:{width:"120px"}},[e._v("检验项")]),r("td",{staticStyle:{width:"120px"}},[e._v("检验子项")]),r("td",[e._v("数采数据")])]),e._l(e.getData,(function(t,a){return[r("tr",[r("td",{attrs:{rowspan:t.child.length}},[e._v(e._s(t.faName))]),r("td",[e._v(e._s(t.child[0].name))]),r("td",{staticStyle:{"text-align":"left"}},[r("el-checkbox-group",{attrs:{max:t.child[0].maxNum},model:{value:e.getDataIndex,callback:function(t){e.getDataIndex=t},expression:"getDataIndex"}},e._l(t.child[0].arr,(function(t,a){return r("el-checkbox",{key:a,attrs:{label:a}},[e._v(e._s(t))])})),1)],1)]),e._l(t.child,(function(t,a){return r("tr",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"i > 0"}],key:a+"bbbbbbbbbbbbbb"},[r("td",[e._v(e._s(t.name))]),r("td",{staticStyle:{"text-align":"left"}},[r("el-checkbox-group",{attrs:{max:t.maxNum},model:{value:e.getDataIndex,callback:function(t){e.getDataIndex=t},expression:"getDataIndex"}},e._l(t.arr,(function(t,a){return r("el-checkbox",{key:a,attrs:{label:a}},[e._v(e._s(t))])})),1)],1)])}))]}))],2)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{loading:e.getDataIndexLoading,type:"primary"},on:{click:function(t){return e.submitDataGet()}}},[e._v("确 定")])],1)]),e.unPassDialog?r("UnPassDialog",{ref:"unPassDialog",attrs:{orderId:e.orderId,unPassDialog:e.unPassDialog},on:{resetForm:e.resetForm}}):e._e(),r("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.addCheck,title:"指定报告审核人员",width:"400px"},on:{"update:visible":function(t){e.addCheck=t},close:e.closeAddVerifyDia}},[r("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px","align-items":"center"}},[r("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[r("span",{staticClass:"required-span"},[e._v("*")]),e._v("审核人：")]),r("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.checkUser,callback:function(t){e.checkUser=t},expression:"checkUser"}},e._l(e.personList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeAddVerifyDia}},[e._v("取 消")]),r("el-button",{attrs:{loading:e.reviewLoading,type:"primary"},on:{click:function(t){return e.upInsReview(1)}}},[e._v("确 定")])],1)])],1)])},n=[],i=r("ade3"),s=r("3835"),l=r("6f3e"),o=r("2909"),c=r("c14f"),u=r("1da1"),d=(r("99af"),r("4de4"),r("7db0"),r("c740"),r("caad"),r("a15b"),r("d81d"),r("14d9"),r("fb6a"),r("4e82"),r("a434"),r("b0c0"),r("e9c4"),r("a9e3"),r("b680"),r("b64b"),r("d3b7"),r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("25f0"),r("6062"),r("1e70"),r("79a4"),r("c1a1"),r("8b00"),r("a4e7"),r("1e5a"),r("72c3"),r("2532"),r("3ca3"),r("5319"),r("0643"),r("2382"),r("fffc"),r("4e3e"),r("a573"),r("159b"),r("ddb0"),r("2b3d"),r("bf19"),r("9861"),r("88a7"),r("271a"),r("5494"),r("5d52")),p=r("6ddf"),f=r("c354"),m=r("b558"),v=r("2381"),_=r("963c"),h=r("9eb6"),g={props:["sonLaboratory","orderId","state","inspectorList","typeSource","unPassCheck","rawMaterialTag","cableTag","repetitionTag"],components:{AddUnPass:f["default"],UnPassDialog:p["default"]},data:function(){var e=this;return{isShow:this.unPassCheck,sagData:[],sagForm:{sampleCode:null,model:null,inspection:null,methodName:null,tensileForce:null,spanLength:null,load:null},dataGetDia:!1,wareTableDataLoading:!1,fileAdd:!1,submitLoading:!1,searchForm:{sampleName:null,state:null},id:0,componentData0:{entity:{insOrderId:""},isIndex:!0,showSelect:!1,select:!1,sort:!1,init:!1,do:[{id:"handleDown",font:"下载",type:"text",method:"handleDown"},{id:"delete",font:"删除",type:"text",method:"doDiy",disabled:function(t,r){return 1!=e.state}}],isPage:!1,linkEvent:{},tagField:{type:{select:[{value:1,label:"图片"},{value:2,label:"文件"}]}},currentId:"",selectField:{},requiredAdd:[],requiredUp:[]},changeType:null,getReportModelLoading:!1,insOrder:{},sampleProduct:[],typeList:[],urgentList:[],currentSample:{},tableList:[],loading:!1,ps:{},param:{},currentKey0:1,currentKey1:1,currentKey2:1,comparisonList:[],excelMethodList:[],equipOptions:[],userId:0,reviewLoading:!1,reviewDia:!1,noReason:"",tableWidth:1e3,currentTable:null,tableLists:[],widthList:[],addVerifyDia:!1,verifyUser:null,personList:[],enumList:[],tableLoading:!1,upLoading:!1,temptList:null,currentTab:null,wareForm:{inspectionItem:1,inspectionItemSubclass:"20(常温)"},wareForm0:{},numOptions:[],temperatureOptions:[],wareTableData:[],otherForm:{humidity:null,temperature:null},equipForm:{value0:null,code0:null,value1:null,code1:null},result:null,worker:null,worker0:null,wareLength:[],dataAcquisitionInfo:{},dataAcquisitionInfoNew:{},dataAcquisitionEidtAble:!1,isGet:!1,dataAcquisitionLoading:!1,collected:!1,thermalCyclingInfo:{max:0,inspectionItem:1,arr:[],length:1,inspectionItemClass:null},thermalCyclingLoading:!1,temDataAcquisition:!1,getData:[{faName:"波长附加衰减",child:[{name:"1285nm~1330nm",arr:[12,13,14,15]},{name:"1525nm~1575nm",arr:[12,13,14,15]}]},{faName:"截至波长",child:[{name:"截至波长",arr:[12,13,14,15]}]}],getDataIndex:[],getDataIndexLoading:!1,getDataTypeId:"",getDataType:null,unPassDialog:!1,retestTag:"1",addCheck:!1,checkUser:"",type:"",unPassNumList:[{retestTag:"1"},{retestTag:"2"}]}},computed:{headers:function(){return{token:sessionStorage.getItem("token")}},action:function(){return this.javaApi+"/insOrderPlan/uploadFile"}},created:function(){this.id=this.orderId,this.getUserInfo()},mounted:function(){this.getTypeDicts(),this.getInsStateDicts(),this.getComparisonList(),this.getAuthorizedPerson(),this.startWorker()},watch:{id:function(e){var t=this;this.loading=!0,Object(m["g"])({id:e,laboratory:this.sonLaboratory}).then(function(){var r=Object(u["a"])(Object(c["a"])().m((function r(a){var n;return Object(c["a"])().w((function(r){while(1)switch(r.n){case 0:if(t.insOrder=a.data.insOrder,t.componentData0.entity.insOrderId=e,t.urgentList.forEach((function(e){e.value==t.insOrder.type&&(t.insOrder.typeName=e.label)})),a.data.sampleProduct&&0!=a.data.sampleProduct.length){r.n=1;break}return r.a(2,t.$message.error("该任务没有样品信息"));case 1:return t.sampleProduct=a.data.sampleProduct,t.currentSample=t.HaveJson(t.sampleProduct[0]),t.HaveJson(t.currentSample.insProduct),t.otherForm={temperature:t.insOrder.temperature?t.insOrder.temperature:null,humidity:t.insOrder.humidity?t.insOrder.humidity:null},"1"==t.typeSource&&(t.retestTag="1"),t.getEquipOptions(1),r.n=2,t.getCurrentProduct(t.currentSample.id,0);case 2:if(n=r.v,void 0!==n){r.n=3;break}return t.$message.warning("暂无不合格复测数据"),t.$emit("closeUnPassCheckDialog"),r.a(2);case 3:t.currentSample.insProduct=t.HaveJson(n),t.param={},t.changeType=0,t.currentSample.insProduct.forEach((function(e){t.handleCasing(e.inspectionItem)&&(t.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null})})),void 0==t.currentSample.index&&(t.currentSample["index"]=1),t.currentSample.bushing,t.getTableLists(),t.loading=!1;case 4:return r.a(2)}}),r)})));return function(e){return r.apply(this,arguments)}}())},currentTable:function(e,t){var r=this;if(null!=t&&e!=t){if(this.changeType&&this.changeType>0)return;this.tableLists.forEach(function(){var t=Object(u["a"])(Object(c["a"])().m((function t(a,n){var i,s;return Object(c["a"])().w((function(t){while(1)switch(t.n){case 0:if(a.templateId!=e){t.n=2;break}return t.n=1,r.getCurrentProduct(r.currentSample.id,0);case 1:i=t.v,r.currentSample.insProduct=r.HaveJson(i),r.param={},r.currentSample.insProduct.forEach((function(e,t){r.handleCasing(e.inspectionItem)&&(r.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null})})),s=new Set,r.tableLists=r.currentSample.insProduct.filter((function(e){var t=s.size;if(null!=e.templateId&&null!=e.template)try{s.add(JSON.stringify({template:e.template,templateId:e.templateId}))}catch(a){console.log(222,a)}var r=s.size;if(r>t)return e})),r.tableLists&&r.tableLists.length>0&&(r.tableList=null,r.tableList=r.tableLists.filter((function(t){return t.templateId==e})),r.handleTableData());case 2:return t.a(2)}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}},equipForm:{deep:!0,handler:function(e){var t=this;this.tableLists.find((function(e){return e.templateId==t.currentTable}))&&("温度循环检验原始记录"==this.tableLists.find((function(e){return e.templateId==t.currentTable})).templateName||this.tableLists.find((function(e){return e.templateId==t.currentTable})).templateName.includes("热循环")||this.tableLists.find((function(e){return e.templateId==t.currentTable})).templateName.includes("温升试验"))&&this.equipOptions&&this.equipOptions.length>0&&(this.param[this.currentSample.insProduct[0].id].equipValue=[],this.param[this.currentSample.insProduct[0].id].equipName=[],this.equipForm.code0&&(this.equipForm.value0=this.equipOptions.find((function(e){return e.value==t.equipForm.code0})).label,this.param[this.currentSample.insProduct[0].id].equipValue.push({i:this.currentSample.insProduct[0].id,v:{v:this.equipForm.code0}}),this.param[this.currentSample.insProduct[0].id].equipName.push({i:this.currentSample.insProduct[0].id,v:{v:this.equipForm.value0}})),this.equipForm.code1&&(this.equipForm.value1=this.equipOptions.find((function(e){return e.value==t.equipForm.code1})).label,this.param[this.currentSample.insProduct[0].id].equipValue.push({i:this.currentSample.insProduct[0].id,v:{v:this.equipForm.code1}}),this.param[this.currentSample.insProduct[0].id].equipName.push({i:this.currentSample.insProduct[0].id,v:{v:this.equipForm.value1}})),this.saveInsContext())}}},beforeDestroy:function(){this.stopWorker()},methods:{closeAddVerifyDia:function(){this.addCheck=!1,this.checkUser=""},resetForm:function(){this.$refs.unPassDialog.$refs["unPassForm"].resetFields(),this.unPassDialog=!1},handleDataAcquisition:function(e){var t=this;this.dataAcquisitionEidtAble?this.getDataType=1:this.getDataType=2,this.dataAcquisitionInfo={},this.getData=[];var r=function(r){var a={faName:r,child:[]},n=function(n){var i="";if(i=r==n?r+",":r+","+n,"frequency"==n||!e[r][n]||e[r][n].result&&"string"!=typeof e[r][n].result){if("frequency"!=n&&e[r][n]&&Array.isArray(e[r][n].result)){var s="";s=r==n?r+",":r+","+n;var l=t.tableList[0].arr,o=0;l.forEach((function(a,i){var c=0,u="";a.forEach((function(a){if(a.v.ps&&("检验子项"==a.v.ps.value||"检验项"==a.v.ps.value)){a.v.ps&&"检验项"==a.v.ps.value&&0==c&&(u=a.v.v+",",c++),a.v.ps&&"检验子项"==a.v.ps.value&&1==c&&(u+=a.v.v);var d=0;l[i].forEach((function(e){e.v.ps&&e.v.ps.value&&"string"==typeof e.v.ps.value&&e.v.ps.value.includes("检验值")&&d++})),s==u&&(o=d)}e[r][n].equipName&&e[r][n].equipValue&&a.v&&a.v.ps&&"设备名称"==a.v.ps.value&&s==u&&(a.v.v||t.changeEquip(e[r][n].equipValue,a,e[r][n].equipName))}))}));var c={name:n,arr:e[r][n].result,maxNum:o,value:[]};e[r][n].result&&Array.isArray(e[r][n].result)&&e[r][n].result.length>o?a.child.push(c):t.dataAcquisitionInfo[s]={value:e[r][n].result}}}else{t.dataAcquisitionInfo[i]={value:e[r][n].result,frequency:e[r].frequency};var u=t.tableList[0].arr;u.forEach((function(a,s){var l=0,o="";a.forEach((function(a){!a.v.ps||"检验子项"!=a.v.ps.value&&"检验项"!=a.v.ps.value||(a.v.ps&&"检验项"==a.v.ps.value&&0==l&&(o=a.v.v+",",l++),a.v.ps&&"检验子项"==a.v.ps.value&&1==l&&(o+=a.v.v)),e[r][n].equipName&&e[r][n].equipValue&&a.v&&a.v.ps&&"设备名称"==a.v.ps.value&&i==o&&(a.v.v||t.changeEquip(e[r][n].equipValue,a,e[r][n].equipName))}))}))}};for(var i in e[r])n(i);a.child.length>0&&t.getData.push(a)};for(var a in e)r(a);if(this.getData.length>0)this.dataGetDia=!0,this.getDataIndex=[];else try{this.getDataIndexLoading=!1,this.dataGetDia=!1,this.getDataTypeId="",this.worker0.postMessage(JSON.stringify({dataAcquisitionInfo:this.dataAcquisitionInfo,list:this.tableList[0].arr}))}catch(n){console.log(1111,n)}this.worker0.onmessage=function(e){var r=JSON.parse(e.data);if("changeInput"==r.method){var a=r.value,n=a.list,i=a.n;t.$set(t.tableList[0],"arr",n),t.changeInput("","".concat(t.currentSample.insProduct[0].templateId,"-").concat(i.r,"-").concat(i.c,"-").concat(i.i),i)}else r.getDataTypeId&&(t.getDataTypeId=r.getDataTypeId)}},submitDataGet:function(){if(0!=this.getDataIndex.length){this.getDataIndex.sort((function(e,t){return e-t}));for(var e=0;e<this.getData.length;e++)for(var t=0;t<this.getData[e].child.length;t++){for(var r=[],a=0;a<this.getDataIndex.length;a++)r.push(this.dataAcquisitionInfoNew[this.getData[e].faName][this.getData[e].child[t].name].result[this.getDataIndex[a]]);this.dataAcquisitionInfoNew[this.getData[e].faName][this.getData[e].child[t].name].result=r}this.getDataIndexLoading=!0,this.handleDataAcquisition(this.dataAcquisitionInfoNew)}else this.$message.error("请选择需要采集的数据")},startWorker:function(){this.worker&&this.stopWorker(),this.worker=new _["a"],this.worker0&&this.stopWorker(),this.worker0=new h["a"]},stopWorker:function(){this.worker&&(this.worker.terminate(),this.worker=null),this.worker0&&(this.worker0.terminate(),this.worker0=null)},getCurrentProduct:function(e,t,r){var a=this;return Object(u["a"])(Object(c["a"])().m((function r(){var n,i;return Object(c["a"])().w((function(r){while(1)switch(r.n){case 0:return a.tableLoading=!0,t="1"==a.typeSource?5:t,a.type=t,n={id:e,type:t,laboratory:a.sonLaboratory,retestTag:a.retestTag,rawMaterialTag:a.rawMaterialTag,repetitionTag:a.repetitionTag,cableTag:a.cableTag},r.n=1,Object(m["m"])(n);case 1:if(i=r.v,console.log("res---",i),!(200===i.code&&i.data.length>0)){r.n=2;break}return a.tableLoading=!1,a.scrollInit(),r.a(2,i.data);case 2:return r.a(2)}}),r)})))()},handleCasing:function(e){return 3==this.changeType||!e.includes("松套管")},handleChangeCableTag:function(e,t,r,a){var n=this;return Object(u["a"])(Object(c["a"])().m((function i(){var s,l;return Object(c["a"])().w((function(i){while(1)switch(i.n){case 0:if(s="","cableTag"===r&&(s=a),a||(t=0),n.changeType=t,!e){i.n=2;break}return i.n=1,n.getCurrentProduct(e,t,s);case 1:l=i.v,l.length>0?(n.param={},l.forEach((function(e){n.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),n.getTableLists0(l),n.worker.postMessage(JSON.stringify({type:"saveData",tableList:n.tableList,param:n.param,currentTable:n.currentTable,bushing:e}))):(n.tableLists=[],n.tableList=[],n.$message.error("检验项为空"));case 2:return i.a(2)}}),i)})))()},getTypeDicts:function(){var e=this;this.getDicts("urgency_level").then((function(t){e.urgentList=e.dictToValue(t.data)}))},getInsStateDicts:function(){var e=this;this.getDicts("inspection_task_state").then((function(t){e.typeList=e.dictToValue(t.data)}))},getComparisonList:function(){var e=this;this.getDicts("coordinate_transformation").then((function(t){e.comparisonList=e.dictToValue(t.data)}))},getTableLists:function(){var e=new Set;this.tableLists=this.currentSample.insProduct.filter((function(t){var r=e.size;if(null!=t.templateId&&null!=t.template)try{e.add(JSON.stringify({template:t.template,templateId:t.templateId}))}catch(n){console.log(222,n)}var a=e.size;if(a>r)return t})),this.tableLists&&this.tableLists.length>0&&(this.tableList=null,this.tableList=[this.tableLists[0]],this.currentTable=this.tableLists[0].templateId,this.handleTableData())},getTableLists0:function(e){var t=new Set;this.tableLists=e.filter((function(e){var r=t.size;if(null!=e.templateId&&null!=e.template)try{t.add(JSON.stringify({template:e.template,templateId:e.templateId}))}catch(n){console.log(333,n)}var a=t.size;if(a>r)return e})),this.tableLists&&this.tableLists.length>0&&(this.tableList=null,this.tableList=[this.tableLists[0]],this.currentTable=this.tableLists[0].templateId,this.currentSample.insProduct=this.HaveJson(e),this.handleTableData())},handleTableData:function(){var e=this;if(console.log("ttt--------\x3e>>>",this.tableList),this.excelMethodList=[],this.widthList=this.tableList[0].style.columnlen,this.tableLists.find((function(t){return t.templateId==e.currentTable}))&&"温度循环检验原始记录"==this.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName){var t=this.currentSample.insProduct[0].ask,r=t.split(";");this.numOptions=[];for(var a=1;a<=r[r.length-1];a++)this.numOptions.push({value:a,label:a});var n=new Set;r.forEach((function(e,t){t<r.length-1&&n.add(e.split(",")[0].replace("℃",""))})),this.temperatureOptions=[],n.forEach((function(t){e.temperatureOptions.push({value:String(t),label:t})}))}if(this.tableLists.find((function(t){return t.templateId==e.currentTable}))&&(this.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("热循环")||this.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("温升试验"))){var i=this.currentSample.insProduct[0].ask,s=i.split(";");this.thermalCyclingInfo.max=Number(s[s.length-1]);for(var d=[],p=0;p<s.length-1;p++)d.push(s[p].split(",")[0]);d=d.map((function(e){var t={};return t.name=e,null!=t.insResult&&void 0!=t.insResult||(t.arr=[{value0:"",value1:""}],t.insResult=null),t})),this.thermalCyclingInfo.arr=d}this.tableList.forEach((function(t){var r=[];t.template.forEach((function(e){void 0!=e.v.mc&&void 0!=e.v.mc.cs&&void 0!=e.v.mc.rs&&r.push(e)}));var a=0;r.forEach((function(r){for(var n in t.template)for(var i=0;i<r.v.mc.cs;i++)for(var s=0;s<r.v.mc.rs;s++)if(t.template[n].c===r.c+i&&t.template[n].r===r.r+s){var l=e.HaveJson(r);t.template[n].v.v=l.v.v,t.template[n].v.ps=l.v.ps,t.template[n].v.fc=l.v.fc,t.template[n].v.fs=l.v.fs,t.template[n].v.ht=l.v.ht,t.template[n].mc=a;break}a++}))})),this.tableList.forEach((function(t){var r=new Set,a=[],n=new Set;t.template.forEach((function(i){var s=n.size,l=n.add(i.r).size;if(s<l){var o="",c="",u="",d=0,p=0;if(t.template.forEach((function(e){i.r===e.r&&(void 0!=e.v.ps&&"检验项分类"===e.v.ps.value&&0===d?p=1:void 0!=e.v.ps&&"检验项"===e.v.ps.value&&0===d&&(p=0),0==p?void 0!=e.v.ps&&"检验项"===e.v.ps.value?0===d&&(o+=e.v.v,d+=1):void 0!=e.v.ps&&"检验子项"===e.v.ps.value&&1===d&&(o+=e.v.v,d+=1):1==p&&(void 0!=e.v.ps&&"检验项分类"===e.v.ps.value?0===d&&(o+=e.v.v,d+=1):void 0!=e.v.ps&&"检验项"===e.v.ps.value?1===d&&(o+=e.v.v,d+=1):void 0!=e.v.ps&&"检验子项"===e.v.ps.value&&2===d&&(o+=e.v.v,d+=1)),"机械性能干态拉伸强度(纵向)"===o&&void 0!=e.v.ps&&"单位"===e.v.ps.value&&(c=o+e.v.v,u=e.v.v))})),""!=o){var f=0;for(var m in e.currentSample.insProduct){var v=null==e.currentSample.insProduct[m].inspectionItemClass||void 0==e.currentSample.insProduct[m].inspectionItemClass?"":e.currentSample.insProduct[m].inspectionItemClass,_=null==e.currentSample.insProduct[m].inspectionItem||void 0==e.currentSample.insProduct[m].inspectionItem?"":e.currentSample.insProduct[m].inspectionItem,h=null==e.currentSample.insProduct[m].inspectionItemSubclass||void 0==e.currentSample.insProduct[m].inspectionItemSubclass?"":e.currentSample.insProduct[m].inspectionItemSubclass;if("干态拉伸强度(纵向)"===h){var g=e.currentSample.insProduct[m].unit;if(e.currentSample.insProduct[m].templateId===t.templateId&&v+_+h+g===c||e.currentSample.insProduct[m].templateId===t.templateId&&!u.includes("/")&&v+_+h===o){a.push({r:i.r,id:e.currentSample.insProduct[m].id,product:e.currentSample.insProduct[m]});break}}else if(e.currentSample.insProduct[m].templateId===t.templateId&&v+_+h===o){a.push({r:i.r,id:e.currentSample.insProduct[m].id,product:e.currentSample.insProduct[m]});break}f++}f==e.currentSample.insProduct.length&&r.add(i.r)}}})),r.forEach((function(e){for(var r=0;r<t.template.length;r++)t.template[r].r===e&&(t.template.splice(r,1),r-=1)})),a.forEach((function(e){for(var r=0;r<t.template.length;r++)t.template[r].r===e.r&&(t.template[r].i=e.id,void 0!=t.template[r].v.ps&&"单位"===t.template[r].v.ps.value&&(t.template[r].v.v=e.product.unit),void 0==t.template[r].v.ps||"试验方法"!==t.template[r].v.ps.value&&"检测方法"!==t.template[r].v.ps.value||(t.template[r].v.v=e.product.methodS))}));var i=new Set;t.template.forEach((function(e){var r=i.size,a=i.add(e.mc).size;void 0!=e.mc&&r<a&&(e.v.mc.rs=0,e.v.mc.cs=0,t.template.forEach((function(t){e.mc===t.mc&&(e.r===t.r&&(e.v.mc.cs+=1),e.c===t.c&&(e.v.mc.rs+=1))})))}))})),this.tableList.forEach((function(t){var r=[],a=new Set,n=0,i=[],s=[];i=t.template.filter((function(e){return void 0!=e.v.ps&&"结论"===e.v.ps.value})),s=t.template.filter((function(e){return void 0!=e.v.ps&&"最终值"===e.v.ps.value})),t.template.forEach((function(t){void 0==t.v.ps||"序号"!==t.v.ps.value||void 0!=t.v.mc&&4!==Object.keys(t.v.mc).length||(n++,t.v.v=n),void 0!=t.v.ps&&"要求值"===t.v.ps.value&&(t.v.v=e.getAsk(t.i)),void 0!=t.v.ps&&"string"===typeof t.v.ps.value&&t.v.ps.value.includes("检验值")&&(e.$set(t.v,"v",""),t.u="",t.i&&e.param[t.i]&&e.param[t.i].insValue.push(t)),void 0!=t.v.ps&&"计算值"===t.v.ps.value&&(e.$set(t.v,"v",""),t.i&&e.param[t.i]&&e.param[t.i].comValue.push(t)),void 0!=t.v.ps&&"设备编码"===t.v.ps.value&&(e.$set(t.v,"v",""),t.i&&e.param[t.i]&&e.param[t.i].equipValue.push(t)),void 0!=t.v.ps&&"设备名称"===t.v.ps.value&&(e.$set(t.v,"v",""),t.i&&e.param[t.i]&&e.param[t.i].equipName.push(t)),void 0!=t.v.ps&&"最终值"===t.v.ps.value&&(e.$set(t.v,"v",""),void 0!==t.i&&e.param[t.i]&&!e.param[t.i].resValue&&(e.param[t.i].resValue=t)),void 0!=t.v.ps&&"结论"===t.v.ps.value&&void 0!==t.i&&e.param[t.i]&&!e.param[t.i].insResult&&(e.param[t.i].insResult=t,i.forEach((function(r,a){r.r==t.r&&r.c==t.c&&(t.v.f="(".concat(e.comparisonList.find((function(e){return e.value==s[a].c})).label).concat(s[a].r+1,")"))}))),a.add(t.r),t.v.f&&e.excelMethodList.push(t)})),a=Object(o["a"])(a),a.forEach((function(e){var a=[];t.template.forEach((function(t){t.r===e&&a.push(t)})),r.push(a)})),t.arr=r,e.tableWidth=0;for(var l=0;l<r[0].length;l++)e.tableWidth+=void 0===t.style.columnlen[l]?100:t.style.columnlen[l]})),this.currentSample.insProduct.forEach(function(){var t=Object(u["a"])(Object(c["a"])().m((function t(r){var a,n,i,s,o,u,d,p,f,m,v,_;return Object(c["a"])().w((function(t){while(1)switch(t.n){case 0:try{for(a=JSON.parse(r.insProductResult.comValue),n=0;n<a.length;n++)e.param[r.id].comValue[n].v.v=e.toFixed(a[n].v,e.param[r.id].comValue[n].v.ct)}catch(h){}t.p=1,i=JSON.parse(r.insProductResult.insValue),s=Object(c["a"])().m((function t(a){return Object(c["a"])().w((function(t){while(1)switch(t.n){case 0:e.param[r.id].insValue.find((function(e){return e.c==i[a].c&&e.r==i[a].r}))&&(e.param[r.id].insValue.find((function(e){return e.c==i[a].c&&e.r==i[a].r})).v.v=e.toFixed(i[a].v,e.param[r.id].insValue.find((function(e){return e.c==i[a].c&&e.r==i[a].r})).v.ct),e.param[r.id].insValue.find((function(e){return e.c==i[a].c&&e.r==i[a].r})).u=i[a].u);case 1:return t.a(2)}}),t)})),o=0;case 2:if(!(o<i.length)){t.n=4;break}return t.d(Object(l["a"])(s(o)),3);case 3:o++,t.n=2;break;case 4:t.n=6;break;case 5:t.p=5,t.v;case 6:try{if(u=JSON.parse(r.insProductResult.equipValue),e.tableLists.find((function(t){return t.templateId==e.currentTable}))&&("温度循环检验原始记录"==e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("热循环")||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("温升试验")))for(e.param[r.id].equipValue=[],d=0;d<u.length;d++)e.param[r.id].equipValue.push({v:{v:""}});for(p=0;p<u.length;p++)e.tableLists.find((function(t){return t.templateId==e.currentTable}))&&("温度循环检验原始记录"==e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("热循环")||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("温升试验"))?(e.$set(e.equipForm,"code"+p,u[p].v),e.param[r.id].equipValue[p].v.v=u[p].v):e.param[r.id].equipValue[p].v.v=u[p].v}catch(h){}try{for(f=JSON.parse(r.insProductResult.equipName),m=0;m<f.length;m++)""!==f[m].v&&f[m].v.map((function(t){var r=e.equipOptions.findIndex((function(e){return e.value===t}));r>-1&&(t=e.equipOptions[r].deviceName)}));if(e.tableLists.find((function(t){return t.templateId==e.currentTable}))&&("温度循环检验原始记录"==e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("热循环")||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("温升试验")))for(e.param[r.id].equipName=[],v=0;v<f.length;v++)e.param[r.id].equipName.push({v:{v:""}});for(_=0;_<f.length;_++)e.tableLists.find((function(t){return t.templateId==e.currentTable}))&&("温度循环检验原始记录"==e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("热循环")||e.tableLists.find((function(t){return t.templateId==e.currentTable})).templateName.includes("温升试验"))?(e.$set(e.equipForm,"value"+_,f[_].v),e.param[r.id].equipName[_].v.v=f[_].v):e.param[r.id].equipName[_].v.v=f[_].v}catch(h){console.log("设备名称赋值----",h)}try{e.param[r.id].resValue.v.v=e.toFixed(r.lastValue,e.param[r.id].resValue.v.ct),e.param[r.id].insResult.v.v=r.insResult}catch(h){}case 7:return t.a(2)}}),t,null,[[1,5]])})));return function(e){return t.apply(this,arguments)}}()),this.handleExcelMethod()},changeInput:function(e,t,r,a){var n=this;"getDataType"==a&&(this.getDataType=2);var i=null;if(r&&(i=JSON.parse(JSON.stringify(r.i)),"string"==typeof r.v.v)){var l=function(e){var t=e.split("/"),r=Object(s["a"])(t,2),a=r[0],n=r[1];return!(!n||!a)},o=l(r.v.v);o||(r.v.v=r.v.v.replace("/",""))}try{this.worker.postMessage(JSON.stringify({code:t,tableList:this.tableList,excelMethodList:this.excelMethodList,comparisonList:this.comparisonList,currentSample:this.currentSample,PROJECT:this.PROJECT,param:this.param,currentTable:this.currentTable,getDataTypeId:this.getDataTypeId,modelType:this.sampleProduct[0].model,currentInsItem:r}))}catch(c){console.log(444,c)}this.worker.onmessage=function(e){switch(n.result=JSON.parse(e.data),n.result.method){case"saveInsContext":console.log("output->",0xa1b01d4b1c7),n.$nextTick((function(){for(var e in n.$set(n.tableList[0],"arr",n.result.value.tableList[0].arr),n.param=n.result.value.param,n.result.value.currentInsItem&&(i=n.result.value.currentInsItem.i),n.param)n.param[e].insResult&&n.param[e].insResult.v&&n.param[e].insResult.v.v&&("合格"==n.param[e].insResult.v.v?n.$set(n.param[e].insResult.v,"v",1):"不合格"==n.param[e].insResult.v.v&&n.$set(n.param[e].insResult.v,"v",0))}));break;case"tableList":n.$nextTick((function(){n.$delete(n.tableList[0],"arr"),n.$set(n.tableList[0],"arr",n.result.value[0].arr),n.result.value.currentInsItem&&(i=n.result.value.currentInsItem.i)}));break;case"getCurrentInsProduct":n.getCurrentInsProduct(n.result.value);break}},setTimeout((function(){n.saveInsContext(i)}),200)},getCurrentInsProduct:function(e){var t=this;this.tableList[0].insProductResult||(this.tableList[0].insProductResult={});var r=function(r){var a=t.param[e][r];switch(r){case"comValue":if(a&&a.length>0){t.tableList[0].insProductResult[r]=[],a.forEach((function(e,a){var n={v:e.v.v};t.tableList[0].insProductResult[r].push(n)}));try{t.tableList[0].insProductResult[r]=JSON.stringify(t.tableList[0].insProductResult[r])}catch(n){console.log(555,n)}}break;case"insValue":if(a&&a.length>0){t.tableList[0].insProductResult[r]=[],a.forEach((function(e,a){var n={v:e.v.v,u:e.u};t.tableList[0].insProductResult[r].push(n)}));try{t.tableList[0].insProductResult[r]=JSON.stringify(t.tableList[0].insProductResult[r])}catch(n){console.log(666,n)}}break;case"equipValue":if(a&&a.length>0){t.tableList[0].insProductResult[r]=[],a.forEach((function(e,a){var n={v:e.v.v};t.tableList[0].insProductResult[r].push(n)}));try{t.tableList[0].insProductResult[r]=JSON.stringify(t.tableList[0].insProductResult[r])}catch(n){console.log(777,n)}}break;case"equipName":if(a&&a.length>0){t.tableList[0].insProductResult[r]=[],a.forEach((function(e,a){var n={v:e.v.v};t.tableList[0].insProductResult[r].push(n)}));try{t.tableList[0].insProductResult[r]=JSON.stringify(t.tableList[0].insProductResult[r])}catch(n){console.log(888,n)}}break;case"resValue":t.tableList[0].lastValue=a?a.v.v:"";break;case"insResult":t.tableList[0].insResult=a?a.v.v:"";break}};for(var a in this.param[e])r(a)},handleExcelMethod:function(){this.excelMethodList.length>0&&this.excelMethodList.map((function(e){return e.valueList=d["a"].changeParameter(e.v.f),e}))},getValue:function(e){var t=e.v||0===e.v?e.v:e.ct&&e.ct.s?e.ct.s.length>0&&e.ct.s[0].v.replace(new RegExp("\n","g"),"<br/>").replace(new RegExp("@","g"),"<br/>"):"";if(e.ct&&e.ct.fa&&e.ct.fa.includes(".")&&t){var r=0,a=e.ct.fa.split(".")[1];r=a.length,t=Number(t).toFixed(r)}return e.v&&"string"==typeof e.v&&e.v.includes("@")&&(t=e.v.replace(new RegExp("@","g"),"<br/>")),t},getInspectionValueType:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].inspectionValueType},getTell:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].tell},handleWidth:function(e){var t=0;if(e.v.mc&&e.v.mc.cs&&void 0!=e.v.mc.c)for(var r=0;r<e.v.mc.cs;r++){var a=this.widthList[r+e.v.mc.c]?this.widthList[r+e.v.mc.c]:100;t+=a}else t=this.widthList[e.c]?this.widthList[e.c]:100;return t},handleInput:function(e){try{e.v.v=e.v.v.replace(/[^\d.^e>\-/+]/g,""),e.v.v=e.v.v.replace(/\.{2,}/g,"."),e.v.v=e.v.v.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.v.v=e.v.v.replace(/\/{2,}/g,"/"),e.v.v=e.v.v.replace("/","$#$").replace(/\//g,"").replace("$#$","/")}catch(t){console.log(t)}},getInspectionItemType:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].inspectionItemType},getAsk:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].ask},getSystemValue:function(e){var t=this;try{this.param[e.i].equipValue.forEach((function(r){if(r.r===e.r){if(null==r.v.v||""==r.v.v)return void t.$message.error("请先选择采集的设备");r.v.v}}))}catch(r){this.$message.error("找不到设备内容")}fetch("http://localhost:82/微信图片_20240518100811.png").then((function(e){return e.blob()})).then((function(e){URL.createObjectURL(e)}))},getEquipOptions:function(e,t){var r=this;e&&(this.equipOptions=[],Object(m["t"])({status:0}).then((function(e){200===e.code&&e.data&&(r.equipOptions=e.data.map((function(e){return e.value=e.managementNumber,e.label=e.deviceName,e})))})).catch((function(e){console.error(e)})))},getUserInfo:function(){var e=this;Object(v["q"])().then((function(t){e.userId=t.data.id}))},upInsReview:function(e){var t=this;1==e?(this.reviewLoading=!0,Object(m["C"])({orderId:this.orderId,type:1,laboratory:this.sonLaboratory,tell:null,userId:this.checkUser}).then((function(e){200===e.code&&(t.$message.success("操作成功"),t.$emit("goback"),t.addCheck=!1),t.reviewLoading=!1})).catch((function(e){console.error(e),t.reviewLoading=!1}))):this.reviewDia=!0},handleReviewDia:function(){var e=this;this.noReason?(this.reviewLoading=!0,Object(m["C"])({orderId:this.orderId,type:0,laboratory:this.sonLaboratory,tell:this.noReason}).then((function(t){200===t.code&&(e.$message.success("操作成功"),e.$emit("goback")),e.reviewLoading=!1})).catch((function(t){console.error(t),e.reviewLoading=!1}))):this.$message.error("未输入不通过原因")},submit:function(){var e=this;null!==this.verifyUser&&""!==this.verifyUser?this.otherForm.humidity?this.otherForm.temperature?(this.submitLoading=!0,Object(m["b"])({orderId:this.orderId,laboratory:this.sonLaboratory}).then((function(t){if(200===t.code)if(t.data&&0!=t.data.length){var r=[],a=e.$createElement;for(var n in t.data){var i=t.data[n].slice(-1);"-"==i&&(t.data[n]=t.data[n].slice(0,-1)),r.push(a("p",{style:"font-size: 14px;color: red;"},Number(n)+1+"、"+t.data[n]))}r.push(a("p",{style:"font-size: 16px;color:#000;margin-top:12px;overflow-y: auto;max-height:80vh"},"以上项目不合格，确定提交？")),e.$confirm("提示",{title:"提示",message:a("div",null,r),confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then((function(){e.submitLoading=!0,Object(m["x"])({orderId:e.orderId,laboratory:e.sonLaboratory,verifyUser:e.verifyUser}).then((function(t){200===t.code&&(e.$message.success("操作成功"),e.addVerifyDia=!1,e.$emit("goback")),e.submitLoading=!1})).catch((function(t){console.error(t),e.submitLoading=!1}))})).catch((function(){}))}else e.submitLoading=!0,Object(m["x"])({orderId:e.orderId,laboratory:e.sonLaboratory,verifyUser:e.verifyUser,entrustCode:e.insOrder.entrustCode}).then((function(t){200===t.code&&(e.$message.success("操作成功"),e.$emit("goback"),e.submitLoading=!1,e.addVerifyDia=!1)})).catch((function(t){console.error(t),e.submitLoading=!1}))})).catch((function(t){console.error(t),e.submitLoading=!1}))):this.$message.error("请输入温度"):this.$message.error("请输入湿度"):this.$message.error("请指定复核人员")},saveInsContext:function(e){var t=this;try{if(this.param){var r=null;r=e?Object(i["a"])({},e,this.param[e]):this.param,Object(v["y"])({param:JSON.stringify(r),currentTable:this.currentTable,sampleId:this.currentSample.id}).then((function(e){t.$message.success("已保存")})),this.worker.postMessage(JSON.stringify({modelType:this.sampleProduct[0].model,type:"saveData",tableList:this.tableList,param:this.param,currentTable:this.currentTable}))}}catch(a){console.log(999,a)}},changeEquip:function(e,t,r){var a=this;try{for(var n in this.tableList[0].arr.forEach((function(e,t){e.forEach((function(e,t){a.param[e.i]&&(a.param[e.i].state=1)}))})),this.param)1!=this.param[n].state&&delete this.param[n];for(var i in this.param[t.i].equipName)this.param[t.i].equipName[i].i===t.i&&this.param[t.i].equipName[i].r===t.r&&(this.$delete(this.param[t.i].equipValue[i].v,"v"),this.$set(this.param[t.i].equipValue[i].v,"v",e.join("，")),this.$delete(this.param[t.i].equipName[i].v,"v"),this.$set(this.param[t.i].equipName[i].v,"v",e),this.tableList[0].arr.forEach((function(r,n){r.forEach((function(r){r.i==t.i&&r.v.ps&&"设备编码"==r.v.ps.value&&a.$set(r.v,"v",e.join("，")),r.i==t.i&&r.v.ps&&"设备名称"==r.v.ps.value&&a.$set(r.v,"v",e)}))})));this.saveInsContext(t.i)}catch(s){console.log("changeEquip----",s)}},getAuthorizedPerson:function(){var e=this;Object(m["w"])({type:1}).then((function(t){var r=[];t.data.forEach((function(e){r.push({label:e.name,value:e.id})})),e.personList=r}))},scrollInit:function(){var e,t,r,a=document.getElementById("tableBox");a.addEventListener("mousedown",(function(a){e=!0,t=a.clientX,r=this.scrollLeft})),a.addEventListener("mousemove",(function(a){if(e){var n=a.clientX,i=n-t;this.scrollLeft=r-i}})),a.addEventListener("mouseup",(function(){e=!1})),a.addEventListener("mouseleave",(function(t){e=!1}))},caretTape:function(e){var t=this;return Object(u["a"])(Object(c["a"])().m((function r(){var a,n;return Object(c["a"])().w((function(r){while(1)switch(r.n){case 0:if(a=t.currentKey1+e,!(a<1)){r.n=1;break}return t.$message.error("当前是第一个光纤带"),r.a(2);case 1:if(!(a>t.fiberOpticTape.length)){r.n=2;break}return t.$message.error("当前是最后一个光纤带"),r.a(2);case 2:return t.currentKey1=a,t.currentFiberOpticTape=t.HaveJson(t.fiberOpticTape[a-1]),t.param={},t.fiberOptic=[],t.currentFiberOptic=null,t.currentFiberOpticTape.productList.forEach((function(e){t.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),t.fiberOpticTapeVisible=!1,r.n=3,t.getCurrentProduct(t.currentFiberOpticTape.id,1);case 3:n=r.v,t.getTableLists0(n),t.currentFiberOpticTape.fiber&&t.currentFiberOpticTape.fiber.length>0&&(t.fiberOptic=t.currentFiberOpticTape.fiber);case 4:return r.a(2)}}),r)})))()},caretOptic:function(e){var t=this;return Object(u["a"])(Object(c["a"])().m((function r(){var a,n;return Object(c["a"])().w((function(r){while(1)switch(r.n){case 0:if(a=t.currentKey2+e,!(a<1)){r.n=1;break}return t.$message.error("当前是第一个光纤"),r.a(2);case 1:if(!(a>t.fiberOptic.length)){r.n=2;break}return t.$message.error("当前是最后一个光纤"),r.a(2);case 2:return t.currentKey2=a,t.currentFiberOptic=t.HaveJson(t.fiberOptic[a-1]),t.currentFiberOptic.productList.forEach((function(e){t.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),r.n=3,t.getCurrentProduct(t.currentFiberOptic.id,2);case 3:n=r.v,t.getTableLists0(n);case 4:return r.a(2)}}),r)})))()},beforeUpload:function(e){return e.size>10485760?(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1):(this.upLoading=!0,!0)},onError:function(e,t,r){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleDown:function(e){var t=this;Object(m["h"])({id:e.id}).then((function(r){t.$download.saveAs(r.data.fileUrl,e.fileName)})).catch((function(e){}))},toFixed:function(e,t){if(e&&t&&t.fa){if(t.fa.includes(".")){var r=t.fa.slice(4).length;return Number(e).toFixed(r)}return e}return e}}},b=g,y=(r("1cb7"),r("b3a3"),r("2877")),O=Object(y["a"])(b,a,n,!1,null,"1fdcf895",null);t["default"]=O.exports},"5d52":function(module,__webpack_exports__,__webpack_require__){"use strict";var D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2909"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4d63"),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("c607"),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2c3e"),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("00b4"),core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("0643"),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("2382"),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("4e3e"),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_19__);function SUM(){try{for(var e=null,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r&&r.length>0&&r.forEach((function(t){e+=t})),e}catch(n){}}function MAX(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];try{var a=null;return t&&t.length>0&&(t=t.filter((function(e){return null!=e&&""!==e})),a=t.length>0?Math.max.apply(Math,Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(t)):null),a}catch(n){}}function MIN(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];try{var a=null;return t&&t.length>0&&(t=t.filter((function(e){return null!=e&&""!==e})),t.length>0&&(a=Math.min.apply(Math,Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(t)))),a}catch(n){}}function AVERAGE(){try{for(var e=null,t=[],r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return a&&a.length>0?(t=a.filter((function(e){return null!=e&&""!==e})),t.forEach((function(t){e+=t})),t.length>0?e/t.length:null):null}catch(i){}}function ABS(e){try{return Math.abs(e)}catch(t){}}function MEDIAN(){try{for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r&&r.length>0){e=r.filter((function(e){return null!=e&&""!==e}));var n=e.sort((function(e,t){return e-t})),i=Math.floor(n.length/2);return e.length>0?n.length%2===1?n[i]:(n[i-1]+n[i])/2:null}return null}catch(s){}}function CalculatePower(e){try{if(e&&e.includes("^")){var t=e.split("^");return t&&t.length>1?Math.pow(t[0],t[1]):null}}catch(r){}}function getColumnNameFromId(e){try{Array.isArray(e)||(e=e.split("-"));var t=e[0],r="";return t>701?(r+=String.fromCharCode(64+parseInt(t/676)),r+=String.fromCharCode(64+parseInt(t%676/26))):t>25&&(r+=String.fromCharCode(64+parseInt(t/26))),r+=String.fromCharCode(65+t%26),r+(parseInt(e[1])+1)}catch(a){console.log("error",e)}}function getIdFromColumnName(e,t){try{var r=/^[a-zA-Z]+/.exec(e);if(r){for(var a=0,n=0;n<r[0].length;n++)a+=parseInt(r[0].charCodeAt(n)-64)*Math.pow(26,r[0].length-1-n);a--,a<0&&(a=0);var i=parseInt(/[0-9]+$/.exec(e));i>0&&i--,e=1==t?[a,i]:{c:a,r:i}}return e}catch(s){console.log("error",e)}}function changeParameter(e){try{var t=getABCList(e),r=[];return t.forEach((function(e){if(e.includes(":"))for(var t=getIdFromColumnName(e.split(":")[0]).r,a=getIdFromColumnName(e.split(":")[0]).c,n=getIdFromColumnName(e.split(":")[1]).r,i=getIdFromColumnName(e.split(":")[1]).c,s=Number(t);s<=Number(n);s++)for(var l=Number(a);l<=Number(i);l++)r.push({r:s,c:l});else r.push(getIdFromColumnName(e))})),r}catch(a){}}function getABCList(e){try{var t=/[=\+\-\*\%\(\)\/\^\s]/g,r=["SUM","MAX","MIN","AVERAGE","ABS"];e=e.replace(t,",").replace(new RegExp('"&',"g"),"").replace(new RegExp('&"',"g"),""),r.forEach((function(t){e=e.replace(new RegExp(t,"g"),"")}));var a=e.split(",").filter((function(e){return e&&/[a-zA-Z]/.test(e)&&"undefined"!=e&&"null"!=e}));return a}catch(n){}}function getAllCell(e){try{var t=changeParameter(e),r={};return t.forEach((function(e){r[getColumnNameFromId("".concat(e.c)+"-"+"".concat(e.r))]=null})),r}catch(a){}}function compute(f,comValue){try{var str=f,arr=getAllCell(f);for(var a in comValue)"undefined"!==comValue[a]&&"null"!==comValue[a]&&void 0!==comValue[a]&&("string"==typeof comValue[a]&&comValue[a].includes("^")?arr[a]=CalculatePower(comValue[a]):("string"==typeof comValue[a]&&comValue[a].includes("/"),arr[a]=comValue[a]));var arr0=getABCList(f),obj={};for(var a in arr0.forEach((function(e){if(e.includes(":")){for(var t=[],r=getIdFromColumnName(e.split(":")[0]).r,a=getIdFromColumnName(e.split(":")[0]).c,n=getIdFromColumnName(e.split(":")[1]).r,i=getIdFromColumnName(e.split(":")[1]).c,s=Number(r);s<=Number(n);s++)for(var l=Number(a);l<=Number(i);l++)t.push({r:s,c:l});var o=[];t.forEach((function(e){o.push(getColumnNameFromId("".concat(e.c)+"-"+"".concat(e.r)))})),obj[e.split(":").join("-")]=o.join(",")}else obj[e]=e})),str=str.replace(new RegExp(":","g"),""),obj)str=str.replace(new RegExp(a,"g"),obj[a]);for(var a in arr)str=str.replace(new RegExp(a,"g"),arr[a]);return eval(str)}catch(error){}}__webpack_exports__["a"]={compute:compute,changeParameter:changeParameter}},"5e56":function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"h",(function(){return d}));var a=r("b775");function n(e){return Object(a["a"])({url:"/insOrderPlan/getFactoryVerify",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/insOrderPlan/addFactoryVerify",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/insOrderPlan/addUnqualifiedRetest",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/insOrder/getInsOrder",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/unqualifiedHandler/getUnqualifiedHandler",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/unqualifiedHandler/downFile",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/unqualifiedHandler/addUnqualifiedHandler",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/unPass/pageInsUnPass",method:"post",data:e})}},"6ddf":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"新增不合格处理",visible:e.isShow,width:"740px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isShow=t}}},[r("div",{staticClass:"search"},[r("el-form",{ref:"unPassForm",staticClass:"form-inline",attrs:{inline:!0,model:e.unPassForm,rules:e.unPassFormRules,"label-width":"120px"}},[r("div",[r("el-form-item",{staticClass:"headLine",staticStyle:{width:"100%"},attrs:{label:"标题:",prop:"headline"}},[r("el-input",{attrs:{clearable:"",size:"small",disabled:"view"===e.type,type:"textarea",placeholder:"请输入"},model:{value:e.unPassForm.headline,callback:function(t){e.$set(e.unPassForm,"headline",t)},expression:"unPassForm.headline"}})],1)],1),r("el-form-item",{attrs:{label:"供应商名称:"}},[r("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.unPassForm.supplierName,callback:function(t){e.$set(e.unPassForm,"supplierName",t)},expression:"unPassForm.supplierName"}})],1),r("el-form-item",{attrs:{label:"物料名称:"}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",content:e.unPassForm.materialName}},[r("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.unPassForm.materialName,callback:function(t){e.$set(e.unPassForm,"materialName",t)},expression:"unPassForm.materialName"}})],1)],1),r("el-form-item",{attrs:{label:"生产批次:"}},[r("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.unPassForm.productionBatch,callback:function(t){e.$set(e.unPassForm,"productionBatch",t)},expression:"unPassForm.productionBatch"}})],1),r("el-form-item",{attrs:{label:"到货数量:"}},[r("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.unPassForm.cargoQuantity,callback:function(t){e.$set(e.unPassForm,"cargoQuantity",t)},expression:"unPassForm.cargoQuantity"}})],1),r("el-form-item",{attrs:{label:"规格型号:"}},[r("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.unPassForm.specsModels,callback:function(t){e.$set(e.unPassForm,"specsModels",t)},expression:"unPassForm.specsModels"}})],1),r("el-form-item",{attrs:{label:"报检时间:"}},[r("el-date-picker",{staticStyle:{width:"175px"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small",disabled:"",type:"date",placeholder:"选择日期"},model:{value:e.unPassForm.inspectTime,callback:function(t){e.$set(e.unPassForm,"inspectTime",t)},expression:"unPassForm.inspectTime"}})],1),r("el-form-item",{attrs:{label:"反馈人:"}},[r("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.unPassForm.feedbackUser,callback:function(t){e.$set(e.unPassForm,"feedbackUser",t)},expression:"unPassForm.feedbackUser"}})],1),r("el-form-item",{attrs:{label:"反馈时间:",prop:"feedbackTime"}},[r("el-date-picker",{staticStyle:{width:"175px"},attrs:{disabled:"view"===e.type,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",size:"small",type:"date",placeholder:"选择日期"},model:{value:e.unPassForm.feedbackTime,callback:function(t){e.$set(e.unPassForm,"feedbackTime",t)},expression:"unPassForm.feedbackTime"}})],1),r("el-form-item",{attrs:{label:"分类:",prop:"classification"}},[r("el-select",{attrs:{disabled:"view"===e.type,size:"small",placeholder:"请选择"},model:{value:e.unPassForm.classification,callback:function(t){e.$set(e.unPassForm,"classification",t)},expression:"unPassForm.classification"}},e._l(e.classificationOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"不合格归属:",prop:"offGradeAscription"}},[r("el-select",{attrs:{disabled:"view"===e.type,size:"small",placeholder:"请选择"},model:{value:e.unPassForm.offGradeAscription,callback:function(t){e.$set(e.unPassForm,"offGradeAscription",t)},expression:"unPassForm.offGradeAscription"}},e._l(e.offGradeAscriptionOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"不合格情况描述:",prop:"unqualifiedDesc"}},[r("el-input",{staticStyle:{width:"484px"},attrs:{clearable:"",type:"textarea",disabled:"view"===e.type,size:"small",placeholder:"请输入"},model:{value:e.unPassForm.unqualifiedDesc,callback:function(t){e.$set(e.unPassForm,"unqualifiedDesc",t)},expression:"unPassForm.unqualifiedDesc"}})],1)],1),"add"===e.type?r("el-upload",{ref:"upload",attrs:{action:e.action2,"on-change":e.beforeUpload,"on-error":e.onError,"on-remove":e.handleRemoveFile,"on-success":e.getUnpassUrl,headers:e.uploadHeader,"file-list":e.unPassFilesList}},[r("el-button",{staticStyle:{"text-align":"left"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1):e._e(),"add"!==e.type?r("div",[r("div",{staticStyle:{"padding-left":"40px","margin-bottom":"4px"}},[e._v("附件：")]),e._l(e.unqualifiedHandlerFiles,(function(t){return r("div",{staticStyle:{"padding-left":"40px","margin-bottom":"4px"}},[r("span",[e._v(e._s(t.fileName))]),r("el-link",{staticStyle:{"margin-left":"20px","vertical-align":"top"},attrs:{type:"primary",underline:!1},on:{click:function(r){return e.handleDown(t)}}},[e._v("下载")])],1)}))],2):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.$emit("resetForm")}}},[e._v("取 消")]),"add"===e.type?r("el-button",{attrs:{type:"primary",loading:e.handlunPassLoading},on:{click:e.handlunPass}},[e._v("确 定")]):e._e()],1)])],1)},n=[],i=r("5530"),s=(r("99af"),r("c740"),r("14d9"),r("a434"),r("d3b7"),r("0643"),r("4e3e"),r("159b"),r("5e56")),l=r("2f62"),o={name:"unPassDialog",components:{},props:{unPassDialog:{type:Boolean,default:function(){return!1}},orderId:{type:String,default:function(){return null}}},data:function(){return{type:"",isShow:this.unPassDialog,unPassForm:{headline:"",inventoryQuantityId:"",supplierName:"",materialName:"",productionBatch:"",cargoQuantity:"",specsModels:"",inspectTime:"",feedbackUser:"",feedbackTime:"",classification:"",offGradeAscription:"",unqualifiedDesc:"",unqualifiedHandlerFiles:[]},unPassFormRules:{offGradeAscription:[{required:!0,message:"请选择不合格归属",trigger:"change"}],headline:[{required:!0,message:"请填写标题",trigger:"blur"}]},unPassFilesList:[],classificationOptions:[],offGradeAscriptionOptions:[],handlunPassLoading:!1,unqualifiedHandlerFiles:[]}},mounted:function(){this.getClassificationOptions(),this.getOffGradeAscriptionOptions()},methods:{getInsOrder:function(e,t){var r=this;this.type=e,"add"===e?Object(s["f"])({orderId:this.orderId}).then((function(e){200===e.code&&(r.unPassForm.headline="No.0005-中天装备电线-外购品不合格反馈评审及纠正预防流程(正式版)-".concat(r.nickName,"-").concat((new Date).toISOString().substring(0,10)),r.unPassForm.feedbackTime=(new Date).toISOString().substring(0,10),r.unPassForm.feedbackUser=r.nickName,r.unPassForm.insOrderId=e.data.insOrder.id,r.unPassForm.materialName=e.data.insOrder.sampleType,r.unPassForm.specsModels=e.data.insOrder.partDetail,r.unPassForm.inventoryQuantityId=e.data.insOrderTemplate.inventoryQuantityId,r.unPassForm.supplierName=e.data.insOrderTemplate.supplierName,r.unPassForm.productionBatch=e.data.insOrderTemplate.updateBatchNo,r.unPassForm.cargoQuantity=e.data.insOrderTemplate.qtyArrived+e.data.insOrderTemplate.buyUnitMeas,r.unPassForm.inspectTime=e.data.insOrderTemplate.sendTime.substring(0,10))})):(this.getInfo(t.handlerId),this.unPassForm=Object(i["a"])({},t))},getInfo:function(e){var t=this;Object(s["g"])({id:e}).then((function(e){200===e.code&&(t.unqualifiedHandlerFiles=t.HaveJson(e.data.unqualifiedHandlerFiles))}))},handleDown:function(e){var t=this;Object(s["d"])({id:e.id}).then((function(r){t.$download.saveAs(r.data.fileUrl,e.fileName)})).catch((function(e){}))},handlunPass:function(){var e=this;this.$refs["unPassForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.unPassForm.unqualifiedHandlerFiles.forEach((function(e){delete e.orderBy})),e.handlunPassLoading=!0,Object(s["b"])(e.unPassForm).then((function(t){200===t.code&&(e.$message.success("提交成功"),e.$emit("resetForm")),e.handlunPassLoading=!1}))}))},getUnpassUrl:function(e,t,r){200==e.code&&(this.$message.success("上传成功"),this.unPassForm.unqualifiedHandlerFiles.push(e.data))},handleRemoveFile:function(e){var t=this.unPassForm.unqualifiedHandlerFiles.findIndex((function(t){return t===e.response.data}));t>-1&&this.unPassForm.unqualifiedHandlerFiles.splice(t,1)},beforeUpload:function(e){return e.size>10485760?(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1):(this.upLoading=!0,!0)},onError:function(e,t,r){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},getClassificationOptions:function(){var e=this;this.getDicts("categories_no_conformities").then((function(t){e.classificationOptions=e.dictToValue(t.data)}))},getOffGradeAscriptionOptions:function(){var e=this;this.getDicts("attribution_no_conformities").then((function(t){e.offGradeAscriptionOptions=e.dictToValue(t.data)}))}},computed:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["nickName"])),{},{action2:function(){return this.javaApi+"/unqualifiedHandler/uploadFileByUnqualified"}})},c=o,u=(r("7bd8"),r("2877")),d=Object(u["a"])(c,a,n,!1,null,"438d04df",null);t["default"]=d.exports},"6f3e":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("d9e2"),r("d3b7"),r("3ca3"),r("ddb0");var a=r("53ca");function n(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(Object(a["a"])(e)+" is not iterable")}},"7bd8":function(e,t,r){"use strict";r("f617")},"963c":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("ecd6"),n=r.n(a);function i(){return n()('(function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/Xindao-lims/",t(t.s="963c")})({"963c":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var big_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("9dcd"),big_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(big_js__WEBPACK_IMPORTED_MODULE_0__);let code="",tableList=null,excelMethodList=[],comparisonList=[],currentSample={},PROJECT="",bushing="",result={method:"",value:null},modelType="",param=null,currentTable="",getDataTypeId=null,currentInsItem=null;function changeInput(m,code){let str=code.split("-"),r=str[1],c=str[2],id=str[0],pId=str[3];var list=[];for(let e in tableList)if(tableList[e].templateId==id){list=tableList[e].arr;break}let isToExponential="",list2=[],isPoint="",inputType=null,currentInsItemId="",isSave="true";const index=excelMethodList.findIndex(e=>e.r==r);excelMethodList.forEach(item=>{if(inputType=item.valueList&&item.valueList.length>0&&item.valueList.find(e=>e.r==r&&e.c==c),item.valueList&&item.valueList.length>0&&item.valueList.find(e=>e.r==r&&e.c==c)){isSave="false";var comValue={};if(item.valueList.forEach(e=>{list.forEach(r=>{r[0].r==e.r&&r.forEach(r=>{if(r.c==e.c){var t="";for(var n in comparisonList)if(r.c==comparisonList[n].value){t=comparisonList[n].label;break}if(list2.push(r.v.v),1!=getInspectionValueType(item.i)||isNaN(parseFloat(r.v.v)))comValue[t+(r.r+1)]=r.v.v;else{let e=String(r.v.v);e.includes("/")?comValue[t+(r.r+1)]=r.v.v:comValue[t+(r.r+1)]=parseFloat(r.v.v)}}})})}),void 0!=item.v.ps&&"结论"==item.v.ps.value)try{if(currentSample.insProduct.find(e=>e.id==item.i)){let ask=currentSample.insProduct.find(e=>e.id==item.i).ask?currentSample.insProduct.find(e=>e.id==item.i).ask.split("&"):null,res=Object.values(comValue)[0];"string"==typeof res&&res.includes(">")&&(res=res.replace(">","")),"string"==typeof res&&res.includes("≤")&&(res=res.replace("≤","")),"string"==typeof res&&res.includes("≥")&&(res=res.replace("≥","")),"string"==typeof res&&res.includes("<")&&(res=res.replace("<","")),"string"==typeof res&&res.includes("＞")&&(res=res.replace("＞","")),"string"==typeof res&&res.includes("＜")&&(res=res.replace("＜","")),"string"!=typeof res||"断裂"!==res&&"脆化"!==res&&"断裂脆化"!==res||(item.v.v=0,list.forEach(e=>{if(e[0].r==item.r)for(let r=0;r<e.length;r++)if(e[r].c==item.c){e[r].v.v=0;break}}));let comp=[];""===res||null===res||void 0===res||"Infinity"===res?(item.v.v=null,list.forEach(e=>{if(e[0].r==item.r)for(let r=0;r<e.length;r++)if(e[r].c==item.c){e[r].v.v=null;break}})):null==ask||"-"==ask[0]||"/"==ask[0]||"—"==ask[0]?(item.v.v=3,list.forEach(e=>{if(e[0].r==item.r)for(let r=0;r<e.length;r++)if(e[r].c==item.c){e[r].v.v=3;break}})):(ask&&(comp=ask.map((m,i)=>{if(m.includes("=")){let str=handleFraction(m.split("=")[1]);return"string"==typeof res&&"string"==typeof str?res.includes("/")?m.includes("/")?eval(res)==eval(str):handleMoreParam(res,m.split("=")[1],"="):res.trim().replace(/[.,。、；：\'";?？“，]/g,"")==str.trim().replace(/[.,。、；：\'";?？“，]/g,""):eval(res)==eval(str)}if(m.includes("≥")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let str=handleFraction(m.split("≥")[1]);return eval(res)>=eval(str)}return handleMoreParam(res,m.split("≥")[1],"≥")}{let str=handleFraction(m.split("≥")[1]);return eval(res)>=eval(str)}}if(m.includes("≤")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let str=handleFraction(m.split("≤")[1]);return eval(res)<=eval(str)}return handleMoreParam(res,m.split("≤")[1],"≤")}{let str=handleFraction(m.split("≤")[1]);return"string"==typeof str&&str.includes("A")&&(str=str.replace("A","")),"string"==typeof str&&str.includes("D")&&(str=str.replace("D","")),"string"==typeof res&&res.includes("A")&&(res=res.replace("A","")),"string"==typeof res&&res.includes("D")&&(res=res.replace("D","")),eval(res)<=eval(str)}}if(m.includes("<")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let str=handleFraction(m.split("<")[1]);return eval(res)<eval(str)}return handleMoreParam(res,m.split("<")[1],"<")}{let str=handleFraction(m.split("<")[1]);return eval(res)<eval(str)}}if(m.includes(">")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let str=handleFraction(m.split(">")[1]);return eval(res)>eval(str)}return handleMoreParam(res,m.split(">")[1],">")}{let str=handleFraction(m.split(">")[1]);return eval(res)>eval(str)}}if(m.includes("~")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let k=m.split("~");return eval(res)>=eval(handleFraction(k[0]))&&eval(res)<=eval(handleFraction(k[1]))}return handleMoreParam(res,m,"~")}{let k=m.split("~");return eval(res)>=eval(handleFraction(k[0]))&&eval(res)<=eval(handleFraction(k[1]))}}if(m.includes("-")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let k=m.split("-");return eval(res)>=eval(handleFraction(k[0]))&&eval(res)<=eval(handleFraction(k[1]))}return handleMoreParam(res,m,"-")}{let k=m.split("-");return eval(res)>=eval(handleFraction(k[0]))&&eval(res)<=eval(handleFraction(k[1]))}}if(m.includes("±")){if(modelType.includes("φ-")&&0==m.indexOf("±")&&(m=modelType.substring(modelType.indexOf("-")+1)+m),"string"==typeof res&&res.includes("/")){if(m.includes("/")){let k=m.split("±");return eval(res)>=eval(handleFraction(k[0])-handleFraction(k[1]))&&eval(res)<=eval(Number(handleFraction(k[0]))+Number(handleFraction(k[1])))}return handleMoreParam(res,m,"±")}{let k=m.split("±");return eval(res)>=eval(handleFraction(k[0])-handleFraction(k[1]))&&eval(res)<=eval(Number(handleFraction(k[0]))+Number(handleFraction(k[1])))}}if(m.includes("＞")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let str=handleFraction(m.split("＞")[1]);return eval(res)>eval(str)}return handleMoreParam(res,m.split("＞")[1],">")}{let str=handleFraction(m.split("＞")[1]);return eval(res)>eval(str)}}if(m.includes("＜")){if("string"==typeof res&&res.includes("/")){if(m.includes("/")){let str=handleFraction(m.split("＜")[1]);return eval(res)<eval(str)}return handleMoreParam(res,m.split("＜")[1],"<")}{let str=handleFraction(m.split("＜")[1]);return eval(res)<eval(str)}}})),comp.every(e=>e)?(item.v.v=1,list.forEach(e=>{if(e[0].r==item.r)for(let r=0;r<e.length;r++)if(e[r].c==item.c){e[r].v.v=1;break}})):(item.v.v=0,list.forEach(e=>{if(e[0].r==item.r)for(let r=0;r<e.length;r++)if(e[r].c==item.c){e[r].v.v=0;break}})));let getDataType0=!1;item.i==getDataTypeId&&(getDataType0=!0),currentInsItemId=item.i,result={method:"saveInsContext",value:{tableList:tableList,param:getParam(),getDataTypeId:getDataTypeId,currentInsItemId:item.i}},self.postMessage(JSON.stringify(result))}}catch(error){console.log("error---",error)}else{let e="";try{if(1==getInspectionValueType(item.i)){let r=currentSample.insProduct.find(e=>e.id==item.i).tell?currentSample.insProduct.find(e=>e.id==item.i).tell.split("&"):null;isPoint=r&&r.length>0&&"string"==typeof r[0]&&r[0].includes("/")&&"/"!==r[0];const t=currentSample.insProduct.find(e=>e.id==item.i).inspectionItemClass,n=currentSample.insProduct.find(e=>e.id==item.i).inspectionItem,i=currentSample.insProduct.find(e=>e.id==item.i).inspectionItemSubclass;let l=!1,s="";for(var a in comValue)if("string"==typeof comValue[a]&&(comValue[a].includes(">")||comValue[a].includes("≤")||comValue[a].includes("<")||comValue[a].includes("≥")||comValue[a].includes("＜")||comValue[a].includes("＞"))){s=comValue[a].includes(">")?">":comValue[a].includes("≤")?"≤":comValue[a].includes("≥")?"≥":comValue[a].includes("＜")?"＜":comValue[a].includes("＞")?"＞":"<",l=!0;break}if(e=compute(item.v.f.replace(/=/g," "),comValue,isPoint),"密度"==n){const t=""+r,n=t.indexOf(".");if(n>-1){const r=t.length-n-1;e=e.toFixed(r)}}else"外护套机械物理性能"!=t||"在IRM 902矿物油中浸泡后"!=n||"断裂伸长率变化率"!=i&&"抗张强度变化率"!=i?"string"==typeof e&&(e.includes("断裂")||e.includes("脆化"))&&(e+=""):e=Math.round(e).toFixed(0);"邵氏硬度"===n&&r[0].includes("A")&&(e+="A"),"绝缘机械物理性能"===t&&"弯曲性能"===n&&"最小弯曲半径"===i&&r[0].includes("D")&&(e+="D"),l&&(e=s+e);let o=list2.map(e=>e+"");if(isToExponential=o.some(e=>e.includes("e+")||e.includes("e-")),isToExponential){let r=new big_js__WEBPACK_IMPORTED_MODULE_0___default.a(e);e=r.toExponential(1)}}else{let r=[];for(var a in item.valueList.forEach(e=>{r.push({name:`${comparisonList.find(r=>r.value==e.c).label}${e.r+1}`,value:0})}),comValue)r.forEach(e=>{e.name==a&&(e.value=comValue[a])});let t=item.v.f.replace(/=/g," ");r.forEach(e=>{t=t.replace(e.name,e.value)}),e=t}}catch(error){console.log("error---",error)}try{list.forEach(r=>{if(r[0].r==item.r&&""!==e)for(var t in r)if(r[t].c==item.c){try{if(0==e)r[t].v.v=0;else if(r[t].v.ct&&r[t].v.ct.fa&&"string"==typeof r[t].v.ct.fa&&r[t].v.ct.fa.includes(".")){let n=0,i=r[t].v.ct.fa.split(".")[1];n=i.length,r[t].v.v=e?Number(e).toFixed(n):e}else if("string"==typeof e&&(e.includes("e+")||e.includes("e-")))r[t].v.v=e;else{const n=currentSample.insProduct.find(e=>e.id==item.i).inspectionItem;if("铜线电阻率ρ20最大值"==n){let n=parseFloat(Number(e).toFixed(5));r[t].v.v=isNaN(n)?e:n}else{let n=parseFloat(Number(e).toFixed(3));r[t].v.v=isNaN(n)?e:n}}}catch(error){r[t].v.v=e,console.log("error---",error)}break}}),changeInput(e,`${id}-${item.r}-${item.c}-${pId}`),currentInsItemId=item.i}catch(error){console.log("error---",error)}}}}),(-1===index||void 0===inputType&&"true"===isSave)&&(result={method:"saveInsContext",value:{tableList:tableList,param:getParam(),getDataTypeId:getDataTypeId,currentInsItemId:currentInsItemId}},self.postMessage(JSON.stringify(result))),result={method:"tableList",value:tableList},self.postMessage(JSON.stringify(result));try{result={method:"getCurrentInsProduct",value:pId},self.postMessage(JSON.stringify(result))}catch(error){console.log("error---",error)}}function getInspectionValueType(e){for(var r in currentSample.insProduct)if(currentSample.insProduct[r].id==e)return currentSample.insProduct[r].inspectionValueType}function handleFraction(str){if(str&&"string"==typeof str&&str.includes("/"))return eval(str.split("/")[0]/str.split("/")[1]);if(str&&"string"==typeof str&&str.includes("*")&&str.includes("^")){const e=str.split("*"),r=e[1].split("^");let t=new big_js__WEBPACK_IMPORTED_MODULE_0___default.a(r[0]),n=new big_js__WEBPACK_IMPORTED_MODULE_0___default.a(r[1]),i=Math.pow(t,n);return e[0]*i}return str}function handleMoreParam(res,str,comp){let arr=res.split("/"),arr0=arr.every(item=>{switch(comp){case">":return item>handleFraction(str);case"<":return item<handleFraction(str);case"=":return item==handleFraction(str);case"≥":return item>=handleFraction(str);case"≤":return item<=handleFraction(str);case"±":let k=str.split("±");return item>=eval(handleFraction(k[0])-handleFraction(k[1]))&&item<=eval(Number(handleFraction(k[0]))+Number(handleFraction(k[1])));case"~":let j=str.split("~");return item>=eval(handleFraction(j[0]))&&item<=eval(handleFraction(j[1]));case"-":let o=str.split("-");return item>=eval(handleFraction(o[0]))&&item<=eval(handleFraction(o[1]))}});return!!arr0}function getParam(){return tableList[0].arr.forEach(e=>{e.forEach(e=>{param[e.i]&&(param[e.i].insValue=[],param[e.i].comValue=[],param[e.i].equipValue=[],param[e.i].equipName=[],param[e.i].resValue=null,param[e.i].insResult=null)})}),tableList[0].arr.forEach(e=>{e.forEach(e=>{void 0!=e.v.ps&&"string"==typeof e.v.ps.value&&e.v.ps.value.includes("检验值")&&e.i&&e.v.v&&param[e.i].insValue.push(e),void 0!=e.v.ps&&"计算值"===e.v.ps.value&&e.i&&e.v.v&&e.valueList&&e.valueList.length>0&&param[e.i].comValue.push(e),void 0!=e.v.ps&&"设备编码"===e.v.ps.value&&e.i&&e.v&&param[e.i].equipValue.push(e),void 0!=e.v.ps&&"设备名称"===e.v.ps.value&&e.i&&e.v&&param[e.i].equipName.push(e),void 0!=e.v.ps&&"最终值"===e.v.ps.value&&e.i&&e.v&&e.valueList&&e.valueList.length>0&&(param[e.i].resValue=e),void 0!=e.v.ps&&"结论"===e.v.ps.value&&e.i&&(e.v.v||0===e.v.v||"0"===e.v.v)&&"合格"!=e.v.v&&"不合格"!=e.v.v&&(param[e.i].insResult=e)})}),param}function SUM(...e){try{let r=null;return null!=e&&void 0!=e&&"undefined"!=e&&"NaN"!=e&&e.length>0&&e.forEach(e=>{r+=e}),r}catch(r){console.log("error---",r)}}function MAX(...e){try{let r=null;return null!=e&&void 0!=e&&"undefined"!=e&&"NaN"!=e&&e.length>0&&(e=e.filter(e=>null!=e&&""!==e),r=e.length>0?Math.max(...e):null),r}catch(r){console.log("error---",r)}}function IF(...e){try{let r=null;return null!=e&&void 0!=e&&"undefined"!=e&&"NaN"!=e&&e.length>0&&(r=""===e[0]||0==e[0]||" "===e[0]?e[1]:e[0]),r}catch(r){console.log("IFerror---",r)}}function MIN(...e){try{let r=null;return null!=e&&void 0!=e&&"undefined"!=e&&"NaN"!=e&&e.length>0&&(e=e.filter(e=>null!=e&&""!==e),e.length>0&&(r=Math.min(...e))),r}catch(r){console.log("error---",r)}}function AVERAGE(...e){try{let r=null,t=[];return null!=e&&void 0!=e&&"undefined"!=e&&"NaN"!=e&&e.length>0?(t=e.filter(e=>null!==e&&""!==e&&void 0!=e),t.forEach(e=>{r+=e}),t.length>0?r/t.length:null):null}catch(r){console.log("error---",r)}}function INT(e){try{return Math.round(e)}catch(r){console.log("error---",r)}}function ABS(e){try{return Math.abs(e)}catch(r){console.log("error---",r)}}function MEDIAN(...e){try{let r=[];if(e&&e.length>0){r=e.filter(e=>null!=e&&""!==e);const t=r.sort((e,r)=>e-r),n=Math.floor(t.length/2);return r.length>0?t.length%2===1?t[n]:(t[n-1]+t[n])/2:null}return null}catch(r){console.log("error---",r)}}function CalculatePower(e){try{if(e&&e.includes("^")){let r=e.split("^");return r&&r.length>1?Math.pow(r[0],r[1]):null}}catch(r){console.log("error---",r)}}function PI(){try{return 3.1415926}catch(e){console.log("error---",e)}}function LOG(...e){try{let r=null;return null!=e&&void 0!=e&&"undefined"!=e&&"NaN"!=e&&e.length>0&&(e=e.filter(e=>null!=e&&""!==e),e.length>0&&(r=Math.log(e[0]))),r}catch(r){console.log("error---",r)}}function getColumnNameFromId(e){try{Array.isArray(e)||(e=e.split("-"));var r=e[0],t="";return r>701?(t+=String.fromCharCode(64+parseInt(r/676)),t+=String.fromCharCode(64+parseInt(r%676/26))):r>25&&(t+=String.fromCharCode(64+parseInt(r/26))),t+=String.fromCharCode(65+r%26),t+(parseInt(e[1])+1)}catch(n){console.log("error",n)}}function getIdFromColumnName(e,r){try{var t=/^[a-zA-Z]+/.exec(e);if(t){for(var n=0,i=0;i<t[0].length;i++)n+=parseInt(t[0].charCodeAt(i)-64)*Math.pow(26,t[0].length-1-i);n--,n<0&&(n=0);var l=parseInt(/[0-9]+$/.exec(e));l>0&&l--,e=1==r?[n,l]:{c:n,r:l}}return e}catch(s){console.log("error",s)}}function changeParameter(e){try{let r=getABCList(e),t=[];return r.forEach(e=>{if(e.includes(":")){let r=getIdFromColumnName(e.split(":")[0]).r,n=getIdFromColumnName(e.split(":")[0]).c,i=getIdFromColumnName(e.split(":")[1]).r,l=getIdFromColumnName(e.split(":")[1]).c;for(let e=Number(r);e<=Number(i);e++)for(let r=Number(n);r<=Number(l);r++)t.push({r:e,c:r})}else t.push(getIdFromColumnName(e))}),t}catch(r){console.log("error",r)}}function getABCList(e){try{let r=/[=\\+\\-\\*\\%\\(\\)\\/\\^\\s]/g,t=["SUM","MAX","MIN","AVERAGE","ABS","PI","INT","IF","LOG"];e=e.replace(r,",").replace(new RegExp(\'"&\',"g"),"").replace(new RegExp(\'&"\',"g"),""),t.forEach(r=>{e=e.replace(new RegExp(r,"g"),",")});let n=e.split(",").filter(e=>e&&/[a-zA-Z]/.test(e)&&"undefined"!=e&&"null"!=e);return n}catch(r){console.log("error",r)}}function getAllCell(e){try{let r=changeParameter(e),t={};return r.forEach(e=>{t[getColumnNameFromId(e.c+"-"+e.r)]=null}),t}catch(r){console.log("error",r)}}function compute(f,comValue,isPoint){try{let str=f,arr=getAllCell(f);for(var a in comValue)"string"==typeof comValue[a]&&comValue[a].includes(">")&&(comValue[a]=comValue[a].replace(">","")),"string"==typeof comValue[a]&&comValue[a].includes("≤")&&(comValue[a]=comValue[a].replace("≤","")),"string"==typeof comValue[a]&&comValue[a].includes("≥")&&(comValue[a]=comValue[a].replace("≥","")),"string"==typeof comValue[a]&&comValue[a].includes("<")&&(comValue[a]=comValue[a].replace("<","")),"string"==typeof comValue[a]&&comValue[a].includes("＜")&&(comValue[a]=comValue[a].replace("＜","")),"string"==typeof comValue[a]&&comValue[a].includes("＞")&&(comValue[a]=comValue[a].replace("＞","")),"undefined"!==comValue[a]&&"null"!==comValue[a]&&void 0!==comValue[a]&&("string"==typeof comValue[a]&&comValue[a].includes("^")?arr[a]=CalculatePower(comValue[a]):arr[a]=comValue[a]);let arr0=getABCList(f),obj={};for(var a in arr0.forEach(e=>{if(e.includes(":")){let r=[],t=getIdFromColumnName(e.split(":")[0]).r,n=getIdFromColumnName(e.split(":")[0]).c,i=getIdFromColumnName(e.split(":")[1]).r,l=getIdFromColumnName(e.split(":")[1]).c;for(let e=Number(t);e<=Number(i);e++)for(let t=Number(n);t<=Number(l);t++)r.push({r:e,c:t});let s=[];r.forEach(e=>{s.push(getColumnNameFromId(e.c+"-"+e.r))}),obj[e.split(":").join("-")]=s.join(",")}else obj[e]=e}),str=str.replace(new RegExp(":","g"),"-"),obj)str=str.replace(new RegExp(a,"g"),obj[a]);for(var a in arr)str=str.replace(new RegExp(a,"g"),arr[a]);if(str.includes(",,")&&(str=str.replace(new RegExp(",,","g"),",")),str.includes(",,")&&(str=str.replace(new RegExp(",,","g"),",")),str.includes(",,")&&(str=str.replace(new RegExp(",,","g"),",")),str.includes(",,")&&(str=str.replace(new RegExp(",,","g"),",")),str.includes(",,")&&(str=str.replace(new RegExp(",,","g"),",")),str.includes(\'&"/"&\'))return str.replace(new RegExp(\'&"/"&\',"g"),"/").replace(new RegExp("//","g"),"");if(isPoint)return str.replace("ABS","").replace(/\\(|\\)/g,"");if(str.includes("IF")){str=str.replace("IF","").replace(/\\(|\\)/g,"");const e=str.split(",");" "!==e[0]&&""!==e[0]||(e[0]=0)," "!==e[2]&&""!==e[2]||(e[2]=0);const r=e.join(",");str="IF("+r+")"}if(str.includes("断裂")||str.includes("脆化")){const e=str.replace(/[^\\u4e00-\\u9fa5]/g,"");if(e.includes("断裂")&&!e.includes("脆化"))return"断裂";if(!e.includes("断裂")&&e.includes("脆化"))return"脆化";if(e.includes("断裂")&&e.includes("脆化"))return"断裂脆化"}return eval(str)}catch(error){console.log("error",error)}}self.onmessage=function(e){const r=JSON.parse(e.data);if(currentTable!=r.currentTable&&(tableList=r.tableList),currentTable=r.currentTable,r.type&&"saveData"==r.type)return tableList=r.tableList,void(param=r.param);if(r.bushing&&r.bushing!=bushing&&"saveData"==r.type)return tableList=r.tableList,param=r.param,void(bushing=r.bushing);if(modelType=r.modelType,code=r.code,getDataTypeId=r.getDataTypeId?r.getDataTypeId:null,tableList){let e=code.split("-"),t=e[1],n=e[2];tableList[0].arr.forEach((e,i)=>{e.forEach((e,l)=>{e.c==n&&e.r==t&&(tableList[0].arr[i]=r.tableList[0].arr[i])})})}else tableList=r.tableList;if(param){let e=code.split("-"),t=e[3];param[t]=r.param[t]}else param=r.param;r.currentInsItem&&(currentInsItem=r.currentInsItem),excelMethodList=JSON.parse(JSON.stringify(r.excelMethodList)),comparisonList=JSON.parse(JSON.stringify(r.comparisonList)),currentSample=JSON.parse(JSON.stringify(r.currentSample)),PROJECT=r.PROJECT,changeInput("",code)}},"9dcd":function(e,r,t){var n;(function(i){"use strict";var l,s=20,a=1,o=1e6,c=1e6,u=-7,f=21,m=!1,p="[big.js] ",d=p+"Invalid ",h=d+"decimal places",v=d+"rounding mode",g=p+"Division by zero",y={},b=void 0,E=/^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;function I(){function e(r){var t=this;if(!(t instanceof e))return r===b?I():new e(r);if(r instanceof e)t.s=r.s,t.e=r.e,t.c=r.c.slice();else{if("string"!==typeof r){if(!0===e.strict&&"bigint"!==typeof r)throw TypeError(d+"value");r=0===r&&1/r<0?"-0":String(r)}_(t,r)}t.constructor=e}return e.prototype=y,e.DP=s,e.RM=a,e.NE=u,e.PE=f,e.strict=m,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function _(e,r){var t,n,i;if(!E.test(r))throw Error(d+"number");for(e.s="-"==r.charAt(0)?(r=r.slice(1),-1):1,(t=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(t<0&&(t=n),t+=+r.slice(n+1),r=r.substring(0,n)):t<0&&(t=r.length),i=r.length,n=0;n<i&&"0"==r.charAt(n);)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&"0"==r.charAt(--i););for(e.e=t-n-1,e.c=[],t=0;n<=i;)e.c[t++]=+r.charAt(n++)}return e}function N(e,r,t,n){var i=e.c;if(t===b&&(t=e.constructor.RM),0!==t&&1!==t&&2!==t&&3!==t)throw Error(v);if(r<1)n=3===t&&(n||!!i[0])||0===r&&(1===t&&i[0]>=5||2===t&&(i[0]>5||5===i[0]&&(n||i[1]!==b))),i.length=1,n?(e.e=e.e-r+1,i[0]=1):i[0]=e.e=0;else if(r<i.length){if(n=1===t&&i[r]>=5||2===t&&(i[r]>5||5===i[r]&&(n||i[r+1]!==b||1&i[r-1]))||3===t&&(n||!!i[0]),i.length=r,n)for(;++i[--r]>9;)if(i[r]=0,0===r){++e.e,i.unshift(1);break}for(r=i.length;!i[--r];)i.pop()}return e}function w(e,r,t){var n=e.e,i=e.c.join(""),l=i.length;if(r)i=i.charAt(0)+(l>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>l)for(n-=l;n--;)i+="0";else n<l&&(i=i.slice(0,n)+"."+i.slice(n));else l>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&t?"-"+i:i}y.abs=function(){var e=new this.constructor(this);return e.s=1,e},y.cmp=function(e){var r,t=this,n=t.c,i=(e=new t.constructor(e)).c,l=t.s,s=e.s,a=t.e,o=e.e;if(!n[0]||!i[0])return n[0]?l:i[0]?-s:0;if(l!=s)return l;if(r=l<0,a!=o)return a>o^r?1:-1;for(s=(a=n.length)<(o=i.length)?a:o,l=-1;++l<s;)if(n[l]!=i[l])return n[l]>i[l]^r?1:-1;return a==o?0:a>o^r?1:-1},y.div=function(e){var r=this,t=r.constructor,n=r.c,i=(e=new t(e)).c,l=r.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>o)throw Error(h);if(!i[0])throw Error(g);if(!n[0])return e.s=l,e.c=[e.e=0],e;var a,c,u,f,m,p=i.slice(),d=a=i.length,v=n.length,y=n.slice(0,a),E=y.length,I=e,_=I.c=[],w=0,F=s+(I.e=r.e-e.e)+1;for(I.s=l,l=F<0?0:F,p.unshift(0);E++<a;)y.push(0);do{for(u=0;u<10;u++){if(a!=(E=y.length))f=a>E?1:-1;else for(m=-1,f=0;++m<a;)if(i[m]!=y[m]){f=i[m]>y[m]?1:-1;break}if(!(f<0))break;for(c=E==a?i:p;E;){if(y[--E]<c[E]){for(m=E;m&&!y[--m];)y[m]=9;--y[m],y[E]+=10}y[E]-=c[E]}for(;!y[0];)y.shift()}_[w++]=f?u:++u,y[0]&&f?y[E]=n[d]||0:y=[n[d]]}while((d++<v||y[0]!==b)&&l--);return _[0]||1==w||(_.shift(),I.e--,F--),w>F&&N(I,F,t.RM,y[0]!==b),I},y.eq=function(e){return 0===this.cmp(e)},y.gt=function(e){return this.cmp(e)>0},y.gte=function(e){return this.cmp(e)>-1},y.lt=function(e){return this.cmp(e)<0},y.lte=function(e){return this.cmp(e)<1},y.minus=y.sub=function(e){var r,t,n,i,l=this,s=l.constructor,a=l.s,o=(e=new s(e)).s;if(a!=o)return e.s=-o,l.plus(e);var c=l.c.slice(),u=l.e,f=e.c,m=e.e;if(!c[0]||!f[0])return f[0]?e.s=-o:c[0]?e=new s(l):e.s=1,e;if(a=u-m){for((i=a<0)?(a=-a,n=c):(m=u,n=f),n.reverse(),o=a;o--;)n.push(0);n.reverse()}else for(t=((i=c.length<f.length)?c:f).length,a=o=0;o<t;o++)if(c[o]!=f[o]){i=c[o]<f[o];break}if(i&&(n=c,c=f,f=n,e.s=-e.s),(o=(t=f.length)-(r=c.length))>0)for(;o--;)c[r++]=0;for(o=r;t>a;){if(c[--t]<f[t]){for(r=t;r&&!c[--r];)c[r]=9;--c[r],c[t]+=10}c[t]-=f[t]}for(;0===c[--o];)c.pop();for(;0===c[0];)c.shift(),--m;return c[0]||(e.s=1,c=[m=0]),e.c=c,e.e=m,e},y.mod=function(e){var r,t=this,n=t.constructor,i=t.s,l=(e=new n(e)).s;if(!e.c[0])throw Error(g);return t.s=e.s=1,r=1==e.cmp(t),t.s=i,e.s=l,r?new n(t):(i=n.DP,l=n.RM,n.DP=n.RM=0,t=t.div(e),n.DP=i,n.RM=l,this.minus(t.times(e)))},y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},y.plus=y.add=function(e){var r,t,n,i=this,l=i.constructor;if(e=new l(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var s=i.e,a=i.c,o=e.e,c=e.c;if(!a[0]||!c[0])return c[0]||(a[0]?e=new l(i):e.s=i.s),e;if(a=a.slice(),r=s-o){for(r>0?(o=s,n=c):(r=-r,n=a),n.reverse();r--;)n.push(0);n.reverse()}for(a.length-c.length<0&&(n=c,c=a,a=n),r=c.length,t=0;r;a[r]%=10)t=(a[--r]=a[r]+c[r]+t)/10|0;for(t&&(a.unshift(t),++o),r=a.length;0===a[--r];)a.pop();return e.c=a,e.e=o,e},y.pow=function(e){var r=this,t=new r.constructor("1"),n=t,i=e<0;if(e!==~~e||e<-c||e>c)throw Error(d+"exponent");for(i&&(e=-e);;){if(1&e&&(n=n.times(r)),e>>=1,!e)break;r=r.times(r)}return i?t.div(n):n},y.prec=function(e,r){if(e!==~~e||e<1||e>o)throw Error(d+"precision");return N(new this.constructor(this),e,r)},y.round=function(e,r){if(e===b)e=0;else if(e!==~~e||e<-o||e>o)throw Error(h);return N(new this.constructor(this),e+this.e+1,r)},y.sqrt=function(){var e,r,t,n=this,i=n.constructor,l=n.s,s=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(l<0)throw Error(p+"No square root");l=Math.sqrt(+w(n,!0,!0)),0===l||l===1/0?(r=n.c.join(""),r.length+s&1||(r+="0"),l=Math.sqrt(r),s=((s+1)/2|0)-(s<0||1&s),e=new i((l==1/0?"5e":(l=l.toExponential()).slice(0,l.indexOf("e")+1))+s)):e=new i(l+""),s=e.e+(i.DP+=4);do{t=e,e=a.times(t.plus(n.div(t)))}while(t.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return N(e,(i.DP-=4)+e.e+1,i.RM)},y.times=y.mul=function(e){var r,t=this,n=t.constructor,i=t.c,l=(e=new n(e)).c,s=i.length,a=l.length,o=t.e,c=e.e;if(e.s=t.s==e.s?1:-1,!i[0]||!l[0])return e.c=[e.e=0],e;for(e.e=o+c,s<a&&(r=i,i=l,l=r,c=s,s=a,a=c),r=new Array(c=s+a);c--;)r[c]=0;for(o=a;o--;){for(a=0,c=s+o;c>o;)a=r[c]+l[o]*i[c-o-1]+a,r[c--]=a%10,a=a/10|0;r[c]=a}for(a?++e.e:r.shift(),o=r.length;!r[--o];)r.pop();return e.c=r,e},y.toExponential=function(e,r){var t=this,n=t.c[0];if(e!==b){if(e!==~~e||e<0||e>o)throw Error(h);for(t=N(new t.constructor(t),++e,r);t.c.length<e;)t.c.push(0)}return w(t,!0,!!n)},y.toFixed=function(e,r){var t=this,n=t.c[0];if(e!==b){if(e!==~~e||e<0||e>o)throw Error(h);for(t=N(new t.constructor(t),e+t.e+1,r),e=e+t.e+1;t.c.length<e;)t.c.push(0)}return w(t,!1,!!n)},y.toJSON=y.toString=function(){var e=this,r=e.constructor;return w(e,e.e<=r.NE||e.e>=r.PE,!!e.c[0])},y.toNumber=function(){var e=+w(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(p+"Imprecise conversion");return e},y.toPrecision=function(e,r){var t=this,n=t.constructor,i=t.c[0];if(e!==b){if(e!==~~e||e<1||e>o)throw Error(d+"precision");for(t=N(new n(t),e,r);t.c.length<e;)t.c.push(0)}return w(t,e<=t.e||t.e<=n.NE||t.e>=n.PE,!!i)},y.valueOf=function(){var e=this,r=e.constructor;if(!0===r.strict)throw Error(p+"valueOf disallowed");return w(e,e.e<=r.NE||e.e>=r.PE,!0)},l=I(),l["default"]=l.Big=l,n=function(){return l}.call(r,t,r,e),void 0===n||(e.exports=n)})()}});',"Worker",void 0,r.p+"InspectionWorker.worker.f16e7b051fa4644dc5d4.worker.js")}},"9eb6":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("ecd6"),n=r.n(a);function i(){return n()('(function(e){var t={};function l(v){if(t[v])return t[v].exports;var u=t[v]={i:v,l:!1,exports:{}};return e[v].call(u.exports,u,u.exports,l),u.l=!0,u.exports}l.m=e,l.c=t,l.d=function(e,t,v){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:v})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var v=Object.create(null);if(l.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)l.d(v,u,function(t){return e[t]}.bind(null,u));return v},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/Xindao-lims/",l(l.s="9eb6")})({"9eb6":function(e,t){let l=null,v=null,u={method:"",value:null},n=[];function a(){v.forEach((e,t)=>{let a=0,s="";e.forEach(e=>{if(e.v.ps&&("检验子项"==e.v.ps.value||"检验项"==e.v.ps.value||"检验项分类"==e.v.ps.value)&&(e.v.ps&&"检验项分类"==e.v.ps.value&&0==a&&(a++,s=e.v.v+","),e.v.ps&&"检验项"==e.v.ps.value&&(1==a?(s=s+e.v.v+",",a++):(s=e.v.v+",",a++)),e.v.ps&&"检验子项"==e.v.ps.value&&(s+=e.v.v),l[s])){let e=0;v[t].forEach(t=>{t.v.ps&&t.v.ps.value&&"string"==typeof t.v.ps.value&&t.v.ps.value.includes("检验值")&&e++}),v[t].forEach((t,a)=>{if(t.v.ps&&t.v.ps.value&&"string"==typeof t.v.ps.value&&t.v.ps.value.includes("检验值")){let a=t.v.ps.value.split("值");if(Array.isArray(l[s].value)){for(let e=0;e<l[s].value.length;e++)if(e+1==a[1]){n.push(t.i);let a=0;if(t.v.ct&&t.v.ct.fa&&"string"==typeof t.v.ct.fa&&t.v.ct.fa.includes(".")){let v=t.v.ct.fa.split(".")[1];a=v.length,t.v.v=l[s].value[e]?Number(l[s].value[e]).toFixed(a):l[s].value[e]}else t.v.v=l[s].value[e];u={method:"changeInput",value:{list:v,n:t}},self.postMessage(JSON.stringify(u))}}else a[1]==l[s].frequency?(n.push(t.i),setTimeout(()=>{let e=0;if(t.v.ct&&t.v.ct.fa&&"string"==typeof t.v.ct.fa&&t.v.ct.fa.includes(".")){let v=t.v.ct.fa.split(".")[1];e=v.length,t.v.v=l[s].value?Number(l[s].value).toFixed(e):l[s].value}else t.v.v=l[s].value;u={method:"changeInput",value:{list:v,n:t}},self.postMessage(JSON.stringify(u))},2e3)):Number(l[s].frequency)>e&&t.v.ps.value.includes(e)&&(n.push(t.i),setTimeout(()=>{let e=0;if(t.v.ct&&t.v.ct.fa&&"string"==typeof t.v.ct.fa&&t.v.ct.fa.includes(".")){let v=t.v.ct.fa.split(".")[1];e=v.length,t.v.v=l[s].value?Number(l[s].value).toFixed(e):l[s].value}else t.v.v=l[s].value;u={method:"changeInput",value:{list:v,n:t}},self.postMessage(JSON.stringify(u))},2e3))}})}})})}self.onmessage=function(e){const t=JSON.parse(e.data);l=t.dataAcquisitionInfo,v=t.list,n=[],a()}}});',"Worker",void 0,r.p+"DataWorker.worker.c147e2bac07c7d32664c.worker.js")}},addb:function(e,t,r){"use strict";var a=r("f36a"),n=Math.floor,i=function(e,t){var r=e.length;if(r<8){var s,l,o=1;while(o<r){l=o,s=e[o];while(l&&t(e[l-1],s)>0)e[l]=e[--l];l!==o++&&(e[l]=s)}}else{var c=n(r/2),u=i(a(e,0,c),t),d=i(a(e,c),t),p=u.length,f=d.length,m=0,v=0;while(m<p||v<f)e[m+v]=m<p&&v<f?t(u[m],d[v])<=0?u[m++]:d[v++]:m<p?u[m++]:d[v++]}return e};e.exports=i},b3a3:function(e,t,r){"use strict";r("fa86")},b558:function(e,t,r){"use strict";r.d(t,"v",(function(){return n})),r.d(t,"A",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"z",(function(){return l})),r.d(t,"y",(function(){return o})),r.d(t,"w",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"n",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"u",(function(){return m})),r.d(t,"g",(function(){return v})),r.d(t,"j",(function(){return _})),r.d(t,"p",(function(){return h})),r.d(t,"o",(function(){return g})),r.d(t,"d",(function(){return b})),r.d(t,"D",(function(){return y})),r.d(t,"l",(function(){return O})),r.d(t,"t",(function(){return P})),r.d(t,"C",(function(){return w})),r.d(t,"b",(function(){return I})),r.d(t,"x",(function(){return E})),r.d(t,"s",(function(){return L})),r.d(t,"h",(function(){return j})),r.d(t,"k",(function(){return T})),r.d(t,"f",(function(){return k})),r.d(t,"r",(function(){return D})),r.d(t,"m",(function(){return x})),r.d(t,"q",(function(){return M})),r.d(t,"B",(function(){return S}));var a=r("b775");function n(e){return Object(a["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function c(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function m(e){return Object(a["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function v(e){return Object(a["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function _(e){return Object(a["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function g(e){return Object(a["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function b(e){return Object(a["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function P(e){return Object(a["a"])({url:"/deviceScope/search",method:"get",params:e})}function w(e){return Object(a["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function I(e){return Object(a["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function E(e){return Object(a["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function L(e){return Object(a["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function T(e){return Object(a["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function k(e){return Object(a["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function D(e){return Object(a["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function x(e){return Object(a["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function M(e){return Object(a["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function S(e){return Object(a["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},c354:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"新增不合格复测",visible:e.isShow,width:"70%","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isShow=t}}},[r("div",{staticClass:"table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"productTable",staticClass:"el-table",staticStyle:{"margin-bottom":"10px"},attrs:{data:e.productList,"max-height":"800px","tooltip-effect":"dark","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""},on:{"selection-change":e.selectProduct,"select-all":e.handleAll}},[r("el-table-column",{attrs:{type:"selection",width:"65"}}),r("el-table-column",{attrs:{prop:"isBinding",label:"类型","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{clearable:"",size:"small"},model:{value:t.row.isBinding,callback:function(r){e.$set(t.row,"isBinding",r)},expression:"scope.row.isBinding"}},[r("el-option",{attrs:{value:1,label:"绑定值"}}),r("el-option",{attrs:{value:0,label:"不合格值"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"inspectionItemClass",label:"检验项分类","min-width":"140","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"inspectionItem",label:"检验项","min-width":"140","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"inspectionItemSubclass",label:"检验项子项","min-width":"140","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"tell",label:"要求描述","min-width":"220px"}}),r("el-table-column",{attrs:{prop:"ask",label:"要求值","min-width":"220px"}}),r("el-table-column",{attrs:{prop:"lastValue",label:"检验结果","min-width":"140","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"insResult",label:"结果判定","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.insResult?r("el-tag",{attrs:{type:"success"}},[e._v("合格")]):e._e(),0===t.row.insResult?r("el-tag",{attrs:{type:"danger"}},[e._v("不合格")]):e._e(),3===t.row.insResult?r("el-tag",{attrs:{type:"info"}},[e._v("不判定")]):e._e()]}}])})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.$emit("resetAddUnPass")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",loading:e.handlePassLoading},on:{click:e.submitHandle}},[e._v("确 定")])],1)])],1)},n=[],i=(r("d81d"),r("14d9"),r("d3b7"),r("0643"),r("4e3e"),r("a573"),r("9a9a"),r("159b"),r("5e56")),s=r("b558"),l={name:"addUnPass",components:{},props:{addUnPassDialog:{type:Boolean,default:function(){return!1}}},data:function(){return{type:"",isShow:this.addUnPassDialog,handlePassLoading:!1,productList:[],productListSelected:[],productIds:[],tableLoading:!1}},mounted:function(){},methods:{getInsOrder:function(e){var t=this;this.tableLoading=!0;try{Object(s["l"])({id:e.id,type:e.type,laboratory:e.laboratory,rawMaterialTag:e.rawMaterialTag,repetitionTag:e.repetitionTag,cableTag:e.cableTag}).then((function(e){200===e.code&&(t.productList=e.data),t.tableLoading=!1}))}catch(r){this.tableLoading=!1}},submitHandle:function(){var e=this;if(0!==this.productListSelected.length){var t=this.productListSelected.some((function(e){return null===e.isBinding||void 0===e.isBinding}));t?this.$message.error("请确保选中的数据都选择了类型！"):this.$confirm("确认提交不合格复测?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handlePass()})).catch((function(){}))}else this.$message.warning("请选择需要复测的检验项")},handlePass:function(){var e=this,t=this.productListSelected.map((function(e){return{id:e.id,isBinding:e.isBinding}}));this.handlePassLoading=!0;try{Object(i["c"])(t).then((function(t){200===t.code&&(e.$message.success("提交成功"),e.$emit("resetAddUnPass")),e.handlePassLoading=!1})).catch((function(t){e.handlePassLoading=!1}))}catch(r){this.handlePassLoading=!1}},selectProduct:function(e){var t=this;this.productListSelected=e,this.productIds=[],e.forEach((function(e){t.productIds.push(e.id)}))},handleAll:function(e){var t=this;this.productListSelected=e,this.productIds=[],e.forEach((function(e){t.productIds.push(e.id)}))}}},o=l,c=r("2877"),u=Object(c["a"])(o,a,n,!1,null,"2781e2c6",null);t["default"]=u.exports},d998:function(e,t,r){"use strict";var a=r("342f");e.exports=/MSIE|Trident/.test(a)},ecd6:function(e,t,r){"use strict";e.exports=function(e,t,r,a){var n=self||window;try{try{var i;try{i=new n.Blob([e])}catch(u){var s=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder;i=new s,i.append(e),i=i.getBlob()}var l=n.URL||n.webkitURL,o=l.createObjectURL(i),c=new n[t](o,r);return l.revokeObjectURL(o),c}catch(u){return new n[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(u){if(!a)throw Error("Inline worker is not supported");return new n[t](a,r)}}},ed71:function(e,t,r){},f617:function(e,t,r){},fa86:function(e,t,r){}}]);