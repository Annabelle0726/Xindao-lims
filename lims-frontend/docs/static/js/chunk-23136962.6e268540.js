(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23136962","chunk-2f60c11b","chunk-731c50a3","chunk-395b9b06","chunk-593d03ed","chunk-0c4b0906"],{"0dde":function(e,t,a){"use strict";a("ffd1")},"0e9a":function(e,t,a){"use strict";var n=a("c14f"),i=a("1da1"),l=(a("c19f"),a("ace4"),a("2c66"),a("249d"),a("40e9"),a("d3b7"),a("ac1f"),a("5319"),a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("986a"),a("1d02"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("6ce5"),a("2834"),a("72f7"),a("4ea1"),a("c343")),s=a("acff"),o=a("2b0e");t["a"]={convertFileToHtml:function(e){return Object(i["a"])(Object(n["a"])().m((function t(){var a,s;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:return a=new XMLHttpRequest,a.open("GET",o["default"].prototype.javaApi+e,!0),a.send(),a.responseType="blob",s=new Promise((function(e,t){a.onload=Object(i["a"])(Object(n["a"])().m((function t(){var s,o,r,c,d;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:if(200!==this.status){t.n=2;break}return s=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),o=new FileReader,o.readAsArrayBuffer(s),r=new Promise((function(e,t){o.onload=Object(i["a"])(Object(n["a"])().m((function t(){var i,s,o;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:return i=a.response,t.n=1,Object(l["convertToHtml"])({arrayBuffer:i});case 1:s=t.v,o=s.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(o);case 2:return t.a(2)}}),t)})))})),c=e,t.n=1,r;case 1:d=t.v,c(d);case 2:return t.a(2)}}),t,this)})))})),t.n=1,s;case 1:return t.a(2,t.v)}}),t)})))()},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.drawImage(a,0,0,a.width,a.height);var i=e.toDataURL("image/png"),l=document.createElement("a"),s=new MouseEvent("click");l.download=t||"photo",l.href=i,l.dispatchEvent(s)},a.src=e},compressBlob:function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(a){t.onload=function(){var n=t.result,i=new Uint8Array(n),l=s["a"].deflate(i),o=new Blob([l],{type:e.type});a(o)}}))}}},"12c8":function(e,t,a){},"14d2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabList,(function(t,n){return a("el-tab-pane",{key:n,staticStyle:{height:"100%"},attrs:{label:t.name,name:t.component}},[e.activeName===t.component?a(t.component,{key:t.component,tag:"component"}):e._e()],1)})),1)],1)},i=[],l=a("157e"),s=a("909b0"),o=a("99c8"),r=a("2078"),c=a("f3cf"),d={name:"DocumentControl",components:{FileList:l["default"],ControlledFileApplication:s["default"],DistributionCollectionRecord:o["default"],FileChangeRequest:r["default"],FileObsoletionRequest:c["default"]},data:function(){return{tabList:[{name:"文件清单",component:"FileList"},{name:"文件受控申请",component:"ControlledFileApplication"},{name:"发放回收记录",component:"DistributionCollectionRecord"},{name:"文件变更申请",component:"FileChangeRequest"},{name:"文件作废申请",component:"FileObsoletionRequest"}],activeName:"FileList"}}},u=d,p=a("2877"),f=Object(p["a"])(u,n,i,!1,null,"965af526",null);t["default"]=f.exports},"157e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"文件名称",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"文件状态",prop:"state"}},[a("el-select",{attrs:{size:"small",clearable:""},on:{change:function(t){return e.refreshTable()}},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.fileState,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),a("div",[a("el-upload",{ref:"upload",attrs:{action:e.action,multiple:!1,accept:".xls,.xlsx",headers:e.uploadHeader,"on-change":e.beforeUpload,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.upLoading}},[e._v("导入")])],1)],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:"上传",visible:e.addDialogVisible,width:"1000px",top:"3vh"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[e.addDialogVisible?a("UpPdfStamp",{ref:"UpPdfStamp",attrs:{isUpFile:!0},on:{uploadPDF:e.uploadPDF,uploadPDFErr:e.uploadPDFErr}}):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.addLoading,expression:"addLoading"}],attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"查看附件",visible:e.lookDialogVisible,width:"800px",top:"5vh",fullscreen:""},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{"max-height":"90vh","overflow-y":"auto"},attrs:{fileUrl:e.javaApi+"/word/"+e.currentInfo.url,currentFile:{}}}):e._e()],1),a("el-dialog",{attrs:{title:e.title,visible:e.addDia,width:"500px"},on:{"update:visible":function(t){e.addDia=t}}},[a("el-form",{ref:"currentInfoForm",attrs:{model:e.currentInfo,rules:e.rules,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"文件编号",prop:"documentCode"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.documentCode,callback:function(t){e.$set(e.currentInfo,"documentCode",t)},expression:"currentInfo.documentCode"}})],1),a("el-form-item",{attrs:{label:"类别",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.currentInfo.type,callback:function(t){e.$set(e.currentInfo,"type",t)},expression:"currentInfo.type"}},e._l(e.fileType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.name,callback:function(t){e.$set(e.currentInfo,"name",t)},expression:"currentInfo.name"}})],1),a("el-form-item",{attrs:{label:"文件版本",prop:"version"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.version,callback:function(t){e.$set(e.currentInfo,"version",t)},expression:"currentInfo.version"}})],1),a("el-form-item",{attrs:{label:"作者",prop:"writer"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.writer,callback:function(t){e.$set(e.currentInfo,"writer",t)},expression:"currentInfo.writer"}})],1),a("el-form-item",{attrs:{label:"生效日期",prop:"effectiveDate"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",size:"small",placeholder:"选择日期"},model:{value:e.currentInfo.effectiveDate,callback:function(t){e.$set(e.currentInfo,"effectiveDate",t)},expression:"currentInfo.effectiveDate"}})],1),a("el-form-item",{attrs:{label:"文件状态",prop:"state"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.currentInfo.state,callback:function(t){e.$set(e.currentInfo,"state",t)},expression:"currentInfo.state"}},e._l(e.fileState,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.uploading,type:"primary"},on:{click:function(t){return e.submitProduct("currentInfoForm")}}},[e._v("确 认")])],1)],1)],1)},i=[],l=a("c14f"),s=a("1da1"),o=a("5530"),r=(a("7db0"),a("d3b7"),a("0643"),a("fffc"),a("132c")),c=a("a408"),d=a("00d5"),u=a("5afa"),p={components:{UpPdfStamp:r["a"],filePreview:c["a"],limsTable:d["a"]},data:function(){var e=this;return{addDialogVisible:!1,lookDialogVisible:!1,addPower:!1,upLoading:!1,addLoading:!1,currentInfo:{},fileType:[],fileState:[],title:"新增",queryParams:{},tableData:[],column:[{label:"文件编号",prop:"documentCode"},{label:"类别",prop:"type",width:"120px",dataType:"tag",formatData:function(t){return e.fileType.find((function(e){return e.value==t}))?e.fileType.find((function(e){return e.value==t})).label:null},formatType:function(t){return e.fileType.find((function(e){return e.value==t}))?e.fileType.find((function(e){return e.value==t})).type:null}},{label:"名称",prop:"name"},{label:"文件版本",prop:"version"},{label:"作者",prop:"writer"},{label:"生效日期",prop:"effectiveDate"},{label:"文件状态",prop:"state",dataType:"tag",formatData:function(t){return e.fileState.find((function(e){return e.value==t}))?e.fileState.find((function(e){return e.value==t})).label:null},formatType:function(t){return e.fileState.find((function(e){return e.value==t}))?e.fileState.find((function(e){return e.value==t})).type:null}},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openAdd("编辑",t)}},{name:"上传",type:"text",clickFun:function(t){e.handleUp(t)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"查看附件",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)}}]}],page:{total:0,size:10,current:0},tableLoading:!1,addDia:!1,rules:{documentCode:[{required:!0,message:"请输入文件编号",trigger:"blur"}]},uploading:!1}},computed:{action:function(){return this.javaApi+"/manageDocumentList/exportManageDocumentList"}},mounted:function(){this.getList(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.queryParams),this.page);delete t.total,Object(u["B"])(Object(o["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},openAdd:function(e,t){this.title=e,this.currentInfo=t||{},this.addDia=!0},handleDown:function(e){if(!e.url)return this.$message.warning("文件未上传");this.$download.saveAs(e.url,e.url)},handleLook:function(e){if(!e.url)return this.$message.warning("文件未上传");this.currentInfo=e,this.lookDialogVisible=!0},handleUp:function(e){this.currentInfo=e,this.addDialogVisible=!0},handleAdd:function(){this.addLoading=!0,this.$refs["UpPdfStamp"].generatePDF()},uploadPDFErr:function(){this.addLoading=!1},beforeUpload:function(e){return!(e.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(e,t,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.refreshTable()):this.$message.error(e.msg)},selectEnumByCategory:function(){var e=this;this.getDicts("document_type").then((function(t){e.fileType=e.dictToValue(t.data)})),this.getDicts("document_state").then((function(t){e.fileState=e.dictToValue(t.data)}))},uploadPDF:function(e,t){var a=this;return Object(s["a"])(Object(l["a"])().m((function n(){var i,s;return Object(l["a"])().w((function(n){while(1)switch(n.n){case 0:return i=new FormData,i.append("file",e,t),i.append("id",a.currentInfo.id),n.p=1,n.n=2,Object(u["C"])(i);case 2:if(s=n.v,a.addLoading=!1,200!=s.code){n.n=3;break}return a.$message({message:"上传成功",type:"success"}),a.addDialogVisible=!1,a.refreshTable(),n.a(2,!0);case 3:return a.$message({message:"上传失败",type:"error"}),n.a(2,!1);case 4:n.n=6;break;case 5:n.p=5,n.v,a.addLoading=!1;case 6:return n.a(2)}}),n,null,[[1,5]])})))()},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["o"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))},submitProduct:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.uploading=!0,Object(u["t"])(t.currentInfo).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.refresh(),t.addDia=!1)})).catch((function(e){t.uploading=!1}))}))}}},f=p,h=(a("4124"),a("2877")),m=Object(h["a"])(f,n,i,!1,null,"2168b535",null);t["default"]=m.exports},1765:function(e,t,a){},"1d09":function(e,t,a){e.exports=a.p+"static/img/综合室.e417bcdf.png"},"1da9":function(e,t,a){e.exports=a.p+"static/img/电力.e5d2178e.png"},"1e7b":function(e,t,a){"use strict";a("12c8")},2078:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"128px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("申请文件编号")]),a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0,e.addInfo={},e.currentFile={},e.title="文件变更申请",e.file=null}}},[e._v("文件变更申请")]),a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleOut}},[e._v("导出")])],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.addDialogVisible,top:"0vh",width:"950px"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}]},[a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[a("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("申请编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.code,callback:function(t){e.$set(e.addInfo,"code",t)},expression:"addInfo.code"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("审批人：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"审核"==e.title,filterable:"",size:"small"},model:{value:e.addInfo.checkUser,callback:function(t){e.$set(e.addInfo,"checkUser",t)},expression:"addInfo.checkUser"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("期望变更时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"审核"==e.title,format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.expectAlterDate,callback:function(t){e.$set(e.addInfo,"expectAlterDate",t)},expression:"addInfo.expectAlterDate"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("实际变更时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"审核"==e.title,format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.actuallyAlterDate,callback:function(t){e.$set(e.addInfo,"actuallyAlterDate",t)},expression:"addInfo.actuallyAlterDate"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("选择文件：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"审核"==e.title,"allow-create":"",clearable:"",filterable:"",size:"small"},on:{change:e.getCurrentFile},model:{value:e.addInfo.alterBeforeCode,callback:function(t){e.$set(e.addInfo,"alterBeforeCode",t)},expression:"addInfo.alterBeforeCode"}},e._l(e.fileList,(function(e){return a("el-option",{key:e.documentCode,attrs:{label:e.title,value:e.documentCode}})})),1)],1)])]),a("el-col",{attrs:{span:24}},[a("h4",{staticClass:"title"},[e._v("当前文件信息")])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("文件编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.currentFile.documentCode,callback:function(t){e.$set(e.currentFile,"documentCode",t)},expression:"currentFile.documentCode"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("文件名称：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.currentFile.name,callback:function(t){e.$set(e.currentFile,"name",t)},expression:"currentFile.name"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("文件版本：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.currentFile.version,callback:function(t){e.$set(e.currentFile,"version",t)},expression:"currentFile.version"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("提交人：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",filterable:"",size:"small"},model:{value:e.currentFile.createUser,callback:function(t){e.$set(e.currentFile,"createUser",t)},expression:"currentFile.createUser"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("提交时间：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.currentFile.createTime,callback:function(t){e.$set(e.currentFile,"createTime",t)},expression:"currentFile.createTime"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("审核时间：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.currentFile.effectiveDate,callback:function(t){e.$set(e.currentFile,"effectiveDate",t)},expression:"currentFile.effectiveDate"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("文件状态：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.currentFile.state,callback:function(t){e.$set(e.currentFile,"state",t)},expression:"currentFile.state"}},e._l(e.fileState,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{attrs:{span:24}},[a("h4",{staticClass:"title"},[e._v("文件变更申请")])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("变更后编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.alterAfterCode,callback:function(t){e.$set(e.addInfo,"alterAfterCode",t)},expression:"addInfo.alterAfterCode"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("变更后名称：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.alterAfterName,callback:function(t){e.$set(e.addInfo,"alterAfterName",t)},expression:"addInfo.alterAfterName"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("前一版本处理：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"审核"==e.title,size:"small"},model:{value:e.addInfo.method,callback:function(t){e.$set(e.addInfo,"method",t)},expression:"addInfo.method"}},[a("el-option",{attrs:{label:"作废",value:"作废"}}),a("el-option",{attrs:{label:"存档不可用",value:"存档不可用"}})],1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:8}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("变更后版本：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.alterAfterVersion,callback:function(t){e.$set(e.addInfo,"alterAfterVersion",t)},expression:"addInfo.alterAfterVersion"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:16}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("变更说明：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"审核"==e.title,rows:2,clearable:"",placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.addInfo.alterNote,callback:function(t){e.$set(e.addInfo,"alterNote",t)},expression:"addInfo.alterNote"}})],1)])]),"审核"!=e.title?a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing",staticStyle:{width:"100%"}},[a("div",{staticClass:"search_label"},[e._v("相关附件：")]),a("div",{staticClass:"search_input"},[e.addDialogVisible?a("el-upload",{staticStyle:{margin:"8px 0 0px 50px"},attrs:{"auto-upload":!1,multiple:!1,"on-change":e.handleChangeUpload,accept:".pdf",action:"#"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传附件")])],1):e._e()],1)])]):e._e(),"审核"==e.title&&e.addDialogVisible?a("UpPdfStamp",{ref:"UpPdfStamp",attrs:{isUpFile:!1},on:{uploadPDF:e.uploadPDF}}):e._e()],1)],1),"审核"!=e.title?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1):a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.noCheckLoading},on:{click:function(t){return e.handleCheckSub("不通过")}}},[e._v("不通过")]),a("el-button",{attrs:{loading:e.checkLoading,type:"primary"},on:{click:function(t){return e.handleCheckSub("通过")}}},[e._v("通 过")])],1)]),a("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.alterAfterUrl}}):e._e()],1)],1)},i=[],l=a("5530"),s=(a("7db0"),a("d81d"),a("14d9"),a("b0c0"),a("d3b7"),a("0643"),a("fffc"),a("4e3e"),a("a573"),a("159b"),a("00d5")),o=a("132c"),r=a("a408"),c=a("b558"),d=a("5afa"),u=a("2f62"),p={components:{limsTable:s["a"],filePreview:r["a"],UpPdfStamp:o["a"]},computed:Object(l["a"])({},Object(u["b"])(["userId"])),data:function(){var e=this;return{title:"文件变更申请",noCheckLoading:!1,checkLoading:!1,addDialogVisible:!1,diaLoading:!1,addInfo:{},addPower:!1,outPower:!1,outLoading:!1,personList:[],fileList:[],currentFile:{},fileState:[],file:null,addLoading:!1,lookDialogVisible:!1,currentInfo:{},type:null,fileName:null,queryParams:{},tableData:[],column:[{label:"申请编号",prop:"code"},{label:"申请人",prop:"createUserName",width:"120px"},{label:"变更说明",prop:"alterNote"},{label:"期望变更时间",prop:"expectAlterDate"},{label:"实际变更时间",prop:"actuallyAlterDate"},{label:"状态",prop:"state",dataType:"tag",formatData:function(e){return e},formatType:function(e){return"通过"==e?"success":"danger"}},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.handleUpdate(t)},disabled:function(e,t){return"通过"==e.state}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(e,t){return"通过"==e.state}},{name:"审核",type:"text",clickFun:function(t){e.handleCheck(t)},disabled:function(t,a){return t.checkUser!=e.userId||"通过"==t.state}},{name:"查看附件",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载附件",type:"text",clickFun:function(t){e.handleDown(t)}}]}],page:{total:0,size:10,current:0},tableLoading:!1}},mounted:function(){this.getList(),this.getAuthorizedPerson(),this.getFileList(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(l["a"])(Object(l["a"])({},this.queryParams),this.page);delete t.total,Object(d["x"])(Object(l["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},handleOut:function(){var e=this;this.outLoading=!0,Object(d["u"])(this.queryParams).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"文件变更记录.xlsx")}))},getAuthorizedPerson:function(){var e=this;Object(c["w"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))},getFileList:function(){var e=this;Object(d["B"])({current:-1,size:-1}).then((function(t){e.fileList=t.data.records.map((function(e){return e.title=e.documentCode+":"+e.name,e}))})).catch((function(e){}))},getCurrentFile:function(e){this.currentFile=this.fileList.find((function(t){return t.documentCode==e})),this.currentFile||(this.currentFile={})},selectEnumByCategory:function(){var e=this;this.getDicts("document_state").then((function(t){e.fileState=e.dictToValue(t.data)}))},handleChangeUpload:function(e,t){this.file=e,this.$set(this.addInfo,"alterAfterName",e.name)},handleAdd:function(){var e=this;if(!this.addInfo.code)return this.$message({type:"error",message:"请输入申请编号"});if(this.addInfo.id){var t=new FormData;this.file&&t.append("file",this.file.raw);var a=this.currentFile,n=a.name,i=a.version;t.append("alterBeforeName",n),t.append("alterBeforeVersion",i);var l=this.addInfo,s=l.code,o=l.checkUser,r=l.expectAlterDate,c=l.actuallyAlterDate,u=l.alterAfterCode,p=l.method,f=l.alterAfterVersion,h=l.alterNote,m=l.alterAfterName,b=l.id;t.append("code",s),t.append("checkUser",o),t.append("expectAlterDate",r),t.append("actuallyAlterDate",c),t.append("alterAfterCode",u),t.append("method",p),t.append("alterAfterVersion",f),t.append("alterNote",h),t.append("alterAfterName",m),t.append("id",b),this.addLoading=!0,Object(d["p"])(t).then((function(t){e.addLoading=!1,200==t.code?(e.$message({type:"success",message:"修改成功"}),e.refreshTable(),e.addDialogVisible=!1):e.$message({type:"error",message:"修改失败"})}))}else{var g=new FormData;for(var v in this.file&&g.append("file",this.file.raw),this.addInfo)g.append(v,this.addInfo[v]);var y=this.currentFile,C=y.name,_=y.version;y.documentCode;g.append("alterBeforeName",C),g.append("alterBeforeVersion",_),this.addLoading=!0,Object(d["a"])(g).then((function(t){e.addLoading=!1,200==t.code?(e.$message({type:"success",message:"添加成功"}),e.refreshTable(),e.addDialogVisible=!1):e.$message({type:"error",message:"添加失败"})}))}},handleUpdate:function(e){this.title="文件变更申请",this.addInfo=this.HaveJson(e);var t=this.addInfo.alterBeforeCode;this.getCurrentFile(t),this.file=null,this.addDialogVisible=!0},handleLook:function(e){this.currentInfo=this.HaveJson(e),this.lookDialogVisible=!0},handleDown:function(e){if(!e.alterAfterUrl)return this.$message.warning("文件未上传");this.$download.saveAs(e.alterAfterUrl,e.alterAfterUrl)},handleCheck:function(e){var t=this;if(this.title="审核",this.fileName=e.alterAfterName,!e.alterAfterUrl)return this.$message.warning("文件未上传");this.addInfo=this.HaveJson(e);var a=this.addInfo.alterBeforeCode;this.getCurrentFile(a),this.addDialogVisible=!0,this.diaLoading=!0,Object(d["f"])({id:e.id}).then((function(a){t.diaLoading=!1;var n=new Blob([a]),i=new File([n],e.name,{type:"application/pdf"});t.$refs.UpPdfStamp.lookFile(i),t.currentInfo=e})).catch((function(e){t.diaLoading=!1,console.log(e)}))},uploadPDF:function(e){var t=this,a=new File([e],this.fileName,{type:"application/pdf"});console.log("file---",a);var n=new FormData;n.append("file",a,this.fileName+".pdf"),n.append("id",this.currentInfo.id),n.append("state",this.type),Object(d["e"])(n).then((function(e){return t.$message({message:"操作成功",type:"success"}),t.addDialogVisible=!1,t.checkLoading=!1,t.noCheckLoading=!1,t.refreshTable(),!0})).catch((function(e){return t.checkLoading=!1,t.noCheckLoading=!1,!1}))},handleCheckSub:function(e){this.type=e,"通过"==e?this.checkLoading=!0:this.noCheckLoading=!0,this.addLoading=!0,this.$refs["UpPdfStamp"].generatePDF()},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["k"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},f=p,h=(a("0dde"),a("2877")),m=Object(h["a"])(f,n,i,!1,null,"e6849472",null);t["default"]=m.exports},"241ce":function(e,t,a){},"2c86":function(e,t,a){e.exports=a.p+"static/img/储能.dc6fe605.png"},"3ab3":function(e,t,a){e.exports=a.p+"static/img/主任.4d96200f.png"},4124:function(e,t,a){"use strict";a("1765")},"5afa":function(e,t,a){"use strict";a.d(t,"C",(function(){return i})),a.d(t,"B",(function(){return l})),a.d(t,"o",(function(){return s})),a.d(t,"t",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"r",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"m",(function(){return p})),a.d(t,"z",(function(){return f})),a.d(t,"y",(function(){return h})),a.d(t,"w",(function(){return m})),a.d(t,"d",(function(){return b})),a.d(t,"s",(function(){return g})),a.d(t,"j",(function(){return v})),a.d(t,"A",(function(){return y})),a.d(t,"n",(function(){return C})),a.d(t,"u",(function(){return _})),a.d(t,"a",(function(){return k})),a.d(t,"p",(function(){return x})),a.d(t,"f",(function(){return D})),a.d(t,"e",(function(){return I})),a.d(t,"k",(function(){return w})),a.d(t,"x",(function(){return O})),a.d(t,"b",(function(){return L})),a.d(t,"q",(function(){return S})),a.d(t,"g",(function(){return j})),a.d(t,"v",(function(){return P})),a.d(t,"l",(function(){return $}));var n=a("b775");function i(e){return Object(n["a"])({url:"/manageDocumentList/uploadFileManageDocumentList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function l(e){return Object(n["a"])({url:"/manageDocumentList/pageManageDocumentList",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/manageDocumentList/delManageDocumentList",method:"delete",params:e})}function o(e){return Object(n["a"])({url:"/manageDocumentList/doManageDocumentList",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/manageDocumentControlled/addManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function c(e){return Object(n["a"])({url:"/manageDocumentControlled/doManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function d(e){return Object(n["a"])({url:"/manageDocumentControlled/checkManageDocumentControlledPdf",method:"get",responseType:"blob",params:e})}function u(e){return Object(n["a"])({url:"/manageDocumentControlled/checkManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function p(e){return Object(n["a"])({url:"/manageDocumentControlled/delManageDocumentControlled",method:"delete",params:e})}function f(e){return Object(n["a"])({url:"/manageDocumentControlled/pageManageDocumentControlled",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/manageDocumentCancel/pageManageDocumentCancel",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/manageDocumentIssueRecycle/exportManageDocumentIssueRecycle",method:"get",responseType:"blob",params:e})}function b(e){return Object(n["a"])({url:"/manageDocumentIssueRecycle/addManageDocumentIssueRecycle",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function g(e){return Object(n["a"])({url:"/manageDocumentIssueRecycle/doManageDocumentIssueRecycle",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/manageDocumentIssueRecycle/checkManageDocumentIssueRecycle",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/manageDocumentIssueRecycle/pageManageDocumentIssueRecycle",method:"get",params:e})}function C(e){return Object(n["a"])({url:"/manageDocumentIssueRecycle/delManageDocumentIssueRecycle",method:"delete",params:e})}function _(e){return Object(n["a"])({url:"/manageDocumentAlter/exportManageDocumentAlter",method:"get",responseType:"blob",params:e})}function k(e){return Object(n["a"])({url:"/manageDocumentAlter/addManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function x(e){return Object(n["a"])({url:"/manageDocumentAlter/doManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function D(e){return Object(n["a"])({url:"/manageDocumentAlter/checkManageDocumentAlterPdf",method:"get",responseType:"blob",params:e})}function I(e){return Object(n["a"])({url:"/manageDocumentAlter/checkManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function w(e){return Object(n["a"])({url:"/manageDocumentAlter/delManageDocumentAlter",method:"delete",params:e})}function O(e){return Object(n["a"])({url:"/manageDocumentAlter/pageManageDocumentAlter",method:"get",params:e})}function L(e){return Object(n["a"])({url:"/manageDocumentCancel/addManageDocumentCancel",method:"post",data:e})}function S(e){return Object(n["a"])({url:"/manageDocumentCancel/doManageDocumentCancel",method:"post",data:e})}function j(e){return Object(n["a"])({url:"/manageDocumentCancel/checkManageDocumentCancel",method:"post",data:e})}function P(e){return Object(n["a"])({url:"/manageDocumentCancel/exportManageDocumentCancel",method:"get",responseType:"blob",params:e})}function $(e){return Object(n["a"])({url:"/manageDocumentCancel/delManageDocumentCancel",method:"delete",params:e})}},7112:function(e,t,a){e.exports=a.p+"static/img/射频.329f22c5.png"},"909b0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[n("span",{staticStyle:{width:"128px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("申请文件编号")]),n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.documentCode,callback:function(t){e.$set(e.queryParams,"documentCode",t)},expression:"queryParams.documentCode"}})],1),n("div",{staticStyle:{"line-height":"30px"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),n("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),n("div",{staticStyle:{"line-height":"30px"}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0,e.addInfo={},e.file=null}}},[e._v("文件受控申请")])],1)]),n("div",{staticClass:"table"},[n("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),n("el-dialog",{attrs:{title:"文件受控申请",visible:e.addDialogVisible,width:"800px",top:"10vh"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[n("el-row",[n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[n("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("申请编号：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addInfo.documentCode,callback:function(t){e.$set(e.addInfo,"documentCode",t)},expression:"addInfo.documentCode"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("责任人：")]),n("div",{staticClass:"search_input"},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:""},model:{value:e.addInfo.dutyUser,callback:function(t){e.$set(e.addInfo,"dutyUser",t)},expression:"addInfo.dutyUser"}},e._l(e.personList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("文件类别：")]),n("div",{staticClass:"search_input"},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.addInfo.type,callback:function(t){e.$set(e.addInfo,"type",t)},expression:"addInfo.type"}},e._l(e.fileType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("文件名称：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addInfo.name,callback:function(t){e.$set(e.addInfo,"name",t)},expression:"addInfo.name"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("文件版本：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addInfo.version,callback:function(t){e.$set(e.addInfo,"version",t)},expression:"addInfo.version"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("上传附件：")]),n("div",{staticClass:"search_input"},[e.addDialogVisible?n("el-upload",{staticStyle:{margin:"8px 0 0px 50px"},attrs:{action:"#","auto-upload":!1,multiple:!1,accept:".pdf","on-change":e.handleChangeUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传附件")])],1):e._e()],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("作者：")]),n("div",{staticClass:"search_input"},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:""},model:{value:e.addInfo.writer,callback:function(t){e.$set(e.addInfo,"writer",t)},expression:"addInfo.writer"}},e._l(e.personList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("提交日期：")]),n("div",{staticClass:"search_input"},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"small",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.submitDate,callback:function(t){e.$set(e.addInfo,"submitDate",t)},expression:"addInfo.submitDate"}})],1)])]),n("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("说明：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:"",type:"textarea",rows:2},model:{value:e.addInfo.instructions,callback:function(t){e.$set(e.addInfo,"instructions",t)},expression:"addInfo.instructions"}})],1)])])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"查看附件",visible:e.lookDialogVisible,width:"800px",top:"5vh",fullscreen:""},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?n("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{fileUrl:e.javaApi+"/word/"+e.currentInfo.url,currentFile:{}}}):e._e()],1),n("el-dialog",{attrs:{title:"审核",visible:e.checkDialogVisible,width:"1000px",top:"5vh"},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[e.checkDialogVisible?n("UpPdfStamp",{ref:"UpPdfStamp",attrs:{isUpFile:!1},on:{uploadPDF:e.uploadPDF}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{loading:e.noCheckLoading},on:{click:function(t){return e.handleCheckSub("不通过")}}},[e._v("不通过")]),n("el-button",{attrs:{type:"primary",loading:e.checkLoading},on:{click:function(t){return e.handleCheckSub("通过")}}},[e._v("通 过")])],1)],1),n("el-dialog",{attrs:{title:"选择受控章",visible:e.checkStampDialogVisible,width:"600px",top:"5vh"},on:{"update:visible":function(t){e.checkStampDialogVisible=t}}},[n("div",{staticClass:"stamp-list"},e._l(e.stampsList,(function(t,i){return n("img",{key:i,staticClass:"stamp",class:{active:e.currentStamp==t},staticStyle:{width:"120px",height:"80px",margin:"6px"},attrs:{src:a("a436")("./"+t+".png"),alt:""},on:{click:function(a){e.currentStamp=t}}})})),0),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.checkStampDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCheck0(e.currentInfo)}}},[e._v("确 定")])],1)])],1)},i=[],l=a("c14f"),s=a("1da1"),o=a("5530"),r=(a("7db0"),a("caad"),a("14d9"),a("b0c0"),a("d3b7"),a("2532"),a("0643"),a("fffc"),a("4e3e"),a("159b"),a("132c")),c=a("a408"),d=a("00d5"),u=a("b558"),p=a("5afa"),f=a("2f62"),h={components:{filePreview:c["a"],UpPdfStamp:r["a"],limsTable:d["a"]},computed:Object(o["a"])({},Object(f["b"])(["nickName"])),data:function(){var e=this;return{upLoading:!1,addPower:!1,addDialogVisible:!1,addLoading:!1,lookDialogVisible:!1,checkDialogVisible:!1,checkStampDialogVisible:!1,addInfo:{},personList:[],fileType:[],file:null,currentInfo:{},checkLoading:!1,noCheckLoading:!1,type:"",stampsList:["主任","质量负责人","技术负责人","综合室","通信","电力","装备","储能","射频"],currentStamp:"主任",queryParams:{},tableData:[],column:[{label:"申请文件编号",prop:"documentCode"},{label:"文件类别",prop:"type",width:"120px",dataType:"tag",formatData:function(t){return e.fileType.find((function(e){return e.value==t}))?e.fileType.find((function(e){return e.value==t})).label:null},formatType:function(t){return e.fileType.find((function(e){return e.value==t}))?e.fileType.find((function(e){return e.value==t})).type:null}},{label:"申请人",prop:"createUserName"},{label:"申请时间",prop:"createTime"},{label:"说明",prop:"instructions"},{label:"提交日期",prop:"submitDate"},{label:"责任人",prop:"dutyUserName"},{label:"申请状态",prop:"state",dataType:"tag",formatData:function(e){return e},formatType:function(e){return"通过"==e?"success":"danger"}},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.handleUpdate(t)},disabled:function(e){return"通过"==e.state}},{name:"审核",type:"text",clickFun:function(t){e.handleCheck(t)},disabled:function(t){return null!=t.dutyUserName&&""!=t.dutyUserName&&(!t.dutyUserName.includes(e.nickName)||"通过"==t.state)}},{name:"查看附件",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(e,t){return"通过"==e.state}}]}],page:{total:0,size:10,current:0},tableLoading:!1}},mounted:function(){this.getList(),this.getAuthorizedPerson(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.queryParams),this.page);delete t.total,Object(p["z"])(Object(o["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},getAuthorizedPerson:function(){var e=this;Object(u["w"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))},selectEnumByCategory:function(){var e=this;this.getDicts("document_type").then((function(t){e.fileType=e.dictToValue(t.data)}))},handleAdd:function(){var e=this;if(!this.addInfo.documentCode)return this.$message({type:"error",message:"请输入编号"});if(this.addInfo.id){var t=this.addInfo,a=t.id,n=t.documentCode,i=t.dutyUser,l=t.type,s=t.name,o=t.version,r=t.writer,c=t.submitDate,d=t.instructions,u=new FormData;this.file&&u.append("file",this.file.raw),u.append("id",a),u.append("documentCode",n),u.append("dutyUser",i),u.append("type",l),u.append("name",s),u.append("version",o),u.append("writer",r),u.append("submitDate",c),u.append("instructions",d),this.addLoading=!0,Object(p["r"])(u).then((function(t){e.addLoading=!1,200==t.code?(e.refreshTable(),e.addDialogVisible=!1):e.$message({type:"error",message:"添加失败"})}))}else{var f=new FormData;for(var h in this.file&&f.append("file",this.file.raw),this.addInfo)f.append(h,this.addInfo[h]);this.addLoading=!0,Object(p["c"])(f).then((function(t){e.addLoading=!1,200==t.code?(e.$message({type:"success",message:"添加成功"}),e.refreshTable(),e.addDialogVisible=!1):e.$message({type:"error",message:"添加失败"})}))}},handleChangeUpload:function(e,t){this.file=e,this.$set(this.addInfo,"name",e.name)},handleUpdate:function(e){this.title="文件变更申请",this.addInfo=this.HaveJson(e),this.file=null,this.addDialogVisible=!0},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0},handleCheck:function(e){if(this.title="审核",this.currentInfo=e,!e.url)return this.$message.warning("文件未上传");this.checkStampDialogVisible=!0},handleCheck0:function(e){var t=this;this.checkStampDialogVisible=!1,this.checkDialogVisible=!0,Object(p["i"])({id:e.id}).then((function(a){var n=new Blob([a]),i=new File([n],e.name,{type:"application/pdf"});t.$refs.UpPdfStamp.lookFile(i,t.currentStamp)})).catch((function(e){console.log(e)}))},handleDown:function(e){if(!e.url)return this.$message.warning("文件未上传");this.$download.saveAs(e.url,e.url)},uploadPDF:function(e){var t=this;return Object(s["a"])(Object(l["a"])().m((function a(){var n,i;return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return n=new FormData,n.append("file",e,t.fileName+".pdf"),n.append("id",t.currentInfo.id),n.append("state",t.type),n.append("writer",t.currentInfo.writer),a.p=1,a.n=2,Object(p["h"])(n);case 2:if(i=a.v,t.checkLoading=!1,t.noCheckLoading=!1,200!=i.code){a.n=3;break}return t.$message({message:"操作成功",type:"success"}),t.checkDialogVisible=!1,t.refreshTable(),a.a(2,!0);case 3:return t.$message({message:"操作失败",type:"error"}),a.a(2,!1);case 4:a.n=6;break;case 5:a.p=5,a.v,t.checkLoading=!1,t.noCheckLoading=!1;case 6:return a.a(2)}}),a,null,[[1,5]])})))()},handleCheckSub:function(e){this.type=e,"通过"==e?this.checkLoading=!0:this.noCheckLoading=!0,this.addLoading=!0,this.$refs["UpPdfStamp"].generatePDF()},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(p["m"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},m=h,b=(a("1e7b"),a("2877")),g=Object(b["a"])(m,n,i,!1,null,"59d9c032",null);t["default"]=g.exports},"984a":function(e,t,a){"use strict";a("241ce")},"99c8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"文件编号",prop:"documentCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.documentCode,callback:function(t){e.$set(e.queryParams,"documentCode",t)},expression:"queryParams.documentCode"}})],1),a("el-form-item",{attrs:{label:"文件名称",prop:"laboratoryNumber"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),a("div",[e.addPower?a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0,e.addInfo={},e.radio="发放",e.file=null}}},[e._v("添加发放记录")]):e._e(),e.outPower?a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleOut}},[e._v("导出")]):e._e()],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:"添加"+e.radio+"记录",visible:e.addDialogVisible,top:"10vh",width:"800px"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[e.addDialogVisible?a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[a("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("申请编号：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"回收"==e.radio,"allow-create":"",clearable:"",filterable:"",size:"small"},on:{change:e.changeFileList},model:{value:e.addInfo.documentCode,callback:function(t){e.$set(e.addInfo,"documentCode",t)},expression:"addInfo.documentCode"}},e._l(e.fileList,(function(e){return a("el-option",{key:e.documentCode,attrs:{label:e.documentCode,value:e.documentCode}})})),1)],1)])]),"发放"==e.radio?a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[a("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("发放人：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small"},model:{value:e.addInfo.issueUser,callback:function(t){e.$set(e.addInfo,"issueUser",t)},expression:"addInfo.issueUser"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]):a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[a("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("回收人：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small"},model:{value:e.addInfo.recycleUser,callback:function(t){e.$set(e.addInfo,"recycleUser",t)},expression:"addInfo.recycleUser"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[a("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("审批人：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"发放"!=e.radio,filterable:"",size:"small"},model:{value:e.addInfo.receiveUser,callback:function(t){e.$set(e.addInfo,"receiveUser",t)},expression:"addInfo.receiveUser"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("文件名称：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"回收"==e.radio,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.name,callback:function(t){e.$set(e.addInfo,"name",t)},expression:"addInfo.name"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("文件版本：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{disabled:"回收"==e.radio,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.version,callback:function(t){e.$set(e.addInfo,"version",t)},expression:"addInfo.version"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("文件状态：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"回收"==e.radio,size:"small"},model:{value:e.addInfo.state,callback:function(t){e.$set(e.addInfo,"state",t)},expression:"addInfo.state"}},e._l(e.fileState,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])]),"发放"==e.radio?a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("发放编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.issueCode,callback:function(t){e.$set(e.addInfo,"issueCode",t)},expression:"addInfo.issueCode"}})],1)])]):a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("回收编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.recycleCode,callback:function(t){e.$set(e.addInfo,"recycleCode",t)},expression:"addInfo.recycleCode"}})],1)])]),"发放"==e.radio?a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("发放时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.issueDate,callback:function(t){e.$set(e.addInfo,"issueDate",t)},expression:"addInfo.issueDate"}})],1)])]):a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("回收时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.recycleDate,callback:function(t){e.$set(e.addInfo,"recycleDate",t)},expression:"addInfo.recycleDate"}})],1)])]),"发放"==e.radio?a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("发放说明：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{rows:2,clearable:"",placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.addInfo.issueNote,callback:function(t){e.$set(e.addInfo,"issueNote",t)},expression:"addInfo.issueNote"}})],1)])]):a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("回收说明：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{rows:2,clearable:"",placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.addInfo.recycleNote,callback:function(t){e.$set(e.addInfo,"recycleNote",t)},expression:"addInfo.recycleNote"}})],1)])]),"发放"==e.radio?a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("上传附件：")]),a("div",{staticClass:"search_input"},[a("el-upload",{staticStyle:{margin:"8px 0 0px 50px"},attrs:{"auto-upload":!1,multiple:!1,"on-change":e.handleChangeUpload,accept:".pdf,.doc,.docx,.xls,.xlsx",action:"#"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传附件")])],1)],1)])]):e._e()],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.url}}):e._e()],1)],1)},i=[],l=a("5530"),s=(a("7db0"),a("14d9"),a("b0c0"),a("d3b7"),a("0643"),a("fffc"),a("4e3e"),a("159b"),a("00d5")),o=a("a408"),r=a("b558"),c=a("5afa"),d=a("2f62"),u={components:{filePreview:o["a"],limsTable:s["a"]},computed:Object(l["a"])({},Object(d["b"])(["userId"])),data:function(){var e=this;return{ddPower:!1,outPower:!0,addInfo:{},addPower:!0,addLoading:!1,addDialogVisible:!1,outLoading:!1,personList:[],fileList:[],fileList0:[],radio:"发放",fileState:[],file:null,currentInfo:{},lookDialogVisible:!1,queryParams:{},tableData:[],column:[{label:"文件编号",prop:"documentCode"},{label:"文件名称",prop:"name"},{label:"文件版本",prop:"version"},{label:"文件状态",prop:"documentState"},{label:"发放编号",prop:"issueCode"},{label:"发放人",prop:"issueUserName"},{label:"发放日期",prop:"issueDate"},{label:"回收人",prop:"recycleUserName"},{label:"回收日期",prop:"recycleDate"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"回收记录",type:"text",clickFun:function(t){e.handleUpdate(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(e,t){return"通过"==e.documentState}},{name:"查看附件",type:"text",clickFun:function(t){e.handleLook(t)},disabled:function(e,t){return!e.url}},{name:"审核",type:"text",clickFun:function(t){e.handleCheck(t)},disabled:function(t,a){return t.receiveUser!=e.userId||"通过"==t.documentState}}]}],page:{total:0,size:10,current:0},tableLoading:!1}},mounted:function(){this.getList(),this.getAuthorizedPerson(),this.getFileList(),this.getFileList0(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(l["a"])(Object(l["a"])({},this.queryParams),this.page);delete t.total,Object(c["A"])(Object(l["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},selectEnumByCategory:function(){var e=this;this.getDicts("document_state").then((function(t){e.fileState=e.dictToValue(t.data)}))},getAuthorizedPerson:function(){var e=this;Object(r["w"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))},getFileList:function(){var e=this;Object(c["B"])({current:-1,size:-1}).then((function(t){e.fileList=t.data.records})).catch((function(e){}))},getFileList0:function(){var e=this;Object(c["y"])({current:-1,size:-1}).then((function(t){e.fileList0=t.data.records})).catch((function(e){}))},handleOut:function(){var e=this;this.outLoading=!0,Object(c["w"])(this.queryParams).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"发放回收记录.xlsx")}))},changeFileList:function(e){if(e){var t=this.fileList.find((function(t){return t.documentCode==e}));t&&(this.addInfo.name=t.name,this.addInfo.version=t.version,this.addInfo.state=t.state)}},handleAdd:function(){var e=this;if(this.addInfo.documentCode)if(this.addInfo.receiveUser){if("发放"==this.radio){if(!this.addInfo.issueUser)return void this.$message.error("请选择发放人")}else if(!this.addInfo.recycleUser)return void this.$message.error("请选择回收人");if(this.addLoading=!0,this.addInfo.id){var t=this.addInfo,a=t.documentCode,n=t.id,i=t.issueUser,l=t.recycleUser,s=t.receiveUser,o=t.name,r=t.version,d=t.documentState,u=t.issueCode,p=t.recycleCode,f=t.issueDate,h=t.recycleDate,m=t.issueNote,b=t.recycleNote;Object(c["s"])({documentCode:a,id:n,issueUser:i,recycleUser:l,receiveUser:s,name:o,version:r,documentState:d,issueCode:u,recycleCode:p,issueDate:f,recycleDate:h,issueNote:m,recycleNote:b}).then((function(t){e.addLoading=!1,200==t.code&&(e.$message.success("提交成功"),e.addDialogVisible=!1,e.refreshTable())}))}else{var g=new FormData;for(var v in this.file&&g.append("file",this.file.raw),this.addInfo)g.append(v,this.addInfo[v]);Object(c["d"])(g).then((function(t){e.addLoading=!1,200==t.code&&(e.$message.success("发放成功"),e.addDialogVisible=!1,e.refreshTable())}))}}else this.$message.error("请选择审批人");else this.$message.error("请选择文件")},handleUpdate:function(e){this.addInfo=this.HaveJson(e),this.radio="回收",this.file=null,this.addDialogVisible=!0},handleCheck:function(e){var t=this;this.$confirm("是否审核通过?","提示",{confirmButtonText:"通过",cancelButtonText:"不通过",type:"warning",closeOnClickModal:!1,distinguishCancelAndClose:!0,beforeClose:function(a,n,i){"confirm"===a?Object(c["j"])({id:e.id,documentState:"通过"}).then((function(e){t.refreshTable(),i(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"cancel"===a?Object(c["j"])({id:e.id,documentState:"不通过"}).then((function(e){t.refreshTable(),i(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"close"===a&&(i(),console.log("×按钮点击事件，不关闭弹框"))}})},handleChangeUpload:function(e,t){this.file=e,this.$set(this.addInfo,"name",e.name)},handleLook:function(e){this.currentInfo=this.HaveJson(e),this.lookDialogVisible=!0},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["n"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},p=u,f=(a("f25c"),a("2877")),h=Object(f["a"])(p,n,i,!1,null,"1f4c25f5",null);t["default"]=h.exports},a112:function(e,t,a){e.exports=a.p+"static/img/装备.736f404b.png"},a436:function(e,t,a){var n={"./主任.png":"3ab3","./储能.png":"2c86","./射频.png":"7112","./技术负责人.png":"c6a3","./电力.png":"1da9","./综合室.png":"1d09","./装备.png":"a112","./质量负责人.png":"f26f","./通信.png":"af58"};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=l,e.exports=i,i.id="a436"},af58:function(e,t,a){e.exports=a.p+"static/img/通信.8cc52573.png"},b558:function(e,t,a){"use strict";a.d(t,"v",(function(){return i})),a.d(t,"A",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"z",(function(){return o})),a.d(t,"y",(function(){return r})),a.d(t,"w",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"n",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"u",(function(){return h})),a.d(t,"g",(function(){return m})),a.d(t,"j",(function(){return b})),a.d(t,"p",(function(){return g})),a.d(t,"o",(function(){return v})),a.d(t,"d",(function(){return y})),a.d(t,"D",(function(){return C})),a.d(t,"l",(function(){return _})),a.d(t,"t",(function(){return k})),a.d(t,"C",(function(){return x})),a.d(t,"b",(function(){return D})),a.d(t,"x",(function(){return I})),a.d(t,"s",(function(){return w})),a.d(t,"h",(function(){return O})),a.d(t,"k",(function(){return L})),a.d(t,"f",(function(){return S})),a.d(t,"r",(function(){return j})),a.d(t,"m",(function(){return P})),a.d(t,"q",(function(){return $})),a.d(t,"B",(function(){return F}));var n=a("b775");function i(e){return Object(n["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function p(e){return Object(n["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function h(e){return Object(n["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function b(e){return Object(n["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function g(e){return Object(n["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function v(e){return Object(n["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function y(e){return Object(n["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function C(e){return Object(n["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function k(e){return Object(n["a"])({url:"/deviceScope/search",method:"get",params:e})}function x(e){return Object(n["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function D(e){return Object(n["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function I(e){return Object(n["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function w(e){return Object(n["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function L(e){return Object(n["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function S(e){return Object(n["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function j(e){return Object(n["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function P(e){return Object(n["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function $(e){return Object(n["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function F(e){return Object(n["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},ba27:function(e,t,a){},c6a3:function(e,t,a){e.exports=a.p+"static/img/技术负责人.816870fa.png"},f25c:function(e,t,a){"use strict";a("ba27")},f26f:function(e,t,a){e.exports=a.p+"static/img/质量负责人.db312207.png"},f3cf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("文件编号")]),a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.documentCode,callback:function(t){e.$set(e.queryParams,"documentCode",t)},expression:"queryParams.documentCode"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0,e.addInfo={}}}},[e._v("文件作废申请")]),a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleOut}},[e._v("导出")])],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{visible:e.addDialogVisible,title:"文件作废申请",top:"10vh",width:"800px"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[a("span",{staticStyle:{color:"red","margin-right":"4px"}},[e._v("*")]),e._v("申请编号：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"",filterable:"",size:"small"},on:{change:e.changeFileList},model:{value:e.addInfo.documentCode,callback:function(t){e.$set(e.addInfo,"documentCode",t)},expression:"addInfo.documentCode"}},e._l(e.fileList,(function(e){return a("el-option",{key:e.documentCode,attrs:{label:e.documentCode,value:e.documentCode}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("审批人：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small"},model:{value:e.addInfo.checkUser,callback:function(t){e.$set(e.addInfo,"checkUser",t)},expression:"addInfo.checkUser"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("文件名称：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.name,callback:function(t){e.$set(e.addInfo,"name",t)},expression:"addInfo.name"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("文件版本：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addInfo.version,callback:function(t){e.$set(e.addInfo,"version",t)},expression:"addInfo.version"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("文件状态：")]),a("div",{staticClass:"search_input"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.addInfo.state,callback:function(t){e.$set(e.addInfo,"state",t)},expression:"addInfo.state"}},e._l(e.fileState,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("期望作废时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.expectCancelDate,callback:function(t){e.$set(e.addInfo,"expectCancelDate",t)},expression:"addInfo.expectCancelDate"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("实际作废时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addInfo.actuallyCancelDate,callback:function(t){e.$set(e.addInfo,"actuallyCancelDate",t)},expression:"addInfo.actuallyCancelDate"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:12}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("作废说明：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{rows:2,clearable:"",placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.addInfo.cancelNote,callback:function(t){e.$set(e.addInfo,"cancelNote",t)},expression:"addInfo.cancelNote"}})],1)])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)],1)},i=[],l=a("5530"),s=(a("7db0"),a("14d9"),a("b0c0"),a("d3b7"),a("0643"),a("fffc"),a("4e3e"),a("159b"),a("00d5")),o=a("b558"),r=a("5afa"),c=a("2f62"),d={components:{limsTable:s["a"]},computed:Object(l["a"])({},Object(c["b"])(["userId"])),data:function(){var e=this;return{addPower:!1,outPower:!1,addInfo:{},addLoading:!1,addDialogVisible:!1,personList:[],fileList:[],outLoading:!1,fileState:[],queryParams:{},tableData:[],column:[{label:"文件编号",prop:"documentCode"},{label:"申请人",prop:"createUserName",width:"120px"},{label:"作废说明",prop:"cancelNote"},{label:"期望作废时间",prop:"expectCancelDate"},{label:"实际作废日期",prop:"actuallyCancelDate"},{label:"作废状态",prop:"state",dataType:"tag",formatData:function(e){return e},formatType:function(e){return"通过"==e?"success":"danger"}},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.handleUpdate(t)},disabled:function(e,t){return"通过"==e.state}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(e,t){return"通过"==e.state}},{name:"审核",type:"text",clickFun:function(t){e.handleCheck(t)},disabled:function(t,a){return t.checkUser!=e.userId||"通过"==t.state}}]}],page:{total:0,size:10,current:0},tableLoading:!1}},mounted:function(){this.getList(),this.getAuthorizedPerson(),this.getFileList(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(l["a"])(Object(l["a"])({},this.queryParams),this.page);delete t.total,Object(r["y"])(Object(l["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},selectEnumByCategory:function(){var e=this;this.getDicts("document_state").then((function(t){e.fileState=e.dictToValue(t.data)}))},getAuthorizedPerson:function(){var e=this;Object(o["w"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))},getFileList:function(){var e=this;Object(r["B"])({current:-1,size:-1}).then((function(t){e.fileList=t.data.records})).catch((function(e){}))},handleAdd:function(){var e=this;if(!this.addInfo.documentCode)return this.$message.error("请输入申请编号"),!1;this.addInfo.method="作废",this.addLoading=!0,this.addInfo.id?Object(r["q"])({id:this.addInfo.id,method:"作废",documentCode:this.addInfo.documentCode,checkUser:this.addInfo.checkUser,name:this.addInfo.name,version:this.addInfo.version,documentState:this.addInfo.documentState,expectCancelDate:this.addInfo.expectCancelDate,actuallyCancelDate:this.addInfo.actuallyCancelDate,cancelNote:this.addInfo.cancelNote}).then((function(t){e.addLoading=!1,e.refreshTable(),e.$message({type:"success",message:"提交成功"}),e.addDialogVisible=!1})).catch((function(e){})):Object(r["b"])(this.addInfo).then((function(t){e.addLoading=!1,e.refreshTable(),e.$message({type:"success",message:"提交成功"}),e.addDialogVisible=!1})).catch((function(e){}))},changeFileList:function(e){if(e){var t=this.fileList.find((function(t){return t.documentCode==e}));t&&(this.addInfo.name=t.name,this.addInfo.version=t.version,this.addInfo.documentState=t.state)}},handleUpdate:function(e){this.addInfo=this.HaveJson(e),this.addDialogVisible=!0},handleCheck:function(e){var t=this;this.$confirm("是否审核通过?","提示",{confirmButtonText:"通过",cancelButtonText:"不通过",type:"warning",closeOnClickModal:!1,distinguishCancelAndClose:!0,beforeClose:function(a,n,i){"confirm"===a?Object(r["g"])({id:e.id,state:"通过"}).then((function(e){t.refreshTable(),i(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"cancel"===a?Object(r["g"])({id:e.id,state:"不通过"}).then((function(e){t.refreshTable(),i(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"close"===a&&(i(),console.log("×按钮点击事件，不关闭弹框"))}})},handleOut:function(){var e=this;this.outLoading=!0,Object(r["v"])(this.queryParams).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"文件作废表.xlsx")}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["l"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},u=d,p=(a("984a"),a("2877")),f=Object(p["a"])(u,n,i,!1,null,"6e07bdac",null);t["default"]=f.exports},ffd1:function(e,t,a){}}]);