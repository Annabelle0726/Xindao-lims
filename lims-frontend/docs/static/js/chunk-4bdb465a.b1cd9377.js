(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bdb465a"],{"0ccb":function(e,t,r){"use strict";var a=r("e330"),n=r("50c4"),o=r("577e"),i=r("1148"),l=r("1d80"),s=a(i),u=a("".slice),c=Math.ceil,d=function(e){return function(t,r,a){var i,d,p=o(l(t)),m=n(r),f=p.length,h=void 0===a?" ":o(a);return m<=f||""===h?p:(i=m-f,d=s(h,c(i/h.length)),d.length>i&&(d=u(d,0,i)),e?p+d:d+p)}};e.exports={start:d(!1),end:d(!0)}},"4d90":function(e,t,r){"use strict";var a=r("23e7"),n=r("0ccb").start,o=r("9a0c");a({target:"String",proto:!0,forced:o},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"987e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.quarterSampleDia,title:"季度抽样",width:"90%"},on:{"update:visible":function(t){e.quarterSampleDia=t},close:function(t){e.quarterSampleDia=!1}}},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},[r("div",{staticStyle:{width:"30%",display:"flex","align-items":"center"}},[r("span",{staticStyle:{width:"50px"}},[e._v("编号：")]),r("el-input",{attrs:{disabled:"add"!==e.operationType,size:"small"},model:{value:e.quarterSampleForm.quarterNo,callback:function(t){e.$set(e.quarterSampleForm,"quarterNo",t)},expression:"quarterSampleForm.quarterNo"}})],1),"add"===e.operationType?r("div",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addQuarter}},[e._v("添加")]),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e()]),r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.quarterItems,height:"400","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[r("el-table-column",{attrs:{label:"产品类型",prop:"productType",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small"},model:{value:a.productType,callback:function(t){e.$set(a,"productType",t)},expression:"row.productType"}})]]}}])}),r("el-table-column",{attrs:{label:"责任人",prop:"dutyUser",width:"100"}}),r("el-table-column",{attrs:{label:"型号",prop:"productModel",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.productModel,callback:function(t){e.$set(a,"productModel",t)},expression:"row.productModel"}})]]}}])}),r("el-table-column",{attrs:{label:"抽样数量","min-width":"340",prop:"spotCheckNumber"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.spotCheckNumber,callback:function(t){e.$set(a,"spotCheckNumber",t)},expression:"row.spotCheckNumber"}})]]}}])}),"add"===e.operationType?r("el-table-column",{attrs:{label:"数量","min-width":"120",prop:"number"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.number,callback:function(t){e.$set(a,"number",t)},expression:"row.number"}})]]}}],null,!1,1485353093)}):e._e(),"add"!==e.operationType?r("el-table-column",{attrs:{label:"抽样时间",prop:"spotCheckTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",disabled:"view"===e.operationType,placeholder:"选择日期",size:"small",clearable:"",type:"date","value-format":"yyyy-MM-dd"},model:{value:a.spotCheckTime,callback:function(t){e.$set(a,"spotCheckTime",t)},expression:"row.spotCheckTime"}})]]}}],null,!1,3990927429)}):e._e(),"add"!==e.operationType?r("el-table-column",{attrs:{label:"试样结论",prop:"result",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:"",disabled:"view"===e.operationType},model:{value:t.row.result,callback:function(r){e.$set(t.row,"result",r)},expression:"scope.row.result"}},[r("el-option",{attrs:{label:"合格",value:"合格"}}),r("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)]}}],null,!1,2110497481)}):e._e(),"add"!==e.operationType?r("el-table-column",{attrs:{label:"取样人员",prop:"samplingUser",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.samplingUser,callback:function(t){e.$set(a,"samplingUser",t)},expression:"row.samplingUser"}})]]}}],null,!1,3106039828)}):e._e(),r("el-table-column",{attrs:{label:"备注",prop:"itemRemark",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.itemRemark,callback:function(t){e.$set(a,"itemRemark",t)},expression:"row.itemRemark"}})]]}}])}),"view"!==e.operationType?r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(r){return e.deleteScope(t.$index)}}},[e._v("删除")])]}}],null,!1,3685618162)}):e._e()],1)],1),r("div",{staticStyle:{display:"flex","align-items":"center",margin:"10px 0"}},[r("span",{staticStyle:{width:"70px"}},[e._v("备注：")]),r("el-input",{staticStyle:{width:"43%"},attrs:{disabled:"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.quarterSampleForm.remark,callback:function(t){e.$set(e.quarterSampleForm,"remark",t)},expression:"quarterSampleForm.remark"}})],1),"add"!==e.operationType?r("div",[r("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"70px"}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"编制人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.writeUser,callback:function(t){e.$set(e.editForm,"writeUser",t)},expression:"editForm.writeUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"会签人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,multiple:"",placeholder:"请选择",size:"small"},model:{value:e.editForm.countersignUser,callback:function(t){e.$set(e.editForm,"countersignUser",t)},expression:"editForm.countersignUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"审核人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.examineUser,callback:function(t){e.$set(e.editForm,"examineUser",t)},expression:"editForm.examineUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"批准人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.ratifyUser,callback:function(t){e.$set(e.editForm,"ratifyUser",t)},expression:"editForm.ratifyUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.quarterSampleDia=!1}}},[e._v("取 消")]),"add"===e.operationType?r("el-button",{on:{click:function(t){e.quarterSampleDia=!1}}},[e._v("保 存")]):e._e(),"add"!==e.operationType&&"view"!==e.operationType?r("el-button",{attrs:{type:"primary"},on:{click:e.handleSample}},[e._v("确 定")]):e._e()],1)])],1)},n=[],o=r("5530"),i=(r("a15b"),r("d81d"),r("14d9"),r("a434"),r("b0c0"),r("e9c4"),r("a9e3"),r("b64b"),r("d3b7"),r("25f0"),r("4d90"),r("0643"),r("4e3e"),r("a573"),r("159b"),r("9985")),l=r("b9fe"),s={name:"addQuarterItem",components:{},data:function(){return{tableLoading:!1,quarterSampleDia:!1,quarterSampleForm:{quarterNo:""},quarterItems:[],quarterTemItems:[],operationType:"",editForm:{quarterId:"",writeUser:"",countersignUser:[],examineUser:"",ratifyUser:""},userList:[],quarterRow:{}}},mounted:function(){this.getUserList()},methods:{openDia:function(e,t){var r=this;this.quarterSampleDia=!0,this.operationType=t,"add"===t?(e.length>0&&(this.quarterItems=e),this.quarterSampleForm.quarterNo=u()):(this.tableLoading=!0,this.quarterRow=e,Object(i["g"])({quarterId:e.quarterId}).then((function(e){r.tableLoading=!1,200===e.code&&(r.quarterItems=e.data.quarterItems,r.quarterSampleForm.quarterNo=e.data.quarterNo,r.quarterSampleForm.remark=e.data.remark,r.editForm.quarterId=e.data.quarterId,r.editForm.writeUser=e.data.writeUser,r.editForm.examineUser=e.data.examineUser,r.editForm.ratifyUser=e.data.ratifyUser,e.data.countersignUser&&(r.editForm.countersignUser=e.data.countersignUser.split(",").map(Number)))})))},addQuarter:function(){this.quarterItems.push({productType:"",dutyUser:JSON.parse(localStorage.getItem("user")).name,productModel:"",spotCheckNumber:"",number:"",spotCheckTime:"",result:"",samplingUser:"",itemRemark:""})},handleSample:function(){var e=this;this.$confirm("是否提交该数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if("add"===e.operationType)e.quarterSampleForm.quarterItems=JSON.parse(JSON.stringify(e.quarterItems)),e.quarterSampleForm.quarterItems.forEach((function(e){e.spotCheckNumber=e.spotCheckNumber+" "+(null==e.number?"":e.number)})),Object(i["a"])(e.quarterSampleForm).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.quarterItems=[],e.$parent.quarterTemItems=[],e.closeQuarterSampleDia())}));else{var t=Object(o["a"])({},e.editForm);t.countersignUser.length>0?t.countersignUser=t.countersignUser.join(","):t.countersignUser="",t.quarterItems=JSON.parse(JSON.stringify(e.quarterItems)),Object(i["k"])(t).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.quarterItems=[],e.closeQuarterSampleDia())}))}})).catch((function(){e.$message({type:"info",message:"已取消"})}))},clearTable:function(){this.quarterItems=[],this.$parent.quarterTemItems=[]},deleteScope:function(e){this.quarterItems.splice(e,1)},closeQuarterSampleDia:function(){this.quarterSampleDia=!1,"add"===this.operationType?this.$parent.handleStockList():this.$parent.refreshTable()},getUserList:function(){var e=this;Object(l["g"])().then((function(t){e.userList=t.data}))}}};function u(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;return t+r.toString().padStart(2,"0")}var c=s,d=r("2877"),p=Object(d["a"])(c,a,n,!1,null,"1d1b9048",null);t["default"]=p.exports},9985:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"j",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"i",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"l",(function(){return p})),r.d(t,"g",(function(){return m})),r.d(t,"a",(function(){return f})),r.d(t,"k",(function(){return h}));var a=r("b775");function n(e){return Object(a["a"])({url:"/finishProductSpotCheck/getQuarterPage",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/finishProductSpotCheck/getSpotCheckYearPage",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/finishProductSpotCheck/deleteQuarter",method:"delete",params:e})}function l(e){return Object(a["a"])({url:"/finishProductSpotCheck/finalReportQuarter",method:"get",params:e,responseType:"blob"})}function s(e){return Object(a["a"])({url:"/finishProductSpotCheck/finalReportSpotCheckYear",method:"get",params:e,responseType:"blob"})}function u(e){return Object(a["a"])({url:"/finishProductSpotCheck/deleteSpotCheckYear",method:"delete",params:e})}function c(e){return Object(a["a"])({url:"/finishProductSpotCheck/getSpotCheckYear",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/finishProductSpotCheck/addSpotCheckYear",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/finishProductSpotCheck/updateSpotCheckYear",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/finishProductSpotCheck/getQuarter",method:"get",params:e})}function f(e){return Object(a["a"])({url:"/finishProductSpotCheck/addQuarter",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/finishProductSpotCheck/updateQuarterOnOrder",method:"post",data:e})}},"9a0c":function(e,t,r){"use strict";var a=r("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},b9fe:function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"h",(function(){return s})),r.d(t,"j",(function(){return u})),r.d(t,"i",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"k",(function(){return m})),r.d(t,"g",(function(){return f}));var a=r("b775");function n(e){return Object(a["a"])({url:"/performanceShift/page",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/performanceShift/pageYear",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/performanceShift/add",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/shiftTime/list",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/shiftTime/add",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/shiftTime/update",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/shiftTime/remove",method:"delete",params:e})}function d(e){return Object(a["a"])({url:"/performanceShift/export",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/performanceShift/update",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}}}]);