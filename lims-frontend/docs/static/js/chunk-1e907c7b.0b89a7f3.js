(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e907c7b"],{2883:function(e,t,a){},"436f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("el-tabs",{staticClass:"tab-panel",attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理评审计划",name:"yearPlan"}},[a("management-review-plan")],1),a("el-tab-pane",{attrs:{label:"会议记录",name:"implementationPlan"}},[a("meeting-records")],1),a("el-tab-pane",{attrs:{label:"评审报告",name:"meetingSignIn"}},[a("review-report")],1)],1)],1)},r=[],o=a("d25d"),l=a("0187"),n=a("fa89"),s={name:"a9-management-review",components:{ReviewReport:n["default"],MeetingRecords:l["default"],ManagementReviewPlan:o["default"]},data:function(){return{activeName:"yearPlan"}},mounted:function(){},methods:{}},c=s,m=a("2877"),u=Object(m["a"])(c,i,r,!1,null,"704f0017",null);t["default"]=u.exports},5718:function(e,t,a){},"838c":function(e,t,a){"use strict";a("c843")},c843:function(e,t,a){},cb14:function(e,t,a){"use strict";a("2883")},cc73:function(e,t,a){"use strict";a("5718")},d25d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"评审地点",prop:"judgingLocation"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.judgingLocation,callback:function(t){e.$set(e.searchForm,"judgingLocation",t)},expression:"searchForm.judgingLocation"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.managementFormDIa?a("management-form-d-ia",{ref:"managementFormDIa",on:{closeImplementDia:e.closeImplementDia}}):e._e(),a("el-dialog",{attrs:{visible:e.listDialogVisible,title:"文件查看",top:"15vh",width:"400px"},on:{"update:visible":function(t){e.listDialogVisible=t}}},[a("div",{staticStyle:{"max-height":"60vh","overflow-y":"auto"}},e._l(e.fileList,(function(t,i){return a("p",{key:i},[a("span",[e._v(e._s(t.fileName))]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-view",size:"small",type:"text"},on:{click:function(a){return e.lookFile(t.url,t.fileName)}}},[e._v("预览")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-bottom",size:"small",type:"text"},on:{click:function(a){return e.handleDown0(t.url,t.fileName)}}},[e._v("下载")])],1)})),0)]),a("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.url}}):e._e()],1)],1)},r=[],o=a("c14f"),l=a("1da1"),n=(a("b0c0"),a("00d5")),s=a("c4f4"),c=a("a408"),m=a("4efb"),u={name:"managementReviewPlan",components:{ManagementFormDIa:s["default"],limsTable:n["a"],filePreview:c["a"]},data:function(){var e=this;return{searchForm:{judgingLocation:""},listDialogVisible:!1,lookDialogVisible:!1,fileList:[],currentInfo:{},tableColumn:[{label:"评审时间",prop:"reviewTime"},{label:"评审地点",prop:"judgingLocation"},{label:"评审目的",prop:"judgingPurpose"},{label:"评审方式",prop:"judgingMethod"},{label:"评审范围",prop:"judgingScope"},{dataType:"action",minWidth:"110",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)},disabled:function(e){return!!e.approve}},{name:"上传",type:"upload",multiple:!0,limit:20,accept:".doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.pdf",clickFun:function(){var t=Object(l["a"])(Object(o["a"])().m((function t(a,i,r){var l,n;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:return l=new FormData,l.append("file",i.raw),l.append("id",a.id),t.n=1,Object(m["c"])(l);case 1:if(n=t.v,200!=n.code){t.n=2;break}return e.$message({message:"上传成功",type:"success"}),t.a(2);case 2:return e.$message({message:"上传失败",type:"error"}),t.a(2);case 3:return t.a(2)}}),t)})));function a(e,a,i){return t.apply(this,arguments)}return a}(),disabled:function(e){return!!e.approve}},{name:"查看附件",type:"text",clickFun:function(t){Object(m["q"])({id:t.id}).then((function(t){e.listDialogVisible=!0,e.fileList=t.data.fileList}))}},{name:"批准",type:"text",clickFun:function(t){e.openFormDia("ratify",t)},disabled:function(e){return!!e.approve}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)},disabled:function(e){return 1===e.qualityStatus}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},managementFormDIa:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this;this.tableLoading=!0,Object(m["l"])({judgingLocation:this.searchForm.judgingLocation,pages:this.page.current,size:this.page.size}).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},openFormDia:function(e,t){var a=this;this.managementFormDIa=!0,this.$nextTick((function(){a.$refs.managementFormDIa.openDia(e,t)}))},closeImplementDia:function(){this.managementFormDIa=!1,this.searchList()},resetSearchForm:function(){this.searchForm.judgingLocation="",this.searchList()},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(m["f"])({id:e.id}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()},handleDown:function(e){var t=this;Object(m["i"])({id:e.id}).then((function(e){var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"评审计划.docx")}))},lookFile:function(e,t){this.currentInfo.url=e,this.currentInfo.name=t,this.lookDialogVisible=!0},handleDown0:function(e,t){if(!e)return this.$message.warning("文件未上传");this.$download.saveAs(e,t)}}},p=u,d=(a("cb14"),a("2877")),f=Object(d["a"])(p,i,r,!1,null,"08ccf512",null);t["default"]=f.exports},d3bf:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"管理评审会议记录",width:"1000px"},on:{"update:visible":function(t){e.formDia=t},close:e.closeYearDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"auto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"目的",prop:"objective"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.objective,callback:function(t){e.$set(e.form,"objective",t)},expression:"form.objective"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地点",prop:"place"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.place,callback:function(t){e.$set(e.form,"place",t)},expression:"form.place"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"主持人",prop:"compere"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.compere,callback:function(t){e.$set(e.form,"compere",t)},expression:"form.compere"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"记录人",prop:"recordPeople"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.recordPeople,callback:function(t){e.$set(e.form,"recordPeople",t)},expression:"form.recordPeople"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"日期",prop:"date"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"页次",prop:"page"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.page,callback:function(t){e.$set(e.form,"page",t)},expression:"form.page"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"评审方式",prop:"judgingMethod"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.judgingMethod,callback:function(t){e.$set(e.form,"judgingMethod",t)},expression:"form.judgingMethod"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"评审依据",prop:"reviewBasis"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.reviewBasis,callback:function(t){e.$set(e.form,"reviewBasis",t)},expression:"form.reviewBasis"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"出席人员",prop:"attendess"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",multiple:""},model:{value:e.form.attendess,callback:function(t){e.$set(e.form,"attendess",t)},expression:"form.attendess"}},e._l(e.personList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"评审输入情况",prop:"reviewInputs"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.reviewInputs,callback:function(t){e.$set(e.form,"reviewInputs",t)},expression:"form.reviewInputs"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"评审过程概况",prop:"reviewProcess"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.reviewProcess,callback:function(t){e.$set(e.form,"reviewProcess",t)},expression:"form.reviewProcess"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"主要议题概述",prop:"mainTopic"}},[a("el-input",{attrs:{rows:5,clearable:"",placeholder:"请输入内容，可输入几千字",size:"small",type:"textarea"},model:{value:e.form.mainTopic,callback:function(t){e.$set(e.form,"mainTopic",t)},expression:"form.mainTopic"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"事项",prop:"matters"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.matters,callback:function(t){e.$set(e.form,"matters",t)},expression:"form.matters"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"负责人",prop:"head"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.head,callback:function(t){e.$set(e.form,"head",t)},expression:"form.head"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"完成日期",prop:"completionDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.completionDate,callback:function(t){e.$set(e.form,"completionDate",t)},expression:"form.completionDate"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"跟踪确认人",prop:"trackingConfirmed"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.trackingConfirmed,callback:function(t){e.$set(e.form,"trackingConfirmed",t)},expression:"form.trackingConfirmed"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"跟踪情况确认记录",prop:"follerUp"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.follerUp,callback:function(t){e.$set(e.form,"follerUp",t)},expression:"form.follerUp"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"体系评价",prop:"overallEvaluation"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.overallEvaluation,callback:function(t){e.$set(e.form,"overallEvaluation",t)},expression:"form.overallEvaluation"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeYearDia}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")])],1)],1)],1)},r=[],o=(a("a15b"),a("d81d"),a("14d9"),a("b0c0"),a("a9e3"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("4efb")),l=a("b558"),n={name:"reviewReportDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{id:"",objective:"",place:"",compere:"",recordPeople:"",date:"",page:"",judgingMethod:"",reviewBasis:"",attendess:[],reviewInputs:"",reviewProcess:"",mainTopic:"",matters:"",head:"",completionDate:"",trackingConfirmed:"",follerUp:"",overallEvaluation:""},rules:{objective:[{required:!0,message:"请填写目的",trigger:"blur"}],place:[{required:!0,message:"请填写地点",trigger:"blur"}],compere:[{required:!0,message:"请填写主持人",trigger:"blur"}],recordPeople:[{required:!0,message:"请填写记录人",trigger:"blur"}],date:[{required:!0,message:"请选择日期",trigger:"change"}],completionDate:[{required:!0,message:"请选择完成日期",trigger:"change"}],page:[{required:!0,message:"请填写页次",trigger:"blur"}],judgingMethod:[{required:!0,message:"请填写评审方式",trigger:"blur"}],reviewBasis:[{required:!0,message:"请填写评审依据",trigger:"blur"}],attendess:[{required:!0,message:"请填写出席人员",trigger:"change"}],reviewInputs:[{required:!0,message:"请填写评审输入情况",trigger:"blur"}],reviewProcess:[{required:!0,message:"请填写评审输入情况",trigger:"blur"}],mainTopic:[{required:!0,message:"请填写主要议题概述",trigger:"blur"}],matters:[{required:!0,message:"请填写主要议题概述",trigger:"blur"}],head:[{required:!0,message:"请填写负责人",trigger:"blur"}],trackingConfirmed:[{required:!0,message:"请填写跟踪确认人",trigger:"blur"}],follerUp:[{required:!0,message:"请填写跟踪确认人",trigger:"blur"}],overallEvaluation:[{required:!0,message:"请填写体系评价",trigger:"blur"}]},operationType:"",personList:[]}},mounted:function(){},methods:{openDia:function(e,t){this.formDia=!0,this.operationType=e,this.getAuthorizedPerson(),"add"!==e&&(this.form=t,this.form.attendess=this.form.attendess?this.form.attendess.split(",").map((function(e){return Number(e)})):[])},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a=e.HaveJson(e.form);a.attendess=a.attendess?a.attendess.join(","):"","add"===e.operationType?Object(o["d"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(o["p"])(a).then((function(t){e.loading=!1,e.$message.success("操作成功"),e.closeYearDia()})).catch((function(t){console.log("err---",t),e.loading=!1}))}))},closeYearDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeYearDia")},getAuthorizedPerson:function(){var e=this;Object(l["w"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))}}},s=n,c=(a("838c"),a("2877")),m=Object(c["a"])(s,i,r,!1,null,"6178c621",null);t["default"]=m.exports},fa89:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"地点",prop:"place"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.searchForm.place,callback:function(t){e.$set(e.searchForm,"place",t)},expression:"searchForm.place"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 23em)","table-data":e.tableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),e.reviewReportDia?a("review-report-dia",{ref:"reviewReportDia",on:{closeYearDia:e.closeYearDia}}):e._e()],1)},r=[],o=a("5530"),l=a("00d5"),n=a("d3bf"),s=a("4efb"),c=a("2f62"),m={name:"reviewReport",components:{ReviewReportDia:n["default"],limsTable:l["a"]},data:function(){var e=this;return{searchForm:{place:""},tableColumn:[{label:"目的",prop:"objective",minWidth:"100"},{label:"地点",prop:"place",minWidth:"100"},{label:"主持人",prop:"compere",minWidth:"100"},{label:"记录人",prop:"recordPeople",minWidth:"100"},{label:"日期",prop:"date",minWidth:"100"},{label:"页次",prop:"page",minWidth:"100"},{label:"评审方式",prop:"judgingMethod",minWidth:"100"},{label:"评审依据",prop:"reviewBasis",minWidth:"100"},{dataType:"action",minWidth:"160",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)},disabled:function(e){return!!e.audit||!!e.approval}},{name:"审核",type:"text",clickFun:function(t){e.$confirm("确定审核通过?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.submit("audit",t)})).catch((function(){}))},disabled:function(e){return!!e.audit}},{name:"批准",type:"text",clickFun:function(t){e.$confirm("确定批准通过?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.submit("approval",t)})).catch((function(){}))},disabled:function(e){return!e.audit||!!e.approval}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},reviewReportDia:!1}},computed:Object(o["a"])({},Object(c["b"])(["nickName"])),mounted:function(){this.searchList()},methods:{searchList:function(){var e=this;this.tableLoading=!0,Object(s["m"])({place:this.searchForm.place,pages:this.page.current,size:this.page.size}).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.page.total=t.data.total})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},openFormDia:function(e,t){var a=this;this.reviewReportDia=!0,this.$nextTick((function(){a.$refs.reviewReportDia.openDia(e,t)}))},closeYearDia:function(){this.reviewReportDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.place="",this.searchList()},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(s["g"])({id:e.id}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.searchList()},handleDown:function(e){var t=this;Object(s["j"])({id:e.id}).then((function(e){var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"评审报告.docx")}))},submit:function(e,t){var a=this,i=t;i[e]=this.nickName,Object(s["p"])(i).then((function(e){a.$message.success("操作成功"),a.searchList()})).catch((function(e){console.log("err---",e)}))}}},u=m,p=(a("cc73"),a("2877")),d=Object(p["a"])(u,i,r,!1,null,"245c9acf",null);t["default"]=d.exports}}]);