(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f316d96"],{"4e71a":function(t,e,r){"use strict";r.d(e,"q",(function(){return s})),r.d(e,"s",(function(){return a})),r.d(e,"j",(function(){return i})),r.d(e,"h",(function(){return o})),r.d(e,"r",(function(){return u})),r.d(e,"k",(function(){return l})),r.d(e,"t",(function(){return c})),r.d(e,"l",(function(){return d})),r.d(e,"i",(function(){return p})),r.d(e,"c",(function(){return f})),r.d(e,"u",(function(){return m})),r.d(e,"p",(function(){return v})),r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return b})),r.d(e,"m",(function(){return O})),r.d(e,"n",(function(){return g})),r.d(e,"a",(function(){return _})),r.d(e,"g",(function(){return S})),r.d(e,"o",(function(){return y})),r.d(e,"b",(function(){return C})),r.d(e,"f",(function(){return j}));var n=r("b775");function s(t){return Object(n["a"])({url:"/qualitySupervise/pageQualitySupervise",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/qualitySupervise/ratifyQualitySupervise",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/qualitySupervise/exportQualitySupervise",method:"get",data:t,responseType:"blob"})}function o(t){return Object(n["a"])({url:"/qualitySupervise/delQualitySupervise",method:"delete",params:t})}function u(t){return Object(n["a"])({url:"/qualitySupervise/pageQualitySuperviseDetail",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/qualitySupervise/exportSuperviseDetailRecord",method:"get",params:t,responseType:"blob"})}function c(t){return Object(n["a"])({url:"/qualitySupervise/superviseDetailAccordingExport",method:"get",params:t,responseType:"blob"})}function d(t){return Object(n["a"])({url:"/qualitySupervise/exportSuperviseDetaillCorrect",method:"get",params:t,responseType:"blob"})}function p(t){return Object(n["a"])({url:"/qualitySupervise/delQualitySuperviseDetail",method:"delete",params:t})}function f(t){return Object(n["a"])({url:"/qualitySupervise/addQualitySuperviseDetail",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/qualitySupervise/updateQualitySuperviseDetail",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/qualitySupervise/getSuperviseDetailRecord",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/qualitySupervise/addSuperviseDetailRecord",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/qualitySupervise/addSuperviseRecordOpinion",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/qualitySupervise/getRecordUser",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/qualitySupervise/getSuperviseDetailAccording",method:"get",params:t})}function _(t){return Object(n["a"])({url:"/qualitySupervise/addEquipSuperviseDetailAccording",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/qualitySupervise/approverEquipSuperviseDetailAccording",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/qualitySupervise/getSuperviseDetailCorrect",method:"get",params:t})}function C(t){return Object(n["a"])({url:"/qualitySupervise/addEquipSuperviseDetailCorrect",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/qualitySupervise/approveEquipSuperviseDetailCorrect",method:"post",data:t})}},"7e39":function(t,e,r){"use strict";r("9f41")},"9f41":function(t,e,r){},b558:function(t,e,r){"use strict";r.d(e,"v",(function(){return s})),r.d(e,"A",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"z",(function(){return o})),r.d(e,"y",(function(){return u})),r.d(e,"w",(function(){return l})),r.d(e,"i",(function(){return c})),r.d(e,"n",(function(){return d})),r.d(e,"a",(function(){return p})),r.d(e,"e",(function(){return f})),r.d(e,"u",(function(){return m})),r.d(e,"g",(function(){return v})),r.d(e,"j",(function(){return h})),r.d(e,"p",(function(){return b})),r.d(e,"o",(function(){return O})),r.d(e,"d",(function(){return g})),r.d(e,"D",(function(){return _})),r.d(e,"l",(function(){return S})),r.d(e,"t",(function(){return y})),r.d(e,"C",(function(){return C})),r.d(e,"b",(function(){return j})),r.d(e,"x",(function(){return P})),r.d(e,"s",(function(){return I})),r.d(e,"h",(function(){return q})),r.d(e,"k",(function(){return D})),r.d(e,"f",(function(){return x})),r.d(e,"r",(function(){return k})),r.d(e,"m",(function(){return U})),r.d(e,"q",(function(){return R})),r.d(e,"B",(function(){return $}));var n=r("b775");function s(t){return Object(n["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:t})}function l(t){return Object(n["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:t})}function m(t){return Object(n["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:t})}function O(t){return Object(n["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/deviceScope/dataCollection",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/insOrderPlan/write",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:t})}function y(t){return Object(n["a"])({url:"/deviceScope/search",method:"get",params:t})}function C(t){return Object(n["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:t})}function j(t){return Object(n["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:t})}function P(t){return Object(n["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:t})}function I(t){return Object(n["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:t})}function q(t){return Object(n["a"])({url:"/insOrderPlan/downFile",method:"get",params:t})}function D(t){return Object(n["a"])({url:"/insOrderPlan/getFileList",method:"get",params:t})}function x(t){return Object(n["a"])({url:"/insOrderPlan/delfile",method:"delete",params:t})}function k(t){return Object(n["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:t})}function U(t){return Object(n["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:t})}function R(t){return Object(n["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:t})}function $(t){return Object(n["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:t})}},e407:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.formDia,title:"检测工作监督记录表",width:"70%"},on:{"update:visible":function(e){t.formDia=e},close:t.closeRecordsDia}},[r("el-steps",{attrs:{active:t.currentStep,"align-center":"","finish-status":"success"}},[r("el-step",{attrs:{title:"实施"}}),r("el-step",{attrs:{title:"批准"}})],1),r("div",{staticStyle:{height:"470px","overflow-y":"auto"}},[r("table",{staticClass:"tables",attrs:{border:"1",cellspacing:"10"}},[r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("检测人员：")])]),r("td",{attrs:{colspan:"2"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.testMember,callback:function(e){t.$set(t.form,"testMember",e)},expression:"form.testMember"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.testMember))])],1),r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("监督员：")])]),r("td",{attrs:{colspan:"2"}},[0===t.currentStep?r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:t.usePersonName},model:{value:t.form.supervisor,callback:function(e){t.$set(t.form,"supervisor",e)},expression:"form.supervisor"}},t._l(t.recordUserList,(function(t){return r("el-option",{key:t.userName,attrs:{label:t.userName,value:t.userName}})})),1):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.supervisor))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("检测项目：")])]),r("td",[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.testItem,callback:function(e){t.$set(t.form,"testItem",e)},expression:"form.testItem"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.testItem))])],1),r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("样品编号：")])]),r("td",[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.sampleNumber,callback:function(e){t.$set(t.form,"sampleNumber",e)},expression:"form.sampleNumber"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.sampleNumber))])],1),r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("检测日期：")])]),r("td",[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.testDate,callback:function(e){t.$set(t.form,"testDate",e)},expression:"form.testDate"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.testDate))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("人员：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.personnel,callback:function(e){t.$set(t.form,"personnel",e)},expression:"form.personnel"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.personnel))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("仪器设备：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.device,callback:function(e){t.$set(t.form,"device",e)},expression:"form.device"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.device))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("工作环境：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.environment,callback:function(e){t.$set(t.form,"environment",e)},expression:"form.environment"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.environment))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("样品采集：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.sampleCollection,callback:function(e){t.$set(t.form,"sampleCollection",e)},expression:"form.sampleCollection"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.sampleCollection))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("样品的准备：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.samplePreparation,callback:function(e){t.$set(t.form,"samplePreparation",e)},expression:"form.samplePreparation"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.samplePreparation))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("检测方法：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.detectionMethod,callback:function(e){t.$set(t.form,"detectionMethod",e)},expression:"form.detectionMethod"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.detectionMethod))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("检测记录：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.inspectionRecord,callback:function(e){t.$set(t.form,"inspectionRecord",e)},expression:"form.inspectionRecord"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.inspectionRecord))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("检测报告：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.examiningReport,callback:function(e){t.$set(t.form,"examiningReport",e)},expression:"form.examiningReport"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.examiningReport))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("监督情况评价：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{rows:4,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.supervisionEvaluation,callback:function(e){t.$set(t.form,"supervisionEvaluation",e)},expression:"form.supervisionEvaluation"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.supervisionEvaluation))])],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("不符合处理意见：")])]),r("td",{attrs:{colspan:"5"}},[0===t.currentStep?r("el-input",{attrs:{rows:4,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.handlingAdvice,callback:function(e){t.$set(t.form,"handlingAdvice",e)},expression:"form.handlingAdvice"}}):r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.handlingAdvice))])],1)]),r("tr",[0===t.currentStep?r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("请选择下一步批准人：")])]):t._e(),0===t.currentStep?r("td",{attrs:{colspan:"5"}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:t.form.ratifyUserId,callback:function(e){t.$set(t.form,"ratifyUserId",e)},expression:"form.ratifyUserId"}},t._l(t.personList,(function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),1===t.currentStep?r("td",{staticClass:"td-title"},[r("p",[t._v("批准负责人：")])]):t._e(),1===t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"5"}},[t._v(" "+t._s(t.form.ratifyUserName)+" ")]):t._e()]),1===t.currentStep||2===t.currentStep?r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("审批结论：")])]),r("td",{attrs:{colspan:"2"}},[1===t.currentStep?r("el-input",{attrs:{rows:4,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.ratifyOpinion,callback:function(e){t.$set(t.form,"ratifyOpinion",e)},expression:"form.ratifyOpinion"}}):t._e(),2===t.currentStep?r("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.ratifyOpinion))]):t._e()],1),r("td",{staticClass:"td-title"},[1===t.currentStep?r("p",[t._v("请选择是否符合：")]):t._e(),2===t.currentStep?r("p",[t._v("是否符合：")]):t._e()]),r("td",{attrs:{colspan:"2"}},[1===t.currentStep?r("el-radio-group",{model:{value:t.form.isAccording,callback:function(e){t.$set(t.form,"isAccording",e)},expression:"form.isAccording"}},[r("el-radio",{attrs:{label:0}},[t._v("不符合")]),r("el-radio",{attrs:{label:1}},[t._v("符合")])],1):t._e(),2===t.currentStep?r("span",{staticClass:"td-info"},[t._v(" "+t._s(0===t.form.isAccording?"不符合":"符合"))]):t._e()],1)]):t._e()])]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.closeRecordsDia}},[t._v("取 消")]),0===t.currentStep&&t.userId==t.supervisedUserId?r("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:t.handleEdit}},[t._v("提 交")]):t._e(),1===t.currentStep&&t.userId==t.ratifyUserId?r("el-button",{attrs:{loading:t.editLoad},on:{click:function(e){return t.handleEdit(0)}}},[t._v("不通过")]):t._e(),1===t.currentStep&&t.userId==t.ratifyUserId?r("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:function(e){return t.handleEdit(1)}}},[t._v("通 过")]):t._e()],1)],1)],1)},s=[],a=r("5530"),i=(r("c740"),r("14d9"),r("b0c0"),r("d3b7"),r("0643"),r("4e3e"),r("159b"),r("4e71a")),o=r("b558"),u=r("2f62"),l={name:"recordsDialog",components:{},data:function(){return{formDia:!1,form:{superviseDetailsId:"",superviseDetailsRecordId:"",testMember:"",supervisor:"",supervisorId:"",testItem:"",sampleNumber:"",testDate:"",personnel:"",device:"",environment:"",sampleCollection:"",samplePreparation:"",detectionMethod:"",inspectionRecord:"",examiningReport:"",supervisionEvaluation:"",handlingAdvice:"",ratifyUserId:"",ratifyUserName:"",ratifyOpinion:"",isAccording:""},currentStep:0,editLoad:!1,personList:[],recordUserList:[],supervisedUserId:"",ratifyUserId:""}},computed:Object(a["a"])({},Object(u["b"])(["userId"])),methods:{openDia:function(t){this.formDia=!0,this.supervisedUserId=t.supervisedUserId,this.searchInfo(t),this.getAuthorizedPerson()},usePersonName:function(t){var e=this.recordUserList.findIndex((function(e){return e.userId===t}));e>-1&&(this.form.supervisor=this.recordUserList[e].userName)},searchInfo:function(t){var e=this;Object(i["p"])({superviseDetailsId:t.superviseDetailsId}).then((function(r){r.data.ratifyUserId?1!=r.data.isFinish?e.currentStep=1:1==r.data.isFinish&&(e.currentStep=2):e.currentStep=0,e.form=r.data,e.form.superviseDetailsId=t.superviseDetailsId,e.ratifyUserId=r.data.ratifyUserId,e.getRecordUser()})).catch((function(t){console.log("err---",t)}))},handleEdit:function(t){this.form.testMember&&this.form.supervisor&&this.form.testItem&&this.form.sampleNumber&&this.form.testDate?0===this.currentStep?this.addInfo():this.editInfo(t):this.$message.warning("请填写完整")},addInfo:function(){var t=this;this.editLoad=!0,Object(i["d"])(this.form).then((function(e){t.editLoad=!1,t.$message.success("操作成功"),t.closeRecordsDia()})).catch((function(e){console.log("err---",e),t.editLoad=!1}))},editInfo:function(t){var e=this;this.form.ratifyOpinion?null!==this.form.isAccording?(this.editLoad=!0,this.form.isFinish=t,Object(i["e"])(this.form).then((function(t){e.editLoad=!1,e.$message.success("操作成功"),e.closeRecordsDia()})).catch((function(t){console.log("err---",t),e.editLoad=!1}))):this.$message.warning("请选择是否符合"):this.$message.warning("请填写审批意见")},closeRecordsDia:function(){this.formDia=!1,this.$emit("closeRecordsDia")},getAuthorizedPerson:function(){var t=this;Object(o["w"])({type:2}).then((function(e){var r=[];e.data.forEach((function(t){r.push({label:t.name,value:t.id})})),t.personList=r}))},getRecordUser:function(){var t=this;Object(i["m"])({superviseDetailsId:this.form.superviseDetailsId}).then((function(e){t.recordUserList=e.data}))}}},c=l,d=(r("7e39"),r("2877")),p=Object(d["a"])(c,n,s,!1,null,"5b5c4b24",null);e["default"]=p.exports}}]);