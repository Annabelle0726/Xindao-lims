(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13979697"],{"0e9a":function(e,t,a){"use strict";var n=a("c14f"),o=a("1da1"),i=(a("c19f"),a("ace4"),a("2c66"),a("249d"),a("40e9"),a("d3b7"),a("ac1f"),a("5319"),a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("986a"),a("1d02"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("6ce5"),a("2834"),a("72f7"),a("4ea1"),a("c343")),r=a("acff"),c=a("2b0e");t["a"]={convertFileToHtml:function(e){return Object(o["a"])(Object(n["a"])().m((function t(){var a,r;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:return a=new XMLHttpRequest,a.open("GET",c["default"].prototype.javaApi+e,!0),a.send(),a.responseType="blob",r=new Promise((function(e,t){a.onload=Object(o["a"])(Object(n["a"])().m((function t(){var r,c,s,l,d;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:if(200!==this.status){t.n=2;break}return r=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),c=new FileReader,c.readAsArrayBuffer(r),s=new Promise((function(e,t){c.onload=Object(o["a"])(Object(n["a"])().m((function t(){var o,r,c;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:return o=a.response,t.n=1,Object(i["convertToHtml"])({arrayBuffer:o});case 1:r=t.v,c=r.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(c);case 2:return t.a(2)}}),t)})))})),l=e,t.n=1,s;case 1:d=t.v,l(d);case 2:return t.a(2)}}),t,this)})))})),t.n=1,r;case 1:return t.a(2,t.v)}}),t)})))()},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.drawImage(a,0,0,a.width,a.height);var o=e.toDataURL("image/png"),i=document.createElement("a"),r=new MouseEvent("click");i.download=t||"photo",i.href=o,i.dispatchEvent(r)},a.src=e},compressBlob:function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(a){t.onload=function(){var n=t.result,o=new Uint8Array(n),i=r["a"].deflate(o),c=new Blob([i],{type:e.type});a(c)}}))}}},"6a74":function(e,t,a){"use strict";a.d(t,"h",(function(){return o})),a.d(t,"i",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"j",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return f})),a.d(t,"c",(function(){return h}));var n=a("b775");function o(e){return Object(n["a"])({url:"/processMethodVerify/pagesMethodVerify",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/processMethodVerify/getMethodVerifyOne",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/deviceScope/search",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/processMethodVerify/addMethodVerify",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/processMethodVerify/updateMethodVerify",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/processMethodVerify/exportMethodVerify",method:"get",responseType:"blob",params:e})}function u(e){return Object(n["a"])({url:"/processMethodVerify/delMethodVerify",method:"delete",params:e})}function f(e){return Object(n["a"])({url:"/processMethodVerify/getVerifyMethodFileList",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/processMethodVerify/delVerifyMethodFileList",method:"delete",params:e})}},"722c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件上传",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{methodVerifyId:e.info.methodVerifyId},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[a("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),a("div",[a("lims-table",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:e.columnData,height:"calc(100vh - 47em)",highlightCurrentRow:!0,"table-data":e.tableData,"table-loading":e.tableLoading}})],1)])],1)},o=[],i=(a("d3b7"),a("00d5")),r=a("0e9a"),c=a("6a74"),s={name:"ViewTestRecord",components:{limsTable:i["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],tableData:[],info:{}}},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,void 0===this.info&&(this.info={methodVerifyId:""}),this.searchTableList()},searchTableList:function(){var e=this;this.tableLoading=!0,Object(c["g"])({methodVerifyId:this.info.methodVerifyId}).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data)})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},closeFilesLook:function(){this.filesDialogVisible=!1},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,r["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var a=document.createElement("a");a.href=t,a.download=e.fileName,a.click()}},delete:function(e){var t=this;this.tableLoading=!0,Object(c["c"])({methodFileId:e.methodFileId}).then((function(e){t.tableLoading=!1,200===e.code&&(t.$message.success("删除成功"),t.searchTableList())})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,a,n){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.searchTableList())}},computed:{fileAction:function(){return this.javaApi+"/processMethodVerify/uploadVerifyMethodFile"}}},l=s,d=a("2877"),u=Object(d["a"])(l,n,o,!1,null,"0f495bfe",null);t["default"]=u.exports}}]);