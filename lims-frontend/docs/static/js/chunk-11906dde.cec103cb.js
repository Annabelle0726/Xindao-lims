(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11906dde","chunk-12e942f5"],{"0bae":function(t,e,a){},1724:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"capacity-scope"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[t._v("物质名称")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getTableData(e)}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getTableData}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.openDialog}},[t._v("添加验收")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.exportExcel}},[t._v("导出")])],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:t.tableData,column:t.columns,height:"calc(100vh - 250px)",page:t.page,tableLoading:t.tableLoading},on:{pagination:t.pagination},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.edit(n)}}},[t._v("编辑")])]}}])})],1),t.addRecordRef?a("AddRecord",{ref:"addRecordRef",on:{submit:t.submit}}):t._e()],1)},i=[],c=a("c14f"),l=a("1da1"),s=a("5530"),o=(a("b0c0"),a("00d5")),r=a("2c83"),u=a("1844"),p={components:{limsTable:o["a"],AddRecord:r["default"]},data:function(){return{form:{name:void 0},addRecordRef:!1,columns:[{label:"出场编号",prop:"factoryNum"},{label:"有效期",prop:"effectiveDate"},{label:"生产厂家",prop:"factoryManufacturer"},{label:"文档编号",prop:"fileNum"},{label:"标准物质名称",prop:"name"},{label:"规格型号",prop:"model"},{label:"管理编号",prop:"manageNum"},{label:"存放位置",prop:"position"},{label:"提交日期",prop:"acquisitionDate"},{label:"数量",prop:"quantity"},{fixed:"right",label:"操作",align:"center",dataType:"slot",slot:"action"}],tableData:[],page:{total:0,size:10,current:1},tableLoading:!1}},mounted:function(){this.getTableData()},methods:{getTableData:function(){var t=this;this.tableLoading=!0,Object(u["d"])(Object(s["a"])(Object(s["a"])({},this.form),this.page)).then((function(e){t.tableLoading=!1,t.tableData=e.data.records,t.page.total=e.data.total})).catch((function(e){t.tableLoading=!1}))},openDialog:function(){var t=this;this.addRecordRef=!0,this.$nextTick((function(){t.$refs.addRecordRef.openDialog()}))},submit:function(){this.addRecordRef=!1,this.getTableData()},edit:function(t){var e=this;this.addRecordRef=!0,this.$nextTick((function(){e.$refs.addRecordRef.openDialog(t.id)}))},reset:function(){this.form.name=void 0,this.getTableData()},exportExcel:function(){var t=this;return Object(l["a"])(Object(c["a"])().m((function e(){return Object(c["a"])().w((function(e){while(1)switch(e.n){case 0:Object(u["b"])().then((function(e){var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"标准物质验收.xlsx")}));case 1:return e.a(2)}}),e)})))()},pagination:function(t){this.page.size=t.limit,this.getTableData()}}},d=p,f=(a("d1e71"),a("2877")),b=Object(f["a"])(d,n,i,!1,null,"bb0cc1f2",null);e["default"]=b.exports},1844:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return r}));var n=a("b775");function i(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/getPageAcceptance",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/addAcceptance",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/updateAcceptance",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/feStandardSubstance/getStandardSubstanceAll",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/getAcceptanceDetails",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/exportFeStandardSubstanceAcceptance",method:"get",params:t,responseType:"blob"})}},"2c83":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.dialogVisible,title:"标准物质验收记录",width:"72%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"acceptance",attrs:{model:t.acceptance,"label-width":"140px",size:"small"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"厂家代表",prop:"producer"}},[a("el-input",{model:{value:t.acceptance.producer,callback:function(e){t.$set(t.acceptance,"producer",e)},expression:"acceptance.producer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"相关附件",prop:"file"}},[a("div",{staticClass:"table-between"},[a("el-input",{staticStyle:{width:"80%"},attrs:{disabled:""},model:{value:t.acceptance.file,callback:function(e){t.$set(t.acceptance,"file",e)},expression:"acceptance.file"}}),a("el-upload",{ref:"upload",staticStyle:{float:"right"},attrs:{headers:t.uploadHeader,action:t.action,"show-file-list":!1,"on-success":t.onSuccess}},[a("el-button",{attrs:{type:"primary"}},[t._v(" 附件上传 ")])],1)],1)])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接收人",prop:"recipient"}},[a("el-input",{model:{value:t.acceptance.recipient,callback:function(e){t.$set(t.acceptance,"recipient",e)},expression:"acceptance.recipient"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接受签字",prop:"signature"}},[a("el-input",{model:{value:t.acceptance.signature,callback:function(e){t.$set(t.acceptance,"signature",e)},expression:"acceptance.signature"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"验收情况",prop:"situation"}},[a("el-input",{model:{value:t.acceptance.situation,callback:function(e){t.$set(t.acceptance,"situation",e)},expression:"acceptance.situation"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"安装调试情况",prop:"installation"}},[a("el-input",{model:{value:t.acceptance.installation,callback:function(e){t.$set(t.acceptance,"installation",e)},expression:"acceptance.installation"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"清单",prop:"substanceId",rule:[{required:!0,message:"请选择清单",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.acceptance.substanceId,callback:function(e){t.$set(t.acceptance,"substanceId",e)},expression:"acceptance.substanceId"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"到货日期",prop:"arriveDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.acceptance.arriveDate,callback:function(e){t.$set(t.acceptance,"arriveDate",e)},expression:"acceptance.arriveDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"维修单位",prop:"maintenanceUnit"}},[a("el-input",{model:{value:t.acceptance.maintenanceUnit,callback:function(e){t.$set(t.acceptance,"maintenanceUnit",e)},expression:"acceptance.maintenanceUnit"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备件确认"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.addSpareTable}},[t._v("增加行")])],1)],1),a("el-col",{attrs:{span:24}},[a("lims-table",{attrs:{tableData:t.list,column:t.spareColumns,height:"300"},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;e.index;return[n.isEdit?a("el-input",{attrs:{size:"small"},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"row.name"}}):a("span",[t._v(t._s(n.name))])]}},{key:"number",fn:function(e){var n=e.row;e.index;return[n.isEdit?a("el-input",{attrs:{size:"small"},model:{value:n.number,callback:function(e){t.$set(n,"number",e)},expression:"row.number"}}):a("span",[t._v(t._s(n.number))])]}},{key:"action",fn:function(e){var n=e.row,i=e.index;return[n.isEdit?a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.save(i)}}},[t._v("保存")]),a("el-button",{attrs:{type:"text"}},[t._v("取消")])],1):a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.edit(i)}}},[t._v("修改")])],1)]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("保 存")])],1)],1)},i=[],c=(a("14d9"),a("00d5")),l=a("1844"),s={components:{limsTable:c["a"]},data:function(){return{dialogVisible:!1,loading:!1,submitLoading:!1,acceptance:{id:void 0,producer:void 0,file:void 0,recipient:void 0,signature:void 0,situation:void 0,installation:void 0,substanceId:void 0,arriveDate:void 0,maintenanceUnit:void 0,list:[]},list:[],spareColumns:[{label:"名称",prop:"name",align:"center",dataType:"slot",slot:"name"},{label:"数量",prop:"number",align:"center",dataType:"slot",slot:"number"},{label:"操作",align:"center",dataType:"slot",slot:"action",width:150}],options:[]}},mounted:function(){this.getStand()},methods:{openDialog:function(t){t?this.getDetail(t):this.clearForm(),this.dialogVisible=!0},getDetail:function(t){var e=this;this.loading=!0,Object(l["c"])({id:t}).then((function(t){e.acceptance=t.data.acceptance,e.list=t.data.list,e.loading=!1})).catch((function(t){e.loading=!1}))},getStand:function(){var t=this;Object(l["e"])().then((function(e){t.options=e.data}))},addSpareTable:function(){this.list.push({acceptanceId:this.acceptance.id,name:"",number:"",isEdit:!0})},onSuccess:function(t){this.acceptance.file=t.data},save:function(t){this.$set(this.list[t],"isEdit",!1)},edit:function(t){this.$set(this.list[t],"isEdit",!0)},clearForm:function(){this.list=[],this.resetForm("acceptance")},closeDialog:function(){this.clearForm(),this.resetForm("acceptance"),this.dialogVisible=!1},submit:function(){var t=this;this.acceptance.substanceId?(this.acceptance.list=this.HaveJson(this.list),this.submitLoading=!0,this.acceptance.id?Object(l["f"])({acceptance:this.acceptance,list:this.list}).then((function(e){t.$message.success("编辑成功"),t.submitLoading=!1,t.closeDialog(),t.$emit("submit")})).catch((function(e){t.submitLoading=!1})):Object(l["a"])({acceptance:this.acceptance,list:this.list}).then((function(e){t.$message.success("新增成功"),t.closeDialog(),t.$emit("submit")})).catch((function(e){t.submitLoading=!1}))):this.$message.warning("请选择清单")}},computed:{action:function(){return this.javaApi+"/personBasicInfo/saveCNASFile"}}},o=s,r=(a("d153c"),a("2877")),u=Object(r["a"])(o,n,i,!1,null,"35fccddd",null);e["default"]=u.exports},"6b7e":function(t,e,a){},d153c:function(t,e,a){"use strict";a("0bae")},d1e71:function(t,e,a){"use strict";a("6b7e")}}]);