(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-704fb99f"],{"1fa1":function(t,e,a){},a790:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"厂家密度绑定",visible:t.isShow,width:"800px"},on:{"update:visible":function(e){t.isShow=e},close:function(e){return t.$emit("closeBindPartDialog")}}},[a("lims-table",{attrs:{tableData:t.tableData,column:t.column,height:"460",page:t.page,tableLoading:t.tableLoading}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.$emit("closeBindPartDialog")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.addBindLoad},on:{click:t.addBindPart}},[t._v("新 增")])],1)],1),a("el-dialog",{attrs:{title:"操作厂家密度绑定",visible:t.addBindSupplierDensityDialog,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addBindSupplierDensityDialog=e},close:t.closeBindPartDialog}},[t.addBindSupplierDensityDialog?a("div",{staticClass:"body"},[a("el-form",{ref:"bindSupplierDensityData",attrs:{"label-position":"right","label-width":"80px",rules:t.bindPartDataRules,model:t.bindSupplierDensityData}},[a("el-form-item",{attrs:{label:"型号：",prop:"model"}},[a("el-input",{attrs:{size:"small"},model:{value:t.bindSupplierDensityData.model,callback:function(e){t.$set(t.bindSupplierDensityData,"model",e)},expression:"bindSupplierDensityData.model"}})],1),a("el-form-item",{attrs:{label:"厂家：",prop:"supplierName"}},[a("el-input",{attrs:{size:"small"},model:{value:t.bindSupplierDensityData.supplierName,callback:function(e){t.$set(t.bindSupplierDensityData,"supplierName",e)},expression:"bindSupplierDensityData.supplierName"}})],1),a("el-form-item",{attrs:{label:"密度：",prop:"densityValue"}},[a("el-input",{attrs:{size:"small"},model:{value:t.bindSupplierDensityData.densityValue,callback:function(e){t.$set(t.bindSupplierDensityData,"densityValue",e)},expression:"bindSupplierDensityData.densityValue"}})],1)],1)],1):t._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeBindPartDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.bindLoad},on:{click:t.submitBind}},[t._v("确 认")])],1)])],1)},o=[],r=a("5530"),n=a("00d5"),l=a("66df"),s={name:"bindSupplierDensityDialog",components:{limsTable:n["a"]},props:{bindSupplierDensityDialog:{type:Boolean,default:function(){return!1}},currentRow:{type:Object,default:function(){}}},data:function(){var t=this;return{tableData:[],column:[{label:"型号",prop:"model"},{label:"厂家名称",prop:"supplierName"},{label:"密度值",prop:"densityValue"},{dataType:"action",fixed:"right",label:"操作",width:"140px",operation:[{name:"编辑",type:"text",clickFun:function(e){t.editForm(e)}},{name:"删除",type:"text",clickFun:function(e){t.delete(e)}}]}],page:{total:0,size:10,current:1,layout:"total, prev, pager, next"},tableLoading:!1,searchUrl:"",upUrl:"",delUrl:"",isShow:this.bindSupplierDensityDialog,addBindSupplierDensityDialog:!1,bindSupplierDensityData:{id:"",model:"",supplierName:"",densityValue:""},bindPartDataRules:{supplierName:[{required:!0,message:"请填写厂家名称",trigger:"blur"}],densityValue:[{required:!0,message:"请填写密度",trigger:"blur"}]},bindLoad:!1,upIndex:0,addBindLoad:!1,operationType:""}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.tableLoading=!0,Object(l["n"])(Object(r["a"])(Object(r["a"])({},this.page),{},{productId:this.currentRow.id})).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},addBindPart:function(){this.addBindSupplierDensityDialog=!0,this.operationType="add"},editForm:function(t){this.addBindSupplierDensityDialog=!0,this.bindSupplierDensityData=this.HaveJson(t),this.operationType="edit"},submitBind:function(){var t=this;this.$refs["bindSupplierDensityData"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a={id:t.bindSupplierDensityData.id,productId:t.currentRow.id,model:t.bindSupplierDensityData.model,supplierName:t.bindSupplierDensityData.supplierName,densityValue:t.bindSupplierDensityData.densityValue};t.bindLoad=!0,"add"===t.operationType?Object(l["c"])(a).then((function(e){t.bindLoad=!1,200===e.code&&(t.resetForm("bindSupplierDensityData"),t.addBindSupplierDensityDialog=!1,t.$message.success("新增成功"),t.getList())})).catch((function(e){t.bindLoad=!1,console.log(e)})):Object(l["s"])(a).then((function(e){t.bindLoad=!1,200===e.code&&(t.resetForm("bindSupplierDensityData"),t.addBindSupplierDensityDialog=!1,t.$message.success("修改成功"),t.getList())})).catch((function(e){t.bindLoad=!1,console.log(e)}))}))},delete:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["h"])({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.getList())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeBindPartDialog:function(){this.$refs["bindSupplierDensityData"].resetFields(),this.addBindSupplierDensityDialog=!1}}},d=s,c=a("2877"),u=Object(c["a"])(d,i,o,!1,null,"bfb64c76",null);e["default"]=u.exports},af01:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"add"===t.operationType?"新增":"编辑",visible:t.editFormDia,width:"500px"},on:{"update:visible":function(e){t.editFormDia=e},close:t.closeDia}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"场所：",prop:"laboratoryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",size:"small"},model:{value:t.editForm.laboratoryId,callback:function(e){t.$set(t.editForm,"laboratoryId",e)},expression:"editForm.laboratoryId"}},t._l(t.laboratoryList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"检验对象：",prop:"specimenName"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.editForm.specimenName,callback:function(e){t.$set(t.editForm,"specimenName",e)},expression:"editForm.specimenName"}})],1),a("el-form-item",{attrs:{label:"检验对象EN：",prop:"specimenNameEn"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.editForm.specimenNameEn,callback:function(e){t.$set(t.editForm,"specimenNameEn",e)},expression:"editForm.specimenNameEn"}})],1),a("el-form-item",{attrs:{label:"对象代号：",prop:"code"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.editForm.code,callback:function(e){t.$set(t.editForm,"code",e)},expression:"editForm.code"}})],1),a("el-form-item",{attrs:{label:"对象类型：",prop:"objectType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",size:"small"},model:{value:t.editForm.objectType,callback:function(e){t.$set(t.editForm,"objectType",e)},expression:"editForm.objectType"}},t._l(t.dict.type.object_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDia}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:t.handleEdit}},[t._v("提 交")])],1)],1)],1)},o=[],r=a("5530"),n=(a("14d9"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("c779")),l=a("66df"),s={name:"EditForm",dicts:["object_type"],components:{},data:function(){return{editFormDia:!1,editLoad:!1,editForm:{id:"",laboratoryId:"",specimenName:"",specimenNameEn:"",code:"",objectType:""},laboratoryList:[],editFormRules:{laboratoryId:[{required:!0,message:"请选择场所",trigger:"change"}],specimenName:[{required:!0,message:"请输入检验对象",trigger:"blur"}],code:[{required:!0,message:"请输入对象代号",trigger:"blur"}]},operationType:""}},methods:{openDia:function(t,e){this.operationType=t,this.obtainItemParameterList(),this.editFormDia=!0,"add"===t?this.resetForm("editForm"):this.editForm=Object(r["a"])({},e)},handleEdit:function(){var t=this;this.$refs.editForm.validate((function(e){e&&(t.editLoad=!0,t.editForm.id?Object(l["r"])(t.editForm).then((function(e){t.editLoad=!1,500!==e.code&&(t.$message.success("修改成功"),t.closeDia(),t.$emit("refreshList"))})).catch((function(e){t.editLoad=!1})):Object(l["d"])(t.editForm).then((function(e){t.editLoad=!1,500!==e.code&&(t.$message.success("添加成功"),t.closeDia(),t.$emit("refreshList"))})).catch((function(e){t.editLoad=!1})))}))},closeDia:function(){this.editFormDia=!1,this.resetForm("editForm")},obtainItemParameterList:function(){var t=this;Object(n["d"])().then((function(e){var a=[];e.data.forEach((function(t){a.push({label:t.laboratoryName,value:t.id})})),t.laboratoryList=a}))}}},d=s,c=a("2877"),u=Object(c["a"])(d,i,o,!1,null,"f4635048",null);e["default"]=u.exports},c779:function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"g",(function(){return l})),a.d(e,"c",(function(){return s})),a.d(e,"f",(function(){return d})),a.d(e,"b",(function(){return c}));var i=a("b775");function o(){return Object(i["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get"})}function r(t){return Object(i["a"])({url:"/laboratoryScope/selectItemParameter",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/laboratoryScope/addParameter",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/laboratoryScope/upParameter",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/laboratoryScope/delParameter",method:"delete",params:t})}function d(t){return Object(i["a"])({url:"/sealScope/selectSeal",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/sealScope/addSeal",method:"post",data:t})}},e733:function(t,e,a){"use strict";a("1fa1")},eb77:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"零件绑定",visible:t.isShow,width:"800px"},on:{"update:visible":function(e){t.isShow=e},close:function(e){return t.$emit("closeBindPartDialog")}}},[a("lims-table",{attrs:{tableData:t.tableData,column:t.column,height:"460",page:t.page,tableLoading:t.tableLoading}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.$emit("closeBindPartDialog")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.addBindLoad},on:{click:function(e){return t.addBindPart("add")}}},[t._v("新 增")])],1)],1),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.addBindPartDialog,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addBindPartDialog=e},close:t.closeBindPartDialog}},[t.addBindPartDialog?a("div",{staticClass:"body"},[a("el-form",{ref:"bindPartData",attrs:{"label-position":"right","label-width":"80px",rules:t.bindPartDataRules,model:t.bindPartData}},[a("el-form-item",{attrs:{label:"零件号：",prop:"partNo"}},[a("el-input",{attrs:{size:"small"},model:{value:t.bindPartData.partNo,callback:function(e){t.$set(t.bindPartData,"partNo",e)},expression:"bindPartData.partNo"}})],1),a("el-form-item",{attrs:{label:"颜色：",prop:"color"}},[a("el-input",{attrs:{size:"small"},model:{value:t.bindPartData.color,callback:function(e){t.$set(t.bindPartData,"color",e)},expression:"bindPartData.color"}})],1),a("el-form-item",{attrs:{label:"色标：",prop:"colorCode"}},[a("el-input",{attrs:{size:"small"},model:{value:t.bindPartData.colorCode,callback:function(e){t.$set(t.bindPartData,"colorCode",e)},expression:"bindPartData.colorCode"}})],1)],1)],1):t._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeBindPartDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.bindLoad},on:{click:t.submitBind}},[t._v("确 认")])],1)])],1)},o=[],r=(a("a9e3"),a("00d5")),n=a("b775");function l(t){return Object(n["a"])({url:"/structureTestObjectPart/selectByTestObjectId",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/structureTestObjectPart/addTestObjectPart",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/structureTestObjectPart/updateTestObjectPart",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/structureTestObjectPart/deleteTestObjectPart",method:"delete",params:t})}function u(t){return Object(n["a"])({url:"/productPart/selectByProductId",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/productPart/addProductPart",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/productPart/updateProductPart",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/productPart/deleteProductPart",method:"delete",params:t})}a("66df");var f={name:"bindPartDialog",components:{limsTable:r["a"]},props:{bindPartDialog:{type:Boolean,default:function(){return!1}},type:{type:Number,default:function(){return null}},currentRow:{type:Object,default:function(){}}},data:function(){var t=this;return{isShow:this.bindPartDialog,dialogTitle:"新增零件绑定",operationType:"",tableData:[],tableLoading:!1,column:[{label:"零件号",prop:"partNo"},{label:"颜色",prop:"color"},{label:"色标",prop:"colorCode"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(e){t.addBindPart("edit",e)}},{name:"删除",type:"text",clickFun:function(e){t.delete(e)}}]}],page:{total:0,size:10,current:1,layout:"total, prev, pager, next"},bindPartComponent:{entity:{orderBy:{field:"id",order:"asc"}},isPage:!0,isIndex:!0,showSelect:!1,select:!0,do:[{id:"update",font:"编辑",type:"text",method:"doDiy",field:[]},{id:"delete",font:"删除",type:"text",method:"doDiy"}],tagField:{},selectField:{},requiredAdd:["partNo"],requiredUp:["partNo"]},addBindPartDialog:!1,bindPartData:{partNo:"",color:"",colorCode:""},bindPartDataRules:{partNo:[{required:!0,message:"请填写零件号",trigger:"blur"}]},bindLoad:!1,upIndex:0,addBindLoad:!1}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.tableLoading=!0,0===this.type?l({testObjectId:this.currentRow.id}).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1})):u({productId:this.currentRow.id}).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},addBindPart:function(t,e){this.addBindPartDialog=!0,this.dialogTitle="add"===t?"新增零件绑定":"修改零件绑定",this.operationType=t,"edit"===t&&(this.bindPartData=this.HaveJson(e))},submitBind:function(){var t=this;this.$refs["bindPartData"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=0===t.type?{testObjectId:t.currentRow.id,color:t.bindPartData.color,colorCode:t.bindPartData.colorCode,partNo:t.bindPartData.partNo}:{productId:t.currentRow.id,color:t.bindPartData.color,colorCode:t.bindPartData.colorCode,partNo:t.bindPartData.partNo};t.bindLoad=!0,"add"===t.operationType?0===t.type?s(a).then((function(e){200===e.code&&(t.resetForm("bindPartData"),t.addBindPartDialog=!1,t.$message.success("新增成功"),t.getList())})).catch((function(e){t.bindLoad=!1,console.log(e)})):p(a).then((function(e){200===e.code&&(t.resetForm("bindPartData"),t.addBindPartDialog=!1,t.$message.success("新增成功"),t.getList())})).catch((function(e){t.bindLoad=!1,console.log(e)})):0===t.type?d(a).then((function(e){200===e.code&&(t.resetForm("bindPartData"),t.addBindPartDialog=!1,t.$message.success("修改成功"),t.getList())})).catch((function(e){t.bindLoad=!1,console.log(e)})):m(a).then((function(e){200===e.code&&(t.resetForm("bindPartData"),t.addBindPartDialog=!1,t.$message.success("修改成功"),t.getList())})).catch((function(e){t.bindLoad=!1,console.log(e)}))}))},delete:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){0===e.type?c({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.getList())})):b({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.getList())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeBindPartDialog:function(){this.resetForm("bindPartData"),this.addBindPartDialog=!1}}},h=f,g=a("2877"),y=Object(g["a"])(h,i,o,!1,null,"4e0a43f3",null);e["default"]=y.exports},f5ee:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"capacity-scope"},[a("div",[a("el-row",{staticClass:"title"},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:12}},[a("el-radio-group",{attrs:{size:"medium",fill:"#409EFF"},on:{change:t.refreshTable},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:0}},[t._v("检验项目参数")]),a("el-radio-button",{attrs:{label:1}},[t._v("检验对象")])],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[0===t.radio?a("el-upload",{ref:"upload1",staticStyle:{display:"inline","margin-right":"8px"},attrs:{action:t.uploadAction1,"before-upload":t.beforeUpload1,headers:t.token,"on-error":t.onError1,"on-success":t.handleSuccessUp1,"show-file-list":!1,accept:".doc,.docx,.xls,.xlsx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("导入")])],1):t._e(),1===t.radio?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.uploadDia=!0}}},[t._v("导入")]):t._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.openAdd()}}},[t._v("新增")])],1)],1)],1),a("div",[a("el-form",{ref:"itemParameterForm",attrs:{model:t.itemParameterForm,size:"small",inline:!0}},[0===t.radio?a("el-form-item",{attrs:{label:"检验项",prop:"inspectionItem"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.itemParameterForm.inspectionItem,callback:function(e){t.$set(t.itemParameterForm,"inspectionItem",e)},expression:"itemParameterForm.inspectionItem"}})],1):t._e(),0===t.radio?a("el-form-item",{attrs:{label:"检验子项",prop:"inspectionItemSubclass"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.itemParameterForm.inspectionItemSubclass,callback:function(e){t.$set(t.itemParameterForm,"inspectionItemSubclass",e)},expression:"itemParameterForm.inspectionItemSubclass"}})],1):t._e(),0===t.radio?a("el-form-item",{attrs:{label:"检验对象",prop:"sample"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.itemParameterForm.sample,callback:function(e){t.$set(t.itemParameterForm,"sample",e)},expression:"itemParameterForm.sample"}})],1):t._e(),1===t.radio?a("el-form-item",{attrs:{label:"检验对象",prop:"specimenName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.itemParameterForm.specimenName,callback:function(e){t.$set(t.itemParameterForm,"specimenName",e)},expression:"itemParameterForm.specimenName"}})],1):t._e(),1===t.radio?a("el-form-item",{attrs:{label:"零件号",prop:"partNo"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.itemParameterForm.partNo,callback:function(e){t.$set(t.itemParameterForm,"partNo",e)},expression:"itemParameterForm.partNo"}})],1):t._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.refreshTable}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.refresh}},[t._v("重置")])],1)],1),0===t.radio?a("div",{staticClass:"table"},[a("lims-table",{key:"tableData",attrs:{tableData:t.tableData,column:t.column,height:"calc(100vh - 290px)",page:t.page,tableLoading:t.tableLoading},on:{pagination:t.pagination}})],1):t._e(),1===t.radio?a("div",{staticClass:"table"},[a("lims-table",{key:"testObjectTableData",attrs:{tableData:t.testObjectTableData,column:t.testObjectColumn,height:"calc(100vh - 290px)",page:t.testObjectPage,tableLoading:t.tableLoading},on:{pagination:t.pagination}})],1):t._e()],1),a("el-dialog",{attrs:{title:"产品维护",visible:t.diaProduct,width:"900px"},on:{"update:visible":function(e){t.diaProduct=e}}},[a("lims-table",{attrs:{tableData:t.productData,column:t.productColumn,height:"460",page:t.productPage,tableLoading:t.productableLoading},on:{pagination:t.productPagination}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.diaProduct=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.productLoad},on:{click:function(e){return t.editProduct("add")}}},[t._v("新 增")])],1)],1),a("el-dialog",{attrs:{title:"操作产品维护",visible:t.productEditDia,width:"400px"},on:{"update:visible":function(e){t.productEditDia=e}}},[a("el-form",{ref:"productEditForm",attrs:{model:t.productEditForm,rules:t.productRules,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:t.productEditForm.name,callback:function(e){t.$set(t.productEditForm,"name",e)},expression:"productEditForm.name"}})],1),a("el-form-item",{attrs:{label:"产品名称EN",prop:"nameEn"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:t.productEditForm.nameEn,callback:function(e){t.$set(t.productEditForm,"nameEn",e)},expression:"productEditForm.nameEn"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeProduct}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.uploading,type:"primary"},on:{click:t.submitProduct}},[t._v("确 认")])],1)],1),a("el-dialog",{attrs:{visible:t.uploadDia,title:"数据导入",width:"500px"},on:{"update:visible":function(e){t.uploadDia=e}}},[a("div",{staticStyle:{margin:"0 auto"}},[a("el-upload",{ref:"upload",attrs:{action:t.uploadAction,"auto-upload":!1,"file-list":t.fileList,headers:t.token,limit:1,"on-change":t.beforeUpload,"on-error":t.onError,"on-success":t.onSuccess,accept:".xlsx",drag:"",name:"file"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.uploadDia=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.uploading,type:"primary"},on:{click:function(e){return t.submitUpload()}}},[t._v("上 传")])],1)]),a("EditForm",{ref:"editForm",on:{refreshList:t.refreshList1}}),a("testObjectEditForm",{ref:"testObjectEditForm",on:{refreshList:t.refreshList}}),t.bindPartDialog?a("BindPartDialog",{attrs:{bindPartDialog:t.bindPartDialog,currentRow:t.currentRow,type:t.type},on:{closeBindPartDialog:t.closeBindPartDialog}}):t._e(),t.bindSupplierDensityDialog?a("BindSupplierDensityDialog",{attrs:{bindSupplierDensityDialog:t.bindSupplierDensityDialog,currentRow:t.currentSupplierDensityRow},on:{closeBindPartDialog:t.closeBindSupplierDensityDialog}}):t._e()],1)},o=[],r=a("5530"),n=(a("c740"),a("14d9"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("eb77")),l=a("a790"),s=a("66df"),d=a("00d5"),c=a("9d46"),u=a("af01"),p=a("5f87"),m=a("c779"),b={name:"Capability",components:{limsTable:d["a"],EditForm:c["default"],testObjectEditForm:u["default"],BindPartDialog:n["default"],BindSupplierDensityDialog:l["default"]},data:function(){var t=this;return{uploadAction:"/prod-api/capacityScope/importExcel",uploadAction1:"/prod-api/capacityScope/importEquipData",tableData:[],tableLoading:!1,column:[{label:"检验项",prop:"inspectionItem"},{label:"检验项EN",prop:"inspectionItemEn"},{label:"检验子项",prop:"inspectionItemSubclass"},{label:"检验子项EN",prop:"inspectionItemSubclassEn"},{label:"检验项分类",prop:"inspectionItemClass"},{label:"检验项分类EN",prop:"inspectionItemClassEn"},{label:"检验对象",prop:"sample"},{label:"单价(元)",prop:"price"},{label:"试验室",prop:"sonLaboratory"},{label:"要求描述",prop:"askTell"},{label:"要求值",prop:"ask"},{label:"计量单位",prop:"unit"},{label:"工时(H)",prop:"manHour"},{label:"预计时间(H)",prop:"manDay"},{label:"工时分组",prop:"manHourGroup"},{label:"创建时间",prop:"createTime"},{label:"修改时间",prop:"updateTime"},{label:"条件",prop:"radiusList"},{dataType:"action",fixed:"right",label:"操作",width:"140px",operation:[{name:"编辑",type:"text",clickFun:function(e){t.editForm(e)}},{name:"删除",type:"text",clickFun:function(e){t.delete(e)}}]}],page:{total:0,size:10,current:1},testObjectTableData:[],testObjectColumn:[{dataType:"tag",label:"场所",prop:"laboratoryId",minWidth:"130",formatData:function(e){var a=t.laboratoryList.findIndex((function(t){return t.value==e}));return a>-1?t.laboratoryList[a].label:null},formatType:function(t){return 1==t?"success":5==t?"info":6==t?"warning":8==t?"danger":null}},{label:"检验对象",prop:"specimenName"},{label:"检验对象EN",prop:"specimenNameEn"},{label:"产品",prop:"product"},{label:"对象代号",prop:"code"},{label:"对象类型",prop:"objectType",dataType:"tag",formatData:function(t){return 1==t?"原材料":2==t?"成品":"辅材"},formatType:function(t){return 1==t?"success":2==t?"info":"warning"}},{label:"创建人",prop:"createUserName"},{label:"更新人",prop:"updateUserName"},{label:"创建时间",prop:"createTime"},{label:"更新时间",prop:"updateTime"},{dataType:"action",fixed:"right",label:"操作",width:"240px",operation:[{name:"编辑",type:"text",clickFun:function(e){t.editTestObjectForm(e)}},{name:"删除",type:"text",clickFun:function(e){t.deleteTest(e)}},{name:"产品维护",type:"text",clickFun:function(e){t.upProduct(e)}},{name:"零件绑定",type:"text",clickFun:function(e){t.bindPartFirst(e)}}]}],testObjectPage:{total:0,size:10,current:0},addOrUpdate:"",tree:null,loading:!0,itemParameterForm:{inspectionItem:null,inspectionItemSubclass:null,sample:null,specimenName:null,partNo:null},radio:0,productLoad:!1,diaProduct:!1,productColumn:[{label:"产品名称",prop:"name"},{label:"产品名称EN",prop:"nameEn"},{dataType:"action",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(e){t.editProduct("edit",e)}},{name:"删除",type:"text",clickFun:function(e){t.deleteProduct(e)}},{name:"零件绑定",type:"text",clickFun:function(e){t.bindPartSecond(e)}},{name:"厂家密度绑定",type:"text",clickFun:function(e){t.bindSupplierDensitySecond(e)}}]}],productData:[],productPage:{total:0,size:10,current:1,partNo:null,layout:"total, prev, pager, next"},productableLoading:!1,productEditDia:!1,operationType:"",productEditForm:{objectId:"",id:"",name:"",nameEn:""},objectId:"",productRules:{name:[{required:!0,message:"请填写产品名称",trigger:"blur"}],nameEn:[{required:!0,message:"请填写产品名称EN",trigger:"blur"}]},uploadDia:!1,fileList:[],token:{Authorization:"Bearer "+Object(p["a"])()},uploading:!1,currentRow:{},currentSupplierDensityRow:{},bindSupplierDensityDialog:!1,bindPartDialog:!1,type:null,laboratoryList:[]}},created:function(){this.getItemParameterList(),this.refreshTable()},computed:{title:function(){return 1===this.addOrUpdate?"新增":"编辑"}},methods:{submitUpload:function(){0!==this.$refs.upload.uploadFiles.length?(this.uploading=!0,this.$refs.upload.submit()):this.$message.error("未选择文件")},onSuccess:function(t,e,a){this.$refs.upload.clearFiles(),this.uploadDia=!1,this.uploading=!1,200===t.code?(this.$message.success("上传成功"),this.productList=[],this.refreshTable()):this.$message.error(t.msg)},onError:function(t,e,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles(),this.uploading=!1},beforeUpload:function(t,e){return!(t.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError1:function(t,e,a){this.$message.error("上传失败"),this.$refs.upload1.clearFiles(),this.uploading=!1},beforeUpload1:function(t,e){return!(t.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload1.clearFiles(),!1)},handleSuccessUp1:function(t,e,a){this.$refs.upload1.clearFiles(),200===t.code?(this.$message.success("上传成功"),this.refreshTable()):this.$message.error(t.msg)},refreshList:function(){this.refreshTable()},refreshList1:function(){this.refreshTable()},refreshTable:function(){var t=this;this.tableLoading=!0,0===this.radio?Object(s["l"])(Object(r["a"])(Object(r["a"])({},this.page),this.itemParameterForm)).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1})):Object(s["o"])(Object(r["a"])(Object(r["a"])({},this.testObjectPage),this.itemParameterForm)).then((function(e){t.tableLoading=!1,200===e.code&&(t.testObjectTableData=e.data.records,t.testObjectPage.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},refresh:function(){this.resetForm("itemParameterForm"),this.page.current=1,this.refreshTable()},pagination:function(t){this.page.size=t.limit,this.refreshTable()},openAdd:function(){0===this.radio?this.$refs.editForm.openDia("add"):this.$refs.testObjectEditForm.openDia("add")},editForm:function(t){this.$refs.editForm.openDia("edit",t)},delete:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["e"])({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.refreshTable())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},editTestObjectForm:function(t){this.$refs.testObjectEditForm.openDia("edit",t)},deleteTest:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["g"])({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.refreshTable())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},upProduct:function(t){this.diaProduct=!0,this.objectId=t.id,this.productPage.current=1,this.productPage.partNo=this.itemParameterForm.partNo,this.getProductList(t)},getProductList:function(){var t=this,e={objectId:this.objectId};this.productableLoading=!0,Object(s["m"])(Object(r["a"])(Object(r["a"])({},e),this.productPage)).then((function(e){t.productableLoading=!1,t.productData=e.data.records,t.productPage.total=e.data.total})).catch((function(e){t.productableLoading=!1}))},productPagination:function(t){this.productPage.current=t.page,this.getProductList()},editProduct:function(t,e){this.productEditDia=!0,this.operationType=t,"edit"===t&&(this.productEditForm=this.HaveJson(e))},submitProduct:function(){var t=this;this.$refs["productEditForm"].validate((function(e){e&&(t.uploading=!0,t.productEditForm.objectId=t.objectId,"add"===t.operationType?Object(s["b"])(t.productEditForm).then((function(e){t.uploading=!1,200===e.code&&(t.$message.success("新增成功"),t.closeProduct(),t.getProductList())})).catch((function(e){t.uploading=!1})):Object(s["q"])(t.productEditForm).then((function(e){t.uploading=!1,200===e.code&&(t.$message.success("新增成功"),t.closeProduct(),t.getProductList())})).catch((function(e){t.uploading=!1})))}))},closeProduct:function(){this.resetForm("productEditForm"),this.productEditDia=!1},deleteProduct:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["f"])({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.getProductList())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},bindPartFirst:function(t){this.bindPart(t,0)},bindPartSecond:function(t){this.bindPart(t,1)},bindSupplierDensitySecond:function(t){this.bindSupplierDensity(t)},bindSupplierDensity:function(t){this.currentSupplierDensityRow=t,this.bindSupplierDensityDialog=!0},bindPart:function(t,e){this.type=e,this.currentRow=t,this.bindPartDialog=!0},closeBindPartDialog:function(){this.bindPartDialog=!1},closeBindSupplierDensityDialog:function(){this.bindSupplierDensityDialog=!1},getItemParameterList:function(){var t=this;Object(m["d"])().then((function(e){var a=[];e.data.forEach((function(t){a.push({label:t.laboratoryName,value:t.id})})),t.laboratoryList=a}))}}},f=b,h=(a("e733"),a("2877")),g=Object(h["a"])(f,i,o,!1,null,"14538ce4",null);e["default"]=g.exports}}]);