(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e942f5"],{"0bae":function(t,e,a){},1844:function(t,e,a){"use strict";a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"e",(function(){return l})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return r}));var n=a("b775");function c(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/getPageAcceptance",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/addAcceptance",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/updateAcceptance",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/feStandardSubstance/getStandardSubstanceAll",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/getAcceptanceDetails",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/feStandardSubstanceAcceptance/exportFeStandardSubstanceAcceptance",method:"get",params:t,responseType:"blob"})}},"2c83":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.dialogVisible,title:"标准物质验收记录",width:"72%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"acceptance",attrs:{model:t.acceptance,"label-width":"140px",size:"small"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"厂家代表",prop:"producer"}},[a("el-input",{model:{value:t.acceptance.producer,callback:function(e){t.$set(t.acceptance,"producer",e)},expression:"acceptance.producer"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"相关附件",prop:"file"}},[a("div",{staticClass:"table-between"},[a("el-input",{staticStyle:{width:"80%"},attrs:{disabled:""},model:{value:t.acceptance.file,callback:function(e){t.$set(t.acceptance,"file",e)},expression:"acceptance.file"}}),a("el-upload",{ref:"upload",staticStyle:{float:"right"},attrs:{headers:t.uploadHeader,action:t.action,"show-file-list":!1,"on-success":t.onSuccess}},[a("el-button",{attrs:{type:"primary"}},[t._v(" 附件上传 ")])],1)],1)])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接收人",prop:"recipient"}},[a("el-input",{model:{value:t.acceptance.recipient,callback:function(e){t.$set(t.acceptance,"recipient",e)},expression:"acceptance.recipient"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接受签字",prop:"signature"}},[a("el-input",{model:{value:t.acceptance.signature,callback:function(e){t.$set(t.acceptance,"signature",e)},expression:"acceptance.signature"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"验收情况",prop:"situation"}},[a("el-input",{model:{value:t.acceptance.situation,callback:function(e){t.$set(t.acceptance,"situation",e)},expression:"acceptance.situation"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"安装调试情况",prop:"installation"}},[a("el-input",{model:{value:t.acceptance.installation,callback:function(e){t.$set(t.acceptance,"installation",e)},expression:"acceptance.installation"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"清单",prop:"substanceId",rule:[{required:!0,message:"请选择清单",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.acceptance.substanceId,callback:function(e){t.$set(t.acceptance,"substanceId",e)},expression:"acceptance.substanceId"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"到货日期",prop:"arriveDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.acceptance.arriveDate,callback:function(e){t.$set(t.acceptance,"arriveDate",e)},expression:"acceptance.arriveDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"维修单位",prop:"maintenanceUnit"}},[a("el-input",{model:{value:t.acceptance.maintenanceUnit,callback:function(e){t.$set(t.acceptance,"maintenanceUnit",e)},expression:"acceptance.maintenanceUnit"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备件确认"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.addSpareTable}},[t._v("增加行")])],1)],1),a("el-col",{attrs:{span:24}},[a("lims-table",{attrs:{tableData:t.list,column:t.spareColumns,height:"300"},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;e.index;return[n.isEdit?a("el-input",{attrs:{size:"small"},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"row.name"}}):a("span",[t._v(t._s(n.name))])]}},{key:"number",fn:function(e){var n=e.row;e.index;return[n.isEdit?a("el-input",{attrs:{size:"small"},model:{value:n.number,callback:function(e){t.$set(n,"number",e)},expression:"row.number"}}):a("span",[t._v(t._s(n.number))])]}},{key:"action",fn:function(e){var n=e.row,c=e.index;return[n.isEdit?a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.save(c)}}},[t._v("保存")]),a("el-button",{attrs:{type:"text"}},[t._v("取消")])],1):a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.edit(c)}}},[t._v("修改")])],1)]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("保 存")])],1)],1)},c=[],i=(a("14d9"),a("00d5")),s=a("1844"),l={components:{limsTable:i["a"]},data:function(){return{dialogVisible:!1,loading:!1,submitLoading:!1,acceptance:{id:void 0,producer:void 0,file:void 0,recipient:void 0,signature:void 0,situation:void 0,installation:void 0,substanceId:void 0,arriveDate:void 0,maintenanceUnit:void 0,list:[]},list:[],spareColumns:[{label:"名称",prop:"name",align:"center",dataType:"slot",slot:"name"},{label:"数量",prop:"number",align:"center",dataType:"slot",slot:"number"},{label:"操作",align:"center",dataType:"slot",slot:"action",width:150}],options:[]}},mounted:function(){this.getStand()},methods:{openDialog:function(t){t?this.getDetail(t):this.clearForm(),this.dialogVisible=!0},getDetail:function(t){var e=this;this.loading=!0,Object(s["c"])({id:t}).then((function(t){e.acceptance=t.data.acceptance,e.list=t.data.list,e.loading=!1})).catch((function(t){e.loading=!1}))},getStand:function(){var t=this;Object(s["e"])().then((function(e){t.options=e.data}))},addSpareTable:function(){this.list.push({acceptanceId:this.acceptance.id,name:"",number:"",isEdit:!0})},onSuccess:function(t){this.acceptance.file=t.data},save:function(t){this.$set(this.list[t],"isEdit",!1)},edit:function(t){this.$set(this.list[t],"isEdit",!0)},clearForm:function(){this.list=[],this.resetForm("acceptance")},closeDialog:function(){this.clearForm(),this.resetForm("acceptance"),this.dialogVisible=!1},submit:function(){var t=this;this.acceptance.substanceId?(this.acceptance.list=this.HaveJson(this.list),this.submitLoading=!0,this.acceptance.id?Object(s["f"])({acceptance:this.acceptance,list:this.list}).then((function(e){t.$message.success("编辑成功"),t.submitLoading=!1,t.closeDialog(),t.$emit("submit")})).catch((function(e){t.submitLoading=!1})):Object(s["a"])({acceptance:this.acceptance,list:this.list}).then((function(e){t.$message.success("新增成功"),t.closeDialog(),t.$emit("submit")})).catch((function(e){t.submitLoading=!1}))):this.$message.warning("请选择清单")}},computed:{action:function(){return this.javaApi+"/personBasicInfo/saveCNASFile"}}},o=l,r=(a("d153c"),a("2877")),u=Object(r["a"])(o,n,c,!1,null,"35fccddd",null);e["default"]=u.exports},d153c:function(t,e,a){"use strict";a("0bae")}}]);