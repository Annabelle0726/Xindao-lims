(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64a67330"],{"66c8":function(t,e,i){"use strict";i("9e70")},"9e70":function(t,e,i){},b9fe:function(t,e,i){"use strict";i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return n})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return l})),i.d(e,"h",(function(){return o})),i.d(e,"j",(function(){return c})),i.d(e,"i",(function(){return u})),i.d(e,"b",(function(){return d})),i.d(e,"d",(function(){return h})),i.d(e,"k",(function(){return m})),i.d(e,"g",(function(){return p}));var a=i("b775");function s(t){return Object(a["a"])({url:"/performanceShift/page",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/performanceShift/pageYear",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/performanceShift/add",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/shiftTime/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/shiftTime/add",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/shiftTime/update",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/shiftTime/remove",method:"delete",params:t})}function d(t){return Object(a["a"])({url:"/performanceShift/export",method:"get",params:t})}function h(t){return Object(a["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/performanceShift/update",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:t})}},c466:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return n}));i("4d63"),i("c607"),i("ac1f"),i("2c3e"),i("00b4"),i("25f0"),i("5319");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getFullYear(),i=t.getMonth()+1;i<10?i="0"+i+"-":i+="-",e+="-";var a=t.getDate();return a=a<10?"0"+a:a,e+i+a}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("Invalid Date"!==t){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}return""}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getFullYear(),i=t.getMonth(),a=t.getDate();return 26===a&&(i++,i>11&&(i=0,e++)),i+=1,i=i<10?"0"+i+"-":i+"-",e+="-",a=a<10?"0"+a:a,e+i+a}},ddb8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"class-page"},[i("div",{staticClass:"search"},[i("div",{staticClass:"search_thing"},[i("div",{staticClass:"search_label"},[t._v("选择时间：")]),i("div",{staticClass:"search_input"},[i("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"year",size:"small",format:"yyyy",placeholder:"选择年",clearable:!1},on:{change:function(e){return t.refreshTable()}},model:{value:t.query.year,callback:function(e){t.$set(t.query,"year",e)},expression:"query.year"}}),i("el-select",{staticStyle:{width:"140px","margin-left":"16px"},attrs:{clearable:"",placeholder:"选择月",size:"small"},on:{change:function(e){return t.refreshTable()}},model:{value:t.query.month,callback:function(e){t.$set(t.query,"month",e)},expression:"query.month"}},t._l(t.monthOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),i("el-input",{staticStyle:{width:"140px",margin:"0 16px"},attrs:{placeholder:"请输入人员名称",size:"small",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.refreshTable()}},model:{value:t.query.userName,callback:function(e){t.$set(t.query,"userName",e)},expression:"query.userName"}}),i("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择实验室",size:"small",clearable:""},on:{change:function(e){return t.refreshTable()}},model:{value:t.query.laboratory,callback:function(e){t.$set(t.query,"laboratory",e)},expression:"query.laboratory"}},t._l(t.laboratory,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),i("div",{staticClass:"search_thing",staticStyle:{"padding-left":"30px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.refreshTable()}}},[t._v(" 询")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.refresh()}}},[t._v("重置")])],1),i("div",{staticClass:"search_thing btns",staticStyle:{"padding-left":"30px"}},[t.checkPermi(["performance:class:time"])?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.configTime}},[t._v("时间配置")]):t._e(),t.checkPermi(["performance:class:down"])?i("el-button",{attrs:{size:"small",type:"primary",loading:t.downLoading},on:{click:t.handleDown}},[t._v("导 出")]):t._e(),t.checkPermi(["performance:class:add"])?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.schedulingVisible=!0}}},[t._v("排 班")]):t._e()],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.query.month,expression:"query.month"}],staticClass:"clearfix",staticStyle:{width:"100%"}},[i("div",{staticClass:"fixed-left"},[i("div",{staticClass:"content-title",staticStyle:{"padding-left":"16px","box-sizing":"border-box"}},[t._v(" 人员名称 ")]),t._l(t.list,(function(e,a){return i("div",{key:"e"+a,staticClass:"content-user",class:{hoverType:t.currentUserIndex==a},on:{mouseenter:function(e){return t.onMouseEnter(a)},mouseleave:function(e){t.currentUserIndex=null}}},[i("div",{staticClass:"user-pic"},[t._v(" "+t._s(e.name?e.name.charAt(0):"")+" ")]),i("div",{staticClass:"user-info"},[i("p",{staticStyle:{"font-size":"14px",color:"#3a7bfa","line-height":"24px",margin:"0"}},[t._v(" "+t._s(e.name)+" ")]),i("p",{staticStyle:{color:"#999999","font-size":"12px",transform:"scale(0.8) translateX(-20px)","white-space":"nowrap",width:"150px","overflow-x":"show",margin:"0"}},[t._v(" 早:"+t._s(e.day0)+",中:"+t._s(e.day1)+",夜:"+t._s(e.day2)+",休:"+t._s(e.day3)+",假:"+t._s(e.day4)+",差:"+t._s(e.day6)+" ")]),i("p",{staticStyle:{"margin-top":"4px",margin:"0"}},[i("span",{staticStyle:{color:"#999999","font-size":"12px",display:"inline-block",transform:"scale(0.8) translateX(-10px)"}},[t._v("合计出勤: ")]),i("span",{staticStyle:{"font-size":"16px",color:"#ff4902"}},[t._v(t._s(t.query.month?e.monthlyAttendance.totalAttendance:e.sidebarAnnualAttendance.totalAttendance)+"天")])])])])}))],2),i("div",{staticClass:"scroll-right"},[i("div",{staticClass:"content"},[i("div",{staticClass:"content-title content-title-right",staticStyle:{"border-bottom":"0"}},t._l(t.weeks,(function(e,a){return i("div",{key:"b"+a,staticClass:"content-title-item"},["周日"==e.week?i("span",{staticClass:"month",staticStyle:{position:"absolute",top:"0px"}},[t._v(t._s(e.weekNum)+"周")]):t._e(),i("p",{staticStyle:{height:"26px",position:"absolute",bottom:"12px"}},[i("span",{staticClass:"day"},[t._v(t._s(e.day))]),i("span",{staticClass:"week"},[t._v(t._s(e.week.charAt(1)))])])])})),0),t._l(t.list,(function(e,a){return i("div",{key:"c"+a,staticClass:"content-body",on:{mouseenter:function(e){return t.onMouseEnter(a)},mouseleave:function(e){t.currentUserIndex=null}}},t._l(e.list,(function(e,s){return i("div",{key:"d"+s,staticClass:"content-body-item",class:{hoverType:t.currentUserIndex==a}},[i("el-dropdown",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{trigger:"click",placement:"bottom",disabled:!t.checkPermi(["performance:class:edit"])},on:{command:function(i){return t.handleCommand(i,e)}}},[i("div",{staticClass:"work-box",class:{type0:"0"===e.shift,type1:"1"===e.shift,type2:"2"===e.shift,type3:"3"===e.shift,type4:"4"===e.shift,type5:"5"===e.shift,type6:"6"===e.shift}},[i("span",{staticStyle:{cursor:"pointer"},style:"opacity: "+("无"==t.getShiftByDic(e.shift)?0:1)+";"},[t._v(t._s(t.getShiftByDic(e.shift)))])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.classType,(function(e,a){return i("el-dropdown-item",{key:"h"+a,attrs:{command:e.dictValue}},[t._v(t._s(e.dictLabel))])})),1)],1)],1)})),0)}))],2)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.query.month,expression:"!query.month"}],staticClass:"clearfix year-table",staticStyle:{width:"100%"}},[i("div",{staticClass:"fixed-left"},[i("div",{staticClass:"content-title",staticStyle:{"padding-left":"16px","box-sizing":"border-box"}},[t._v(" 人员名称 ")]),t._l(t.yearList,(function(e,a){return i("div",{key:"e"+a,staticClass:"content-user",class:{hoverType:t.currentUserIndex==a},on:{mouseenter:function(e){return t.onMouseEnter(a)},mouseleave:function(e){t.currentUserIndex=null}}},[i("div",{staticClass:"user-pic"},[t._v(" "+t._s(e.name?e.name.charAt(0):"")+" ")]),i("div",{staticClass:"user-info"},[i("p",{staticStyle:{"font-size":"14px",color:"#3a7bfa","line-height":"24px",margin:"0"}},[t._v(" "+t._s(e.name)+" ")]),i("p",{staticStyle:{color:"#999999","font-size":"12px",transform:"scale(0.8) translateX(-20px)","white-space":"nowrap",width:"150px","overflow-x":"show",margin:"0"}},[t._v(" 早:"+t._s(e.day0)+",中:"+t._s(e.day1)+",夜:"+t._s(e.day2)+",休:"+t._s(e.day3)+",假:"+t._s(e.day4)+",差:"+t._s(e.day6)+" ")]),i("p",{staticStyle:{"margin-top":"4px",margin:"0"}},[i("span",{staticStyle:{color:"#999999","font-size":"12px",display:"inline-block",transform:"scale(0.8) translateX(-10px)"}},[t._v("合计出勤: ")]),i("span",{staticStyle:{"font-size":"16px",color:"#ff4902"}},[t._v(t._s(e.work_time)+"天")])])])])}))],2),i("div",{staticClass:"scroll-right"},[i("div",{staticClass:"content"},[i("div",[i("div",{staticClass:"content-title content-title-right",staticStyle:{"border-bottom":"0",height:"52px"},style:"display: grid;\n              grid-template-columns: repeat("+t.monthList.length+", 1fr);"},t._l(t.monthList,(function(e,a){return i("div",{key:"b"+a,staticClass:"content-title-item",staticStyle:{height:"52px"}},[i("span",{staticClass:"month"},[t._v(t._s(e)+"月")])])})),0),t._l(t.yearList,(function(e,a){return i("div",{key:"c"+a,staticClass:"content-body",style:"display: grid;\n            grid-template-columns: repeat("+t.monthList.length+", 1fr);",on:{mouseenter:function(e){return t.onMouseEnter(a)},mouseleave:function(e){t.currentUserIndex=null}}},t._l(e.monthList,(function(e,s){return i("div",{key:"d"+s,staticClass:"content-body-item",class:{hoverType:t.currentUserIndex==a}},[i("p",{staticStyle:{color:"rgb(153, 153, 153)","font-size":"12px"}},[t._v(" 合计出勤："),i("span",{staticStyle:{"font-size":"14px",color:"#000"}},[t._v(t._s(e.totalMonthAttendance))])]),i("p",{staticStyle:{color:"rgb(153, 153, 153)","font-size":"12px"}},[t._v(" 早:"+t._s(e.day0)+",中:"+t._s(e.day1)+",夜:"+t._s(e.day2)+",休:"+t._s(e.day3)+",假:"+t._s(e.day4)+",差:"+t._s(e.day6)+" ")])])})),0)}))],2)])])])]),i("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right","margin-right":"30px"},attrs:{background:"","page-size":t.pageSize,"current-page":t.currentPage,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.currentChange}}),i("el-dialog",{attrs:{title:"时间配置",visible:t.configTimeVisible,width:"620px"},on:{"update:visible":function(e){t.configTimeVisible=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.configTimeVisibleLoading,expression:"configTimeVisibleLoading"}],staticStyle:{"min-height":"200px"}},[t._l(t.timeQuery,(function(e,a){return i("div",[i("div",{staticClass:"form",staticStyle:{display:"flex","justify-content":"space-between"}},[i("div",{staticStyle:{"margin-bottom":"12px",width:"200px"}},[i("span",{staticClass:"form_label"},[t._v("班次：")]),e.isEdit?t._e():i("span",[t._v(" "+t._s(e.type)+" ")]),e.isEdit?i("span",{staticClass:"form_input"},[i("el-select",{staticStyle:{width:"70%","margin-right":"8px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.shift,callback:function(i){t.$set(e,"shift",i)},expression:"item.shift"}},t._l(t.timeTypeList,(function(t){return i("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1):t._e()]),i("div",{staticStyle:{width:"calc(100% - 260px)"}},[i("span",{staticClass:"form_label"},[t._v("时间：")]),e.isEdit?t._e():i("span",[t._v(" "+t._s(e.startTime&&e.endTime?e.startTime+"~"+e.endTime:"")+" ")]),e.isEdit?i("span",{staticClass:"form_input"},[i("el-time-select",{staticStyle:{width:"120px"},attrs:{placeholder:"起始时间",size:"small","picker-options":{start:"00:00",step:"00:15",end:"24:00"}},model:{value:e.startTime,callback:function(i){t.$set(e,"startTime",i)},expression:"item.startTime"}}),i("el-time-select",{staticStyle:{width:"120px"},attrs:{placeholder:"结束时间",size:"small","picker-options":{start:"00:00",step:"00:15",end:"24:00"}},model:{value:e.endTime,callback:function(i){t.$set(e,"endTime",i)},expression:"item.endTime"}})],1):t._e()]),i("span",[e.isEdit?i("i",{staticClass:"el-icon-circle-check",staticStyle:{"margin-left":"10px",color:"#4b79f2",cursor:"pointer"},on:{click:function(i){return t.saveEdit(e,a)}}}):t._e(),e.isEdit?t._e():i("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"10px",color:"#4b79f2",cursor:"pointer"},on:{click:function(t){e.isEdit=!0}}}),t.timeQuery.length>1?i("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"10px",color:"#ff4902",cursor:"pointer"},on:{click:function(i){return t.deleteTime(e,a)}}}):t._e()])]),i("el-divider"),a===t.timeQuery.length-1?i("div",{staticStyle:{color:"#4b79f2",cursor:"pointer"},on:{click:t.addTimeForm}},[t._v(" 添加时间配置 ")]):t._e()],1)})),0===t.timeQuery.length?i("div",{staticStyle:{color:"#4b79f2"},on:{click:t.addTimeForm}},[t._v(" 添加时间配置 ")]):t._e()],2)]),i("el-dialog",{attrs:{title:"排班",visible:t.schedulingVisible,width:"400px"},on:{"update:visible":function(e){t.schedulingVisible=e}}},[i("div",{staticClass:"search_thing"},[i("div",{staticClass:"search_label",staticStyle:{width:"90px"}},[i("span",{staticStyle:{color:"red","margin-right":"4px"}},[t._v("*")]),t._v("周次： ")]),i("div",{staticClass:"search_input",staticStyle:{width:"calc(100% - 90px)"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"week",format:"yyyy 第 WW 周",placeholder:"选择周次"},model:{value:t.schedulingQuery.week,callback:function(e){t.$set(t.schedulingQuery,"week",e)},expression:"schedulingQuery.week"}})],1)]),i("div",{staticClass:"search_thing"},[i("div",{staticClass:"search_label",staticStyle:{width:"90px"}},[i("span",{staticStyle:{color:"red","margin-right":"4px"}},[t._v("*")]),t._v("人员名称： ")]),i("div",{staticClass:"search_input",staticStyle:{width:"calc(100% - 90px)"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",multiple:"",clearable:"","collapse-tags":""},model:{value:t.schedulingQuery.userId,callback:function(e){t.$set(t.schedulingQuery,"userId",e)},expression:"schedulingQuery.userId"}},t._l(t.personList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),i("div",{staticClass:"search_thing"},[i("div",{staticClass:"search_label",staticStyle:{width:"90px"}},[i("span",{staticStyle:{color:"red","margin-right":"4px"}},[t._v("*")]),t._v("班次： ")]),i("div",{staticClass:"search_input",staticStyle:{width:"calc(100% - 90px)"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.schedulingQuery.shift,callback:function(e){t.$set(t.schedulingQuery,"shift",e)},expression:"schedulingQuery.shift"}},t._l(t.classType,(function(t){return i("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.schedulingVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.confirmScheduling}},[t._v("确 定")])],1)])],1)},s=[],n=(i("7db0"),i("c740"),i("a15b"),i("d81d"),i("14d9"),i("a434"),i("b64b"),i("d3b7"),i("25f0"),i("0643"),i("fffc"),i("4e3e"),i("a573"),i("9a9a"),i("159b"),i("c466")),r=i("b9fe"),l={name:"Class",data:function(){return{query:{userName:"",laboratory:"",year:new Date,month:(new Date).getMonth()+1},monthOptions:[{value:1,label:"1月"},{value:2,label:"2月"},{value:3,label:"3月"},{value:4,label:"4月"},{value:5,label:"5月"},{value:6,label:"6月"},{value:7,label:"7月"},{value:8,label:"8月"},{value:9,label:"9月"},{value:10,label:"10月"},{value:11,label:"11月"},{value:12,label:"12月"}],laboratory:[],weeks:[],classType:[],currentUserIndex:null,schedulingVisible:!1,personList:[],loading:!1,schedulingQuery:{week:"",userId:null,shift:""},list:[],currentPage:1,pageSize:6,total:0,pageLoading:!1,finishLoding:!1,monthList:[],yearList:[],downLoading:!1,configTimeVisible:!1,configTimeVisibleLoading:!1,timeTypeList:[],timeQuery:[]}},watch:{},mounted:function(){this.selectEnumByCategory(),this.obtainItemParameterList(),this.getUsers(),this.query.month?this.init():this.initYear(),this.monthList=[];for(var t=12;t>0;t--)this.monthList.push(t);this.monthList.reverse()},methods:{refresh:function(){this.list=[],this.yearList=[],this.currentPage=1,this.query={userName:"",laboratory:"",year:new Date,month:(new Date).getMonth()+1},this.query.month?this.init():this.initYear()},refreshTable:function(){this.currentPage=1,this.query.month?(this.list=[],this.init()):(this.yearList=[],this.initYear())},currentChange:function(t){this.currentPage=t,this.query.month?this.init():this.initYear()},transFromNumber:function(t){var e=["零","一","二","三","四","五","六","七","八","九"],i=["","十","百","千","万"];t=parseInt(t);var a=function(t){for(var a=t.toString().split("").reverse(),s="",n=0;n<a.length;n++)s=(0==n&&0==a[n]||n>0&&0==a[n]&&0==a[n-1]?"":e[a[n]]+(0==a[n]?i[0]:i[n]))+s;return s},s=Math.floor(t/1e4),n=t%1e4;return n.toString().length<4&&(n="0"+n),s?a(s)+"万"+a(n):a(t)},init:function(){var t=this;this.pageLoading=!0;var e=this.query.year.getFullYear(),i=this.query.month?this.query.month:(new Date).getMonth()+1,a=i>9?i:"0"+i;Object(r["e"])({size:this.pageSize,current:this.currentPage,time:e+"-"+a+"-01 00:00:00",userName:this.query.userName,laboratory:this.query.laboratory}).then((function(e){t.pageLoading=!1,t.total=e.data.page.total,t.list=e.data.page.records.map((function(e){for(var i in e.monthlyAttendance){var a=t.getDayByDic(i);void 0==a&&null==a||(e["day".concat(a)]=e.monthlyAttendance[i])}return e}));var i=e.data.headerList;t.weeks=[],i.forEach((function(e){var i={weekNum:e.weekly,week:e.headerTime.split(" ")[1],day:e.headerTime.split(" ")[0]};t.weeks.push(i)}))})).catch((function(){t.pageLoading=!1}))},initYear:function(){var t=this;this.pageLoading=!0;var e=this.query.year.getFullYear();Object(r["f"])({size:this.pageSize,current:this.currentPage,time:e+"-01-01 00:00:00",userName:this.query.userName,laboratory:this.query.laboratory}).then((function(e){t.pageLoading=!1,t.total=e.data.total,t.yearList=e.data.records.map((function(e){for(var i in e.year){var a=t.getDayByDic(i);void 0==a&&null==a||(e["day".concat(a)]=e.year[i])}for(var s in e.monthList=[],e.month){var n={};for(var r in e.month[s]){var l=t.getDayByDic(r);void 0==l&&null==l||(n["day".concat(l)]=e.month[s][r])}n.totalMonthAttendance=e.month[s].totalMonthAttendance,e.monthList.push(n)}return e}))}))},onMouseEnter:function(t){this.currentUserIndex=t},confirmScheduling:function(){var t=this;if(this.schedulingQuery.week){var e=this.schedulingQuery.week.getTime(),i=Object(n["b"])(new Date(e-864e5))+" 00:00:00",a=Object(n["b"])(new Date(e+432e6))+" 00:00:00";this.schedulingQuery.userId&&0!=this.schedulingQuery.userId.length?this.schedulingQuery.shift?(this.loading=!0,Object(r["a"])({startWeek:i,endWeek:a,userId:this.schedulingQuery.userId.join(","),shift:this.schedulingQuery.shift}).then((function(e){t.loading=!1,t.$message.success("操作成功"),t.schedulingVisible=!1,t.schedulingQuery={week:"",userId:null,shift:""},t.refresh()})).catch((function(e){t.loading=!1}))):this.$message.error("请选择班次"):this.$message.error("请选择人员")}else this.$message.error("请选择周次")},configTime:function(){var t=this;this.getDicts("sys_class_type").then((function(e){t.timeTypeList=e.data})),this.getTimeList(),this.configTimeVisible=!0},getTimeList:function(){var t=this;this.configTimeVisibleLoading=!0,Object(r["c"])().then((function(e){e.data.length>0&&(e.data.forEach((function(e){e.isEdit=!1;var i=t.timeTypeList.findIndex((function(t){return t.dictValue===e.shift}));i>-1&&(e.type=t.timeTypeList[i].dictLabel)})),t.timeQuery=e.data),t.configTimeVisibleLoading=!1})).catch((function(e){t.configTimeVisibleLoading=!1,console.log("e--",e)}))},addTimeForm:function(){this.timeQuery.push({type:"",shift:"",time:null,isEdit:!0})},saveEdit:function(t,e){var i=this;if(t.shift){var a=this.timeTypeList.findIndex((function(e){return e.dictValue===t.shift}));a>-1&&(t.type=this.timeTypeList[a].dictLabel)}delete t.orderBy,delete t.time;var s=this.isObjectEmpty(t);if(s)this.$message.error("请填写完整");else{var n={};n.shift=t.shift,n.startTime=t.startTime,n.endTime=t.endTime,t.id?(n.id=t.id,Object(r["j"])(n).then((function(t){i.$message.success("操作成功"),i.getTimeList()}))):Object(r["h"])(n).then((function(t){i.$message.success("操作成功"),i.getTimeList()}))}},deleteTime:function(t,e){var i=this;t.id?Object(r["i"])({id:t.id}).then((function(t){i.$message.success("操作成功"),i.getTimeList()})):this.timeQuery.splice(e,1)},isObjectEmpty:function(t){return Object.keys(t).some((function(e){return!t[e]}))},handleDown:function(){var t=this,e=this.query.year.getFullYear(),i="";if(this.query.month){var a=this.query.month>9?this.query.month:"0"+this.query.month;i=e+"-"+a+"-01 00:00:00"}else i=e+"-01-01 00:00:00";this.downLoading=!0,Object(r["b"])({time:i,userName:this.query.userName,laboratory:this.query.laboratory,isMonth:!!this.query.month}).then((function(i){t.$message.success("下载成功"),t.downLoading=!1;var a=new Blob([i],{type:"application/force-download"}),s="";s=t.query.month?e+"-"+t.query.month+" 班次信息":e+" 班次汇总",t.$download.saveAs(a,s+".xlsx")})).catch((function(e){t.downLoading=!1}))},selectEnumByCategory:function(){var t=this;this.getDicts("sys_class_type").then((function(e){t.classType=e.data}))},obtainItemParameterList:function(){var t=this;"检测中心"==this.PROJECT?this.laboratory=[{label:"通信产品实验室",value:"通信产品实验室"},{label:"电力产品实验室",value:"电力产品实验室"}]:Object(r["d"])().then((function(e){var i=[];e.data.forEach((function(t){i.push({label:t.laboratoryName,value:t.id})})),t.laboratory=i}))},handleCommand:function(t,e){var i=this;t!=e.shift&&Object(r["k"])({id:e.id,shift:t}).then((function(a){i.$message.success("操作成功"),e.shift=t}))},getUsers:function(){var t=this;Object(r["g"])({type:1}).then((function(e){var i=e.data;t.personList=i}))},getDayByDic:function(t){var e=this.classType.find((function(e){return e.dictLabel==t}));if(e)return e.dictValue},getShiftByDic:function(t){var e=this.classType.find((function(e){return e.dictValue==t}));return e?e.dictLabel:"无"}}},o=l,c=(i("66c8"),i("2877")),u=Object(c["a"])(o,a,s,!1,null,"a4d2f082",null);e["default"]=u.exports}}]);