(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ed623f0"],{"0e9a":function(e,a,t){"use strict";var r=t("c14f"),i=t("1da1"),l=(t("c19f"),t("ace4"),t("2c66"),t("249d"),t("40e9"),t("d3b7"),t("ac1f"),t("5319"),t("5cc6"),t("907a"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("986a"),t("1d02"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("170b"),t("b39a"),t("6ce5"),t("2834"),t("72f7"),t("4ea1"),t("c343")),n=t("acff"),o=t("2b0e");a["a"]={convertFileToHtml:function(e){return Object(i["a"])(Object(r["a"])().m((function a(){var t,n;return Object(r["a"])().w((function(a){while(1)switch(a.n){case 0:return t=new XMLHttpRequest,t.open("GET",o["default"].prototype.javaApi+e,!0),t.send(),t.responseType="blob",n=new Promise((function(e,a){t.onload=Object(i["a"])(Object(r["a"])().m((function a(){var n,o,s,c,d;return Object(r["a"])().w((function(a){while(1)switch(a.n){case 0:if(200!==this.status){a.n=2;break}return n=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),o=new FileReader,o.readAsArrayBuffer(n),s=new Promise((function(e,a){o.onload=Object(i["a"])(Object(r["a"])().m((function a(){var i,n,o;return Object(r["a"])().w((function(a){while(1)switch(a.n){case 0:return i=t.response,a.n=1,Object(l["convertToHtml"])({arrayBuffer:i});case 1:n=a.v,o=n.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(o);case 2:return a.a(2)}}),a)})))})),c=e,a.n=1,s;case 1:d=a.v,c(d);case 2:return a.a(2)}}),a,this)})))})),a.n=1,n;case 1:return a.a(2,a.v)}}),a)})))()},downloadIamge:function(e,a){var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);var i=e.toDataURL("image/png"),l=document.createElement("a"),n=new MouseEvent("click");l.download=a||"photo",l.href=i,l.dispatchEvent(n)},t.src=e},compressBlob:function(e){var a=new FileReader;return a.readAsArrayBuffer(e),new Promise((function(t){a.onload=function(){var r=a.result,i=new Uint8Array(r),l=n["a"].deflate(i),o=new Blob([l],{type:e.type});t(o)}}))}}},"23aa":function(e,a,t){},"6cdd":function(e,a,t){"use strict";t("23aa")},8751:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"btns"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.calibrationMaintenance()}}},[e._v("核查项目维护")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.add("add")}}},[e._v("添加核查记录")]),t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导出Excel")])],1),t("div",{staticClass:"tables",staticStyle:{"margin-top":"16px"}},[t("el-table",{attrs:{data:e.tableData,height:"calc(100vh - 20em)","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s((e.search.current-1)*e.search.size+a.$index+1))])]}}])}),t("el-table-column",{attrs:{label:"记录编号","min-width":"150",prop:"processNumber"}}),t("el-table-column",{attrs:{label:"核查机构","min-width":"150",prop:"calibrationInstitution","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"核查结论","min-width":"150",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s("0yes"===a.row.status?"合格":"1no"===a.row.status?"不合格":"其他")+" ")]}}])}),t("el-table-column",{attrs:{label:"核查证书编号","min-width":"150",prop:"certificateSerialNumber"}}),t("el-table-column",{attrs:{label:"说明","min-width":"150",prop:"remark","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"核查日期","min-width":"150",prop:"calibrationDate"}}),t("el-table-column",{attrs:{label:"下次核查日期","min-width":"150",prop:"nextCalibrationDate"}}),t("el-table-column",{attrs:{label:"登记人","min-width":"150",prop:"createUser"}}),t("el-table-column",{attrs:{label:"登记日期","min-width":"150",prop:"createTime"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleAttachmentClick(r)}}},[e._v("附件")]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleViewClick("view",r)}}},[e._v("查看")]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDeleteClick(r)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-right":"5%"},attrs:{"current-page":1,"page-size":e.search.size,"page-sizes":[10,20,30,50,100],total:e.search.total,layout:"->,total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible0,title:"核查项目维护",top:"5vh",width:"70%"},on:{"update:visible":function(a){e.dialogVisible0=a}}},[t("h4",[t("span",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"line"}),t("span",[e._v("设备核查参数维护")])]),t("el-button",{attrs:{loading:e.addCalibrateLoading,size:"small",type:"primary"},on:{click:e.addCalibrate}},[e._v("添 加")])],1),t("div",[t("el-form",{ref:"form0",attrs:{model:e.form0,rules:e.form0Rules,"label-position":"right","label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"核查参数:",prop:"measurementParameter"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.form0.measurementParameter,callback:function(a){e.$set(e.form0,"measurementParameter",a)},expression:"form0.measurementParameter"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"核查范围:",prop:"rangeOfMeasurement"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.form0.rangeOfMeasurement,callback:function(a){e.$set(e.form0,"rangeOfMeasurement",a)},expression:"form0.rangeOfMeasurement"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"最大允许误差:",prop:"maxPermissibleError"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.form0.maxPermissibleError,callback:function(a){e.$set(e.form0,"maxPermissibleError",a)},expression:"form0.maxPermissibleError"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"判定标准:",prop:"judgmentCriteria"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.form0.judgmentCriteria,callback:function(a){e.$set(e.form0,"judgmentCriteria",a)},expression:"form0.judgmentCriteria"}})],1)],1)],1)],1)],1),t("h4",[t("span",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"line"}),t("span",[e._v("设备核查参数")])])]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.calibrateParamsLoading,expression:"calibrateParamsLoading"}],ref:"calibrateTable",staticStyle:{width:"100%"},attrs:{data:e.calibrateParams,"max-height":"450",stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[t("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),t("el-table-column",{attrs:{label:"核查参数",prop:"measurementParameter"}}),t("el-table-column",{attrs:{label:"核查范围",prop:"rangeOfMeasurement"}}),t("el-table-column",{attrs:{label:"最大允许误差",prop:"maxPermissibleError"}}),t("el-table-column",{attrs:{label:"判定标准",prop:"judgmentCriteria"}}),t("el-table-column",{attrs:{label:"创建人",prop:"createdBy"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"creationTime"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1)],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible1,title:"添加核查记录",top:"5vh",width:"80%"},on:{"update:visible":function(a){e.dialogVisible1=a},close:e.resetcalibrationRecord}},[t("div",{staticClass:"dialog-content"},[t("h4",[t("span",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"line"}),t("span",[e._v("添加设备核查记录")])])]),t("el-form",{ref:"calibrationRecord",attrs:{model:e.calibrationRecord,rules:e.formRules,"label-position":"right","label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"核查人:",prop:"unitOfMeasure"}},[t("el-input",{attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:e.calibrationRecord.unitOfMeasure,callback:function(a){e.$set(e.calibrationRecord,"unitOfMeasure",a)},expression:"calibrationRecord.unitOfMeasure"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"核查日期:",prop:"calibrationDate"}},[t("el-date-picker",{staticStyle:{width:"90%"},attrs:{disabled:"view"===e.operationType,format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.calibrationRecord.calibrationDate,callback:function(a){e.$set(e.calibrationRecord,"calibrationDate",a)},expression:"calibrationRecord.calibrationDate"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"下次核查日期:","label-width":"140px",prop:"nextCalibrationDate"}},[t("el-date-picker",{staticStyle:{width:"90%"},attrs:{disabled:"view"===e.operationType,"picker-options":{disabledDate:this.disabledDate},format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.calibrationRecord.nextCalibrationDate,callback:function(a){e.$set(e.calibrationRecord,"nextCalibrationDate",a)},expression:"calibrationRecord.nextCalibrationDate"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"核查器具:",prop:"calculatingApparatus"}},[t("el-input",{attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:e.calibrationRecord.calculatingApparatus,callback:function(a){e.$set(e.calibrationRecord,"calculatingApparatus",a)},expression:"calibrationRecord.calculatingApparatus"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"核查标准量程:",prop:"standardRange"}},[t("el-input",{staticStyle:{width:"90%"},attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:e.calibrationRecord.standardRange,callback:function(a){e.$set(e.calibrationRecord,"standardRange",a)},expression:"calibrationRecord.standardRange"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"核查标准不确定度:","label-width":"140px",prop:"calibrationStandardUncertainty"}},[t("el-input",{staticStyle:{width:"90%"},attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:e.calibrationRecord.calibrationStandardUncertainty,callback:function(a){e.$set(e.calibrationRecord,"calibrationStandardUncertainty",a)},expression:"calibrationRecord.calibrationStandardUncertainty"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"核查指导书:",prop:"byDocument"}},[t("el-input",{attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:e.calibrationRecord.byDocument,callback:function(a){e.$set(e.calibrationRecord,"byDocument",a)},expression:"calibrationRecord.byDocument"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"检查报告编号:",prop:"certificateSerialNumber"}},[t("el-input",{staticStyle:{width:"90%"},attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:e.calibrationRecord.certificateSerialNumber,callback:function(a){e.$set(e.calibrationRecord,"certificateSerialNumber",a)},expression:"calibrationRecord.certificateSerialNumber"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"核查总结论:","label-width":"140px",prop:"status"}},[t("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.calibrationRecord.status,callback:function(a){e.$set(e.calibrationRecord,"status",a)},expression:"calibrationRecord.status"}},[t("el-radio",{attrs:{label:"0yes"}},[e._v("合格")]),t("el-radio",{attrs:{label:"1no"}},[e._v("不合格")]),t("el-radio",{attrs:{label:"2other"}},[e._v("其他")])],1)],1)],1),t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"附件：",prop:"fileName"}},[t("el-input",{style:"width: "+("add"===e.operationType?"90%":"100%")+";}",attrs:{disabled:"",size:"small"},model:{value:e.calibrationRecord.fileName,callback:function(a){e.$set(e.calibrationRecord,"fileName",a)},expression:"calibrationRecord.fileName"}},["add"===e.operationType?t("el-button",{attrs:{slot:"append",icon:"el-icon-delete-solid"},on:{click:e.deleteFile},slot:"append"}):e._e()],1),"add"===e.operationType?t("el-upload",{ref:"upload",staticStyle:{float:"right"},attrs:{action:e.action,"before-upload":e.beforeUpload,headers:e.uploadHeader,limit:1,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1}},[t("el-button",{staticStyle:{position:"relative",top:"-4px"},attrs:{loading:e.upLoading,size:"small",type:"primary"}},[e._v("附件上传 ")])],1):e._e()],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"备注:"}},[t("el-input",{staticStyle:{width:"96%"},attrs:{disabled:"view"===e.operationType,rows:3,size:"small",type:"textarea"},model:{value:e.calibrationRecord.remark,callback:function(a){e.$set(e.calibrationRecord,"remark",a)},expression:"calibrationRecord.remark"}})],1)],1)],1)],1),t("h4",[t("span",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"line"}),t("span",[e._v("核查条目确认结果")])])]),t("el-table",{ref:"calibrateTable",staticStyle:{width:"100%"},attrs:{data:e.calibrateParams,stripe:""}},[t("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),t("el-table-column",{attrs:{label:"核查参数",prop:"measurementParameter",width:"150"}}),t("el-table-column",{attrs:{label:"核查范围",prop:"rangeOfMeasurement",width:"150"}}),t("el-table-column",{attrs:{label:"最大允许误差",prop:"maxPermissibleError",width:"150"}}),t("el-table-column",{attrs:{label:"判定标准",prop:"judgmentCriteria",width:"150"}}),t("el-table-column",{attrs:{label:"是否核查",prop:"isCalibration"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("span",{staticClass:"required-span"},[e._v("* ")]),e._v("是否核查 ")]}},{key:"default",fn:function(a){return[t("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:a.row.isCalibration,callback:function(t){e.$set(a.row,"isCalibration",t)},expression:"scope.row.isCalibration"}},[t("el-radio",{attrs:{label:"0yes"}},[e._v("是")]),t("el-radio",{attrs:{label:"1no"}},[e._v("否")])],1)]}}])}),t("el-table-column",{attrs:{label:"判定结果",prop:"result"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("span",{staticClass:"required-span"},[e._v("* ")]),e._v("判定结果 ")]}},{key:"default",fn:function(a){return[t("el-radio-group",{attrs:{disabled:"view"===e.operationType},on:{input:function(a){return e.checkRadio()}},model:{value:a.row.result,callback:function(t){e.$set(a.row,"result",t)},expression:"scope.row.result"}},[t("el-radio",{attrs:{label:"0yes"}},[e._v("合格")]),t("el-radio",{attrs:{label:"1no"}},[e._v("不合格")]),t("el-radio",{attrs:{label:"2other"}},[e._v("其他")])],1)]}}])}),t("el-table-column",{attrs:{label:"单项结果说明",prop:"singleResultStatement"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{disabled:"view"===e.operationType,size:"small"},model:{value:a.row.singleResultStatement,callback:function(t){e.$set(a.row,"singleResultStatement",t)},expression:"scope.row.singleResultStatement"}})]}}])})],1),t("span",{staticClass:"dialog-footer",staticStyle:{float:"right","margin-top":"10px"},attrs:{slot:"footer"},slot:"footer"},["add"===e.operationType?t("el-button",{on:{click:function(a){e.dialogVisible1=!1}}},[e._v("取 消")]):e._e(),"add"===e.operationType?t("el-button",{attrs:{type:"primary"},on:{click:e.addRecord}},[e._v("确 定")]):e._e()],1)],1)])],1)},i=[],l=t("c14f"),n=t("1da1"),o=t("5530"),s=(t("4de4"),t("d81d"),t("b0c0"),t("d3b7"),t("ac1f"),t("841c"),t("0643"),t("76d6"),t("2382"),t("a573"),t("9a9a"),t("0e9a")),c=t("2f62"),d={components:{},props:{clickNodeVal:{type:Object,default:function(){return{}}}},data:function(){return{search:{size:20,current:1,total:0},calibrateParamsLoading:!1,addCalibrateLoading:!1,form0:{measurementParameter:"",rangeOfMeasurement:"",maxPermissibleError:"",judgmentCriteria:"",createdBy:"",action:"",deviceId:null},form0Rules:{measurementParameter:[{required:!0,message:"请输入计量参数",trigger:"blur"}],rangeOfMeasurement:[{required:!0,message:"请输入量程范围",trigger:"blur"}],maxPermissibleError:[{required:!0,message:"请输入最大允许误差",trigger:"blur"}],judgmentCriteria:[{required:!0,message:"请输入判定标准",trigger:"blur"}]},dialogVisible0:!1,calibrationRecord:{unitOfMeasure:"",calibrationDate:"",nextCalibrationDate:"",calculatingApparatus:"",standardRange:"",calibrationStandardUncertainty:"",byDocument:"",certificateSerialNumber:"",fileName:"",status:"",remark:""},formRules:{unitOfMeasure:[{required:!0,message:"请输入核查人",trigger:"blur"}],calibrationDate:[{required:!0,message:"请选择核查日期",trigger:"change"}],nextCalibrationDate:[{required:!0,message:"请选择下次核查日期",trigger:"change"}],calculatingApparatus:[{required:!0,message:"请输入核查器具",trigger:"blur"}],standardRange:[{required:!0,message:"请输入核查标准量程",trigger:"blur"}],calibrationStandardUncertainty:[{required:!0,message:"请输入核查标准不确定度",trigger:"blur"}],byDocument:[{required:!0,message:"请输入核查指导书",trigger:"blur"}],certificateSerialNumber:[{required:!0,message:"请输入检查报告指导书",trigger:"blur"}],status:[{required:!0,message:"请选择核查总结论",trigger:"change"}]},calibrateParams:[],tableData:[],operationType:"",dialogVisible1:!1,formData:{person:"",data1:"",name:""},upLoading:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["nickName"])),{},{action:function(){return this.javaApi+this.$api.personnel.saveCNASFile}}),mounted:function(){this.getTableList(this.clickNodeVal.value)},methods:{checkRadio:function(){var e=this.calibrateParams.map((function(e){return e.result}));e&&e.filter((function(e){return"1no"==e})).length>0?this.calibrationRecord.status="1no":e&&e.filter((function(e){return"2other"==e})).length==e.length?this.calibrationRecord.status="2other":e&&e.filter((function(e){return"0yes"==e})).length==e.length&&(this.calibrationRecord.status="0yes")},disabledDate:function(e){var a=this.calibrationRecord.calibrationDate;if(a){var t=new Date(a);return e<=t.getTime()}return!1},handleSizeChange:function(e){this.search.size=e,this.getTableList(this.clickNodeVal.value)},handleCurrentChange:function(e){this.search.current=e,this.getTableList(this.clickNodeVal.value)},getXmsg:function(){var e=this;return Object(n["a"])(Object(l["a"])().m((function a(){return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return e.calibrateParamsLoading=!0,a.p=1,a.n=2,e.$axios.get(e.$api.deviceCheck.selectDeviceMetric+"?deviceId="+e.clickNodeVal.value+"&type=examine").then((function(a){200==a.code&&(e.calibrateParams=a.data),e.calibrateParamsLoading=!1}));case 2:a.n=4;break;case 3:a.p=3,a.v,e.calibrateParamsLoading=!1;case 4:return a.a(2)}}),a,null,[[1,3]])})))()},calibrationMaintenance:function(){this.dialogVisible0=!0,this.getXmsg()},addCalibrate:function(){var e=this;this.$refs["form0"].validate((function(a){a?(e.calibrateParamsLoading=!0,e.addCalibrateLoading=!0,e.form0.deviceId=e.clickNodeVal.value,e.form0.createdBy=e.nickName,e.form0.type="examine",e.$axios.post(e.$api.deviceCheck.saveOrUpdateDeviceMetric,e.form0,{headers:{"Content-Type":"application/json"}}).then((function(a){200==a.code&&(e.$message.success("保存成功"),e.$refs["form0"].resetFields(),e.getXmsg()),e.calibrateParamsLoading=!1,e.addCalibrateLoading=!1}))):(e.addCalibrateLoading=!1,e.$message.warning("有必填项未填"))}))},getTableList:function(e){var a=this;this.$axios.get(this.$api.deviceCheck.deviceMetricRecordPage+"?deviceId="+e+"&size="+this.search.size+"&current="+this.search.current+"&type=examine").then((function(e){a.tableData=e.data.records,a.search.total=e.data.total}))},addRecord:function(){var e=this;this.$refs["calibrationRecord"].validate((function(a){if(a)try{if(e.calibrateParams.some((function(e){return void 0===e.isCalibration})))return void e.$message.error("请选择是否核查");if(!e.calibrateParams.every((function(e){return void 0!==e.result})))return void e.$message.error("请选择判定结果");e.addRecordLoading=!0,e.calibrationRecord.deviceId=e.clickNodeVal.value,e.calibrationRecord.createUser=e.nickName,e.calibrationRecord.deviceMetricsCopyList=e.calibrateParams,e.calibrationRecord.type="examine",e.$axios.post(e.$api.deviceCheck.addOrUpdateDeviceMetricRecord,e.calibrationRecord,{headers:{"Content-Type":"application/json"}}).then((function(a){200==a.code&&(e.$message.success("添加成功"),e.dialogVisible1=!1,e.getTableList(e.clickNodeVal.value)),e.addRecordLoading=!1}))}catch(t){console.log("addRecord---",t),e.addRecordLoading=!1}else e.$message.warning("有必填项未填")}))},resetcalibrationRecord:function(){this.$refs.calibrationRecord.resetFields()},handleSuccessUp:function(e,a){200==e.code?(this.calibrationRecord.fileName=a.name,this.calibrationRecord.systemFileName=e.data,this.upLoading=!1):this.$message.error(e.message)},beforeUpload:function(e){return e.size>10485760?(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1):(this.upLoading=!0,!0)},onError:function(e,a,t){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},deleteFile:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.delete(e.$api.personnel.deleteCNASFile+"?fileName="+e.form.systemFileName).then((function(a){200==a.code&&e.$message.success("删除成功！")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleAttachmentClick:function(e){var a=this.javaApi+"/img/"+e.systemFileName;s["a"].downloadIamge(a,e.fileName)},add:function(e){this.operationType=e,this.dialogVisible1=!0,this.getXmsg()},handleViewClick:function(e,a){var t=this;this.$axios.get(this.$api.deviceCheck.showDeviceMetricsCopy+"?id="+a.id+"&type=examine").then((function(e){t.calibrateParams=e.data})),this.calibrationRecord=Object(o["a"])({},a),this.operationType=e,this.dialogVisible1=!0},handleDeleteClick:function(e){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios.delete(a.$api.deviceCheck.deleteDeviceMetricRecord+"?id="+e.id).then((function(e){a.getTableList(a.clickNodeVal.value),a.$message.success("删除成功！")}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleDelete:function(e){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios.delete(a.$api.deviceCheck.deleteDeviceMetrics+"?id="+e.id).then((function(e){a.getXmsg(),a.$message.success("删除成功！")}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))}},watch:{clickNodeVal:function(e){e.value&&this.getTableList(e.value)}}};var u=d,p=(t("6cdd"),t("2877")),m=Object(p["a"])(u,r,i,!1,null,"271f5e32",null);a["default"]=m.exports}}]);