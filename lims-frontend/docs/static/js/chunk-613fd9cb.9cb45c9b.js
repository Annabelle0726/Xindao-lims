(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-613fd9cb"],{"0767":function(e,t,a){},9506:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"p",(function(){return o})),a.d(t,"v",(function(){return c})),a.d(t,"g",(function(){return i})),a.d(t,"I",(function(){return d})),a.d(t,"j",(function(){return l})),a.d(t,"A",(function(){return u})),a.d(t,"f",(function(){return s})),a.d(t,"F",(function(){return m})),a.d(t,"N",(function(){return f})),a.d(t,"K",(function(){return p})),a.d(t,"m",(function(){return g})),a.d(t,"E",(function(){return h})),a.d(t,"s",(function(){return b})),a.d(t,"x",(function(){return y})),a.d(t,"e",(function(){return R})),a.d(t,"r",(function(){return v})),a.d(t,"L",(function(){return k})),a.d(t,"D",(function(){return O})),a.d(t,"l",(function(){return j})),a.d(t,"t",(function(){return C})),a.d(t,"a",(function(){return M})),a.d(t,"n",(function(){return x})),a.d(t,"G",(function(){return F})),a.d(t,"y",(function(){return D})),a.d(t,"h",(function(){return L})),a.d(t,"w",(function(){return w})),a.d(t,"d",(function(){return I})),a.d(t,"q",(function(){return T})),a.d(t,"J",(function(){return N})),a.d(t,"M",(function(){return $})),a.d(t,"B",(function(){return A})),a.d(t,"C",(function(){return z})),a.d(t,"k",(function(){return S})),a.d(t,"u",(function(){return V})),a.d(t,"b",(function(){return P})),a.d(t,"o",(function(){return _})),a.d(t,"H",(function(){return q})),a.d(t,"i",(function(){return U})),a.d(t,"z",(function(){return B}));var n=a("b775");function r(e){return Object(n["a"])({url:"/manageRecordCheck/addManageRecordCheck",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/manageRecordCheck/doManageRecordCheck",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/manageRecordCheck/exportOutManageRecordCheck",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/manageRecordCheck/checkManageRecordCheck",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/manageRecordCheck/ratifyManageRecordCheck",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/manageRecordCheck/delManageRecordCheck",method:"delete",params:e})}function u(e){return Object(n["a"])({url:"/manageRecordCheck/pageManageRecordCheck",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/manageRecordVerify/addManageRecordVerify",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/manageRecordVerify/pageManageRecordVerify",method:"get",params:e})}function f(e){return Object(n["a"])({url:"/manageRecordTotal/submitManageRecordTotal",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/manageRecordTotal/ratifyManageRecordTotal",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/manageRecordVerify/delManageRecordVerify",method:"delete",params:e})}function h(e){return Object(n["a"])({url:"/manageRecordTotal/pageManageRecordTotal",method:"get",params:e})}function b(e){return Object(n["a"])({url:"/manageRecordVerify/doManageRecordVerify",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/manageRecordIssueRecycle/exportOutManageRecordIssueRecycle",method:"get",params:e})}function R(e){return Object(n["a"])({url:"/manageRecordIssueRecycle/addManageRecordIssueRecycle",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/manageRecordIssueRecycle/doManageRecordIssueRecycle",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/personBasicInfo/selectCNSAPersonTree",method:"get",params:e})}function O(e){return Object(n["a"])({url:"/manageRecordIssueRecycle/pageManageRecordIssueRecycle",method:"get",params:e})}function j(e){return Object(n["a"])({url:"/manageRecordIssueRecycle/delManageRecordIssueRecycle",method:"delete",params:e})}function C(e){return Object(n["a"])({url:"/manageRecordAudit/exportOutManageRecordAudit",method:"get",params:e})}function M(e){return Object(n["a"])({url:"/manageRecordAudit/addManageRecordAudit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function x(e){return Object(n["a"])({url:"/manageRecordAudit/doManageRecordAudit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function F(e){return Object(n["a"])({url:"/manageRecordAudit/ratifyManageRecordAudit",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/manageRecordAudit/pageManageRecordAudit",method:"get",params:e})}function L(e){return Object(n["a"])({url:"/manageRecordAudit/delManageRecordAudit",method:"delete",params:e})}function w(e){return Object(n["a"])({url:"/manageRecordIntervals/exportOutManageRecordIntervals",method:"get",params:e})}function I(e){return Object(n["a"])({url:"/manageRecordIntervals/addManageRecordIntervals",method:"post",data:e})}function T(e){return Object(n["a"])({url:"/manageRecordIntervals/doManageRecordIntervals",method:"post",data:e})}function N(e){return Object(n["a"])({url:"/manageRecordIntervalsTotal/ratifyManageRecordIntervalsTotal",method:"post",data:e})}function $(e){return Object(n["a"])({url:"/manageRecordIntervalsTotal/submitManageRecordIntervalsTotal",method:"post",data:e})}function A(e){return Object(n["a"])({url:"/manageRecordIntervals/pageManageRecordIntervals",method:"get",params:e})}function z(e){return Object(n["a"])({url:"/manageRecordIntervalsTotal/pageManageRecordIntervalsTotal",method:"get",params:e})}function S(e){return Object(n["a"])({url:"/manageRecordIntervals/delManageRecordIntervals",method:"delete",params:e})}function V(e){return Object(n["a"])({url:"/manageRecordCancel/exportOutManageRecordCancel",method:"get",params:e})}function P(e){return Object(n["a"])({url:"/manageRecordCancel/addManageRecordCancel",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/manageRecordCancel/doManageRecordCancel",method:"post",data:e})}function q(e){return Object(n["a"])({url:"/manageRecordCancel/ratifyManageRecordCancel",method:"post",data:e})}function U(e){return Object(n["a"])({url:"/manageRecordCancel/delManageRecordCancel",method:"delete",params:e})}function B(e){return Object(n["a"])({url:"/manageRecordCancel/pageManageRecordCancel",method:"get",params:e})}},b911:function(e,t,a){"use strict";a("0767")},f90c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"border-card"},on:{change:e.getTableData},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"填写",name:"填写"}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end","margin-bottom":"10px"}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openAdd("新增")}}},[e._v("新增")]),a("el-upload",{ref:"upload",staticStyle:{display:"inline-block","margin-left":"20px"},attrs:{action:e.action,multiple:!1,"show-file-list":!1,accept:".doc,.docx",headers:e.uploadHeader,"on-change":e.beforeUpload,"on-error":e.onError,"on-success":e.handleSuccessUp}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.upLoading}},[e._v("导入")])],1)],1),a("lims-table",{attrs:{tableData:e.tableData0,column:e.column0,page:e.page0,tableLoading:e.tableLoading0,height:"calc(100vh - 290px)"},on:{pagination:e.pagination0}})],1),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"历史记录",name:"历史记录"}},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"年",prop:"year"}},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年",format:"yyyy","value-format":"yyyy",size:"small"},on:{change:function(t){return e.refreshTable()}},model:{value:e.queryParams.year,callback:function(t){e.$set(e.queryParams,"year",t)},expression:"queryParams.year"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),a("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1)],1),a("el-dialog",{class:{downPdf:"下载"==e.title0},attrs:{title:e.title0,visible:e.lookDialogVisible,width:"800px",modal:"下载"!=e.title0,top:"5vh"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{"max-height":"70vh","overflow-y":"auto"},attrs:{fileUrl:e.javaApi+"/word/"+e.currentInfo.url,currentFile:{}}}):e._e(),"审核"==e.title0||"批准"==e.title0?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.noCheckLoading},on:{click:function(t){return e.submitCheck("不通过")}}},[e._v("不通过")]),a("el-button",{attrs:{type:"primary",loading:e.checkLoading},on:{click:function(t){return e.submitCheck("通过")}}},[e._v("通 过")])],1):e._e()],1),a("el-dialog",{attrs:{title:e.title,visible:e.addDia,width:"500px"},on:{"update:visible":function(t){e.addDia=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"外来文件名称",prop:"documentName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.documentName,callback:function(t){e.$set(e.addForm,"documentName",t)},expression:"addForm.documentName"}})],1),a("el-form-item",{attrs:{label:"文件编号",prop:"documentCode"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.documentCode,callback:function(t){e.$set(e.addForm,"documentCode",t)},expression:"addForm.documentCode"}})],1),a("el-form-item",{attrs:{label:"标准规范名称",prop:"standardName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.standardName,callback:function(t){e.$set(e.addForm,"standardName",t)},expression:"addForm.standardName"}})],1),a("el-form-item",{attrs:{label:"标准号",prop:"standardCode"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.standardCode,callback:function(t){e.$set(e.addForm,"standardCode",t)},expression:"addForm.standardCode"}})],1),a("el-form-item",{attrs:{label:"生效日期",prop:"effectiveDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addForm.effectiveDate,callback:function(t){e.$set(e.addForm,"effectiveDate",t)},expression:"addForm.effectiveDate"}})],1),a("el-form-item",{attrs:{label:"作废日期",prop:"cancelDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.addForm.cancelDate,callback:function(t){e.$set(e.addForm,"cancelDate",t)},expression:"addForm.cancelDate"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",type:"textarea",rows:2,clearable:""},model:{value:e.addForm.note,callback:function(t){e.$set(e.addForm,"note",t)},expression:"addForm.note"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.uploading,type:"primary"},on:{click:function(t){return e.submitProduct("addForm")}}},[e._v("确 认")])],1)],1)],1)},r=[],o=a("ade3"),c=a("5530"),i=a("00d5"),d=a("a408"),l=a("9506"),u={name:"OutDocumenRecordt",components:{filePreview:d["a"],limsTable:i["a"]},data:function(){var e=this;return{title0:"查看",activeName:"填写",lookDialogVisible:!1,noCheckLoading:!1,checkLoading:!1,addPower:!0,upPower:!0,currentInfo:{},upLoading:!1,queryParams:{},tableData:[],column:[{label:"年份",prop:"year"},{label:"总数量",prop:"totalNum",width:"120px"},{label:"拟制人",prop:"submitUserName"},{label:"拟制日期",prop:"submitDate"},{label:"批准人",prop:"ratifyUserName"},{label:"批准日期",prop:"ratifyDate"},{label:"批准结果",prop:"ratifyState"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"查看",type:"text",clickFun:function(t){e.handleLook(t)},disabled:function(e){return!e.url}},{name:"下载",type:"text",clickFun:function(t){e.handleDown0(t)},disabled:function(e){return!e.url}},{name:"提交",type:"text",clickFun:function(t){e.handleSubmit(t)},disabled:function(e){return!!e.submitUserName}},{name:"批准",type:"text",clickFun:function(t){e.handleApproval(t)},disabled:function(e){return!e.submitUserName||!!e.ratifyUserName}}]}],page:{total:0,size:10,current:0},tableLoading:!1,tableData0:[],column0:[{label:"外来文件名称",prop:"documentName"},{label:"文件编号",prop:"documentCode",width:"120px"},{label:"标准规范名称",prop:"standardName"},{label:"标准号",prop:"standardCode"},{label:"生效日期",prop:"effectiveDate"},{label:"作废日期",prop:"cancelDate"},{label:"备注",prop:"note"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openAdd("编辑",t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)}}]}],page0:{total:0,size:10,current:0},tableLoading0:!1,title:"新增",addForm:{},addDia:!1,addRules:{documentName:[{required:!0,message:"请输入外来文件名称",trigger:"blur"}],documentCode:[{required:!0,message:"请输入文件编号",trigger:"blur"}]},uploading:!1}},computed:{action:function(){return this.javaApi+"/manageRecordVerify/exportManageRecordVerify"}},mounted:function(){this.getTableData()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({getTableData:function(){"填写"===this.activeName?this.getList0():this.getList()},openAdd:function(e,t){this.title=e,this.addForm=t||{},this.addDia=!0},getList:function(){var e=this;this.tableLoading=!0;var t=Object(c["a"])(Object(c["a"])({},this.queryParams),this.page);delete t.total,Object(l["E"])(Object(c["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},getList0:function(){var e=this;this.tableLoading0=!0;var t=Object(c["a"])({},this.page0);delete t.total,Object(l["F"])(Object(c["a"])({},t)).then((function(t){e.tableLoading0=!1,200===t.code&&(e.tableData0=t.data.records,e.page0.total=t.data.total)})).catch((function(t){e.tableLoading0=!1}))},pagination0:function(e){var t=e.page,a=e.limit;this.page0.current=t,this.page0.size=a,this.getList0()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},beforeUpload:function(e){return!(e.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(e,t,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.getList0()):this.$message.error("上传失败")},submitCheck:function(e){},handleLook:function(e){this.title0="查看",this.commonFun(e)},commonFun:function(e,t){var a=this;this.currentInfo=e,Object(l["F"])({current:-1,size:-1,manageRecordTotalId:e.id}).then((function(e){a.currentInfo.arr=e.data.records,a.lookDialogVisible=!0,t&&t()})).catch((function(e){}))},handleDown0:function(e){this.$download.saveAs(e.url,"外来文件确认记录")},handleSubmit:function(e){var t=this;this.$confirm("是否提交 "+e.year+" 年的数据","提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["N"])({id:e.id}).then((function(e){t.$message({type:"success",message:"提交成功!"}),t.refreshTable()})).catch((function(e){}))}))},handleApproval:function(e){this.title0="批准",this.commonFun(e)}},"submitCheck",(function(e){var t=this;"通过"==e?this.checkLoading=!0:this.noCheckLoading=!0,Object(l["K"])({id:this.currentInfo.id,ratifyState:e}).then((function(e){t.checkLoading=!1,t.noCheckLoading=!1,t.$message({type:"success",message:"操作成功!"}),t.refreshTable(),t.lookDialogVisible=!1})).catch((function(e){}))})),"handleDelete",(function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["m"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.getList0()}))})).catch((function(){}))})),"submitProduct",(function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.uploading=!0,"新增"==t.title?Object(l["f"])(t.addForm).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.getList0(),t.addDia=!1)})).catch((function(e){t.uploading=!1})):Object(l["s"])(t.addForm).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.getList0(),t.addDia=!1)})).catch((function(e){t.uploading=!1}))}))}))},s=u,m=(a("b911"),a("2877")),f=Object(m["a"])(s,n,r,!1,null,"2dd6c319",null);t["default"]=f.exports}}]);