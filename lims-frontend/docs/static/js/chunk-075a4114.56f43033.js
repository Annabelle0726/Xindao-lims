(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-075a4114","chunk-f121d8f6","chunk-58c1939c","chunk-c9071fa0","chunk-cba18d76","chunk-004f4510","chunk-7b15d3a4"],{"05d3":function(e,t,a){},"09fe":function(e,t,a){},"0d3d":function(e,t,a){},"0e9a":function(e,t,a){"use strict";var i=a("c14f"),n=a("1da1"),r=(a("c19f"),a("ace4"),a("2c66"),a("249d"),a("40e9"),a("d3b7"),a("ac1f"),a("5319"),a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("986a"),a("1d02"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("6ce5"),a("2834"),a("72f7"),a("4ea1"),a("c343")),o=a("acff"),s=a("2b0e");t["a"]={convertFileToHtml:function(e){return Object(n["a"])(Object(i["a"])().m((function t(){var a,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return a=new XMLHttpRequest,a.open("GET",s["default"].prototype.javaApi+e,!0),a.send(),a.responseType="blob",o=new Promise((function(e,t){a.onload=Object(n["a"])(Object(i["a"])().m((function t(){var o,s,l,c,d;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(200!==this.status){t.n=2;break}return o=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),s=new FileReader,s.readAsArrayBuffer(o),l=new Promise((function(e,t){s.onload=Object(n["a"])(Object(i["a"])().m((function t(){var n,o,s;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return n=a.response,t.n=1,Object(r["convertToHtml"])({arrayBuffer:n});case 1:o=t.v,s=o.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(s);case 2:return t.a(2)}}),t)})))})),c=e,t.n=1,l;case 1:d=t.v,c(d);case 2:return t.a(2)}}),t,this)})))})),t.n=1,o;case 1:return t.a(2,t.v)}}),t)})))()},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var i=e.getContext("2d");i.drawImage(a,0,0,a.width,a.height);var n=e.toDataURL("image/png"),r=document.createElement("a"),o=new MouseEvent("click");r.download=t||"photo",r.href=n,r.dispatchEvent(o)},a.src=e},compressBlob:function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(a){t.onload=function(){var i=t.result,n=new Uint8Array(i),r=o["a"].deflate(n),s=new Blob([r],{type:e.type});a(s)}}))}}},"167d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downPerson}},[e._v("下载档案")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("人员分类")]),a("el-button",{attrs:{loading:e.saveLoading,size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")])],1),a("div",[a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{width:"12em"}},[a("el-image",{staticStyle:{width:"100%",height:"300px",border:"1px solid #000","border-radius":"10px","margin-left":"6px","margin-top":"10px"},attrs:{src:e.javaApi+"/img/"+e.form.pictureUrl,fit:"fill"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"40px"}})])]),a("el-image",{staticStyle:{width:"80%",height:"50px",border:"1px solid #000","border-radius":"10px","margin-left":"22px","margin-top":"20px"},attrs:{src:e.javaApi+"/img/"+e.form.signatureUrl,fit:"fill"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"40px"}})])])],1),a("div",{staticStyle:{height:"calc(100vh - 14em)","overflow-y":"auto"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:"",clearable:"",size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{attrs:{disabled:"",clearable:"",size:"small"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"当前状态"}},[a("el-radio-group",{model:{value:e.form.currentState,callback:function(t){e.$set(e.form,"currentState",t)},expression:"form.currentState"}},[a("el-radio",{attrs:{label:"1formal",size:"mini"}},[e._v("正式")]),a("el-radio",{attrs:{label:"2intern",size:"mini"}},[e._v("实习")]),a("el-radio",{attrs:{label:"3leaveOffice",size:"mini"}},[e._v("离职")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"1",size:"mini"}},[e._v("男")]),a("el-radio",{attrs:{label:"0",size:"mini"}},[e._v("女")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.corporateName,callback:function(t){e.$set(e.form,"corporateName",t)},expression:"form.corporateName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属部门"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.department,props:{label:"name",value:"id",checkStrictly:!0},filterable:""},model:{value:e.form.departLimsId,callback:function(t){e.$set(e.form,"departLimsId",t)},expression:"form.departLimsId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"岗位名称"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.postName,callback:function(t){e.$set(e.form,"postName",t)},expression:"form.postName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入集团时间"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.groupTime,callback:function(t){e.$set(e.form,"groupTime",t)},expression:"form.groupTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"劳动关系"}},[a("el-radio-group",{model:{value:e.form.laborRelations,callback:function(t){e.$set(e.form,"laborRelations",t)},expression:"form.laborRelations"}},[a("el-radio",{attrs:{label:0,size:"mini"}},[e._v("合同工")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"公司邮箱"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工作时间"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.workingTime,callback:function(t){e.$set(e.form,"workingTime",t)},expression:"form.workingTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同到期时间"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.contractLifeTime,callback:function(t){e.$set(e.form,"contractLifeTime",t)},expression:"form.contractLifeTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"职称"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.professionalTitle,callback:function(t){e.$set(e.form,"professionalTitle",t)},expression:"form.professionalTitle"}})],1)],1),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[a("el-form-item",{attrs:{label:"人员分类"}},[a("span",{staticStyle:{color:"#000"}},[e._v(e._s(e.form.personnelClassification))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出生日期"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.getAge},model:{value:e.form.dateBirth,callback:function(t){e.$set(e.form,"dateBirth",t)},expression:"form.dateBirth"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"籍贯"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.nativePlace,callback:function(t){e.$set(e.form,"nativePlace",t)},expression:"form.nativePlace"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"民族"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.identityCard,callback:function(t){e.$set(e.form,"identityCard",t)},expression:"form.identityCard"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{staticStyle:{width:"99%"},attrs:{max:130,min:1,"controls-position":"right",size:"small"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"婚姻状况"}},[a("el-radio-group",{model:{value:e.form.maritalStatus,callback:function(t){e.$set(e.form,"maritalStatus",t)},expression:"form.maritalStatus"}},[a("el-radio",{attrs:{label:0,size:"mini"}},[e._v("已婚")]),a("el-radio",{attrs:{label:1,size:"mini"}},[e._v("未婚")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证件有效期"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.validityPeriod,callback:function(t){e.$set(e.form,"validityPeriod",t)},expression:"form.validityPeriod"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证件地址"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.idAddress,callback:function(t){e.$set(e.form,"idAddress",t)},expression:"form.idAddress"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证件详细地址"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.idDetailAddress,callback:function(t){e.$set(e.form,"idDetailAddress",t)},expression:"form.idDetailAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"政治面貌"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.politicalStatus,callback:function(t){e.$set(e.form,"politicalStatus",t)},expression:"form.politicalStatus"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入党/团时间"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.dumplingTime,callback:function(t){e.$set(e.form,"dumplingTime",t)},expression:"form.dumplingTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"最高学历"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.officialAcademicRedentials,callback:function(t){e.$set(e.form,"officialAcademicRedentials",t)},expression:"form.officialAcademicRedentials"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"最高学位"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.highestDegree,callback:function(t){e.$set(e.form,"highestDegree",t)},expression:"form.highestDegree"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"毕业院校1"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.graduatedInstitutions1,callback:function(t){e.$set(e.form,"graduatedInstitutions1",t)},expression:"form.graduatedInstitutions1"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"专业1"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.major1,callback:function(t){e.$set(e.form,"major1",t)},expression:"form.major1"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"毕业时间1"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.graduationTime1,callback:function(t){e.$set(e.form,"graduationTime1",t)},expression:"form.graduationTime1"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"毕业院校2"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.graduatedInstitutions2,callback:function(t){e.$set(e.form,"graduatedInstitutions2",t)},expression:"form.graduatedInstitutions2"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"专业2"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.major2,callback:function(t){e.$set(e.form,"major2",t)},expression:"form.major2"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"毕业时间2"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.graduationTime2,callback:function(t){e.$set(e.form,"graduationTime2",t)},expression:"form.graduationTime2"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"登记时间"}},[a("el-date-picker",{staticStyle:{width:"99%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.lastUpdateTime,callback:function(t){e.$set(e.form,"lastUpdateTime",t)},expression:"form.lastUpdateTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",clearable:"",size:"small"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"个人照片"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.pictureUrl,callback:function(t){e.$set(e.form,"pictureUrl",t)},expression:"form.pictureUrl"}},[e.form.pictureUrl?a("el-button",{attrs:{slot:"append",icon:"el-icon-delete-solid"},on:{click:function(t){return e.deleteFile(e.form.pictureUrl,"pictureUrl")}},slot:"append"}):e._e()],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-upload",{ref:"upload",staticStyle:{float:"left",margin:"0 10px 0 10px"},attrs:{action:e.action,headers:e.uploadHeader,"on-success":function(t,a,i){return e.onSuccess(t,a,i,"pictureUrl")},"show-file-list":!1}},[a("el-button",{staticClass:"uploadFile",attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("上传")])],1),e.form.pictureUrl?a("el-button",{staticClass:"uploadFile",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.downloadFile(e.form.pictureUrl)}}},[e._v("下载")]):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"电子签名"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.signatureUrl,callback:function(t){e.$set(e.form,"signatureUrl",t)},expression:"form.signatureUrl"}},[e.form.signatureUrl?a("el-button",{attrs:{slot:"append",icon:"el-icon-delete-solid"},on:{click:function(t){return e.deleteFile(e.form.signatureUrl,"signatureUrl")}},slot:"append"}):e._e()],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-upload",{ref:"upload",staticStyle:{float:"left",margin:"0 10px 0 10px"},attrs:{action:e.action,headers:e.uploadHeader,"on-success":function(t,a,i){return e.onSuccess(t,a,i,"signatureUrl")},"show-file-list":!1}},[a("el-button",{staticClass:"uploadFile",attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传")])],1),e.form.signatureUrl?a("el-button",{staticClass:"uploadFile",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.downloadFile(e.form.signatureUrl)}}},[e._v("下载")]):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"证书资料"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"right","margin-right":"25px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.annexAdd(0)}}},[e._v("新增")])],1)],1),a("lims-table",{staticStyle:{width:"96%","margin-left":"34px"},attrs:{tableData:e.annexList,column:e.columnData2,height:"200",tableLoading:e.tableLoading2}}),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"附件资料"}})],1),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,data:{userId:e.clickNodeVal.userId},"before-upload":e.fileBeforeUpload,headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1)],1),a("lims-table",{staticStyle:{width:"96%",float:"right"},attrs:{tableData:e.tableData,column:e.columnData,height:"200",tableLoading:e.tableLoading}}),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"工作经历"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"right","margin-right":"25px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.annexAdd1("add")}}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading1,expression:"tableLoading1"}],staticStyle:{width:"96%",float:"right"},attrs:{data:e.tableData1,border:"",height:"200","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"55px",align:"center"}}),a("el-table-column",{attrs:{label:"工作经历",prop:"workExperience"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.annexAdd1("edit",t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteAnnex1(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)])]),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"提示",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.getComparisonList}},[a("div",{staticStyle:{height:"30vh"}},[a("el-row",[a("el-col",{attrs:{span:4}},[e._v(" 人员分类： ")]),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.dict.type.personnl_type,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value}})})),1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.clickPersonnelClassificationSure}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{"before-close":e.handleClose,title:e.title,visible:e.dialogVisible1,width:"40%"},on:{"update:visible":function(t){e.dialogVisible1=t},open:e.getComparisonList}},[a("el-form",{ref:"annex",attrs:{model:e.annex,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"证件号",prop:"idNumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small"},model:{value:e.annex.idNumber,callback:function(t){e.$set(e.annex,"idNumber",t)},expression:"annex.idNumber"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"发证单位",prop:"issueUnit"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.annex.issueUnit,callback:function(t){e.$set(e.annex,"issueUnit",t)},expression:"annex.issueUnit"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.annex.level,callback:function(t){e.$set(e.annex,"level",t)},expression:"annex.level"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"有效期",prop:"periodValidity"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.annex.periodValidity,callback:function(t){e.$set(e.annex,"periodValidity",t)},expression:"annex.periodValidity"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"复印件",prop:"copy"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.annex.copy,callback:function(t){e.$set(e.annex,"copy",t)},expression:"annex.copy"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"原件",prop:"original"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.annex.original,callback:function(t){e.$set(e.annex,"original",t)},expression:"annex.original"}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"文件"}},[a("el-upload",{ref:"fileName",attrs:{action:e.action,"before-upload":e.beforeAvatarUpload,headers:e.uploadHeader,"on-success":function(t,a,i){return e.onSuccess(t,a,i,"fileName")},"show-file-list":!1}},[e.annex.fileName?a("span",[e._v(e._s(e.annex.fileName))]):a("i",{staticClass:"el-icon-upload avatar-uploader-icon"})])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancellation}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加工作经历",visible:e.dialogVisible2,width:"40%"},on:{close:e.handleClose2,"update:visible":function(t){e.dialogVisible2=t}}},[a("el-form",{ref:"annex2",attrs:{model:e.annex2,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"工作经历",prop:"idNumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",clearable:"",size:"small"},model:{value:e.annex2.workExperience,callback:function(t){e.$set(e.annex2,"workExperience",t)},expression:"annex2.workExperience"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose2}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm2}},[e._v("确 定")])],1)],1)],1)},n=[],r=a("c14f"),o=a("1da1"),s=(a("4de4"),a("a15b"),a("d81d"),a("14d9"),a("a434"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("00b4"),a("498a"),a("0643"),a("2382"),a("a573"),a("0e9a")),l=a("cfb9"),c=a("00d5"),d={props:{clickNodeVal:{type:Object,default:function(){return{}}}},dicts:["personnl_type"],data:function(){var e=this;return{operationType:"",basicInfoWorkId:"",dialogVisible2:!1,annex2:{workExperience:""},tableLoading:!1,tableData:[],columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],columnData2:[{label:"证件号",prop:"idNumber",minWidth:"150px"},{label:"发证单位",prop:"issueUnit",minWidth:"150px"},{label:"文件名称",prop:"fileName",minWidth:"200px"},{label:"级别",prop:"level",minWidth:"150px"},{label:"有效期",prop:"periodValidity",minWidth:"150px"},{label:"添加时间",prop:"createTime",minWidth:"150px"},{dataType:"action",minWidth:"130",label:"操作",fixed:"right",operation:[{name:"下载",type:"text",clickFun:function(t){e.downloadFile(t.fileName)}},{name:"编辑",type:"text",clickFun:function(t){e.annexAdd(1,t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.deleteAnnex(t)}}]}],tableLoading1:!1,tableLoading2:!1,tableData1:[],addOrupdate:null,title:"",annexList:[],imageUrl:"",annex:{userId:"",idNumber:"",issueUnit:"",level:"",periodValidity:"",copy:"",original:"",fileName:""},rules:{idNumber:[{required:!0,message:"请输入证件号",trigger:"blur"}],issueUnit:[{required:!0,message:"请输入发证单位",trigger:"blur"}],periodValidity:[{required:!1,message:"请选择有效期",trigger:"blur"}]},dialogVisible1:!1,form:{userId:"",name:"",account:"",currentState:"",sex:"",corporateName:"",department:"",departLimsId:[],postName:"",groupTime:"",laborRelations:"",workingTime:"",contractLifeTime:"",personnelClassification:"",dateBirth:"",nativePlace:"",nation:"",identityCard:"",age:"",validityPeriod:"",maritalStatus:"",idAddress:"",idDetailAddress:"",politicalStatus:"",dumplingTime:"",telephone:"",email:"",officialAcademicRedentials:"",highestDegree:"",graduatedInstitutions1:"",major1:"",graduationTime1:"",graduatedInstitutions2:"",major2:"",graduationTime2:"",lastUpdateTime:"",pictureUrl:"",signatureUrl:"",professionalTitle:"",remarks:""},department:[],saveLoading:!1,dialogVisible:!1,checkList:[],successFileList:[],isSave:!1}},components:{limsTable:c["a"],fileDownload:s["a"]},created:function(){this.init(),this.searchTableList(),this.searchTableList2()},computed:{action:function(){return this.javaApi+"/personBasicInfo/saveCNASFile"},fileAction:function(){return this.javaApi+"/personBasicInfo/uploadBasicInfoFile"}},methods:{downPerson:function(){var e=this;console.log("this.clickNodeVal.userId",this.clickNodeVal.userId),Object(l["l"])({id:this.clickNodeVal.userId}).then((function(t){var a=new Blob([t],{type:"application/msword"});e.$download.saveAs(a,"人员档案.docx")}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,a,i){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.searchTableList()):this.$message.error(e.message)},searchTableList:function(){var e=this;this.tableLoading=!0,Object(l["o"])({userId:this.clickNodeVal.userId}).then((function(t){e.tableLoading=!1,e.tableData=t.data})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,s["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var a=document.createElement("a");a.href=t,a.download=e.fileName,a.click()}},delete:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(l["e"])({basicInfoFileId:e.basicInfoFileId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchTableList()})).catch((function(e){t.tableLoading=!1}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},annexAdd1:function(e,t){this.operationType=e,"edit"===e?(this.basicInfoWorkId=t.basicInfoWorkId,this.annex2.workExperience=t.workExperience):(this.basicInfoWorkId="",this.annex2.workExperience=""),this.dialogVisible2=!0},submitForm2:function(){var e=this,t={workExperience:this.annex2.workExperience,userId:this.clickNodeVal.userId,basicInfoWorkId:this.basicInfoWorkId};this.tableLoading1=!0,"add"===this.operationType?Object(l["b"])(t).then((function(t){e.tableLoading1=!1,200==t.code&&(e.dialogVisible2=!1,e.$message.success("新增成功"),e.searchTableList2())})).catch((function(t){e.tableLoading1=!1})):Object(l["v"])(t).then((function(t){e.tableLoading1=!1,e.dialogVisible2=!1,e.$message.success("修改成功"),e.searchTableList2()})).catch((function(t){e.tableLoading1=!1}))},handleClose2:function(){this.dialogVisible2=!1,this.annex2.workExperience=""},deleteAnnex1:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading1=!0,Object(l["f"])({basicInfoWorkId:e.basicInfoWorkId}).then((function(e){t.tableLoading1=!1,t.$message.success("删除成功"),t.searchTableList2()})).catch((function(e){t.tableLoading1=!1}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},searchTableList2:function(){var e=this;this.tableLoading1=!0,Object(l["p"])({userId:this.clickNodeVal.userId}).then((function(t){e.tableLoading1=!1,e.tableData1=t.data})).catch((function(t){e.tableLoading1=!1,console.log("err---",t)}))},annexAdd:function(e,t){var a=this;1===e?(this.title="编辑附件资料",this.addOrupdate=1,Object(l["m"])({id:t.id}).then((function(e){a.annex=e.data,a.imageUrl=a.javaApi+"/img/"+e.data.fileName}))):(this.title="新增附件资料",this.addOrupdate=2),this.dialogVisible1=!0},submitForm:function(){var e=this;this.$refs["annex"].validate((function(t){if(!t)return!1;e.addAnnex()}))},addAnnex:function(){var e=this;""!=this.annex.fileName&&null!=this.annex.fileName&&void 0!=this.annex.fileName?(this.annex.userId=this.clickNodeVal.userId,1===this.addOrupdate?Object(l["u"])(this.annex).then((function(t){200==t.code&&Object(l["n"])({userId:e.clickNodeVal.userId}).then((function(t){e.imageUrl="",e.$refs.fileName.clearFiles(),e.annex.fileName="",e.resetForm("annex"),e.annexList=t.data,e.dialogVisible1=!1,e.$message.success("更新成功！")}))})):(this.annex.id=null,Object(l["a"])(this.annex).then((function(t){200==t.code&&Object(l["n"])({userId:e.clickNodeVal.userId}).then((function(t){e.imageUrl="",e.$refs.fileName.clearFiles(),e.annex.fileName="",e.resetForm("annex"),e.annexList=t.data,e.dialogVisible1=!1,e.$message.success("保存成功")}))})))):this.$message.error("请上传文件")},deleteAnnex:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["i"])({id:e.id}).then((function(a){t.$message.success("删除成功！"),t.annexList=t.annexList.filter((function(t){return t.id!=e.id}))}))}))},beforeAvatarUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},downloadFile:function(e){var t=/\.(jpg|jpeg|png|gif)$/i.test(e);if(t){var a=this.javaApi+"/img/"+e;s["a"].downloadIamge(a,e)}else{var i=this.javaApi+"/word/"+e,n=document.createElement("a");n.href=i,n.download=e,n.click(),this.$message.success("下载成功")}},onSuccess:function(e,t,a,i){var n=this;return Object(o["a"])(Object(r["a"])().m((function t(){return Object(r["a"])().w((function(t){while(1)switch(t.n){case 0:"fileName"==i&&(n.annex.fileName=e.data),n.successFileList.push(e.data),n.$set(n.form,i,e.data);case 1:return t.a(2)}}),t)})))()},init:function(){if(this.clickNodeVal.userId)this.getUserBasisInfo(this.clickNodeVal.userId);else{var e=JSON.parse(localStorage.getItem("user"));this.getUserBasisInfo(e.userId),this.clickNodeVal.userId=e.userId}},getUserBasisInfo:function(e){var t=this;Object(l["q"])({userId:e}).then((function(e){t.form=e.data.PersonBasicInfoDto,t.department=e.data.department,t.annexList=e.data.annexList,t.form.departLimsId=e.data.PersonBasicInfoDto.departLimsId.split(",").filter((function(e){return""!=e})).map(Number)}))},save:function(){var e=this;return Object(o["a"])(Object(r["a"])().m((function t(){return Object(r["a"])().w((function(t){while(1)switch(t.n){case 0:e.saveLoading=!0,e.form.userId=e.clickNodeVal.userId,Array.isArray(e.form.departLimsId)&&(e.form.departLimsId.length>0?e.form.departLimsId=e.form.departLimsId.join(",").trim()+",":e.form.departLimsId=""),Object(l["r"])(e.form).then((function(t){e.saveLoading=!1,e.isSave=!0,e.getUserBasisInfo(e.clickNodeVal.userId),e.$message.success("保存成功！")}));case 1:return t.a(2)}}),t)})))()},getComparisonList:function(){this.checkList.length>0&&(this.form.personnelClassification=this.checkList.split("，"))},clickPersonnelClassificationSure:function(){this.dialogVisible=!1,this.form.personnelClassification=this.checkList.filter((function(e){return e})).join("，")},deleteFile:function(e,t){var a=this;return Object(o["a"])(Object(r["a"])().m((function i(){return Object(r["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,Object(l["j"])({fileName:e}).then((function(i){a.$message.success("删除成功！"),a.$set(a.form,t,null);var n=a.successFileList.indexOf(e);-1!=n&&a.successFileList.splice(n,1)}));case 1:return i.a(2)}}),i)})))()},cancellation:function(){this.resetForm("annex"),this.$refs.fileName.clearFiles(),this.annex.fileName="",this.imageUrl="",this.dialogVisible1=!1},handleClose:function(e){this.imageUrl="",this.annex={userId:"",idNumber:"",issueUnit:"",level:"",periodValidity:"",copy:"",original:"",fileName:""},e()},resetForm:function(e){this.$refs[e].resetFields()},getAge:function(e){this.form.age=this.calculateAge(e)},calculateAge:function(e){var t=new Date(e),a=new Date,i=a.getFullYear()-t.getFullYear(),n=a.getMonth(),r=a.getDate(),o=t.getMonth(),s=t.getDate();return(n<o||n===o&&r<s)&&i--,i}},watch:{clickNodeVal:{handler:function(e,t){e.userId&&(this.getUserBasisInfo(e.userId),this.searchTableList(),this.searchTableList2())}}}},u=d,m=(a("acca"),a("2877")),p=Object(m["a"])(u,i,n,!1,null,"2f404e82",null);t["default"]=p.exports},1839:function(e,t,a){"use strict";a.d(t,"x",(function(){return n})),a.d(t,"n",(function(){return r})),a.d(t,"A",(function(){return o})),a.d(t,"z",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"l",(function(){return d})),a.d(t,"u",(function(){return u})),a.d(t,"p",(function(){return m})),a.d(t,"y",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"m",(function(){return h})),a.d(t,"q",(function(){return b})),a.d(t,"t",(function(){return g})),a.d(t,"a",(function(){return v})),a.d(t,"h",(function(){return y})),a.d(t,"s",(function(){return w})),a.d(t,"g",(function(){return x})),a.d(t,"o",(function(){return k})),a.d(t,"v",(function(){return I})),a.d(t,"b",(function(){return D})),a.d(t,"w",(function(){return T})),a.d(t,"c",(function(){return P})),a.d(t,"k",(function(){return L})),a.d(t,"j",(function(){return j})),a.d(t,"r",(function(){return O})),a.d(t,"f",(function(){return S}));var i=a("b775");function n(e){return Object(i["a"])({url:"/fePowerStable/getLaboratoryFacilityPowerStablePage",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/deviceScope/search",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/deviceScope/treeDevice",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/fePowerStable/addLaboratoryFacilityPowerStable",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/fePowerStable/deleteFeMeasuredQuantity",method:"delete",params:e})}function d(e){return Object(i["a"])({url:"/fePowerStable/deleteLaboratoryFacilityPowerStable",method:"delete",params:e})}function u(e){return Object(i["a"])({url:"/fePowerStable/getFeMeasuredQuantityService",method:"get",params:e})}function m(e){return Object(i["a"])({url:"/fePowerStable/exportFePowerStable",method:"get",responseType:"blob",params:e})}function p(e){return Object(i["a"])({url:"/feLightningProtection/getLightningProtectionDetection",method:"get",params:e})}function f(e){return Object(i["a"])({url:"/feLightningProtection/addLightningProtectionDetection",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function h(e){return Object(i["a"])({url:"/feLightningProtection/deleteLightningProtectionDetection",method:"delete",params:e})}function b(e){return Object(i["a"])({url:"/feLightningProtection/exportOfLightningProtectionDetection",method:"get",responseType:"blob",params:e})}function g(e){return Object(i["a"])({url:"/feIllumination/getFeLightningProtection",method:"get",params:e})}function v(e){return Object(i["a"])({url:"/feIllumination/addFeLightningProtection",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/feIllumination/deleteFeLightningProtection",method:"delete",params:e})}function w(e){return Object(i["a"])({url:"/feIllumination/getFeIlluminationDetectionArea",method:"get",params:e})}function x(e){return Object(i["a"])({url:"/feIllumination/deleteFeIlluminationDetectionArea",method:"delete",params:e})}function k(e){return Object(i["a"])({url:"/feIllumination/exportFeIllumination",method:"get",responseType:"blob",params:e})}function I(e){return Object(i["a"])({url:"/feTempHumDate/getFeTempHumDate",method:"get",params:e})}function D(e){return Object(i["a"])({url:"/feTempHumDate/addFeTempHumDate",method:"post",data:e})}function T(e){return Object(i["a"])({url:"/feTempHumDate/getFeTempHumRecordPage",method:"get",params:e})}function P(e){return Object(i["a"])({url:"/feTempHumDate/addFeTempHumRecord",method:"post",data:e})}function L(e){return Object(i["a"])({url:"/feTempHumDate/deleteFeTempHumRecord",method:"delete",params:e})}function j(e){return Object(i["a"])({url:"/feTempHumDate/deleteFeTempHumDate",method:"delete",params:e})}function O(e){return Object(i["a"])({url:"/feTempHumDate/exportTemperatureAndHumidityRecords",method:"get",responseType:"blob",params:e})}function S(e){return Object(i["a"])({url:"/feTempHumDate/affirmFeTempHumDate",method:"post",data:e})}},2676:function(e,t,a){"use strict";a("0d3d")},"2b63":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_column"},[!e.editPlanShow&&e.isDepartment?a("div",[e._m(0),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("编制人")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getYearPlanList(e.departId)}},model:{value:e.page.compilerName,callback:function(t){e.$set(e.page,"compilerName",t)},expression:"page.compilerName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getYearPlanList(e.departId)}}},[e._v("查询")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.uploadDia=!0,e.getUserList()}}},[e._v("导入")])],1)]),a("lims-table",{attrs:{tableData:e.yearPlanTableData,column:e.yearPlanColumn,currentChange:e.currentChange,height:"40vh",page:e.page,tableLoading:e.yearLoading},on:{pagination:e.pagination}})],1):e._e(),e.editPlanShow?e._e():a("div",{staticClass:"table"},[a("div",[e._m(1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("培训讲师")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchTable(t)}},model:{value:e.inDetailForm.trainingLecturerName,callback:function(t){e.$set(e.inDetailForm,"trainingLecturerName",t)},expression:"inDetailForm.trainingLecturerName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.searchTable}},[e._v("查询")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[e.isDepartment&&e.currentChangeRow&&e.isOperation?a("el-button",{attrs:{size:"small"},on:{click:e.batchDelete}},[e._v("批量删除")]):e._e(),e.isDepartment&&e.currentChangeRow&&e.isOperation?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addTrainingPlan("add")}}},[e._v("新增")]):e._e()],1)]),a("lims-table",{attrs:{tableData:e.inDetailPlanTableData,column:e.inDetailPlanColumn,height:e.isDepartment?"40vh":"62vh",isSelection:!0,handleSelectionChange:e.handleSelectionChange,page:e.inDetailPagination,tableLoading:e.yearDetailLoading},on:{pagination:e.pagination1}})],1)]),a("Add",{ref:"addPlan",attrs:{currentChangeRow:e.currentChangeRow},on:{search:function(t){return e.getInDetailPlan(e.currentRowId,e.departId)}}}),e.editPlanShow?a("Edit",{ref:"editPlan",attrs:{currentRow:e.currentRow},on:{del:function(t){return e.getInDetailPlan(e.currentRowId,e.departId)},goBack:e.goBack}}):e._e(),a("el-dialog",{attrs:{visible:e.reviewDialog,title:"审核",width:"30%"},on:{"update:visible":function(t){e.reviewDialog=t},close:function(t){e.auditRemarks=""}}},[a("span",[e._v(" 审核备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.auditRemarks,callback:function(t){e.auditRemarks=t},expression:"auditRemarks"}})],1),a("span",{staticStyle:{"margin-top":"10px",display:"inline-block"}},[e._v(" 批准人： "),a("el-select",{staticStyle:{width:"70%"},attrs:{clearable:"",filterable:"",size:"small"},model:{value:e.approverId,callback:function(t){e.approverId=t},expression:"approverId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.reviewLoading},on:{click:function(t){return e.handleReview(2)}}},[e._v("不通过")]),a("el-button",{attrs:{loading:e.reviewLoading,type:"primary"},on:{click:function(t){return e.handleReview(1)}}},[e._v("通 过")])],1)]),a("el-dialog",{attrs:{visible:e.approvalDialog,title:"批准",width:"30%"},on:{"update:visible":function(t){e.approvalDialog=t},close:function(t){e.approvalRemarks=""}}},[a("span",[e._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:e.approvalRemarks,callback:function(t){e.approvalRemarks=t},expression:"approvalRemarks"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.approvalLoading},on:{click:function(t){return e.handleApproval(2)}}},[e._v("不批准")]),a("el-button",{attrs:{loading:e.reviewLoading,type:"primary"},on:{click:function(t){return e.handleApproval(1)}}},[e._v("批 准")])],1)]),a("el-dialog",{attrs:{visible:e.uploadDia,title:"数据导入",width:"500px"},on:{"update:visible":function(t){e.uploadDia=t}}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticStyle:{width:"70px"}},[a("span",{staticClass:"required-span"},[e._v("* ")]),e._v("年份：")]),a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",clearable:"",size:"small",format:"yyyy",placeholder:"选择年"},model:{value:e.planYear,callback:function(t){e.planYear=t},expression:"planYear"}})],1),a("div",{staticStyle:{display:"flex","align-items":"center",margin:"10px 0"}},[a("div",{staticStyle:{width:"70px"}},[a("span",{staticClass:"required-span"},[e._v("* ")]),e._v("审核人：")]),a("el-select",{staticStyle:{width:"50%"},attrs:{clearable:"",filterable:"",size:"small"},model:{value:e.reviewerId,callback:function(t){e.reviewerId=t},expression:"reviewerId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("div",{staticStyle:{margin:"0 auto"}},[a("el-upload",{ref:"upload",attrs:{action:e.javaApi+"/personTraining/personTrainingImport?planYear="+e.planYear+"&reviewerId="+e.reviewerId,"auto-upload":!1,"before-upload":e.beforeUpload,"file-list":e.fileList,headers:e.uploadHeader,limit:1,"on-error":e.onError,"on-success":e.onSuccess,accept:".xlsx",drag:"",name:"file"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.uploadDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.uploading,type:"primary"},on:{click:function(t){return e.submitUpload()}}},[e._v("上 传")])],1)]),e.ViewRecord?a("view-record",{ref:"ViewRecord"}):e._e()],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("年度计划")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("年度计划明细")])])}],r=a("5530"),o=(a("a15b"),a("14d9"),a("fb6a"),a("a9e3"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("4dd5")),s=a("896b"),l=a("c600"),c=a("00d5"),d=a("2f62"),u=a("9695"),m=a("c0c7"),p={name:"PersonnelTraining",components:{limsTable:c["a"],ViewRecord:l["default"],Add:o["default"],Edit:s["default"]},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},computed:Object(r["a"])({},Object(d["b"])(["userId"])),data:function(){var e=this;return{planYear:"",reviewerId:"",responsibleOptions:[],search:{},superviseForm:{},inDetailForm:{trainingLecturerName:"",trainingDate:""},yearLoading:!1,yearDetailLoading:!1,yearPlanTableData:[],yearPlanColumn:[{label:"文件名称",width:"160px",prop:"fileName"},{label:"创建时间",width:"160px",prop:"createTime"},{label:"编制人",prop:"compilerName"},{label:"编制日期",width:"160px",prop:"compilationDate"},{label:"审核人",prop:"reviewerName",minWidth:"100px"},{dataType:"tag",label:"审核状态",prop:"reviewerStatus",width:"100px",formatData:function(e){return 1==e?"通过":2==e?"不通过":null},formatType:function(e){return 1==e?"success":2==e?"danger":null}},{label:"审核备注",prop:"auditRemarks",minWidth:"100px"},{label:"审核日期",width:"160px",prop:"auditDate"},{label:"批准人",prop:"approverName",minWidth:"100px"},{label:"批准备注",prop:"approvalRemarks",minWidth:"100px"},{dataType:"tag",label:"批准状态",minWidth:"100px",prop:"approvalStatus",formatData:function(e){return 1==e?"批准":2==e?"不批准":null},formatType:function(e){return 1==e?"success":2==e?"danger":null}},{label:"批准日期",width:"160px",prop:"approvalDate"},{dataType:"action",width:"180px",label:"操作",fixed:"right",operation:[{name:"导出",type:"text",disabled:function(e){return 1!==e.approvalStatus||1!==e.reviewerStatus},clickFun:function(t){e.downLoadPost(t)}},{name:"审核",type:"text",disabled:function(t){return 1===t.reviewerStatus||e.userId!=t.reviewerId},clickFun:function(t){e.handleCheck(t.id)}},{name:"批准",type:"text",disabled:function(t){return 1===t.approvalStatus||e.userId!=t.approverId||1!=t.reviewerStatus},clickFun:function(t){e.handleApprove(t.id)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.deleteFun(t.id)},disabled:function(e){return 1===e.reviewerStatus}}]}],inDetailPlanTableData:[],inDetailPlanColumn:[{label:"培训目标",prop:"trainingObjectives",width:"100px"},{label:"培训内容",prop:"trainingContent",width:"100px"},{label:"培训方式",prop:"trainingMode",width:"100px"},{dataType:"tag",label:"课程状态",width:"100px",prop:"state",formatData:function(e){return 1==e?"已完成":2==e?"待评价":3==e?"未开始":null},formatType:function(e){return 1==e?"success":2==e?"warning":3==e?"primary":4==e?"info":null}},{label:"参加对象",prop:"participants",width:"100px"},{label:"举办部门",prop:"holdingDepartment",width:"100px"},{label:"培训讲师",prop:"trainingLecturerName",width:"100px"},{label:"培训日期",prop:"trainingDate",width:"100px"},{label:"开始时间",prop:"openingTime",width:"100px"},{label:"课时",prop:"classHour",width:"100px"},{label:"备注",prop:"remarks",width:"100px"},{dataType:"action",width:"200",label:"操作",fixed:"right",operation:[{name:"编辑",type:"text",clickFun:function(t){e.addTrainingPlan("edit",t)}},{name:"结果明细",type:"text",clickFun:function(t){e.editInDetail(t)},showHide:function(){return!!e.isDepartment}},{name:"附件",type:"text",clickFun:function(t){e.viewRecord(t)}},{name:"导出",type:"text",clickFun:function(t){e.downLoadInDetail(t)}}]}],page:{total:0,size:10,current:1,compilerName:""},inDetailPagination:{total:0,size:10,current:1},editPlanShow:!1,currentRow:{},currentRowId:null,auditRemarks:"",reviewDialog:!1,reviewLoading:!1,approvalRemarks:"",approvalDialog:!1,approvalLoading:!1,multipleSelection:[],uploadDia:!1,uploading:!1,isOperation:!1,ViewRecord:!1,fileList:[],currentChangeRow:{},approverId:""}},mounted:function(){this.isDepartment?this.getYearPlanList(this.departId):this.getInDetailPlan("",this.departId)},methods:{searchTable:function(){this.getInDetailPlan(this.currentRowId)},getYearPlanList:function(e){var t=this;this.yearLoading=!0;var a=this.isDepartment?{departmentId:e,size:this.page.size,current:this.page.current,compilerName:this.page.compilerName}:{userId:e,size:this.page.size,current:this.page.current,compilerName:this.page.compilerName};Object(u["k"])(a).then((function(e){t.yearLoading=!1,t.yearPlanTableData=e.data.records,t.pagination.total=e.data.total,t.yearPlanTableData.length>0&&(t.currentRowId=t.yearPlanTableData[0].id,t.currentChange(t.yearPlanTableData[0]))})).catch((function(e){t.yearLoading=!1}))},pagination:function(e){this.page.size=e.limit,this.getYearPlanList()},currentChange:function(e){var t=new Date,a=t.getFullYear();e&&(this.currentChangeRow=e,this.currentRowId=e.id,e.createTime.slice(0,4)==a?this.isOperation=!0:this.isOperation=!1,this.getInDetailPlan(e.id))},getInDetailPlan:function(e){var t=this;null===this.inDetailForm.trainingDate&&(this.inDetailForm.trainingDate="");var a=this.isDepartment?"":this.departId,i={userId:a,size:this.inDetailPagination.pageSize,current:this.inDetailPagination.current,id:e,trainingLecturerName:this.inDetailForm.trainingLecturerName,trainingDate:this.inDetailForm.trainingDate};this.yearDetailLoading=!0,Object(u["m"])(i).then((function(e){t.yearDetailLoading=!1,t.inDetailPlanTableData=e.data.records,t.inDetailPagination.total=e.data.total})).catch((function(e){t.yearDetailLoading=!1}))},pagination1:function(e){this.inDetailPagination.size=e.limit,this.getInDetailPlan(this.currentRowId)},addTrainingPlan:function(e,t){this.currentRowId?this.$refs.addPlan.showDialog(this.currentRowId,e,t):this.$message.warning("请选择一条计划进行新增")},deleteFun:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["l"])({id:e}).then((function(e){t.$message.success("删除成功！"),t.getYearPlanList(t.departId)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleCheck:function(e){this.currentRowId=e,this.reviewDialog=!0,this.getUserList()},handleReview:function(e){var t=this,a={id:this.currentRowId,auditRemarks:this.auditRemarks,reviewerStatus:e,approverId:this.approverId};this.reviewLoading=!0,Object(u["n"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.reviewDialog=!1,t.getYearPlanList(t.departId)),t.reviewLoading=!1})).catch((function(){t.reviewLoading=!1}))},handleApprove:function(e){this.currentRowId=e,this.approvalDialog=!0},handleApproval:function(e){var t=this,a={id:this.currentRowId,approvalRemarks:this.approvalRemarks,approvalStatus:e};this.approvalLoading=!0,Object(u["b"])(a).then((function(e){200===e.code&&(t.$message.success("提交成功！"),t.approvalDialog=!1,t.getYearPlanList(t.departId)),t.approvalLoading=!1})).catch((function(){t.approvalLoading=!1}))},downLoadPost:function(e){var t=this;Object(u["f"])({id:e.id}).then((function(a){t.outLoading=!1;var i=new Blob([a],{type:"application/msword"});t.$download.saveAs(i,e.fileName+".docx")}))},submitUpload:function(){this.planYear?this.reviewerId?0!=this.$refs.upload.uploadFiles.length?(this.uploading=!0,this.$refs.upload.submit(),this.uploading=!1):this.$message.error("未选择文件"):this.$message.error("请选择审核人"):this.$message.error("请选择年份")},onSuccess:function(e,t,a){this.$refs.upload.clearFiles(),this.uploadDia=!1,this.uploading=!1,200==e.code?(this.$message.success("上传成功"),this.standardList=[],this.productList=[],this.getYearPlanList(this.departId)):this.$message.error(e.msg)},onError:function(e,t,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles(),this.uploading=!1},beforeUpload:function(e,t){if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e.type)return this.$message.error("上传文件格式不正确"),this.$refs.upload.clearFiles(),!1},editInDetail:function(e){this.editPlanShow=!0,this.currentRow=e},goBack:function(){this.editPlanShow=!1,this.getInDetailPlan(this.currentRowId)},viewRecord:function(e){var t=this;this.ViewRecord=!0,this.$nextTick((function(){t.$refs.ViewRecord.openDia(e)}))},downLoadInDetail:function(e){var t=this;Object(u["g"])({id:e.id}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"人员培训与考核记录.docx")}))},handleSelectionChange:function(e){this.multipleSelection=e},batchDelete:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push(e.id)})),this.$confirm("是否确认删除所选择的数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["d"])({ids:t.join(",")}).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.getInDetailPlan(e.currentRowId))}))})).catch((function(){e.$message.warning("取消删除")}))}else this.$message.warning("请选择需要删除的数据")},handleSizeChange:function(e){this.inDetailPagination.size=e,this.getInDetailPlan(this.currentChangeRow.id)},handleCurrentChange:function(e){this.inDetailPagination.current=e,this.getInDetailPlan(this.currentChangeRow.id)},getUserList:function(){var e=this;Object(m["o"])().then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))}},watch:{departId:{handler:function(e,t){this.isDepartment?this.getYearPlanList(e):this.getInDetailPlan("")}},currentRowId:{handler:function(e,t){e&&(console.log("newId",e),this.inDetailPagination.current=1,this.getInDetailPlan(this.currentChangeRow.id))}}}},f=p,h=(a("5f2c"),a("2877")),b=Object(h["a"])(f,i,n,!1,null,"10a538b5",null);t["default"]=b.exports},"2d49":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"main_left"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"div_left_input",attrs:{clearable:"",placeholder:"输入关键字进行搜索",size:"small","suffix-icon":"el-icon-search"},on:{blur:e.searchFilter,clear:e.searchFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchFilter(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("el-col",{staticStyle:{"text-align":"center","line-height":"30px","margin-top":"14px"},attrs:{span:4}},[a("el-button",{attrs:{circle:"",icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.handleAdd}})],1)],1),a("el-tree",{ref:"tree",staticStyle:{height:"calc(100% - 70px)","overflow-y":"scroll","scrollbar-width":"none"},attrs:{data:e.list,"default-expanded-keys":[22],"expand-on-click-node":!1,"filter-node-method":e.filterNode,props:{children:"children",label:"name"},"highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick,"node-expand":e.nodeOpen,"node-collapse":e.nodeClose},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,n=t.data;return a("div",{staticClass:"custom-tree-node"},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:22}},[a("span",[a("i",{class:"node_i "+(void 0!=n.children&&n.children.length>0?"el-icon-folder-opened":"el-icon-tickets")}),e._v(" "+e._s(n.name))])]),i.level>1&&null!==n.id?a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return t.stopPropagation(),e.remove(i,n)}}},[a("i",{staticClass:"el-icon-delete"})])],1):e._e()],1)],1)}}])})],1),a("div",{staticClass:"main_right"},[a("el-tabs",{attrs:{lazy:!0,type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"人员基本信息",name:"人员基本信息"}},["人员基本信息"===e.activeName&&e.isShowAll?a("PersonnelList",{ref:"personnelList",attrs:{currentCompaniesList:e.currentCompaniesList,departId:e.departId},on:{refreshTree:e.refreshTree,updatePerson:e.updatePerson}}):e._e(),"人员基本信息"!==e.activeName||e.isShowAll?e._e():a("personnelInformation",{attrs:{clickNodeVal:e.clickNodeVal}})],1),a("el-tab-pane",{attrs:{label:"培训计划",name:"培训计划"}},["培训计划"===e.activeName?a("PersonnelTraining",{ref:"personnelTraining",attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1),a("el-tab-pane",{attrs:{label:"岗位职责",name:"岗位职责"}},["岗位职责"===e.activeName?a("job-responsibilities",{ref:"jobResponsibilities",attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1),a("el-tab-pane",{attrs:{label:"奖惩记录",name:"奖惩记录"}},["奖惩记录"===e.activeName?a("rewardPunishmentRecord",{attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1),a("el-tab-pane",{attrs:{label:"培训记录",name:"培训记录"}},["培训记录"===e.activeName?a("training-record",{ref:"trainingRecord",attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1),a("el-tab-pane",{attrs:{label:"任职授权记录",name:"任职授权记录"}},["任职授权记录"===e.activeName?a("Mandate",{ref:"manDateRef",attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1),a("el-tab-pane",{attrs:{label:"人员能力",name:"人员能力"}},["人员能力"===e.activeName?a("personnel-capacity",{ref:"personnelCapacity",attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1),a("el-tab-pane",{attrs:{label:"沟通记录",name:"沟通记录"}},["沟通记录"===e.activeName?a("Communicate",{ref:"communicateRef",attrs:{departId:e.departId,isDepartment:e.isDepartment}}):e._e()],1)],1)],1),a("el-dialog",{attrs:{visible:e.addDia,title:"架构新增",width:"400px"},on:{"update:visible":function(t){e.addDia=t}}},[a("div",{staticClass:"body"},[a("el-row",{staticStyle:{"line-height":"50px"}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[a("span",{staticClass:"required-span"},[e._v("* ")]),e._v("架构名称： ")]),a("el-col",{attrs:{offset:1,span:16}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入架构名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addStandardTree(t)}},model:{value:e.addOb.name,callback:function(t){e.$set(e.addOb,"name",t)},expression:"addOb.name"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addStandardTree}},[e._v("确 定")])],1)])],1)},n=[],r=(a("4de4"),a("7db0"),a("b0c0"),a("d3b7"),a("ac1f"),a("841c"),a("0643"),a("2382"),a("fffc"),a("72c1")),o=a("167d"),s=a("2b63"),l=a("8d19"),c=a("bfc7"),d=a("9785"),u=a("ea76"),m=a("4c8a"),p=a("e6a6"),f=a("cfb9"),h={name:"PersonnelInfo",components:{PersonnelList:r["default"],personnelInformation:o["default"],PersonnelTraining:s["default"],JobResponsibilities:l["default"],rewardPunishmentRecord:c["default"],TrainingRecord:d["default"],Mandate:u["default"],PersonnelCapacity:m["default"],Communicate:p["default"]},data:function(){return{isShowAll:!0,activeName:"人员基本信息",departId:1,list:[],addDia:!1,addOb:{name:"",fatherId:""},search:"",clickNodeVal:{},addUserForm:{name:""},currentCompaniesList:[],entity:{name:"",departLimsId:"",orderBy:{field:"id",order:"asc"}},overallRecord:"人员列表",isDepartment:!1}},mounted:function(){this.activeName=this.$route.query.activeName||"人员基本信息",this.geList()},methods:{remove:function(e,t){var a=this;this.$confirm("是否删除该层级","提示",{type:"error"}).then((function(){Object(f["g"])({id:t.id}).then((function(e){a.$message.success("已删除"),a.geList()}))})).catch((function(e){}))},addStandardTree:function(){var e=this;null!=this.addOb.name&&""!=this.addOb.factory?Object(f["c"])(this.addOb).then((function(t){e.$message.success("添加成功"),e.addDia=!1,e.geList(),e.addOb.name="",e.addOb.fatherId=""})):this.$message.error("构架名称是必填项")},handleAdd:function(){this.addOb.fatherId?this.addDia=!0:this.$message.error("请选择一个架构层级")},updatePerson:function(e){var t=this.findNodeById(this.list,e.name);t?this.handleNodeClick(t):this.$message.warning("未找到该人员")},refreshTree:function(){this.geList()},findNodeById:function(e,t){for(var a=0;a<e.length;a++){if(e[a].name===t)return e[a];if(e[a].children&&e[a].children.length>0){var i=this.findNodeById(e[a].children,t);if(i)return i}}return null},searchFilter:function(){this.$refs.tree.filter(this.search)},geList:function(){var e=this;Object(f["s"])().then((function(t){e.list=t.data,e.list.length>0&&(e.isDepartment=!0)}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},nodeClose:function(e,t,a){$($(a.$el).find(".node_i")[0]).attr("class","node_i el-icon-folder")},nodeOpen:function(e,t,a){$($(a.$el).find(".node_i")[0]).attr("class","node_i el-icon-folder-opened")},handleNodeClick:function(e,t,a){this.clickNodeVal=e,t&&(this.getNodeParent(t),this.clickNodeVal.level=t.level,this.clickNodeVal.parent=t.parent.data),this.entity.departLimsId=e.id,this.addOb.fatherId=e.id,this.isShowAll=null!==e.id,e.id&&(this.departId=e.id,this.isDepartment=!0),e.userId&&(this.departId=e.userId,this.isDepartment=!1)},getNodeParent:function(e){null!=e.parent&&(this.currentCompaniesList[e.level-1]=e.data.id,this.selectTree+=" - "+e.label,this.getNodeParent(e.parent))}}},b=h,g=(a("6f0a"),a("2877")),v=Object(g["a"])(b,i,n,!1,null,"f1a66058",null);t["default"]=v.exports},"3b3e":function(e,t,a){},"4c8a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"48px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("姓名")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable(t)}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[e.isDepartment?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addAppointPost("add")}}},[e._v("新增")])],1)]),a("lims-table",{attrs:{tableData:e.tableData,column:e.yearColumnData,height:"calc(100vh - 20em)",page:e.search,tableLoading:e.yearLoading},on:{pagination:e.pagination},scopedSlots:e._u([{key:"jobResponsibilities",fn:function(t){return a("div",{},[a("div",{domProps:{innerHTML:e._s(e.changeLine(t.row.responsibilities))}})])}},{key:"placeWorkSlot",fn:function(t){return a("div",{},[a("div",{domProps:{innerHTML:e._s(e.changeLine(t.row.placeWork))}})])}}])}),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.title,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[e.dialogVisible?a("el-form",{ref:"infoForm",attrs:{model:e.form,rules:e.rules}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员：","label-width":"110px",prop:"userId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",clearable:"",filterable:"",size:"small"},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{display:"flex","justify-content":"space-evenly","font-weight":"600"}},[a("span",[e._v("查核结果")]),a("span",[e._v("符合与否")]),a("span",[e._v("备注")])])]),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"学历：","label-width":"110px",prop:"academicDegree"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.academicDegree,callback:function(t){e.$set(e.form,"academicDegree",t)},expression:"form.academicDegree"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"radio-group",staticStyle:{"text-align":"center"},attrs:{prop:"academicConformNot"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.academicConformNot,callback:function(t){e.$set(e.form,"academicConformNot",t)},expression:"form.academicConformNot"}},[a("el-radio",{attrs:{label:1}},[e._v("符合")]),a("el-radio",{attrs:{label:2}},[e._v("不符合")]),a("el-radio",{attrs:{label:3}},[e._v("不适用")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"academicRemarks"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.academicRemarks,callback:function(t){e.$set(e.form,"academicRemarks",t)},expression:"form.academicRemarks"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"相关年限：","label-width":"110px",prop:"relatedYears"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.relatedYears,callback:function(t){e.$set(e.form,"relatedYears",t)},expression:"form.relatedYears"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"radio-group",staticStyle:{"text-align":"center"},attrs:{prop:"relatedYearsConformNot"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.relatedYearsConformNot,callback:function(t){e.$set(e.form,"relatedYearsConformNot",t)},expression:"form.relatedYearsConformNot"}},[a("el-radio",{attrs:{label:1}},[e._v("符合")]),a("el-radio",{attrs:{label:2}},[e._v("不符合")]),a("el-radio",{attrs:{label:3}},[e._v("不适用")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"relatedYearsRemarks\t"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.relatedYearsRemarks,callback:function(t){e.$set(e.form,"relatedYearsRemarks",t)},expression:"form.relatedYearsRemarks\t"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"相关培训：","label-width":"110px",prop:"relatedTraining"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.relatedTraining,callback:function(t){e.$set(e.form,"relatedTraining",t)},expression:"form.relatedTraining"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"radio-group",staticStyle:{"text-align":"center"},attrs:{prop:"relatedTrainingConformNot"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.relatedTrainingConformNot,callback:function(t){e.$set(e.form,"relatedTrainingConformNot",t)},expression:"form.relatedTrainingConformNot"}},[a("el-radio",{attrs:{label:1}},[e._v("符合")]),a("el-radio",{attrs:{label:2}},[e._v("不符合")]),a("el-radio",{attrs:{label:3}},[e._v("不适用")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"relatedTrainingRemarks"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.relatedTrainingRemarks,callback:function(t){e.$set(e.form,"relatedTrainingRemarks",t)},expression:"form.relatedTrainingRemarks"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"相关经验：","label-width":"110px",prop:"relevantExperience"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.relevantExperience,callback:function(t){e.$set(e.form,"relevantExperience",t)},expression:"form.relevantExperience"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"radio-group",staticStyle:{"text-align":"center"},attrs:{prop:"relevantExperienceConformNot"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.relevantExperienceConformNot,callback:function(t){e.$set(e.form,"relevantExperienceConformNot",t)},expression:"form.relevantExperienceConformNot"}},[a("el-radio",{attrs:{label:1}},[e._v("符合")]),a("el-radio",{attrs:{label:2}},[e._v("不符合")]),a("el-radio",{attrs:{label:3}},[e._v("不适用")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"relevantExperienceRemarks"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.relevantExperienceRemarks,callback:function(t){e.$set(e.form,"relevantExperienceRemarks",t)},expression:"form.relevantExperienceRemarks"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"上岗证：","label-width":"110px",prop:"workLicense"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.workLicense,callback:function(t){e.$set(e.form,"workLicense",t)},expression:"form.workLicense"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"radio-group",staticStyle:{"text-align":"center"},attrs:{prop:"workLicenseConformNot"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.workLicenseConformNot,callback:function(t){e.$set(e.form,"workLicenseConformNot",t)},expression:"form.workLicenseConformNot"}},[a("el-radio",{attrs:{label:1}},[e._v("符合")]),a("el-radio",{attrs:{label:2}},[e._v("不符合")]),a("el-radio",{attrs:{label:3}},[e._v("不适用")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"workLicenseRemarks"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.workLicenseRemarks,callback:function(t){e.$set(e.form,"workLicenseRemarks",t)},expression:"form.workLicenseRemarks"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{height:"450px"},attrs:{label:"岗位职责：","label-width":"110px",prop:"jobResponsibilitiesTem"}},[a("el-checkbox-group",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},on:{change:e.selectResponsibilities},model:{value:e.form.jobResponsibilitiesTem,callback:function(t){e.$set(e.form,"jobResponsibilitiesTem",t)},expression:"form.jobResponsibilitiesTem"}},e._l(e.dict.type.responsibilities_list,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"radio-group",staticStyle:{"text-align":"center",height:"420px"},attrs:{prop:"jobResponsibilitiesConformNot"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.jobResponsibilitiesConformNot,callback:function(t){e.$set(e.form,"jobResponsibilitiesConformNot",t)},expression:"form.jobResponsibilitiesConformNot"}},[a("el-radio",{attrs:{label:1}},[e._v("符合")]),a("el-radio",{attrs:{label:2}},[e._v("不符合")]),a("el-radio",{attrs:{label:3}},[e._v("不适用")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{height:"420px"},attrs:{prop:"jobResponsibilitiesRemarks"}},[a("el-input",{attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType,size:"small"},model:{value:e.form.jobResponsibilitiesRemarks,callback:function(t){e.$set(e.form,"jobResponsibilitiesRemarks",t)},expression:"form.jobResponsibilitiesRemarks"}})],1)],1),a("el-col",{attrs:{span:24}},[a("span",{staticStyle:{"padding-left":"110px","font-size":"14px"}},[e._v("备注：岗位职责达到5项及5项以上为符合")])]),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"综合评价：","label-width":"110px",prop:"comprehensiveAssessment"}},[a("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],attrs:{disabled:"view"===e.operationType||"confirm"===e.operationType},model:{value:e.form.comprehensiveAssessment,callback:function(t){e.$set(e.form,"comprehensiveAssessment",t)},expression:"form.comprehensiveAssessment"}},[a("el-radio",{attrs:{label:"Qualified this position"}},[e._v("可胜任该岗位")]),a("el-radio",{attrs:{label:"You can work while training"}},[e._v("可边培训边上岗")]),a("el-radio",{attrs:{label:"Iconpetent for the position"}},[e._v("不胜任该岗位")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"confirmOperatingPersonnelId",label:"确认人："}},[a("el-select",{attrs:{clearable:"",disabled:"view"===e.operationType||"confirm"===e.operationType,filterable:"",size:"small"},model:{value:e.form.confirmOperatingPersonnelId,callback:function(t){e.$set(e.form,"confirmOperatingPersonnelId",t)},expression:"form.confirmOperatingPersonnelId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"confirmDate",label:"确认时间："}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",disabled:"view"===e.operationType||"confirm"===e.operationType,placeholder:"选择日期",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:e.form.confirmDate,callback:function(t){e.$set(e.form,"confirmDate",t)},expression:"form.confirmDate"}})],1)],1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["view"!==e.operationType?a("el-button",{on:{click:e.resetForm}},[e._v("取消")]):e._e(),"view"!==e.operationType&&"confirm"!==e.operationType?a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]):e._e(),"view"!==e.operationType&&"confirm"!==e.operationType?a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm1}},[e._v("提交并通知")]):e._e(),"confirm"===e.operationType?a("el-button",{attrs:{type:"primary"},on:{click:e.verifyGet}},[e._v("确认")]):e._e()],1)],1)],1)},n=[],r=a("5530"),o=(a("c740"),a("a15b"),a("d81d"),a("14d9"),a("a9e3"),a("d3b7"),a("ac1f"),a("5319"),a("841c"),a("0643"),a("a573"),a("00d5")),s=a("b775");function l(e){return Object(s["a"])({url:"/personPersonnelCapacity/personPersonnelCapacityPage",method:"get",params:e})}function c(e){return Object(s["a"])({url:"/personPersonnelCapacity/addOrUpdatePersonPersonnelCapacity",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/personPersonnelCapacity/submitConfirmPersonnelCapability",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/personPersonnelCapacity/confirmPersonnelCapability",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/personPersonnelCapacity/deletePersonPersonnelCapacity",method:"delete",params:e})}function p(e){return Object(s["a"])({url:"/personPersonnelCapacity/exportPersonnelCapacity",method:"get",params:e,responseType:"blob"})}var f=a("1839"),h=a("2f62"),b={props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},components:{limsTable:o["a"]},computed:Object(r["a"])({},Object(h["b"])(["userId"])),dicts:["responsibilities_list"],data:function(){var e=this;return{userName:"",tableData:[],search:{size:20,current:1,total:0},title:"新增能力认定",operationType:"",yearColumnData:[{label:"岗位",prop:"postName",width:"100"},{label:"姓名",prop:"userName",width:"100"},{label:"学历",prop:"academicDegree",width:"100"},{label:"专业",prop:"major",width:"100"},{label:"职称",prop:"professionalTitle",width:"100"},{dataType:"slot",label:"岗位职责",prop:"jobResponsibilities",width:"400",slot:"jobResponsibilities"},{dataType:"tag",label:"综合评价",width:"140px",prop:"comprehensiveAssessment",formatData:function(e){return"Qualified this position"==e?"可胜任该岗位":"You can work while training"==e?"可边培训边上岗":"不胜任该岗位"},formatType:function(e){return"Qualified this position"==e?"success":"You can work while training"==e?"warning":"danger"}},{label:"确认人",prop:"confirmOperatingPersonnelName",width:"100"},{label:"确认日期",prop:"confirmDate",width:"160"},{dataType:"action",label:"操作",fixed:"right",operation:[{name:"编辑",type:"text",clickFun:function(t){e.handleViewClick("edit",t)},disabled:function(e){return!!e.confirmDate}},{name:"查看",type:"text",clickFun:function(t){e.handleViewClick("view",t)}},{name:"导出",type:"text",clickFun:function(t){e.downLoadPost(t)}},{name:"确认",type:"text",clickFun:function(t){e.handleViewClick("confirm",t)},disabled:function(t){return!(!t.confirmDate&&e.userId==t.confirmOperatingPersonnelId)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.deletePost(t.id)},disabled:function(e){return!!e.confirmDate}}]}],yearLoading:!1,dialogVisible:!1,verifyGetId:"",form:{jobResponsibilitiesTem:[]},responsibleOptions:[],rules:{confirmOperatingPersonnelId:[{required:!0,message:"请选择确认人",trigger:"change"}],confirmDate:[{required:!0,message:"请选择确认时间",trigger:"change"}],userId:[{required:!0,message:"请选择人员",trigger:"change"}],academicDegree:[{required:!0,message:"请输入学历查核结果",trigger:"blur"}],academicConformNot:[{required:!0,message:"请选择学历符合与否",trigger:"change"}],relatedYears:[{required:!0,message:"请输入相关年限查核结果",trigger:"blur"}],relatedYearsConformNot:[{required:!0,message:"请选择相关年限符合与否",trigger:"change"}],relatedTraining:[{required:!0,message:"请输入相培训限查核结果",trigger:"blur"}],relatedTrainingConformNot:[{required:!0,message:"请选择相关培训符合与否",trigger:"change"}],relevantExperience:[{required:!0,message:"请输入相关经验查核结果",trigger:"blur"}],relevantExperienceConformNot:[{required:!0,message:"请选择相关经验符合与否",trigger:"change"}],workLicense:[{required:!0,message:"请输入上岗证查核结果",trigger:"blur"}],workLicenseConformNot:[{required:!0,message:"请选择上岗证符合与否",trigger:"change"}],jobResponsibilitiesTem:[{required:!0,message:"请选择岗位职责查核结果",trigger:"change"}],jobResponsibilitiesConformNot:[{required:!0,message:"请选择岗位职责符合与否",trigger:"change"}],comprehensiveAssessment:[{required:!0,message:"请选择综合评价",trigger:"change"}]},responsibilities:[]}},mounted:function(){this.getList(this.departId)},methods:{downLoadPost:function(e){var t=this;p({id:e.id}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"人员能力导出.docx")}))},refreshTable:function(){this.getList(this.departId)},getList:function(e){var t=this;this.search.userId=e;var a=this.isDepartment?{departmentId:this.search.userId,size:this.search.size,current:this.search.current,userName:this.userName}:{userId:this.search.userId,size:this.search.size,current:this.search.current,userName:this.userName};this.yearLoading=!0,l(a).then((function(e){t.yearLoading=!1,t.tableData=e.data.records,t.search.total=e.data.total})).catch((function(e){console.log(e),t.yearLoading=!1}))},pagination:function(e){this.search.size=e.limit,this.refreshTable()},selectResponsibilities:function(e){var t=this,a=[];e.map((function(e){var i=t.dict.type.responsibilities_list.findIndex((function(t){return t.label===e}));i>-1&&a.push(t.dict.type.responsibilities_list[i].value)})),this.form.jobResponsibilities=a.join(",")},changeLine:function(e){return e?e.replace(/,/g,"<br>"):void 0},addAppointPost:function(e){this.operationType=e,this.title="新增能力认定",this.dialogVisible=!0,this.form={jobResponsibilitiesTem:[]},this.form.userId=this.departId,this.getUserList()},handleViewClick:function(e,t){this.operationType=e,this.verifyGetId=t.id,this.title="edit"===this.operationType?"修改能力认定":"查看能力认定",this.dialogVisible=!0,this.form=Object(r["a"])({},t),this.form.responsibilities?this.$set(this.form,"jobResponsibilitiesTem",this.form.responsibilities.split(",")):this.$set(this.form,"jobResponsibilitiesTem",[]),this.getUserList()},submitForm:function(){var e=this;this.$refs.infoForm.validate((function(t){t&&c(e.form).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.getList(e.departId),e.dialogVisible=!1)}))}))},submitForm1:function(){var e=this;this.$refs.infoForm.validate((function(t){t&&d(e.form).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.getList(e.departId),e.dialogVisible=!1)}))}))},verifyGet:function(){var e=this;u({id:this.verifyGetId}).then((function(t){200==t.code&&(e.$message.success("确认成功"),e.resetForm(),e.getList(e.departId))}))},deletePost:function(e){var t=this;this.$confirm("此操作将永久删除此数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m({id:e}).then((function(e){200==e.code&&(t.$message.success("删除成功"),t.getList(t.departId))}))})).catch((function(){t.$message.error("删除失败")}))},resetForm:function(){this.$refs.infoForm.resetFields(),this.dialogVisible=!1},getUserList:function(){var e=this;Object(f["z"])({type:2}).then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))}},watch:{departId:{handler:function(e,t){this.getList(e)}}}},g=b,v=(a("7b2d"),a("2877")),y=Object(v["a"])(g,i,n,!1,null,"403761db",null);t["default"]=y.exports},"4dd5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.addTrainingPlanDia,title:"新增培训计划",width:"50%"},on:{"update:visible":function(t){e.addTrainingPlanDia=t},close:e.closeAdd}},[a("div",{staticClass:"body"},[a("el-form",{ref:"trainingPlanForm",attrs:{model:e.trainingPlan,"label-position":"right","label-width":"90px",rules:e.trainingPlanRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"培训日期:",prop:"trainingDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM",placeholder:"选择日期",size:"small","value-format":"yyyy-MM",type:"month"},model:{value:e.trainingPlan.trainingDate,callback:function(t){e.$set(e.trainingPlan,"trainingDate",t)},expression:"trainingPlan.trainingDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"课时:",prop:"classHour"}},[a("el-input",{attrs:{type:"number",label:"描述文字",size:"small"},model:{value:e.trainingPlan.classHour,callback:function(t){e.$set(e.trainingPlan,"classHour",t)},expression:"trainingPlan.classHour"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"培训目标:",prop:"trainingObjectives"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.trainingPlan.trainingObjectives,callback:function(t){e.$set(e.trainingPlan,"trainingObjectives",t)},expression:"trainingPlan.trainingObjectives"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参加对象:",prop:"participants"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.trainingPlan.participants,callback:function(t){e.$set(e.trainingPlan,"participants",t)},expression:"trainingPlan.participants"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"培训内容:",prop:"trainingContent"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.trainingPlan.trainingContent,callback:function(t){e.$set(e.trainingPlan,"trainingContent",t)},expression:"trainingPlan.trainingContent"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"培训讲师:",prop:"trainingLecturerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.trainingPlan.trainingLecturerId,callback:function(t){e.$set(e.trainingPlan,"trainingLecturerId",t)},expression:"trainingPlan.trainingLecturerId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"培训方式:",prop:"trainingMode"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.trainingPlan.trainingMode,callback:function(t){e.$set(e.trainingPlan,"trainingMode",t)},expression:"trainingPlan.trainingMode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"举办部门:",prop:"holdingDepartment"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.trainingPlan.holdingDepartment,callback:function(t){e.$set(e.trainingPlan,"holdingDepartment",t)},expression:"trainingPlan.holdingDepartment"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.trainingPlan.remarks,callback:function(t){e.$set(e.trainingPlan,"remarks",t)},expression:"trainingPlan.remarks"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeAdd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitAddLoading},on:{click:e.submitAdd}},[e._v("确 定")])],1)])],1)},n=[],r=a("9695"),o=a("c0c7"),s={props:{currentChangeRow:{type:Object,default:function(){return{}}}},name:"Add",components:{},data:function(){return{addTrainingPlanDia:!1,submitAddLoading:!1,trainingPlan:{planId:"",id:"",trainingDate:"",classHour:"",trainingObjectives:"",participants:"",trainingContent:"",trainingLecturerId:"",trainingMode:"",holdingDepartment:"",remarks:""},trainingPlanRules:{trainingDate:[{required:!0,message:"请选择培训日期",trigger:"change"}],trainingContent:[{required:!0,message:"请输入培训内容",trigger:"blur"}],trainingLecturerId:[{required:!0,message:"请选择培训讲师",trigger:"blur"}]},responsibleOptions:[],operationType:""}},methods:{showDialog:function(e,t,a){this.addTrainingPlanDia=!0,this.operationType=t,"edit"===this.operationType?this.trainingPlan=this.HaveJson(a):this.trainingPlan={id:"",trainingDate:"",classHour:"",trainingObjectives:"",participants:"",trainingContent:"",trainingLecturerId:"",trainingMode:"",holdingDepartment:"",remarks:""},this.trainingPlan.planId=e,this.getUserList()},submitAdd:function(){var e=this;this.$refs.trainingPlanForm.validate((function(t){if(t){e.submitAddLoading=!0,e.trainingPlan.planId=e.currentChangeRow.id;var a=e.trainingPlan;Object(r["a"])(a).then((function(t){e.submitAddLoading=!1,200==t.code&&(e.$message.success("提交成功"),e.closeAdd())})).catch((function(){e.submitAddLoading=!1}))}}))},closeAdd:function(){this.$refs["trainingPlanForm"].resetFields(),this.$emit("search"),this.addTrainingPlanDia=!1},getUserList:function(){var e=this;Object(o["o"])({type:2}).then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))}}},l=s,c=a("2877"),d=Object(c["a"])(l,i,n,!1,null,"41007913",null);t["default"]=d.exports},"5b4a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-dialog",{attrs:{title:e.isEdit?"编辑附件资料":"新增附件资料",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form,"label-width":"130px",size:"medium"}},[a("el-form-item",{attrs:{label:"证书编号",prop:"certificateNumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.form.certificateNumber,callback:function(t){e.$set(e.form,"certificateNumber",t)},expression:"form.certificateNumber"}})],1),a("el-form-item",{attrs:{label:"被任职人员",prop:"userId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.userList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"任职岗位",prop:"post"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.post,callback:function(t){e.$set(e.form,"post",t)},expression:"form.post"}})],1),a("el-form-item",{attrs:{label:"理论考试成绩",prop:"num1"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.num1,callback:function(t){e.$set(e.form,"num1",t)},expression:"form.num1"}})],1),a("el-form-item",{attrs:{label:"操作技能考试成绩",prop:"num2"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.num2,callback:function(t){e.$set(e.form,"num2",t)},expression:"form.num2"}})],1),a("el-form-item",{attrs:{label:"操作类型",prop:"operationType"}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:e.form.operationType,callback:function(t){e.$set(e.form,"operationType",t)},expression:"form.operationType"}})],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"上岗证书"}},[a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.form.systemFileName,callback:function(t){e.$set(e.form,"systemFileName",t)},expression:"form.systemFileName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-delete-solid"},on:{click:function(t){return e.deleteFile(e.form.systemFileName)}},slot:"append"})],1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"upload",staticStyle:{float:"left",margin:"0 12px 0 20px"},attrs:{action:e.action,headers:e.uploadHeader,"show-file-list":!1,"on-success":e.onSuccess}},[a("el-button",{staticClass:"uploadFile",attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传")])],1)],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1),a("div",{staticClass:"foot",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},n=[],r=a("c14f"),o=a("1da1"),s=(a("b0c0"),a("a9e3"),a("cfb9")),l=a("b558"),c=a("ec9a"),d={data:function(){return{isEdit:!1,dialogVisible:!1,form:{id:void 0,certificateNumber:void 0,userId:void 0,post:void 0,operationType:void 0,fileList:[],fileName:void 0,systemFileName:void 0,remarks:void 0,num2:void 0,num1:void 0},rules:{certificateNumber:[{required:!0,message:"请输入证书编号",trigger:"blur"}],userId:[{required:!0,message:"请选择被任职人员",trigger:"change"}],post:[{required:!0,message:"任职岗位",trigger:"blur"}],operationType:[{required:!0,message:"操作类型",trigger:"blur"}]},loading:!1,userList:[]}},computed:{action:function(){return this.javaApi+"/personBasicInfo/saveCNASFile"}},methods:{onSuccess:function(e,t,a){this.$set(this.form,"systemFileName",e.data)},deleteFile:function(e){var t=this;Object(s["j"])({fileName:e}).then((function(e){t.$message.success("删除成功！"),t.$set(t.form,"systemFileName",null)}))},openDialog:function(e,t){var a=this;return Object(o["a"])(Object(r["a"])().m((function i(){return Object(r["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,a.getUserList();case 1:a.dialogVisible=!0,t?(a.isEdit=!0,a.form.id=e.id,a.form.certificateNumber=e.certificateNumber,a.form.userId=Number(e.userId),a.form.post=e.post,a.form.operationType=e.operationType,a.form.systemFileName=e.systemFileName,a.form.remarks=e.remarks,a.form.num1=e.num1,a.form.num2=e.num2):a.resetForm("ruleForm");case 2:return i.a(2)}}),i)})))()},closeDialog:function(){this.resetForm("ruleForm"),this.dialogVisible=!1},getUserList:function(){var e=this;return Object(o["a"])(Object(r["a"])().m((function t(){return Object(r["a"])().w((function(t){while(1)switch(t.n){case 0:Object(l["w"])({type:2}).then((function(t){e.userList=t.data}));case 1:return t.a(2)}}),t)})))()},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var a={id:e.form.id,certificateNumber:e.form.certificateNumber,userId:e.form.userId,post:e.form.post,operationType:e.form.operationType,systemFileName:e.form.systemFileName,remarks:e.form.remarks,num1:e.form.num1,num2:e.form.num2};e.loading=!0,Object(c["b"])(a).then((function(t){e.loading=!1,e.closeDialog(),e.$emit("refresh")})).catch((function(t){e.loading=!1}))}}))},beforeUpload:function(e){return e.size>10485760?(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1):(this.form.fileList=[e],this.form.fileName=e.name,!0)}}},u=d,m=(a("bc7c"),a("2877")),p=Object(m["a"])(u,i,n,!1,null,"51ce1ada",null);t["default"]=p.exports},"5f2c":function(e,t,a){"use strict";a("05d3")},"5fd5":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s}));var i=a("b775");function n(e){return Object(i["a"])({url:"/system/custom/selectCustomPageList",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/system/custom/addCustom",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/system/custom/upCustom",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/system/custom/delCustomById",method:"delete",params:e})}},"6f0a":function(e,t,a){"use strict";a("c905")},7276:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-dialog",{attrs:{title:e.isEdit?"编辑附件资料":"新增附件资料",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"沟通人",prop:"userId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",multiple:""},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.userList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"沟通时间",prop:"communicationTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择日期时间"},model:{value:e.form.communicationTime,callback:function(t){e.$set(e.form,"communicationTime",t)},expression:"form.communicationTime"}})],1),a("el-form-item",{attrs:{label:"沟通地点",prop:"communicationPlace"}},[a("el-input",{attrs:{placeholder:"请填写沟通地点"},model:{value:e.form.communicationPlace,callback:function(t){e.$set(e.form,"communicationPlace",t)},expression:"form.communicationPlace"}})],1),a("el-form-item",{attrs:{label:"沟通内容",prop:"communicationContent"}},[a("el-input",{attrs:{placeholder:"请填写沟通内容"},model:{value:e.form.communicationContent,callback:function(t){e.$set(e.form,"communicationContent",t)},expression:"form.communicationContent"}})],1)],1),a("div",{staticClass:"foot",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},n=[],r=a("c14f"),o=a("1da1"),s=(a("a15b"),a("d81d"),a("a9e3"),a("d3b7"),a("0643"),a("a573"),a("b558")),l=a("d707"),c={data:function(){return{isEdit:!1,dialogVisible:!1,form:{id:"",userId:[],communicationTime:void 0,communicationPlace:void 0,communicationContent:void 0},rules:{userId:[{required:!0,message:"请选择沟通人",trigger:"change"}],communicationTime:[{required:!0,message:"请选择沟通时间",trigger:"change"}],communicationPlace:[{required:!0,message:"请填写沟通地点",trigger:"blur"}],communicationContent:[{required:!0,message:"请填写沟通内容",trigger:"blur"}]},loading:!1,userList:[]}},methods:{openDialog:function(e,t){this.getUserList(),this.dialogVisible=!0,t?(this.isEdit=!0,this.form.id=e.id,this.form.userId=e.userId.split(",").map((function(e){return Number(e)})),this.form.communicationTime=e.communicationTime,this.form.communicationPlace=e.communicationPlace,this.form.communicationContent=e.communicationContent):(this.form.id="",this.resetForm("form"))},getUserList:function(){var e=this;return Object(o["a"])(Object(r["a"])().m((function t(){return Object(r["a"])().w((function(t){while(1)switch(t.n){case 0:Object(s["w"])({type:2}).then((function(t){e.userList=t.data}));case 1:return t.a(2)}}),t)})))()},submitForm:function(){var e=this;return Object(o["a"])(Object(r["a"])().m((function t(){return Object(r["a"])().w((function(t){while(1)switch(t.n){case 0:e.$refs.form.validate((function(t){if(t){e.loading=!0;var a={id:e.form.id,userId:e.form.userId.join(","),communicationTime:e.form.communicationTime,communicationPlace:e.form.communicationPlace,communicationContent:e.form.communicationContent};Object(l["a"])(a).then((function(t){e.loading=!1,e.resetForm("form"),e.$emit("submit"),e.dialogVisible=!1})).catch((function(t){e.loading=!1}))}}));case 1:return t.a(2)}}),t)})))()}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,"31b1cb96",null);t["default"]=m.exports},"72c1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("人员名称")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable(t)}},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleDown}},[e._v("导出")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openSelectUserDia}},[e._v("新建")])],1)]),a("div",{staticClass:"search-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"",height:"calc(100vh - 21em)"}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"60"}}),a("el-table-column",{attrs:{label:"员工编号",prop:"account",width:"150"}}),a("el-table-column",{attrs:{label:"姓名",prop:"name",width:"120"}}),a("el-table-column",{attrs:{label:"籍贯",prop:"nativePlace",width:"120"}}),a("el-table-column",{attrs:{label:"证件地址",prop:"idAddress","show-overflow-tooltip":"",width:"100"}}),a("el-table-column",{attrs:{label:"手机号",prop:"telephone","show-overflow-tooltip":"",width:"100"}}),a("el-table-column",{attrs:{label:"毕业院校",prop:"graduatedInstitutions1",width:"100"}}),a("el-table-column",{attrs:{label:"所学专业",prop:"major1",width:"100"}}),a("el-table-column",{attrs:{label:"毕业时间",prop:"graduationTime1",width:"100"}}),a("el-table-column",{attrs:{label:"最高学历",prop:"officialAcademicRedentials",width:"100"}}),a("el-table-column",{attrs:{label:"最高学位",prop:"highestDegree",width:"100"}}),a("el-table-column",{attrs:{label:"职称",prop:"professionalTitle",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.$emit("updatePerson",t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.deletePerson(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":1,"current-page":e.page.current,"page-size":e.page.size,"page-sizes":[10,20,30,50,100],total:e.page.total,background:"",layout:"->,total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.selectUserDia,title:"选择用户",width:"70%"},on:{"update:visible":function(t){e.selectUserDia=t}}},[a("div",{staticClass:"search",staticStyle:{"margin-bottom":"9px"}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[e._v("用户名：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},on:{change:e.selectUserList},model:{value:e.addUserTableInfo.name,callback:function(t){e.$set(e.addUserTableInfo,"name",t)},expression:"addUserTableInfo.name"}})],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.selectUserList}},[e._v("查询")])],1)]),e.selectUserDia?a("div",{staticClass:"body",staticStyle:{height:"60vh"}},[a("lims-table",{attrs:{tableData:e.tableData1,column:e.column1,isSelection:!0,handleSelectionChange:e.selectMethod,height:"520",tableLoading:e.tableLoading1}})],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.selectUserDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.selectUser}},[e._v("确 定")])],1)])],1)},n=[],r=a("5530"),o=(a("14d9"),a("b0c0"),a("e9c4"),a("a9e3"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("b558")),s=a("00d5"),l=a("cfb9"),c=(a("4360"),a("5c96"),{name:"PersonnelList",components:{limsTable:s["a"]},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1},currentCompaniesList:{type:Array,default:[]}},data:function(){return{page:{size:20,current:1},outLoading:!1,tableLoading:!1,tableData:[],tableData1:[],tableLoading1:!1,column1:[{label:"姓名",prop:"name"},{label:"账号",prop:"account"},{label:"角色",prop:"roleName"},{dataType:"tag",label:"状态",prop:"status",formatData:function(e){return 0==e?"启用":""},formatType:function(e){return 0==e?"success":"danger"}},{label:"电话号码",prop:"phone"}],page1:{total:0,size:10,current:1},selectUserDia:!1,entity:{name:"",orderBy:{field:"id",order:"asc"}},addUserTableInfo:{name:null,isCustom:0},multipleSelection:[]}},mounted:function(){this.refreshTable()},methods:{refresh:function(){this.page={size:20,current:1},this.entity.name="",this.refreshTable()},refreshTable:function(){var e=this;this.tableLoading=!0,this.entity.departLimsId=this.departId;var t={size:this.page.size,current:this.page.current,departmentId:this.entity.departLimsId,name:this.entity.name};Object(l["d"])(t).then((function(t){e.tableLoading=!1,e.page.total=t.data.total,e.tableData=t.data.records})).catch((function(t){e.tableLoading=!1}))},deletePerson:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["h"])({id:e.userId}).then((function(e){t.$message.success("删除成功"),t.refreshTable(),t.$emit("refreshTree")})).catch((function(e){t.$message.error("删除失败")}))})).catch((function(){}))},handleSizeChange:function(e){this.page.size=e,this.refreshTable()},handleCurrentChange:function(e){this.page.current=e,this.refreshTable()},openSelectUserDia:function(){this.selectUserDia=!0,this.selectUserList()},selectUserList:function(){var e=this;this.tableLoading1=!0,Object(o["w"])().then((function(t){e.tableLoading1=!1,e.tableData1=t.data})).catch((function(t){e.tableLoading1=!1}))},selectMethod:function(e){this.multipleSelection=e},selectUser:function(){var e=this;if(!this.currentCompaniesList.length>0)this.$message.warning("请选择部门！");else{var t=this.HaveJson(this.multipleSelection);if(0!==t.length){var a=[];t.forEach((function(e){a.push(e.id)}));var i="";this.currentCompaniesList.forEach((function(e){e&&(i+=e+",")})),Object(l["t"])({ids:JSON.stringify(a),id:i}).then((function(t){e.selectUserDia=!1,e.$message.success("添加成功"),e.refreshTable(),e.$emit("refreshTree")}))}else this.$message.error("未选择数据")}},handleDown:function(){var e=this;this.outLoading=!0;var t=this.HaveJson(this.entity);delete t.orderBy,Object(l["k"])(Object(r["a"])({},t)).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(a,"人员信息.xlsx")}))}},watch:{departId:{handler:function(e,t){e&&(this.page.current=1,this.refreshTable())}}}}),d=c,u=(a("86dd"),a("2877")),m=Object(u["a"])(d,i,n,!1,null,"26dccc2c",null);t["default"]=m.exports},"7b2d":function(e,t,a){"use strict";a("d6e4")},"86dd":function(e,t,a){"use strict";a("ff8b")},"8d19":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"50px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("员工")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable(t)}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.refreshTable}},[e._v("查询")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addPost}},[e._v("新增")])],1)]),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"66.5vh","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),a("el-table-column",{attrs:{label:"员工编号","min-width":"120",prop:"account"}}),a("el-table-column",{attrs:{label:"岗位名称","min-width":"180",prop:"postName"}}),a("el-table-column",{attrs:{label:"所属部门","min-width":"180",prop:"departLimsName"}}),a("el-table-column",{attrs:{label:"工作目标","min-width":"180",prop:"jobObjective"}}),a("el-table-column",{attrs:{label:"岗位职责","min-width":"180",prop:"jobResponsibilities"}}),a("el-table-column",{attrs:{label:"任职人","min-width":"180",prop:"incumbentName"}}),a("el-table-column",{attrs:{label:"任职人审核日期","min-width":"180",prop:"incumbentDate"}}),a("el-table-column",{attrs:{label:"主管","min-width":"180",prop:"supervisorName"}}),a("el-table-column",{attrs:{label:"主管审核日期","min-width":"180",prop:"supervisorDate"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isDepartment&&"关闭"!==t.row.currentState?e._e():a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleViewClick(t.row,"view")}}},[e._v("查看 ")]),e.isDepartment&&"关闭"!==t.row.currentState?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleViewClick(t.row,"edit")}}},[e._v("编辑 ")]):e._e(),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.downLoadPost(t.row)}}},[e._v("导出")]),e.isDepartment?a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.deletePost(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":1,"page-size":e.search.size,"page-sizes":[10,20,30,50,100],total:e.search.total,layout:"->,total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisible,title:"新增岗位职责",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-steps",{attrs:{active:e.currentStep,"align-center":"","finish-status":"success"}},e._l(e.steps,(function(t,i){return a("el-step",{key:i,staticStyle:{cursor:"pointer"},attrs:{title:t},nativeOn:{click:function(t){return e.choiceStep(i)}}})})),1),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"130px"}},[a("div",[a("el-card",{staticStyle:{"margin-top":"1em",height:"40vh","overflow-y":"scroll"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"岗位名称：",prop:"postName"}},[a("el-input",{attrs:{disabled:0!==e.currentStep||"view"===e.operationType,size:"small"},model:{value:e.form.postName,callback:function(t){e.$set(e.form,"postName",t)},expression:"form.postName"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"工作目标：",prop:"jobObjective"}},[a("el-input",{attrs:{disabled:0!==e.currentStep||"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.form.jobObjective,callback:function(t){e.$set(e.form,"jobObjective",t)},expression:"form.jobObjective"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"岗位职责：",prop:"jobResponsibilities"}},[a("el-input",{attrs:{disabled:0!==e.currentStep||"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.form.jobResponsibilities,callback:function(t){e.$set(e.form,"jobResponsibilities",t)},expression:"form.jobResponsibilities"}})],1)],1),0===e.currentStep||"view"===e.operationType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:0===e.currentStep,message:"请选择任职人",trigger:"change"}],label:"任职人：",prop:"incumbentId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"view"===e.operationType,clearable:"",filterable:"",placeholder:"请选择任职人",size:"small"},model:{value:e.form.incumbentId,callback:function(t){e.$set(e.form,"incumbentId",t)},expression:"form.incumbentId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1):e._e(),1===e.currentStep||"view"===e.operationType?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:1===e.currentStep,message:"请选择主管",trigger:"blur"}],label:"主管：",prop:"supervisorId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.currentStep||"view"===e.operationType,clearable:"",filterable:"",placeholder:"请选择主管",size:"small"},model:{value:e.form.supervisorId,callback:function(t){e.$set(e.form,"supervisorId",t)},expression:"form.supervisorId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1):e._e()],1)],1),a("el-row",{staticStyle:{"margin-top":"1em"}},[a("el-col",{attrs:{span:4}},[e._v(" 操作人："+e._s(e.form.submitPerson)+" ")]),a("el-col",{attrs:{span:6}},[e._v(" 日期："+e._s(e.form.submitDate)+" ")])],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[0!==e.currentStep&&3!==e.currentStep?a("el-button",{on:{click:function(t){return e.submitForm("3reject")}}},[e._v("驳回")]):e._e(),0===e.currentStep?a("el-button",{on:{click:function(t){return e.submitForm("2save")}}},[e._v("保存")]):e._e(),3!==e.currentStep?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("1submit")}}},[e._v(e._s(0===e.currentStep?"提交":"通过"))]):e._e()],1)],1)],1)},n=[],r=a("5530"),o=a("c14f"),s=a("1da1"),l=(a("b0c0"),a("a9e3"),a("ac1f"),a("841c"),a("c466")),c=a("b775");function d(e){return Object(c["a"])({url:"/personJobResponsibilities/personJobResponsibilitiesSelect",method:"get",params:e})}function u(e){return Object(c["a"])({url:"/personJobResponsibilities/personJobResponsibilitiesSave",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/personJobResponsibilities/exportPersonJobResponsibilities",method:"post",params:e,responseType:"blob"})}function p(e){return Object(c["a"])({url:"/personJobResponsibilities/personJobResponsibilitiesDelete",method:"delete ",params:e})}var f=a("1839"),h=a("2f62"),b={data:function(){return{userName:"",tableData:[],tableLoading:!1,responsibleOptions:[],search:{size:20,current:1,total:0},dialogVisible:!1,currentStep:0,currentStepClick:0,operationType:"",steps:["提交","任职人确认","主管确认"],form:{postName:"",jobObjective:"",jobResponsibilities:"",incumbentId:"",supervisorId:""},rules:{postName:[{required:!0,message:"请输入岗位名称",trigger:"blur"}],jobObjective:[{required:!0,message:"请输入工作目标",trigger:"blur"}],jobResponsibilities:[{required:!0,message:"请输入岗位职责",trigger:"blur"}],incumbentId:[{required:!0,message:"请选择任职人",trigger:"change"}],supervisorId:[{required:!0,message:"请选择主管",trigger:"change"}]}}},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},mounted:function(){this.getPostList(this.departId)},methods:{addPost:function(){this.dialogVisible=!0,this.form={postName:"",jobObjective:"",jobResponsibilities:"",incumbentId:"",supervisorId:"",submitPerson:"",submitDate:"",currentStep:0},this.currentStep=0,this.getUserList()},getPostList:function(e){var t=this;this.search.userId=e;var a=this.isDepartment?{userName:this.userName,departmentId:this.search.userId,size:this.search.size,current:this.search.current}:{userName:this.userName,userId:this.search.userId,size:this.search.size,current:this.search.current};this.tableLoading=!0,d(a).then((function(e){t.tableLoading=!1,t.tableData=e.data.records,t.search.total=e.data.total})).catch((function(e){t.tableLoading=!1}))},submitForm:function(e){var t=this;return Object(s["a"])(Object(o["a"])().m((function a(){return Object(o["a"])().w((function(a){while(1)switch(a.n){case 0:t.$refs.form.validate((function(a){if(!0===a||"1submit"!==e){var i,n=t.nickName,r=Object(l["a"])(new Date);switch(t.currentStep){case 0:t.form.submittingOperator=n.name,t.form.submittingDate=r;break;case 1:t.form.incumbentOperator=n.name,t.form.incumbentDate=r;break;case 2:t.form.supervisorOperator=n.name,t.form.supervisorDate=r;break;default:break}switch("3reject"===e?t.currentStep-1:t.currentStep){case 1:t.form.currentResponsible=t.form.submittingOperator;break;case 2:t.form.currentResponsible=t.form.incumbentOperator;break;default:break}switch(e){case"1submit":i=t.currentStep+1;break;case"2save":i=t.currentStep;break;case"3reject":i=t.currentStep-1;break;default:break}t.form.currentState=3===i?"关闭":t.steps[i],u(t.form).then((function(e){200==e.code&&(t.$message.success("提交成功"),t.getPostList(t.departId),t.dialogVisible=!1)}))}else{var o=t.steps[t.currentStep];t.$message.warning(o+"  流程中有必填项未填！")}}));case 1:return a.a(2)}}),a)})))()},handleViewClick:function(e,t){switch(this.operationType=t,this.getUserList(),e.incumbentId=Number(e.incumbentId),this.form=Object(r["a"])({},e),e.currentState){case"提交":this.currentStep=0;break;case"任职人确认":this.currentStep=1,this.form.submitPerson=e.submittingOperator,this.form.submitDate=e.submittingDate;break;case"主管确认":this.currentStep=2,this.form.submitPerson=e.incumbentOperator,this.form.submitDate=e.incumbentDate;break;case"关闭":this.currentStep=3,this.form.submitPerson=e.supervisorOperator,this.form.submitDate=e.supervisorDate;break;default:break}this.form.currentState=this.currentStep,this.currentStepClick=3===this.currentStep?0:this.currentStep,console.log("this.form---",this.form),this.dialogVisible=!0},downLoadPost:function(e){var t=this;m({id:e.id}).then((function(a){var i=new Blob([a],{type:"application/octet-stream"});t.$download.saveAs(i,e.incumbentName+"-岗位职责.docx")}))},deletePost:function(e){var t=this;this.$confirm("此操作将永久删除此数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p({id:e.id}).then((function(e){200==e.code&&(t.$message.success("删除成功"),t.getPostList(t.departId))}))})).catch((function(){t.$message.error("删除失败")}))},resetForm:function(){this.$refs.form.resetFields()},refreshTable:function(){this.getPostList(this.departId)},getUserList:function(){var e=this;Object(f["z"])({type:2}).then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))},choiceStep:function(e){this.currentStepClick=e},handleSizeChange:function(e){this.search.size=e,this.getPostList(this.departId)},handleCurrentChange:function(e){this.search.current=e,this.getPostList(this.departId)}},watch:{departId:{handler:function(e,t){this.getPostList(e)}}},computed:Object(r["a"])({},Object(h["b"])(["nickName"]))},g=b,v=a("2877"),y=Object(v["a"])(g,i,n,!1,null,"712b2867",null);t["default"]=y.exports},"8f86":function(e,t,a){"use strict";a("9c88")},9785:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex_table"},[e.isDepartment?a("div",{staticStyle:{width:"49%"}},[e._m(0),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"48px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("姓名")]),a("el-input",{staticClass:"search",attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getPersonnelTraining(e.departId)}},model:{value:e.trainingPagination.userName,callback:function(t){e.$set(e.trainingPagination,"userName",t)},expression:"trainingPagination.userName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.getPersonnelTraining(e.departId)}}},[e._v("查询")])],1)])]),a("lims-table",{ref:"trainingTableData",attrs:{tableData:e.trainingTableData,column:e.trainingColumn,currentChange:e.currentChange,highlightCurrentRow:!0,height:"calc(100vh - 22em)",page:e.trainingPagination,tableLoading:e.trainingLoading},on:{pagination:e.pagination}})],1):e._e(),a("div",{style:"width: "+(e.isDepartment?"49%":"100%")+";"},[e._m(1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"年份"}},[a("el-date-picker",{attrs:{clearable:"",format:"yyyy",placeholder:"选择年",size:"small",type:"year","value-format":"yyyy"},on:{change:function(t){return e.queryPersonnelDetailsPage(e.currentChangeRow.userId)}},model:{value:e.searchForm.trainingDate,callback:function(t){e.$set(e.searchForm,"trainingDate",t)},expression:"searchForm.trainingDate"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.queryPersonnelDetailsPage(e.currentChangeRow.userId)}}},[e._v("查询")])],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openDownloadDia(e.currentChangeRow)}}},[e._v("导出")])],1)],1),a("lims-table",{attrs:{tableData:e.trainingPersonTableData,column:e.trainingPersonColumn,height:"calc(100vh - 22em)",page:e.trainingPersonPagination,tableLoading:e.trainingPersonLoading},on:{pagination:e.pagination1}})],1)])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("年度计划")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("年度计划明细")])])}],r=(a("a9e3"),a("00d5")),o=a("b775");function s(e){return Object(o["a"])({url:"/personTrainingRecord/exportTrainingRecord",method:"get",params:e,responseType:"blob"})}function l(e){return Object(o["a"])({url:"/personTrainingRecord/trainingSelectTrainingRecord",method:"get",params:e})}function c(e){return Object(o["a"])({url:"/personTrainingRecord/queryPersonnelDetails",method:"get",params:e})}var d={components:{limsTable:r["a"]},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},data:function(){return{outLoading:!1,trainingForm:{},trainingColumn:[{label:"员工编号",prop:"account",width:"100"},{label:"姓名",prop:"name"},{label:"所在部门",prop:"departLimsName",width:"150"},{label:"职称",prop:"professionalTitle"},{label:"最高学历",prop:"officialAcademicRedentials",width:"100"},{label:"入单位时间",prop:"unitTime",width:"150"}],trainingTableData:[],trainingLoading:!1,trainingPagination:{size:20,total:0,current:1,userName:null},searchForm:{trainingDate:""},trainingPersonColumn:[{label:"培训日期",prop:"trainingDate"},{label:"培训内容",prop:"trainingContent"},{label:"课时",prop:"classHour"},{label:"培训结果",prop:"examinationResults"},{label:"备注",prop:"remarks"}],trainingPersonTableData:[],trainingPersonLoading:!1,trainingPersonPagination:{size:20,current:1,total:0},currentChangeRow:""}},mounted:function(){this.getPersonnelTraining(this.departId)},methods:{refreshTable:function(){this.getPersonnelTraining(this.departId)},openDownloadDia:function(e){var t=this,a=this.searchForm.trainingDate;a||(a=this.$moment().format("YYYY")),s({userId:e.userId,trainingDate:a}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"培训记录导出.docx")}))},getPersonnelTraining:function(e){var t=this,a={departmentId:e,size:this.trainingPagination.size,current:this.trainingPagination.current,userName:this.trainingPagination.userName};this.trainingLoading=!0,l(a).then((function(e){t.trainingLoading=!1,t.trainingTableData=e.data.records,t.trainingPagination.total=e.data.total,t.trainingTableData.length>0&&t.$refs.trainingTableData.setCurrentRow(t.trainingTableData[0])})).catch((function(e){t.trainingLoading=!1}))},currentChange:function(e){this.currentChangeRow=e,null===e&&(e=this.trainingTableData[0]),this.queryPersonnelDetailsPage(e.userId)},queryPersonnelDetailsPage:function(e){var t=this;null===this.searchForm.trainingDate&&(this.searchForm.trainingDate="");var a={userId:e,size:this.trainingPersonPagination.size,current:this.trainingPersonPagination.current,trainingDate:this.searchForm.trainingDate};this.trainingPersonLoading=!0,c(a).then((function(e){t.trainingPersonLoading=!1,t.trainingPersonTableData=e.data.records,t.trainingPersonPagination.total=e.data.total})).catch((function(e){t.trainingPersonLoading=!1}))},pagination:function(e){this.trainingPagination.size=e.limit,this.getPersonnelTraining(this.departId)},pagination1:function(e){this.trainingPersonPagination.size=e.limit,this.queryPersonnelDetailsPage(this.currentChangeRow.userId)}},watch:{departId:{handler:function(e,t){this.isDepartment?this.getPersonnelTraining(e):this.queryPersonnelDetailsPage(e)}}}},u=d,m=(a("2676"),a("2877")),p=Object(m["a"])(u,i,n,!1,null,"3b93b96a",null);t["default"]=p.exports},"9c88":function(e,t,a){},acca:function(e,t,a){"use strict";a("09fe")},bc7c:function(e,t,a){"use strict";a("3b3e")},bfc7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"48px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("姓名")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getPersonnelTraining(e.departId)}},model:{value:e.search.userName,callback:function(t){e.$set(e.search,"userName",t)},expression:"search.userName"}})],1),a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[e._v("奖惩日期")]),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,align:"right",clearable:"","end-placeholder":"结束日期",format:"yyyy-MM-dd","range-separator":"至",size:"small","start-placeholder":"开始日期",type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd 00:00:00"},on:{change:function(t){return e.getPersonnelTraining(e.departId)}},model:{value:e.search.searchTimeList,callback:function(t){e.$set(e.search,"searchTimeList",t)},expression:"search.searchTimeList"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getPersonnelTraining(e.departId)}}},[e._v("查询")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleDown}},[e._v("导出")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[e._v("新增")])],1)]),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"",height:"66.5vh"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.search.current-1)*e.search.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{label:"员工编号","min-width":"180",prop:"account"}}),a("el-table-column",{attrs:{label:"姓名","min-width":"180",prop:"userName"}}),a("el-table-column",{attrs:{label:"奖惩级别","min-width":"180",prop:"rewardPunishLevel"}}),a("el-table-column",{attrs:{label:"奖惩时间","min-width":"180",prop:"rewardPunishTime"}}),a("el-table-column",{attrs:{label:"奖惩名称","min-width":"180",prop:"rewardPunishName"}}),a("el-table-column",{attrs:{label:"奖惩具体内容","min-width":"120",prop:"rewardPunishContent"}}),a("el-table-column",{attrs:{label:"奖惩单位","min-width":"180",prop:"rewardPunishWorkUnit"}}),a("el-table-column",{attrs:{label:"创建人","min-width":"180",prop:"createUserName"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.editForm(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":1,"page-size":e.search.size,"page-sizes":[10,20,30,50,100],total:e.search.total,layout:"->,total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"奖惩记录",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.getUserList}},[a("div",{staticStyle:{height:"40vh"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工编号"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工姓名",prop:"userId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small","value-key":"id",disabled:!e.isDepartment},on:{change:e.selectUserChange},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"奖惩级别",prop:"rewardPunishLevel"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.rewardPunishLevel,callback:function(t){e.$set(e.form,"rewardPunishLevel",t)},expression:"form.rewardPunishLevel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"奖惩名称",prop:"rewardPunishName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.rewardPunishName,callback:function(t){e.$set(e.form,"rewardPunishName",t)},expression:"form.rewardPunishName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"奖惩时间",prop:"rewardPunishTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.rewardPunishTime,callback:function(t){e.$set(e.form,"rewardPunishTime",t)},expression:"form.rewardPunishTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"奖惩单位",prop:"rewardPunishWorkUnit"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.rewardPunishWorkUnit,callback:function(t){e.$set(e.form,"rewardPunishWorkUnit",t)},expression:"form.rewardPunishWorkUnit"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"奖惩内容"}},[a("el-input",{attrs:{rows:2,size:"small",type:"textarea"},model:{value:e.form.rewardPunishContent,callback:function(t){e.$set(e.form,"rewardPunishContent",t)},expression:"form.rewardPunishContent"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)])],1)},n=[],r=a("5530"),o=a("c14f"),s=a("1da1"),l=(a("c740"),a("b0c0"),a("a9e3"),a("ac1f"),a("841c"),a("b775"));function c(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/rewardPunishmentPage",method:"get",params:e})}function d(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/rewardPunishmentExport",method:"get",params:e,responseType:"blob"})}function u(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/addOrUpdateRewardPunishment",method:"post",data:e})}function m(e){return Object(l["a"])({url:"/personRewardPunishmentRecord/deleteRewardPunishment",method:"delete",params:e})}var p=a("c0c7"),f=(a("5fd5"),{props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},data:function(){return{tableData:[],tableLoading:!1,search:{size:20,current:1,total:0,userName:"",searchTimeList:[]},form:{},dialogVisible:!1,outLoading:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},rules:{userId:[{required:!0,message:"请选择员工",trigger:"change"}],rewardPunishLevel:[{required:!0,message:"请输入奖惩级别",trigger:"blur"}],rewardPunishName:[{required:!0,message:"请输入奖惩名称",trigger:"blur"}],rewardPunishTime:[{required:!0,message:"请输入奖惩时间",trigger:"blur"}],rewardPunishWorkUnit:[{required:!0,message:"请输入奖惩单位",trigger:"blur"}]},responsibleOptions:[]}},mounted:function(){this.getPersonnelTraining(this.departId)},methods:{handleSizeChange:function(e){this.search.size=e,this.getPersonnelTraining(this.departId)},handleCurrentChange:function(e){this.search.current=e,this.getPersonnelTraining(this.departId)},getPersonnelTraining:function(){var e=this;return Object(s["a"])(Object(o["a"])().m((function t(){var a;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:a={userId:e.isDepartment?"":e.departId,departmentId:e.isDepartment?e.departId:"",current:e.search.curent,size:e.search.size,userName:e.search.userName,startTime:e.search.searchTimeList&&e.search.searchTimeList[0],endTime:e.search.searchTimeList&&e.search.searchTimeList[1]},e.tableLoading=!0,c(a).then((function(t){e.tableLoading=!1,e.tableData=t.data.records,e.search.total=t.data.total})).catch((function(t){e.tableLoading=!1}));case 1:return t.a(2)}}),t)})))()},addRow:function(){this.dialogVisible=!0,this.isDepartment||(this.form.userId=this.departId,this.selectUserChange(this.form.userId))},handleDown:function(){var e=this;this.outLoading=!0,d({userId:this.isDepartment?"":this.departId,departmentId:this.isDepartment?this.departId:"",userName:this.search.userName,startTime:this.search.searchTimeList&&this.search.searchTimeList[0],endTime:this.search.searchTimeList&&this.search.searchTimeList[1]}).then((function(t){e.outLoading=!1;var a=new Blob([t],{type:"application/force-download"});e.$download.saveAs(a,"奖惩记录.xlsx")}))},getUserList:function(){var e=this;Object(p["o"])({type:2}).then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))},selectUserChange:function(e){var t=this.responsibleOptions.findIndex((function(t){return t.id===e}));t>-1&&(this.form.userName=this.responsibleOptions[t].name,this.form.account=this.responsibleOptions[t].account)},editForm:function(e){this.dialogVisible=!0,this.form=Object(r["a"])({},e)},saveOrUpdate:function(){var e=this;this.$refs.form.validate(function(){var t=Object(s["a"])(Object(o["a"])().m((function t(a){return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:a&&u(e.form).then((function(t){e.dialogVisible=!1,e.$message.success("操作成功"),e.getPersonnelTraining(e.departId)}));case 1:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteRow:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m({id:e.id}).then((function(e){500!==e.code&&(t.$message.success("删除成功"),t.getPersonnelTraining(t.departId))})).catch((function(e){t.$message.error("删除失败")}))})).catch((function(){}))}},watch:{departId:{handler:function(e,t){this.getPersonnelTraining(e)}},dialogVisible:function(e){!1===e&&(this.form={},this.$refs["form"].resetFields())}}}),h=f,b=(a("8f86"),a("2877")),g=Object(b["a"])(h,i,n,!1,null,"118e83e8",null);t["default"]=g.exports},c0c7:function(e,t,a){"use strict";a.d(t,"j",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"r",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"k",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"s",(function(){return p})),a.d(t,"t",(function(){return f})),a.d(t,"u",(function(){return h})),a.d(t,"g",(function(){return b})),a.d(t,"q",(function(){return g})),a.d(t,"f",(function(){return v})),a.d(t,"l",(function(){return y})),a.d(t,"n",(function(){return w})),a.d(t,"b",(function(){return x})),a.d(t,"m",(function(){return k})),a.d(t,"a",(function(){return I})),a.d(t,"p",(function(){return D})),a.d(t,"o",(function(){return T}));var i=a("b775"),n=a("c38a");function r(e){return Object(i["a"])({url:"/system/user/list",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/system/user/"+Object(n["e"])(e),method:"get"})}function s(e){return Object(i["a"])({url:"/system/user",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/system/user",method:"put",data:e})}function c(e){return Object(i["a"])({url:"/system/user/"+e,method:"delete"})}function d(e,t){var a={userId:e,password:t};return Object(i["a"])({url:"/system/user/resetPwd",method:"put",data:a})}function u(e,t){var a={userId:e,status:t};return Object(i["a"])({url:"/system/user/changeStatus",method:"put",data:a})}function m(){return Object(i["a"])({url:"/system/user/profile",method:"get"})}function p(e){return Object(i["a"])({url:"/system/user/profile",method:"put",data:e})}function f(e,t){var a={oldPassword:e,newPassword:t};return Object(i["a"])({url:"/system/user/profile/updatePwd",method:"put",data:a})}function h(e){return Object(i["a"])({url:"/system/user/profile/avatar",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function b(e){return Object(i["a"])({url:"/system/user/authRole/"+e,method:"get"})}function g(e){return Object(i["a"])({url:"/system/user/authRole",method:"put",params:e})}function v(){return Object(i["a"])({url:"/system/user/deptTree",method:"get"})}function y(){return Object(i["a"])({url:"/companies/selectCompaniesList",method:"get"})}function w(e){return Object(i["a"])({url:"/companies/selectSimpleList",method:"post",params:e})}function x(e){return Object(i["a"])({url:"/companies/addPersonUser",method:"post",data:e})}function k(){return Object(i["a"])({url:"/system/custom/selectCustomEnum",method:"get"})}function I(e){return Object(i["a"])({url:"/department/addDepartment",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/system/newUser/selectUserDepartmentLimsName",method:"get"})}function T(e){return Object(i["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}},c466:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r}));a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),a=e.getMonth()+1;a<10?a="0"+a+"-":a+="-",t+="-";var i=e.getDate();return i=i<10?"0"+i:i,t+a+i}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("Invalid Date"!==e){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t}return""}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),a=e.getMonth(),i=e.getDate();return 26===i&&(a++,a>11&&(a=0,t++)),a+=1,a=a<10?"0"+a+"-":a+"-",t+="-",i=i<10?"0"+i:i,t+a+i}},c600:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件上传",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{trainingDetailedId:e.info.id},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[a("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),a("div",[a("lims-table",{attrs:{tableData:e.tableData,column:e.columnData,height:"calc(100vh - 47em)",highlightCurrentRow:!0,tableLoading:e.tableLoading}})],1)]),a("el-dialog",{attrs:{visible:e.lookDialogVisible,fullscreen:"",title:"查看附件",width:"800px"},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?a("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto",top:"0"},attrs:{currentFile:{},fileUrl:e.javaApi+"/word/"+e.currentInfo.fileUrl}}):e._e()],1)],1)},n=[],r=(a("d3b7"),a("0e9a")),o=a("a408"),s=a("00d5"),l=a("9695"),c=(a("5fd5"),{name:"ViewRecord",components:{limsTable:s["a"],filePreview:o["a"]},data:function(){var e=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"下载",type:"text",clickFun:function(t){e.upload(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delete(t)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},methods:{openDia:function(e){this.filesDialogVisible=!0,this.info=e,this.searchTableList()},searchTableList:function(){var e=this;this.tableLoading=!0,Object(l["h"])({trainingDetailedId:this.info.id}).then((function(t){e.tableLoading=!1,e.tableData=t.data})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},closeFilesLook:function(){this.filesDialogVisible=!1},upload:function(e){var t="";if(1==e.type)t=this.javaApi+"/img/"+e.fileUrl,r["a"].downloadIamge(t,e.fileName);else{t=this.javaApi+"/word/"+e.fileUrl;var a=document.createElement("a");a.href=t,a.download=e.fileName,a.click()}},delete:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(l["c"])({detailedFileId:e.detailedFileId}).then((function(e){t.tableLoading=!1,t.$message.success("删除成功"),t.searchTableList()})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){}))},fileBeforeUpload:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},onError:function(e,t,a,i){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.searchTableList())},handleLook:function(e){this.currentInfo=e,this.lookDialogVisible=!0}},computed:{fileAction:function(){return this.javaApi+"/personTraining/uploadTrainingDetailedFile"}}}),d=c,u=a("2877"),m=Object(u["a"])(d,i,n,!1,null,"013314ba",null);t["default"]=m.exports},c905:function(e,t,a){},cfb9:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"t",(function(){return r})),a.d(t,"k",(function(){return o})),a.d(t,"l",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"s",(function(){return u})),a.d(t,"o",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"v",(function(){return h})),a.d(t,"f",(function(){return b})),a.d(t,"p",(function(){return g})),a.d(t,"m",(function(){return v})),a.d(t,"u",(function(){return y})),a.d(t,"n",(function(){return w})),a.d(t,"a",(function(){return x})),a.d(t,"i",(function(){return k})),a.d(t,"q",(function(){return I})),a.d(t,"r",(function(){return D})),a.d(t,"j",(function(){return T}));var i=a("b775");function n(e){return Object(i["a"])({url:"/system/newUser/delUserDepardLimsId",method:"delete",params:e})}function r(e){return Object(i["a"])({url:"/system/newUser/upUserDepardLimsId",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/personBasicInfo/exportPersonBasicInfo",method:"get",data:e,responseType:"blob"})}function s(e){return Object(i["a"])({url:"/personBasicInfo/exportPersonBasicInfoById",method:"get",params:e,responseType:"blob"})}function l(e){return Object(i["a"])({url:"/personBasicInfo/basicInformationOfPersonnelSelectPage",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/personBasicInfo/delDepartmentLims",method:"delete",params:e})}function d(e){return Object(i["a"])({url:"/personBasicInfo/addDepartmentLims",method:"post",data:e})}function u(){return Object(i["a"])({url:"/personBasicInfo/selectCNSAPersonTree",method:"get"})}function m(e){return Object(i["a"])({url:"/personBasicInfo/getBasicInfoFileList",method:"get",params:e})}function p(e){return Object(i["a"])({url:"/personBasicInfo/delBasicInfoFileList",method:"delete",params:e})}function f(e){return Object(i["a"])({url:"/personBasicInfo/addBasicInfoWork",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/personBasicInfo/updateBasicInfoWorkList",method:"post",data:e})}function b(e){return Object(i["a"])({url:"/personBasicInfo/delBasicInfoWorkList",method:"delete",params:e})}function g(e){return Object(i["a"])({url:"/personBasicInfo/getBasicInfoWorkList",method:"get",params:e})}function v(e){return Object(i["a"])({url:"/personBasicInfo/getAnnex",method:"get",params:e})}function y(e){return Object(i["a"])({url:"/personBasicInfo/updateAnnex",method:"post",data:e})}function w(e){return Object(i["a"])({url:"/personBasicInfo/getAnnexByUserId",method:"get",params:e})}function x(e){return Object(i["a"])({url:"/personBasicInfo/addAnnex",method:"post",data:e})}function k(e){return Object(i["a"])({url:"/personBasicInfo/deleteAnnex",method:"delete",params:e})}function I(e){return Object(i["a"])({url:"/personBasicInfo/getCNASPersonnelInfo",method:"get",params:e})}function D(e){return Object(i["a"])({url:"/personBasicInfo/saveCNASPersonnelInfo",method:"post",data:e})}function T(e){return Object(i["a"])({url:"/personBasicInfo/deleteCNASFile",method:"delete",params:e})}},d6e4:function(e,t,a){},d707:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s}));var i=a("b775");function n(e){return Object(i["a"])({url:"/personCommunicationAbility/personPersonCommunicationAbilityPage",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/personCommunicationAbility/deletePersonCommunicationAbility",method:"delete",params:e})}function o(e){return Object(i["a"])({url:"/personCommunicationAbility/exportPersonCommunicationAbility",method:"get",params:e,responseType:"blob"})}function s(e){return Object(i["a"])({url:"/personCommunicationAbility/addOrUpdatePersonCommunicationAbility",method:"post",data:e})}},e6a6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_column"},[e.isDepartment?a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("刷新")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.openDialog}},[e._v("新增")])],1):e._e(),a("lims-table",{attrs:{tableData:e.tableData,column:e.columnData,height:"calc(100vh - 18em)",page:e.pagination,tableLoading:e.loading},on:{pagination:e.page}}),a("Add",{ref:"communicateModal",on:{submit:e.getTableData}})],1)},n=[],r=a("c14f"),o=a("1da1"),s=(a("a9e3"),a("7276")),l=a("00d5"),c=a("d707"),d={components:{limsTable:l["a"],Add:s["default"]},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},data:function(){var e=this;return{columnData:[{label:"沟通人",prop:"userName"},{label:"沟通时间",prop:"communicationTime"},{label:"沟通地点",prop:"communicationPlace"},{label:"沟通内容",prop:"communicationContent"},{label:"操作",dataType:"action",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openDialog(t,!0)}},{name:"导出",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPerson(t.id)}}]}],tableData:[],pagination:{current:1,size:20,total:0},loading:!1}},mounted:function(){this.getTableData()},methods:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs.communicateModal.openDialog(e,t)},getTableData:function(){var e=this;this.loading=!0;var t=this.isDepartment?{departLimsId:this.departId,current:this.pagination.current,size:this.pagination.size}:{userId:this.departId,current:this.pagination.current,size:this.pagination.size};Object(c["d"])(t).then((function(t){e.loading=!1,e.tableData=t.data.records,e.pagination.total=t.data.total})).catch((function(t){e.loading=!1}))},page:function(e){this.pagination.size=e.limit,this.getTableData()},delPerson:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(r["a"])().m((function a(){return Object(r["a"])().w((function(a){while(1)switch(a.n){case 0:Object(c["b"])({id:e}).then((function(e){t.$message.success("删除成功!"),t.getTableData()}));case 1:return a.a(2)}}),a)}))))},handleDown:function(e){var t=this;return Object(o["a"])(Object(r["a"])().m((function a(){return Object(r["a"])().w((function(a){while(1)switch(a.n){case 0:Object(c["c"])({id:e.id}).then((function(a){var i=new Blob([a],{type:"application/octet-stream"});t.$download.saveAs(i,e.userName+"-沟通记录.docx")}));case 1:return a.a(2)}}),a)})))()}},watch:{departId:{handler:function(e,t){e&&this.getTableData()}}}},u=d,m=a("2877"),p=Object(m["a"])(u,i,n,!1,null,"eb70578a",null);t["default"]=p.exports},ea76:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_column"},[a("div",[e.isDepartment?a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("刷新")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.openDialog}},[e._v("新增")])],1):e._e(),a("lims-table",{attrs:{tableData:e.tableData,column:e.columnData,height:"calc(100vh - 18em)",page:e.pagination,tableLoading:e.loading},on:{pagination:e.page}})],1),a("Add",{ref:"mandateModal",on:{refresh:e.getTableData}})],1)},n=[],r=a("c14f"),o=a("1da1"),s=(a("a9e3"),a("5b4a")),l=a("00d5"),c=a("ec9a"),d=(a("5fd5"),{components:{limsTable:l["a"],Add:s["default"]},props:{departId:{type:Number,default:function(){return null}},isDepartment:{type:Boolean,default:!1}},data:function(){var e=this;return{columnData:[{label:"序号",prop:"id"},{label:"证书编号",prop:"certificateNumber"},{label:"被任职人员",prop:"userName"},{label:"任职岗位",prop:"post"},{label:"理论考试成绩",prop:"num1",width:120},{label:"操作技能考试成绩",prop:"num2",width:150},{label:"操作时间",prop:"updateTime"},{label:"备注",prop:"remarks",width:300},{label:"操作",dataType:"action",width:160,fixed:"right",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openDialog(t,!0)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.deleteNotify(t.id)}}]}],tableData:[],pagination:{current:1,size:20,total:0},loading:!1}},mounted:function(){this.getTableData()},methods:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs.mandateModal.openDialog(e,t)},getTableData:function(){var e=this;return Object(o["a"])(Object(r["a"])().m((function t(){var a;return Object(r["a"])().w((function(t){while(1)switch(t.n){case 0:a=e.isDepartment?{departLimsId:e.departId,current:e.pagination.current,size:e.pagination.pageSize}:{userId:e.departId,current:e.pagination.current,size:e.pagination.pageSize},e.loading=!0,Object(c["a"])(a).then((function(t){e.loading=!1,e.tableData=t.data.records,e.pagination.total=t.data.total})).catch((function(t){e.loading=!1}));case 1:return t.a(2)}}),t)})))()},page:function(e){this.pagination.size=e.limit,this.getTableData()},deleteNotify:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["c"])({id:e}).then((function(e){t.$message.success("删除成功"),t.getTableData()})).catch((function(e){t.$message.error("删除失败")}))})).catch((function(){}))},handleDown:function(e){var t=this;Object(c["d"])({id:e.id}).then((function(a){var i=new Blob([a],{type:"application/octet-stream"});t.$download.saveAs(i,"任职授权-"+e.certificateNumber+"-"+e.post+".docx")}))}},watch:{departId:{handler:function(e,t){e&&this.getTableData()}}}}),u=d,m=a("2877"),p=Object(m["a"])(u,i,n,!1,null,"47e07da7",null);t["default"]=p.exports},ec9a:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s}));var i=a("b775");function n(e){return Object(i["a"])({url:"/personPostAuthorizationRecord/PersonPostAuthorizationRecordPage",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/personPostAuthorizationRecord/deletePersonPostAuthorizationRecord",method:"delete",params:e})}function o(e){return Object(i["a"])({url:"/personPostAuthorizationRecord/exportPersonPostAuthorizationRecord",method:"get",params:e,responseType:"blob"})}function s(e){return Object(i["a"])({url:"/personPostAuthorizationRecord/addOrUpdatePersonPostAuthorizationRecord",method:"post",data:e})}},ff8b:function(e,t,a){}}]);