(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5f7d8e0"],{"2dfe":function(e,r,t){"use strict";t.d(r,"e",(function(){return o})),t.d(r,"d",(function(){return n})),t.d(r,"f",(function(){return i})),t.d(r,"a",(function(){return s})),t.d(r,"g",(function(){return l})),t.d(r,"b",(function(){return c})),t.d(r,"c",(function(){return d}));var a=t("b775");function o(e){return Object(a["a"])({url:"/foreignRegister/pageForeignRegister",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/foreignRegister/getForeignRegisterOne",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/foreignRegister/addForeignRegister",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/foreignRegister/updateForeignRegister",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/foreignRegister/delForeignRegister",method:"delete",params:e})}function d(e){return Object(a["a"])({url:"/foreignRegister/exportForeignRegister",method:"get",responseType:"blob",params:e})}},"726e":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"外来人员管理信息",width:"80%"},on:{"update:visible":function(r){e.formDia=r},close:e.closeThreeWastesDia}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"日期",prop:"registerDate"}},[t("el-date-picker",{attrs:{clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.registerDate,callback:function(r){e.$set(e.form,"registerDate",r)},expression:"form.registerDate"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"进入区域",prop:"area"}},[t("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.area,callback:function(r){e.$set(e.form,"area",r)},expression:"form.area"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"进入人员",prop:"personnel"}},[t("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.personnel,callback:function(r){e.$set(e.form,"personnel",r)},expression:"form.personnel"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"进入原因",prop:"reason"}},[t("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.reason,callback:function(r){e.$set(e.form,"reason",r)},expression:"form.reason"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"陪同人员",prop:"accompanyingId"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择陪同人员",size:"small"},model:{value:e.form.accompanyingId,callback:function(r){e.$set(e.form,"accompanyingId",r)},expression:"form.accompanyingId"}},e._l(e.personList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"批准人签名",prop:"approveId"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择批准人",size:"small"},model:{value:e.form.approveId,callback:function(r){e.$set(e.form,"approveId",r)},expression:"form.approveId"}},e._l(e.personList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"保密及其它情况",prop:"confidentiality"}},[t("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.confidentiality,callback:function(r){e.$set(e.form,"confidentiality",r)},expression:"form.confidentiality"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.remark,callback:function(r){e.$set(e.form,"remark",r)},expression:"form.remark"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeThreeWastesDia}},[e._v("取 消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")])],1)],1)],1)},o=[],n=t("5530"),i=(t("c740"),t("14d9"),t("b0c0"),t("d3b7"),t("0643"),t("4e3e"),t("159b"),t("2dfe")),s=t("2f62"),l={name:"Personnel-management-dia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{registerDate:"",area:"",personnel:"",reason:"",accompanyingId:"",accompanyingName:"",approveId:"",approveName:"",confidentiality:"",remark:""},rules:{registerDate:[{required:!0,message:"请选择日期",trigger:"change"}],area:[{required:!0,message:"请填写进入区域",trigger:"blur"}],personnel:[{required:!0,message:"请填写进入人员",trigger:"blur"}],reason:[{required:!0,message:"请填写进入原因",trigger:"blur"}],accompanyingId:[{required:!0,message:"请选择陪同人员",trigger:"change"}],approveId:[{required:!0,message:"请选择批准人",trigger:"change"}],confidentiality:[{required:!0,message:"请填写保密及其他情况",trigger:"blur"}],remark:[{required:!1,message:"请填写备注",trigger:"blur"}]},operationType:"",personList:[]}},mounted:function(){},computed:Object(n["a"])({},Object(s["b"])(["userId"])),methods:{openDia:function(e,r){this.getAuthorizedPerson(),this.formDia=!0,this.operationType=e,"add"!==e?this.searchInfo(r):(this.form.accompanyingId=this.userId,this.form.area="装备电缆试验室",this.form.reason="参观实验室",this.form.accompanyingId=64,this.form.approveId=65,this.form.confidentiality="符合")},searchInfo:function(e){var r=this;this.diaLoading=!0,Object(i["d"])({registerId:e.registerId}).then((function(e){r.diaLoading=!1,200===e.code&&(r.form=e.data)})).catch((function(e){console.log(e),r.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(r){if(!r)return console.log("error submit!!"),!1;e.loading=!0;var t=e.HaveJson(e.form),a=e.personList.findIndex((function(e){return e.value===t.accompanyingId}));a>-1&&(t.accompanyingName=e.personList[a].label);var o=e.personList.findIndex((function(e){return e.value===t.approveId}));o>-1&&(t.approveName=e.personList[a].label),"add"===e.operationType?Object(i["a"])(t).then((function(r){e.loading=!1,200===r.code&&(e.$message.success("操作成功"),e.closeThreeWastesDia())})).catch((function(r){console.log("err---",r),e.loading=!1})):"edit"===e.operationType&&Object(i["g"])(t).then((function(r){e.loading=!1,200===r.code&&(e.$message.success("操作成功"),e.closeThreeWastesDia())})).catch((function(r){console.log("err---",r),e.loading=!1}))}))},closeThreeWastesDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeThreeWastesDia")},getAuthorizedPerson:function(){var e=this;Object(i["f"])().then((function(r){var t=[];r.data.forEach((function(e){t.push({label:e.name,value:e.id})})),e.personList=t}))}}},c=l,d=t("2877"),m=Object(d["a"])(c,a,o,!1,null,"685829d9",null);r["default"]=m.exports}}]);