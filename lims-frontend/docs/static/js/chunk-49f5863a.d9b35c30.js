(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49f5863a"],{"53f3":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"capacity-scope"},[n("div",{staticClass:"search"},[n("div",[n("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[n("el-form-item",{attrs:{label:"文件名称",prop:"documentName"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.documentName,callback:function(t){e.$set(e.queryParams,"documentName",t)},expression:"queryParams.documentName"}})],1),n("el-form-item",{attrs:{label:"文件编号",prop:"documentCode"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.documentCode,callback:function(t){e.$set(e.queryParams,"documentCode",t)},expression:"queryParams.documentCode"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),n("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),n("div",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openAdd("新增")}}},[e._v("新增")]),n("el-upload",{ref:"upload",staticStyle:{display:"inline-block",margin:"0 8px"},attrs:{action:e.action,multiple:!1,"show-file-list":!1,accept:".doc,.docx",headers:e.uploadHeader,"on-change":e.beforeUpload,"on-error":e.onError,"on-success":e.handleSuccessUp}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导入")])],1),n("el-button",{attrs:{size:"small",type:"primary",loading:e.outLoading},on:{click:e.handleDown}},[e._v("导出")])],1)]),n("div",{staticClass:"table"},[n("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 230px)"},on:{pagination:e.pagination}})],1),n("el-dialog",{attrs:{title:e.title,visible:e.addDia,width:"500px"},on:{"update:visible":function(t){e.addDia=t}}},[n("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-position":"right","label-width":"100px"}},[n("el-form-item",{attrs:{label:"文件名称",prop:"documentName"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.documentName,callback:function(t){e.$set(e.addForm,"documentName",t)},expression:"addForm.documentName"}})],1),n("el-form-item",{attrs:{label:"文件编号",prop:"documentCode"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.documentCode,callback:function(t){e.$set(e.addForm,"documentCode",t)},expression:"addForm.documentCode"}})],1),n("el-form-item",{attrs:{label:"版/次",prop:"documentVersion"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.documentVersion,callback:function(t){e.$set(e.addForm,"documentVersion",t)},expression:"addForm.documentVersion"}})],1),n("el-form-item",{attrs:{label:"编制",prop:"writeUser"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.addForm.writeUser,callback:function(t){e.$set(e.addForm,"writeUser",t)},expression:"addForm.writeUser"}},e._l(e.personList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"审核",prop:"checkUser"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.addForm.checkUser,callback:function(t){e.$set(e.addForm,"checkUser",t)},expression:"addForm.checkUser"}},e._l(e.personList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"批准",prop:"ratifyUser"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.addForm.ratifyUser,callback:function(t){e.$set(e.addForm,"ratifyUser",t)},expression:"addForm.ratifyUser"}},e._l(e.personList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"批准日期",prop:"ratifyDate"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",ormat:"yyyy-MM-dd",type:"date",size:"small"},model:{value:e.addForm.ratifyDate,callback:function(t){e.$set(e.addForm,"ratifyDate",t)},expression:"addForm.ratifyDate"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",type:"textarea",rows:2,clearable:""},model:{value:e.addForm.remarks,callback:function(t){e.$set(e.addForm,"remarks",t)},expression:"addForm.remarks"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDia=!1}}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.uploading,type:"primary"},on:{click:function(t){return e.submitProduct("addForm")}}},[e._v("确 认")])],1)],1)],1)},a=[],o=n("5530"),c=(n("14d9"),n("b0c0"),n("d3b7"),n("0643"),n("4e3e"),n("159b"),n("00d5")),u=n("b558"),d=n("9506"),i={name:"ApprovalRecord",components:{limsTable:c["a"]},data:function(){var e=this;return{addPower:!0,outPower:!0,upPower:!0,outLoading:!1,personList:[],queryParams:{},tableData:[],column:[{label:"文件名称",prop:"documentName"},{label:"文件编号",prop:"documentCode",width:"120px"},{label:"版/次",prop:"documentVersion"},{label:"编制",prop:"writeUser"},{label:"审核人",prop:"checkUserName"},{label:"批准人",prop:"ratifyUserName"},{label:"备注",prop:"remark"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openAdd("编辑",t)},disabled:function(e){return"通过"==e.checkState||"通过"==e.ratifyState}},{name:"审核",type:"text",clickFun:function(t){e.handleCheck(t)},disabled:function(e){return"通过"==e.checkState||"通过"==e.ratifyState}},{name:"批准",type:"text",clickFun:function(t){e.handleApproval(t)},disabled:function(e){return"通过"==e.ratifyState}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(e){return"通过"==e.checkState||"通过"==e.ratifyState}}]}],page:{total:0,size:10,current:0},tableLoading:!1,title:"新增",addDia:!1,addForm:{},addRules:{documentName:[{required:!0,message:"请输入文件名称",trigger:"blur"}]},uploading:!1}},computed:{action:function(){return this.javaApi+"/manageRecordCheck/exportInManageRecordCheck"}},mounted:function(){this.getAuthorizedPerson()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(o["a"])(Object(o["a"])({},this.queryParams),this.page);delete t.total,Object(d["A"])(Object(o["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,n=e.limit;this.page.current=t,this.page.size=n,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},openAdd:function(e,t){this.title=e,this.addForm=t||{},this.addDia=!0},handleDown:function(){var e=this;this.outLoading=!0,Object(d["v"])(this.queryParams).then((function(t){e.outLoading=!1,e.$download.saveAs(t.data,"文件审批记录")}))},getAuthorizedPerson:function(){var e=this;Object(u["w"])().then((function(t){var n=[];t.data.forEach((function(e){n.push({label:e.name,value:e.id})})),e.personList=n,e.refreshTable()}))},handleCheck:function(e){var t=this;this.$confirm("是否审核通过?","提示",{confirmButtonText:"通过",cancelButtonText:"不通过",type:"warning",closeOnClickModal:!1,distinguishCancelAndClose:!0,beforeClose:function(n,r,a){"confirm"===n?Object(d["g"])({id:e.id,checkState:"通过"}).then((function(e){t.refreshTable(),a(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"cancel"===n?(Object(d["g"])({id:e.id,checkState:"不通过"}).then((function(e){t.refreshTable(),a(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})),console.log("取消按钮点击事件，不关闭弹框")):"close"===n&&(a(),console.log("×按钮点击事件，不关闭弹框"))}})},handleApproval:function(e){var t=this;this.$confirm("是否批准通过?","提示",{confirmButtonText:"通过",cancelButtonText:"不通过",type:"warning",closeOnClickModal:!1,distinguishCancelAndClose:!0,beforeClose:function(n,r,a){"confirm"===n?Object(d["I"])({id:e.id,ratifyState:"通过"}).then((function(e){t.refreshTable(),a(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"cancel"===n?Object(d["I"])({id:e.id,ratifyState:"不通过"}).then((function(e){t.refreshTable(),a(),t.$message({type:"success",message:"提交成功"})})).catch((function(e){})):"close"===n&&(a(),console.log("×按钮点击事件，不关闭弹框"))}})},beforeUpload:function(e){return!(e.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(e,t,n){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.refreshTable()):this.$message.error("上传失败")},submitProduct:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.uploading=!0,"新增"==t.title?Object(d["c"])(t.addForm).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.refresh(),t.addDia=!1)})).catch((function(e){t.uploading=!1})):Object(d["p"])(t.addForm).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.refresh(),t.addDia=!1)})).catch((function(e){t.uploading=!1}))}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["j"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))}}},l=i,s=(n("8910"),n("2877")),m=Object(s["a"])(l,r,a,!1,null,"9a1d1b8c",null);t["default"]=m.exports},8910:function(e,t,n){"use strict";n("dfd3")},9506:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"p",(function(){return o})),n.d(t,"v",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"I",(function(){return d})),n.d(t,"j",(function(){return i})),n.d(t,"A",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"F",(function(){return m})),n.d(t,"N",(function(){return f})),n.d(t,"K",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"E",(function(){return g})),n.d(t,"s",(function(){return b})),n.d(t,"x",(function(){return O})),n.d(t,"e",(function(){return y})),n.d(t,"r",(function(){return R})),n.d(t,"L",(function(){return j})),n.d(t,"D",(function(){return v})),n.d(t,"l",(function(){return k})),n.d(t,"t",(function(){return P})),n.d(t,"a",(function(){return C})),n.d(t,"n",(function(){return M})),n.d(t,"G",(function(){return w})),n.d(t,"y",(function(){return I})),n.d(t,"h",(function(){return x})),n.d(t,"w",(function(){return F})),n.d(t,"d",(function(){return T})),n.d(t,"q",(function(){return A})),n.d(t,"J",(function(){return $})),n.d(t,"M",(function(){return S})),n.d(t,"B",(function(){return U})),n.d(t,"C",(function(){return z})),n.d(t,"k",(function(){return L})),n.d(t,"u",(function(){return D})),n.d(t,"b",(function(){return q})),n.d(t,"o",(function(){return B})),n.d(t,"H",(function(){return N})),n.d(t,"i",(function(){return _})),n.d(t,"z",(function(){return V}));var r=n("b775");function a(e){return Object(r["a"])({url:"/manageRecordCheck/addManageRecordCheck",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/manageRecordCheck/doManageRecordCheck",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/manageRecordCheck/exportOutManageRecordCheck",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/manageRecordCheck/checkManageRecordCheck",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/manageRecordCheck/ratifyManageRecordCheck",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/manageRecordCheck/delManageRecordCheck",method:"delete",params:e})}function l(e){return Object(r["a"])({url:"/manageRecordCheck/pageManageRecordCheck",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/manageRecordVerify/addManageRecordVerify",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/manageRecordVerify/pageManageRecordVerify",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/manageRecordTotal/submitManageRecordTotal",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/manageRecordTotal/ratifyManageRecordTotal",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/manageRecordVerify/delManageRecordVerify",method:"delete",params:e})}function g(e){return Object(r["a"])({url:"/manageRecordTotal/pageManageRecordTotal",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/manageRecordVerify/doManageRecordVerify",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/manageRecordIssueRecycle/exportOutManageRecordIssueRecycle",method:"get",params:e})}function y(e){return Object(r["a"])({url:"/manageRecordIssueRecycle/addManageRecordIssueRecycle",method:"post",data:e})}function R(e){return Object(r["a"])({url:"/manageRecordIssueRecycle/doManageRecordIssueRecycle",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/personBasicInfo/selectCNSAPersonTree",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/manageRecordIssueRecycle/pageManageRecordIssueRecycle",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/manageRecordIssueRecycle/delManageRecordIssueRecycle",method:"delete",params:e})}function P(e){return Object(r["a"])({url:"/manageRecordAudit/exportOutManageRecordAudit",method:"get",params:e})}function C(e){return Object(r["a"])({url:"/manageRecordAudit/addManageRecordAudit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function M(e){return Object(r["a"])({url:"/manageRecordAudit/doManageRecordAudit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function w(e){return Object(r["a"])({url:"/manageRecordAudit/ratifyManageRecordAudit",method:"post",data:e})}function I(e){return Object(r["a"])({url:"/manageRecordAudit/pageManageRecordAudit",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/manageRecordAudit/delManageRecordAudit",method:"delete",params:e})}function F(e){return Object(r["a"])({url:"/manageRecordIntervals/exportOutManageRecordIntervals",method:"get",params:e})}function T(e){return Object(r["a"])({url:"/manageRecordIntervals/addManageRecordIntervals",method:"post",data:e})}function A(e){return Object(r["a"])({url:"/manageRecordIntervals/doManageRecordIntervals",method:"post",data:e})}function $(e){return Object(r["a"])({url:"/manageRecordIntervalsTotal/ratifyManageRecordIntervalsTotal",method:"post",data:e})}function S(e){return Object(r["a"])({url:"/manageRecordIntervalsTotal/submitManageRecordIntervalsTotal",method:"post",data:e})}function U(e){return Object(r["a"])({url:"/manageRecordIntervals/pageManageRecordIntervals",method:"get",params:e})}function z(e){return Object(r["a"])({url:"/manageRecordIntervalsTotal/pageManageRecordIntervalsTotal",method:"get",params:e})}function L(e){return Object(r["a"])({url:"/manageRecordIntervals/delManageRecordIntervals",method:"delete",params:e})}function D(e){return Object(r["a"])({url:"/manageRecordCancel/exportOutManageRecordCancel",method:"get",params:e})}function q(e){return Object(r["a"])({url:"/manageRecordCancel/addManageRecordCancel",method:"post",data:e})}function B(e){return Object(r["a"])({url:"/manageRecordCancel/doManageRecordCancel",method:"post",data:e})}function N(e){return Object(r["a"])({url:"/manageRecordCancel/ratifyManageRecordCancel",method:"post",data:e})}function _(e){return Object(r["a"])({url:"/manageRecordCancel/delManageRecordCancel",method:"delete",params:e})}function V(e){return Object(r["a"])({url:"/manageRecordCancel/pageManageRecordCancel",method:"get",params:e})}},b558:function(e,t,n){"use strict";n.d(t,"v",(function(){return a})),n.d(t,"A",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"z",(function(){return u})),n.d(t,"y",(function(){return d})),n.d(t,"w",(function(){return i})),n.d(t,"i",(function(){return l})),n.d(t,"n",(function(){return s})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"u",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"p",(function(){return b})),n.d(t,"o",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"D",(function(){return R})),n.d(t,"l",(function(){return j})),n.d(t,"t",(function(){return v})),n.d(t,"C",(function(){return k})),n.d(t,"b",(function(){return P})),n.d(t,"x",(function(){return C})),n.d(t,"s",(function(){return M})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return I})),n.d(t,"f",(function(){return x})),n.d(t,"r",(function(){return F})),n.d(t,"m",(function(){return T})),n.d(t,"q",(function(){return A})),n.d(t,"B",(function(){return $}));var r=n("b775");function a(e){return Object(r["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function i(e){return Object(r["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function p(e){return Object(r["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function O(e){return Object(r["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function y(e){return Object(r["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function R(e){return Object(r["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/deviceScope/search",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function P(e){return Object(r["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function C(e){return Object(r["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function M(e){return Object(r["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function I(e){return Object(r["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function F(e){return Object(r["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function T(e){return Object(r["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function A(e){return Object(r["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function $(e){return Object(r["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},dfd3:function(e,t,n){}}]);