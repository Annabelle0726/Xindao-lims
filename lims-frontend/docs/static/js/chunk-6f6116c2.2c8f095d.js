(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f6116c2"],{"2b6b":function(t,e,a){"use strict";a("57b9c")},"35be":function(t,e,a){},"57b9c":function(t,e,a){},"7d5e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.formDia,title:"实施",width:"60%"},on:{"update:visible":function(e){t.formDia=e},close:t.closeCarryOutDia}},[a("el-steps",{attrs:{active:t.currentStep,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"实施"}}),a("el-step",{attrs:{title:"批准"}})],1),a("div",{staticStyle:{height:"520px","overflow-y":"auto"}},[a("table",{staticClass:"tables",attrs:{border:"1",cellspacing:"10"}},[a("tr",[a("td",{staticClass:"td-title"},[a("p",[t._v("监控项目：")])]),a("td",{attrs:{colspan:"3"}},[0===t.currentStep?a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.monitorProject,callback:function(e){t.$set(t.form,"monitorProject",e)},expression:"form.monitorProject"}}):a("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.monitorProject))])],1),a("td",{staticClass:"td-title"},[a("p",[t._v("监控时间：")])]),a("td",{attrs:{colspan:"3"}},[0===t.currentStep?a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.monitorData,callback:function(e){t.$set(t.form,"monitorData",e)},expression:"form.monitorData"}}):a("span",{staticClass:"td-info"},[t._v(" "+t._s(t.form.monitorData))])],1)]),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",[a("p",[t._v("监控目的：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.monitorPurpose,callback:function(e){t.$set(t.form,"monitorPurpose",e)},expression:"form.monitorPurpose"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.monitorPurpose))])],1)])]),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",[a("p",[t._v("监控方法：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{rows:4,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.monitorMethod,callback:function(e){t.$set(t.form,"monitorMethod",e)},expression:"form.monitorMethod"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.monitorMethod))])],1)])]),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",[a("p",[t._v("参加人员：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.participant,callback:function(e){t.$set(t.form,"participant",e)},expression:"form.participant"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.participant))])],1)])]),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",[a("p",[t._v("过程控制：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.processControl,callback:function(e){t.$set(t.form,"processControl",e)},expression:"form.processControl"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.processControl))])],1)])]),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",[a("p",[t._v("结果评价标准（如何评价）：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.howEvaluate,callback:function(e){t.$set(t.form,"howEvaluate",e)},expression:"form.howEvaluate"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.howEvaluate))])],1)])]),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",[a("p",[t._v("经费预算：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.budget,callback:function(e){t.$set(t.form,"budget",e)},expression:"form.budget"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.budget))])],1)])]),a("tr",[a("td",{attrs:{colspan:"4"}},[a("div",[a("p",[t._v("检测部门：")])]),a("div",[0===t.currentStep?a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:t.form.inspectionDepartment,callback:function(e){t.$set(t.form,"inspectionDepartment",e)},expression:"form.inspectionDepartment"}}):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.inspectionDepartment))])],1)]),a("td",{attrs:{colspan:"4"}},[0===t.currentStep?a("div",[a("div",[t._v("批准人：")]),a("div",[0===t.currentStep?a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:t.form.ratifyUserId,callback:function(e){t.$set(t.form,"ratifyUserId",e)},expression:"form.ratifyUserId"}},t._l(t.personList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1):a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.ratifyName))])],1)]):t._e(),a("div",[0!==t.currentStep?a("div",[a("p",[t._v("批准意见：")])]):t._e(),a("div",[1===t.currentStep?a("el-input",{attrs:{rows:3,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.ratifyOpinion,callback:function(e){t.$set(t.form,"ratifyOpinion",e)},expression:"form.ratifyOpinion"}}):t._e(),2===t.currentStep?a("span",{staticClass:"td-info2"},[t._v(" "+t._s(t.form.ratifyOpinion))]):t._e(),0!==t.currentStep?a("span",{staticClass:"td-info3"},[t._v(" "+t._s("批准人："+t.form.ratifyName))]):t._e()],1)])])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeCarryOutDia}},[t._v("取 消")]),0===t.currentStep?a("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:t.handleEdit}},[t._v("提 交")]):t._e(),1===t.currentStep&&t.userId==t.ratifyUserId?a("el-button",{attrs:{loading:t.editLoad},on:{click:function(e){return t.handleEdit(0)}}},[t._v("不通过")]):t._e(),1===t.currentStep&&t.userId==t.ratifyUserId?a("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:function(e){return t.handleEdit(1)}}},[t._v("通 过")]):t._e()],1)],1)],1)},o=[],n=a("5530"),r=(a("14d9"),a("b0c0"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("a1e1")),l=a("b558"),s=a("2f62"),c={name:"carryOutDialog",components:{},data:function(){return{formDia:!1,currentStep:0,form:{monitorProject:"",monitorData:"",monitorPurpose:"",monitorMethod:"",participant:"",processControl:"",howEvaluate:"",budget:"",inspectionDepartment:"",ratifyUserId:"",ratifyOpinion:"",qualityMonitorDetailsId:"",ratifyName:""},personList:[],editLoad:!1,isCarryOut:!1,ratifyUserId:""}},computed:Object(n["a"])({},Object(s["b"])(["userId"])),methods:{openDia:function(t){this.formDia=!0,this.searchInfo(t),this.getAuthorizedPerson()},searchInfo:function(t){var e=this;Object(r["o"])({qualityMonitorDetailsId:t.qualityMonitorDetailsId}).then((function(t){t.data.ratifyUserId?1!=t.data.isFinish?e.currentStep=1:1==t.data.isFinish&&(e.currentStep=2):e.currentStep=0,e.form=t.data,e.ratifyUserId=t.data.ratifyUserId})).catch((function(t){console.log("err---",t)}))},handleEdit:function(t){this.editLoad=!0,0==this.currentStep?this.addInfo():this.editInfo(t)},addInfo:function(){var t=this;Object(r["d"])(this.form).then((function(e){t.editLoad=!1,t.$message.success("操作成功"),t.closeCarryOutDia()})).catch((function(e){console.log("err---",e),t.editLoad=!1}))},editInfo:function(t){var e=this;this.form.isFinish=t,Object(r["e"])(this.form).then((function(t){e.editLoad=!1,e.$message.success("操作成功"),e.closeCarryOutDia()})).catch((function(t){console.log("err---",t),e.editLoad=!1}))},closeCarryOutDia:function(){this.formDia=!1,this.$emit("closeCarryOutDia")},getAuthorizedPerson:function(){var t=this;Object(l["w"])({type:2}).then((function(e){var a=[];e.data.forEach((function(t){a.push({label:t.name,value:t.id})})),t.personList=a}))}}},u=c,d=(a("9c10"),a("2877")),p=Object(d["a"])(u,i,o,!1,null,"8f40fe88",null);e["default"]=p.exports},"9c10":function(t,e,a){"use strict";a("35be")},adba:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"table-card"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[t._v("计划名称")]),a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getYearPlanList(e)}},model:{value:t.yearForm.monitorName,callback:function(e){t.$set(t.yearForm,"monitorName",e)},expression:"yearForm.monitorName"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getYearPlanList}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.clearYear}},[t._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.leadInto}},[t._v("导入")])],1)]),a("lims-table",{key:"yearTableData",attrs:{tableData:t.yearTableData,column:t.yearColumnData,page:t.yearPage,tableLoading:t.yearLoading,height:"calc(100vh - 34em)",rowClick:t.rowClick},on:{pagination:t.pagination}})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[t._v("监控目的")]),a("el-input",{attrs:{placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getYearDetailPlanList(e)}},model:{value:t.yearDetailForm.monitorPurpose,callback:function(e){t.$set(t.yearDetailForm,"monitorPurpose",e)},expression:"yearDetailForm.monitorPurpose"}})],1),a("div",{staticStyle:{"margin-bottom":"18px","margin-right":"10px",display:"flex","align-items":"center","line-height":"32px"}},[a("span",{staticStyle:{width:"88px","font-size":"14px","font-weight":"700",color:"#606266"}},[t._v("监控项目")]),a("el-input",{attrs:{placeholder:"请输入",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getYearDetailPlanList(e)}},model:{value:t.yearDetailForm.monitorProject,callback:function(e){t.$set(t.yearDetailForm,"monitorProject",e)},expression:"yearDetailForm.monitorProject"}})],1),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getYearDetailPlanList}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.clearDetail}},[t._v("重置")])],1)]),a("div",{staticStyle:{"line-height":"30px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.exportSignatureTemplate}},[t._v("导出签名模板")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showDialog("add")}}},[t._v("新增")])],1)]),a("lims-table",{key:"yearDetailTableData",ref:"yearDetailTableData",attrs:{tableData:t.yearDetailTableData,column:t.yearDetailColumnData,page:t.yearDetailPage,tableLoading:t.yearDetailLoading,height:"calc(100vh - 34em)"},on:{pagination:t.pagination1}})],1),t.formDia?a("detail-form-dialog",{ref:"formDia",attrs:{qualityMonitorId:t.qualityMonitorId},on:{closeDia:t.closeDia}}):t._e(),t.carryOutDia?a("carry-out-dialog",{ref:"carryOutDia",attrs:{qualityMonitorId:t.qualityMonitorId},on:{closeCarryOutDia:t.closeCarryOutDia}}):t._e(),t.evaluateDialog?a("evaluate-dialog",{ref:"evaluateDialog",on:{closeEvaDia:t.closeEvaDia}}):t._e(),a("el-dialog",{attrs:{visible:t.examineDialog,title:"审核",width:"30%"},on:{"update:visible":function(e){t.examineDialog=e},close:t.closeExamineDia}},[a("span",[t._v(" 审核备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:t.examineInfo.examineRemark,callback:function(e){t.$set(t.examineInfo,"examineRemark",e)},expression:"examineInfo.examineRemark"}})],1),a("span",{staticStyle:{"margin-top":"10px",display:"inline-block"}},[t._v(" 批准人： "),a("el-select",{staticStyle:{width:"70%"},attrs:{clearable:"",filterable:"",size:"small"},model:{value:t.examineInfo.ratifyUserId,callback:function(e){t.$set(t.examineInfo,"ratifyUserId",e)},expression:"examineInfo.ratifyUserId"}},t._l(t.responsibleOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.examineLoading},on:{click:function(e){return t.handleReview(0)}}},[t._v("不通过")]),a("el-button",{attrs:{loading:t.examineLoading,type:"primary"},on:{click:function(e){return t.handleReview(1)}}},[t._v("通 过")])],1)]),a("el-dialog",{attrs:{visible:t.ratifyDialog,title:"批准",width:"30%"},on:{"update:visible":function(e){t.ratifyDialog=e},close:t.closeRatifyDia}},[a("span",[t._v(" 批准备注： "),a("el-input",{attrs:{type:"textarea"},model:{value:t.ratifyInfo.ratifyRemark,callback:function(e){t.$set(t.ratifyInfo,"ratifyRemark",e)},expression:"ratifyInfo.ratifyRemark"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.ratifyLoading},on:{click:function(e){return t.handleRatify(0)}}},[t._v("不批准")]),a("el-button",{attrs:{loading:t.ratifyLoading,type:"primary"},on:{click:function(e){return t.handleRatify(1)}}},[t._v("批 准")])],1)]),a("el-dialog",{attrs:{visible:t.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(e){t.lookDialogVisible=e}}},[t.lookDialogVisible?a("filePreview",{staticStyle:{height:"70vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:t.javaApi+"/word/"+t.currentInfo.finishReportUrl}}):t._e(),a("div",[t._v(" 批准状态： "),1===this.ratifyStatus?a("el-tag",{attrs:{type:"success"}},[t._v("批准")]):t._e(),0===this.ratifyStatus?a("el-tag",{attrs:{type:"danger"}},[t._v("不批准")]):t._e()],1),a("div",[t._v(" 批准意见： "),a("el-input",{attrs:{disabled:1===this.ratifyStatus,type:"textarea"},model:{value:t.ratifyRemark,callback:function(e){t.ratifyRemark=e},expression:"ratifyRemark"}})],1),1!==this.ratifyStatus?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.lookDialogLoading},on:{click:function(e){return t.handleApproval(0)}}},[t._v("不批准")]),a("el-button",{attrs:{loading:t.lookDialogLoading,type:"primary"},on:{click:function(e){return t.handleApproval(1)}}},[t._v("批 准")])],1):t._e()],1),a("el-dialog",{attrs:{visible:t.downloadDialog,title:"导出",width:"600px"},on:{"update:visible":function(e){t.downloadDialog=e}}},[a("span",[a("el-button",{attrs:{plain:"",type:"primary",disabled:3!==t.download.detailsRatifyStatus},on:{click:t.controlDown}},[t._v("实施计划导出")]),a("el-button",{attrs:{plain:"",type:"primary",disabled:!t.download.finishReportUrl},on:{click:t.finishReportExport}},[t._v("完成报告导出")]),a("el-button",{attrs:{plain:"",type:"primary",disabled:3!==t.download.evaluateStatus},on:{click:t.processingDown}},[t._v("评价导出")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.downloadDialog=!1}}},[t._v("取 消")])],1)]),a("el-dialog",{attrs:{visible:t.uploadDia,title:"数据导入",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.uploadDia=e}}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{width:"60px"}},[t._v("年份：")]),a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",clearable:"",size:"small",format:"yyyy",placeholder:"选择年"},model:{value:t.planYear,callback:function(e){t.planYear=e},expression:"planYear"}})],1),a("div",{staticStyle:{display:"flex","align-items":"center",margin:"10px 0"}},[a("div",{staticStyle:{width:"60px"}},[t._v("审核人：")]),a("el-select",{staticStyle:{width:"50%"},attrs:{clearable:"",filterable:"",size:"small"},model:{value:t.examineUserId,callback:function(e){t.examineUserId=e},expression:"examineUserId"}},t._l(t.responsibleOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("div",{staticStyle:{margin:"0 auto"}},[a("el-upload",{ref:"upload",attrs:{action:t.action,"auto-upload":!1,"file-list":t.fileList,headers:t.uploadHeader,limit:1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar","on-change":t.beforeUpload,"on-error":t.onError,"on-success":t.handleSuccessUp,drag:"",data:{planYear:t.planYear,examineUserId:t.examineUserId},name:"file"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.uploadDia=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.uploading,type:"primary"},on:{click:t.submitUpload}},[t._v("上 传")])],1)]),a("el-dialog",{attrs:{visible:t.uploadDia1,title:"生成报告",width:"500px"},on:{"update:visible":function(e){t.uploadDia1=e}}},[t.ratifyRemark?a("div",[t._v(" 批准意见： "),a("el-input",{attrs:{disabled:1===this.ratifyStatus,type:"textarea"},model:{value:t.ratifyRemark,callback:function(e){t.ratifyRemark=e},expression:"ratifyRemark"}})],1):t._e(),a("div",{staticStyle:{margin:"0 auto"}},[a("el-upload",{ref:"upload1",attrs:{action:t.action1,"auto-upload":!1,data:{qualityMonitorDetailsId:t.qualityMonitorDetailsId},"file-list":t.fileList1,headers:t.uploadHeader,limit:1,"on-change":t.beforeUpload1,"on-error":t.onError1,"on-success":t.onSuccess1,accept:".doc,.docx",drag:"",name:"file"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.uploadDia1=!1}}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.uploading1,type:"primary"},on:{click:function(e){return t.submitUpload1()}}},[t._v("上 传")])],1)]),t.ViewRecord?a("view-record",{ref:"ViewRecord"}):t._e()],1)},o=[],n=a("5530"),r=a("bb99"),l=a("7d5e"),s=a("b187"),c=a("a408"),u=a("00d5"),d=a("a1e1"),p=a("b9fe"),f=a("2f62"),m=a("41a0"),h={name:"EnsureResultsValidity",components:{ViewRecord:m["default"],limsTable:u["a"],filePreview:c["a"],EvaluateDialog:s["default"],CarryOutDialog:l["default"],DetailFormDialog:r["default"]},data:function(){var t=this;return{ViewRecord:!1,examineUserId:"",responsibleOptions:[],yearForm:{monitorName:""},yearPage:{current:1,size:20,total:0},yearColumnData:[{label:"计划名称",prop:"monitorName",width:"150px"},{label:"编制人",prop:"writeName",width:"100"},{label:"编制日期",prop:"writeTime",width:"160"},{dataType:"tag",label:"审核状态",prop:"examineStatus",width:"100",formatData:function(t){return 0===t?"不通过":1===t?"通过":null},formatType:function(t){return 0===t?"danger":1===t?"success":null}},{label:"审核内容",prop:"examineRemark",width:"100"},{label:"审核人",prop:"examineName",width:"100"},{label:"审核日期",prop:"examineTime",width:"160"},{dataType:"tag",label:"批准状态",prop:"ratifyStatus",width:"100",formatData:function(t){return 0===t?"不批准":1===t?"批准":null},formatType:function(t){return 0===t?"danger":1===t?"success":null}},{label:"批准内容",prop:"ratifyRemark",width:"100"},{label:"批准人",prop:"ratifyName",width:"100"},{label:"批准日期",prop:"ratifyTime",width:"160"},{dataType:"action",label:"操作",fixed:"right",operation:[{name:"审核",type:"text",disabled:function(e){return 1===e.examineStatus||t.userId!=e.examineUserId},clickFun:function(e){t.examinePlan(e)}},{name:"批准",type:"text",disabled:function(e){return 1===e.ratifyStatus||1!==e.examineStatus||t.userId!=e.ratifyUserId},clickFun:function(e){t.approvalPlan(e)}},{name:"导出",type:"text",clickFun:function(e){t.handleDown(e)},disabled:function(t){return 1!==t.ratifyStatus}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(e){t.delPlan(e)},disabled:function(t){return 1===t.examineStatus}}]}],yearTableData:[],yearLoading:!1,yearDetailForm:{monitorPurpose:"",monitorProject:""},yearDetailColumnData:[{label:"监控目的",prop:"monitorPurpose",width:"150px",showOverflowTooltip:!0},{label:"计划开展时间",prop:"plannedTime",width:"150px"},{label:"监控项目",prop:"monitorProject",width:"150px"},{label:"参加单位（人员）",prop:"participant",width:"190px"},{label:"预算（元）",prop:"budget",width:"150px"},{label:"组织人员",prop:"organization",width:"150px"},{label:"监控方式",prop:"monitorWay",width:"150px"},{dataType:"tag",label:"实施状态",prop:"detailsRatifyStatus",width:"100",formatData:function(t){return 0===t?"未开始":1===t?"待评价":2===t?"不批准":3===t?"已批准":null},formatType:function(t){return 0===t?"":1===t?"warning":2===t?"danger":3===t?"success":null}},{dataType:"tag",label:"报告状态",prop:"reportStatus",width:"100",formatData:function(t){return 0===t?"未开始":1===t?"待评价":2===t?"不批准":3===t?"已批准":null},formatType:function(t){return 0===t?"":1===t?"warning":2===t?"danger":3===t?"success":null}},{dataType:"tag",label:"评价状态",prop:"evaluateStatus",width:"100",formatData:function(t){return 0===t?"未开始":1===t?"待评价":2===t?"待批准":3===t?"已批准":null},formatType:function(t){return 0===t?"":1===t?"warning":2===t?"info":3===t?"success":null}},{dataType:"action",label:"操作",fixed:"right",operation:[{name:"编辑",type:"text",clickFun:function(e){t.showDialog("edit",e)}},{name:"实施",type:"text",clickFun:function(e){t.carryOut(e)}},{name:"完成报告",type:"text",clickFun:function(e){t.record(e)}},{name:"评价",type:"text",clickFun:function(e){t.evaluate(e)}},{name:"附件上传",type:"text",clickFun:function(e){t.viewTestRecord(e)}},{name:"导出",type:"text",clickFun:function(e){t.downLoadPost(e)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(e){t.delYearPlanDetail(e)}}]}],yearDetailTableData:[],yearDetailLoading:!1,yearDetailPage:{current:1,size:20,total:0},formDia:!1,qualityMonitorId:"",carryOutDia:!1,evaluateDialog:!1,examineDialog:!1,examineLoading:!1,ratifyDialog:!1,ratifyLoading:!1,examineInfo:{},ratifyInfo:{},upLoading:!1,uploadDia:!1,uploadDia1:!1,uploading:!1,uploading1:!1,fileList:[],fileList1:[],lookDialogVisible:!1,lookDialogLoading:!1,currentInfo:{},qualityMonitorDetailsId:"",ratifyStatus:"",ratifyRemark:"",downloadDialog:!1,download:{},planYear:""}},mounted:function(){this.getYearPlanList()},methods:{getYearPlanList:function(){var t=this,e={monitorName:this.yearForm.monitorName},a=this.yearPage;this.yearLoading=!0,Object(d["p"])(Object(n["a"])(Object(n["a"])({},e),a)).then((function(e){t.yearLoading=!1,t.yearTableData=e.data.records,t.yearPage.total=e.data.total,t.yearTableData.length>0&&t.rowClick(t.yearTableData[0])})).catch((function(e){console.log("err---",e),t.yearLoading=!1}))},clearYear:function(){this.yearForm.monitorName="",this.getYearPlanList()},pagination:function(t){var e=t.page,a=t.limit;this.yearPage.current=e,this.yearPage.size=a,this.getYearPlanList()},pagination1:function(t){var e=t.page,a=t.limit;this.yearDetailPage.current=e,this.yearDetailPage.size=a,this.getYearPlanList()},leadInto:function(){this.uploadDia=!0,this.getUserList()},beforeUpload:function(t){return!(t.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(t,e,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(t){var e=this;this.uploading=!1,200==t.code?(this.$message.success("上传成功"),this.timer=setTimeout((function(){e.uploadDia=!1,e.fileList=[],e.planYear="",e.examineUserId="",e.getYearPlanList()}),1e3)):this.$message.error(t.msg)},submitUpload:function(){this.planYear?this.examineUserId?this.$refs.upload.submit():this.$message.warning("请选择批准人"):this.$message.warning("请选择年份")},examinePlan:function(t){this.examineDialog=!0,this.examineInfo=t,this.getUserList()},handleReview:function(t){var e=this;this.examineInfo.examineStatus=t,this.examineLoading=!0,Object(d["i"])(this.examineInfo).then((function(t){e.examineLoading=!1,e.$message.success("操作成功"),e.closeExamineDia()})).catch((function(t){console.log("err---",t),e.examineLoading=!1}))},closeExamineDia:function(){this.examineDialog=!1,this.examineInfo.examineRemark="",this.getYearPlanList()},approvalPlan:function(t){this.ratifyDialog=!0,this.ratifyInfo=t},handleRatify:function(t){var e=this;this.ratifyInfo.ratifyStatus=t,this.ratifyLoading=!0,Object(d["s"])(this.ratifyInfo).then((function(t){e.ratifyLoading=!1,e.$message.success("操作成功"),e.closeRatifyDia()})).catch((function(t){console.log("err---",t),e.ratifyLoading=!1}))},closeRatifyDia:function(){this.ratifyDialog=!1,this.ratifyInfo.ratifyRemark="",this.getYearPlanList()},handleApproval:function(t){var e=this,a={qualityMonitorDetailsId:this.currentInfo.qualityMonitorDetailsId,ratifyRemark:this.ratifyRemark,ratifyStatus:t};this.lookDialogLoading=!0,Object(d["r"])(a).then((function(t){200===t.code&&(e.$message.success("提交成功！"),e.lookDialogVisible=!1,e.getYearDetailPlanList()),e.lookDialogLoading=!1})).catch((function(){e.lookDialogLoading=!1}))},handleDown:function(t){var e=this;Object(d["j"])({qualityMonitorId:t.qualityMonitorId}).then((function(a){e.outLoading=!1;var i=new Blob([a],{type:"application/msword"});e.$download.saveAs(i,t.monitorName+".docx")}))},delPlan:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.yearLoading=!0,Object(d["g"])({qualityMonitorId:t.qualityMonitorId}).then((function(t){e.yearLoading=!1,e.$message.success("删除成功"),e.getYearPlanList()})).catch((function(t){e.yearLoading=!1,console.log("err---",t)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},rowClick:function(t){this.qualityMonitorId=t.qualityMonitorId,this.getYearDetailPlanList()},getYearDetailPlanList:function(){var t=this,e={qualityMonitorId:this.qualityMonitorId,monitorPurpose:this.yearDetailForm.monitorPurpose,monitorProject:this.yearDetailForm.monitorProject},a=this.yearDetailPage;this.yearDetailLoading=!0,Object(d["q"])(Object(n["a"])(Object(n["a"])({},e),a)).then((function(e){t.yearDetailLoading=!1,t.yearDetailTableData=e.data.records,t.yearDetailPage.total=e.data.total,t.$refs.yearDetailTableData.$refs.multipleTable.doLayout()})).catch((function(e){console.log("err---",e),t.yearDetailLoading=!1}))},clearDetail:function(){this.yearDetailForm={monitorPurpose:"",monitorProject:""},this.getYearDetailPlanList()},carryOut:function(t){var e=this;this.carryOutDia=!0,this.$nextTick((function(){e.$refs.carryOutDia.openDia(t)}))},closeCarryOutDia:function(){this.carryOutDia=!1,this.getYearDetailPlanList()},record:function(t){this.qualityMonitorDetailsId=t.qualityMonitorDetailsId,this.ratifyRemark=t.ratifyRemark,t.finishReportUrl?(this.currentInfo=t,this.ratifyStatus=t.ratifyStatus,this.lookDialogVisible=!0):this.uploadDia1=!0},onSuccess1:function(t,e,a){this.$refs.upload1.clearFiles(),this.uploading1=!1,200==t.code?(this.$message.success("上传成功"),this.uploadDia1=!1):this.$message.error(t.msg),this.getYearDetailPlanList()},beforeUpload1:function(t){return!(t.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload1.clearFiles(),!1)},onError1:function(t,e,a){this.$message.error("上传失败"),this.$refs.upload1.clearFiles(),this.uploading1=!1},submitUpload1:function(){0!==this.$refs.upload1.uploadFiles.length?(this.uploading1=!0,this.$refs.upload1.submit(),this.uploadDia1=!1):this.$message.error("未选择文件")},evaluate:function(t){var e=this;this.evaluateDialog=!0,this.$nextTick((function(){e.$refs.evaluateDialog.openDia(t)}))},closeEvaDia:function(){this.evaluateDialog=!1,this.getYearDetailPlanList()},viewTestRecord:function(t){var e=this;this.ViewRecord=!0,this.$nextTick((function(){e.$refs.ViewRecord.openDia(t)}))},downLoadPost:function(t){this.downloadDialog=!0,this.download=t},showDialog:function(t,e){var a=this;this.formDia=!0,this.$nextTick((function(){a.$refs.formDia.openDia(t,e)}))},closeDia:function(){this.formDia=!1,this.getYearDetailPlanList()},controlDown:function(){var t=this;Object(d["l"])({qualityMonitorDetailsId:this.download.qualityMonitorDetailsId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"质量监控实施计划.docx")}))},finishReportExport:function(){var t=this.download.finishReportUrl,e=document.createElement("a");e.href=this.javaApi+"/word/"+t,e.target="_blank",document.body.appendChild(e),e.click()},processingDown:function(){var t=this;Object(d["k"])({qualityMonitorDetailsId:this.download.qualityMonitorDetailsId}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/msword"});t.$download.saveAs(a,"质量监控评价.docx")}))},delYearPlanDetail:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.yearDetailLoading=!0,Object(d["f"])({qualityMonitorDetailsId:t.qualityMonitorDetailsId}).then((function(t){e.yearDetailLoading=!1,e.$message.success("删除成功"),e.getYearDetailPlanList()})).catch((function(t){e.yearDetailLoading=!1,console.log("err---",t)}))}))},getUserList:function(){var t=this;Object(p["g"])().then((function(e){t.responsibleOptions=e.data}))},exportSignatureTemplate:function(){var t="质量监控记录签名模板.doc",e=document.createElement("a");e.href=this.javaApi+"/word/"+t,e.target="_blank",document.body.appendChild(e),e.click()}},computed:Object(n["a"])(Object(n["a"])({},Object(f["b"])(["userId"])),{},{action:function(){return this.javaApi+"/qualityMonitor/importQualityMonitor"},action1:function(){return this.javaApi+"/qualityMonitor/uploadFinishReport"}}),beforeDestroy:function(){clearTimeout(this.timer)}},y=h,g=a("2877"),b=Object(g["a"])(y,i,o,!1,null,"424e2ead",null);e["default"]=b.exports},b9fe:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return n})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"h",(function(){return s})),a.d(e,"j",(function(){return c})),a.d(e,"i",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return p})),a.d(e,"k",(function(){return f})),a.d(e,"g",(function(){return m}));var i=a("b775");function o(t){return Object(i["a"])({url:"/performanceShift/page",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/performanceShift/pageYear",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/performanceShift/add",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/shiftTime/list",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/shiftTime/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/shiftTime/update",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/shiftTime/remove",method:"delete",params:t})}function d(t){return Object(i["a"])({url:"/performanceShift/export",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:t})}function f(t){return Object(i["a"])({url:"/performanceShift/update",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:t})}},bb99:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"编辑",visible:t.formDia,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"80%"},on:{"update:visible":function(e){t.formDia=e},close:t.closeDia}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"监控目的",prop:"monitorPurpose"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.monitorPurpose,callback:function(e){t.$set(t.form,"monitorPurpose",e)},expression:"form.monitorPurpose"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划开展时间",prop:"plannedTime"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.plannedTime,callback:function(e){t.$set(t.form,"plannedTime",e)},expression:"form.plannedTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"监控项目",prop:"monitorProject"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.monitorProject,callback:function(e){t.$set(t.form,"monitorProject",e)},expression:"form.monitorProject"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参加单位（人员）",prop:"participant"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.participant,callback:function(e){t.$set(t.form,"participant",e)},expression:"form.participant"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算（元）",prop:"budget"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.budget,callback:function(e){t.$set(t.form,"budget",e)},expression:"form.budget"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织人员",prop:"organization"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.organization,callback:function(e){t.$set(t.form,"organization",e)},expression:"form.organization"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"监控方式",prop:"monitorWay"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.form.monitorWay,callback:function(e){t.$set(t.form,"monitorWay",e)},expression:"form.monitorWay"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDia}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.upLoad},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},o=[],n=a("5530"),r=a("a1e1"),l={name:"detailFormDialog",components:{},props:["qualityMonitorId"],data:function(){return{formDia:!1,form:{qualityMonitorDetailsId:"",monitorPurpose:"",plannedTime:"",monitorProject:"",participant:"",budget:"",organization:"",monitorWay:""},rules:{monitorPurpose:[{required:!0,message:"请输入监控目的",trigger:"blur"}],monitorProject:[{required:!0,message:"请输入监控项目",trigger:"blur"}]},upLoad:!1,operationType:""}},methods:{openDia:function(t,e){this.formDia=!0,this.operationType=t,"edit"===t&&this.searchInfo(e)},searchInfo:function(t){this.form=Object(n["a"])({},t)},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&("add"===t.operationType?t.handleAdd():t.handleEdit())}))},handleAdd:function(){var t=this,e=this.HaveJson(this.form);e.qualityMonitorId=this.qualityMonitorId,this.upLoad=!0,Object(r["b"])(e).then((function(e){t.upLoad=!1,t.$message.success("新增成功"),t.closeDia()})).catch((function(e){console.log("err---",e),t.upLoad=!1}))},handleEdit:function(){var t=this,e=this.HaveJson(this.form);this.upLoad=!0,Object(r["t"])(e).then((function(e){t.upLoad=!1,t.$message.success("修改成功"),t.closeDia()})).catch((function(e){console.log("err---",e),t.upLoad=!1}))},closeDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeDia")}}},s=l,c=(a("2b6b"),a("2877")),u=Object(c["a"])(s,i,o,!1,null,"1f2678b8",null);e["default"]=u.exports}}]);