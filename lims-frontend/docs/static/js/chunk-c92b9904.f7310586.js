(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c92b9904","chunk-2be0c63e"],{"07a7":function(e,t,r){"use strict";r("816d")},"0ccb":function(e,t,r){"use strict";var a=r("e330"),n=r("50c4"),o=r("577e"),i=r("1148"),l=r("1d80"),s=a(i),u=a("".slice),c=Math.ceil,d=function(e){return function(t,r,a){var i,d,p=o(l(t)),m=n(r),f=p.length,h=void 0===a?" ":o(a);return m<=f||""===h?p:(i=m-f,d=s(h,c(i/h.length)),d.length>i&&(d=u(d,0,i)),e?p+d:d+p)}};e.exports={start:d(!1),end:d(!0)}},"4a71":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return l}));var a=r("b775");function n(e){return Object(a["a"])({url:"/finishProductSpotCheck/getIfsStock",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/finishProductSpotCheck/getQuarter",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/finishProductSpotCheck/addQuarter",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/finishProductSpotCheck/updateQuarterOnOrder",method:"post",data:e})}},"4d90":function(e,t,r){"use strict";var a=r("23e7"),n=r("0ccb").start,o=r("9a0c");a({target:"String",proto:!0,forced:o},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"5d17":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"10px 0"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"title"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addTemQuarter}},[e._v("新增")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.quarterSample}},[e._v("季度抽样")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleStockList}},[e._v("刷新")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"finishedproducttransferTable",staticClass:"finishedproducttransfer-table",attrs:{data:e.stockList,"header-cell-style":e.lineSideWarehouseTableHeaderCellStyle,"row-class-name":e.lineSideWarehouseTableRowClassName,height:"calc(100vh - 240px)"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"45"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"客户订单编号",prop:"customerOrderNo",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("客户订单编号")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.customerOrderNo,callback:function(t){e.$set(e.queryParamOne,"customerOrderNo",t)},expression:"queryParamOne.customerOrderNo"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.customerOrderNo))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"成品零件号",prop:"partNo",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("成品零件号")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.partNo,callback:function(t){e.$set(e.queryParamOne,"partNo",t)},expression:"queryParamOne.partNo"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.partNo))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"零件名称",prop:"partName",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("零件名称")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.partName,callback:function(t){e.$set(e.queryParamOne,"partName",t)},expression:"queryParamOne.partName"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.partName))])]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"仓库",prop:"warehouseName",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("仓库")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.warehouseName,callback:function(t){e.$set(e.queryParamOne,"warehouseName",t)},expression:"queryParamOne.warehouseName"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.warehouseName))])]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"库位号",prop:"locationNo",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("库位号")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.locationNo,callback:function(t){e.$set(e.queryParamOne,"locationNo",t)},expression:"queryParamOne.locationNo"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.locationNo))])]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"库位名称",prop:"locationName",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("库位名称")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.locationName,callback:function(t){e.$set(e.queryParamOne,"locationName",t)},expression:"queryParamOne.locationName"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.locationName))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"批次号",prop:"partBatchNo",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("批次号")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.partBatchNo,callback:function(t){e.$set(e.queryParamOne,"partBatchNo",t)},expression:"queryParamOne.partBatchNo"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.partBatchNo))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"入库来源",prop:"inSource",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("入库来源")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.inSource,callback:function(t){e.$set(e.queryParamOne,"inSource",t)},expression:"queryParamOne.inSource"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.inSource))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"外护颜色",prop:"outerColor",width:"140"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("div",{staticStyle:{"line-height":"14px","margin-bottom":"6px"}},[e._v("外护颜色")]),r("div",{staticClass:"th",on:{click:function(e){e.stopPropagation()}}},[r("el-input",{attrs:{clearable:"",size:"mini",type:"text"},on:{clear:e.handleStockList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleStockList(t)}},model:{value:e.queryParamOne.outerColor,callback:function(t){e.$set(e.queryParamOne,"outerColor",t)},expression:"queryParamOne.outerColor"}})],1)]}},{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.outerColor))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"库存数量",prop:"stockQuantity",width:"140"}}),r("el-table-column",{attrs:{align:"center",label:"可用库存数量",prop:"availableStockQuantity",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.availableStockQuantity))])]}}])})],1),r("div",{staticClass:"pagin-page",staticStyle:{"margin-top":"0","margin-bottom":"0"}},[r("el-pagination",{staticStyle:{"text-align":"right",padding:"20px 16px"},attrs:{background:"","current-page":e.queryReport.current,"page-size":e.queryReport.size,"page-sizes":[10,15,20,50,100],total:e.queryReport.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChangeReport,"current-change":e.handleCurrentChangeReport}})],1)],1),r("add-quarter-item",{ref:"addQuarterItem"})],1)},n=[],o=r("5530"),i=(r("caad"),r("14d9"),r("fb6a"),r("e9c4"),r("b64b"),r("d3b7"),r("ac1f"),r("2532"),r("466d"),r("0643"),r("4e3e"),r("159b"),r("cd08")),l=r("4a71"),s=r("2f62"),u={name:"FinishedProductSampling",data:function(){return{stockList:[],queryParamOne:{partNo:null,partName:null,warehouseName:null,locationName:null,locationNo:null,partBatchNo:null,stockQuantity:null,availableStockQuantity:null,outerColor:null,customerOrderNo:null,inSource:null},queryReport:{current:1,size:20,total:0},tableLoading:!1,multipleSelection:[],showEditForm:!1,showMoveForm:!1,showMoveAllForm:!1,erpfinishstock:{},isAvaliable:!1,isPackage:!1,quarterTemItems:[],operationType:""}},components:{AddQuarterItem:i["default"]},mounted:function(){this.getIfsStock()},updated:function(){var e=this;this.$nextTick((function(){e.$refs.finishedproducttransferTable.doLayout()}))},computed:Object(o["a"])({},Object(s["b"])(["nickName"])),methods:{quarterSample:function(){this.$refs.addQuarterItem.openDia(this.quarterTemItems,"add")},addTemQuarter:function(){var e=this;if(this.multipleSelection.length>0){var t=JSON.parse(JSON.stringify(this.multipleSelection));t.length>0&&t.forEach((function(t){if(t.partName.includes(" ")){var r=t.partName.match(/^(\S+)\s(.*)/).slice(1);console.log("list",r),t.productType=r[0],t.spotCheckNumber=r[1]}t.dutyUser=e.nickName,t.itemRemark=t.partBatchNo,e.quarterTemItems.push(t)})),this.$message.success("暂存成功"),this.$refs.finishedproducttransferTable.clearSelection()}else this.$message.warning("请选择数据")},getIfsStock:function(){var e=this;this.tableLoading=!0,this.stockList=[];var t=this.getFinalParam();Object(l["b"])(t).then((function(t){e.tableLoading=!1;var r=t.data;e.queryReport.total=r.total;var a=r.data;a.forEach((function(t){e.stockList.push({partNo:t.PART_NO,partName:t.PART_DESC,warehouseName:t.WAREHOUSE_ID,locationName:t.LOCATION_DESC,locationNo:t.LOCATION_NO,partBatchNo:t.LOT_BATCH_NO,stockQuantity:t.QTY_ONHAND,availableStockQuantity:t.QTY_AVAILABLE,outerColor:t.ATTR4,customerOrderNo:t.ATTR6,inSource:t.ATTR23})}))})).catch((function(){e.tableLoading=!1}))},getFinalParam:function(){var e={partNo:this.queryParamOne.partNo,partDescription:this.queryParamOne.partName,warehouse:this.queryParamOne.warehouseName?this.queryParamOne.warehouseName+"%":null,locDesc:this.queryParamOne.locationName,locNo:this.queryParamOne.locationNo,lotBatchNo:this.queryParamOne.partBatchNo,quantityFlag:this.queryParamOne.stockQuantity,outerColor:this.queryParamOne.outerColor,otcOrderNo:this.queryParamOne.customerOrderNo,availableStockQuantity:this.queryParamOne.availableStockQuantity,inSource:this.queryParamOne.inSource,page:this.queryReport.current,limit:this.queryReport.size};return e},lineSideWarehouseTableHeaderCellStyle:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex,r="background:#FAFAFA;color:#666;";return 0===t?r+="border-radius: 6px 0px 0px 0px;":13===t&&(r+="border-radius: 0px 6px 0px 0px;"),r},lineSideWarehouseTableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"stripe-row":""},handleSizeChangeReport:function(e){this.queryReport.size=e,this.queryReport.current=1,this.getIfsStock()},handleCurrentChangeReport:function(e){this.queryReport.current=e,this.getIfsStock()},handleStockList:function(){this.queryReport.current=1,this.getIfsStock()},handleSelectionChange:function(e){this.multipleSelection=e}}},c=u,d=(r("07a7"),r("2877")),p=Object(d["a"])(c,a,n,!1,null,"61d0131d",null);t["default"]=p.exports},"816d":function(e,t,r){},"9a0c":function(e,t,r){"use strict";var a=r("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},b558:function(e,t,r){"use strict";r.d(t,"v",(function(){return n})),r.d(t,"A",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"z",(function(){return l})),r.d(t,"y",(function(){return s})),r.d(t,"w",(function(){return u})),r.d(t,"i",(function(){return c})),r.d(t,"n",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"e",(function(){return m})),r.d(t,"u",(function(){return f})),r.d(t,"g",(function(){return h})),r.d(t,"j",(function(){return y})),r.d(t,"p",(function(){return b})),r.d(t,"o",(function(){return k})),r.d(t,"d",(function(){return g})),r.d(t,"D",(function(){return v})),r.d(t,"l",(function(){return O})),r.d(t,"t",(function(){return S})),r.d(t,"C",(function(){return w})),r.d(t,"b",(function(){return q})),r.d(t,"x",(function(){return x})),r.d(t,"s",(function(){return P})),r.d(t,"h",(function(){return N})),r.d(t,"k",(function(){return _})),r.d(t,"f",(function(){return T})),r.d(t,"r",(function(){return C})),r.d(t,"m",(function(){return I})),r.d(t,"q",(function(){return L})),r.d(t,"B",(function(){return j}));var a=r("b775");function n(e){return Object(a["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function u(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function f(e){return Object(a["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function y(e){return Object(a["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function b(e){return Object(a["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function k(e){return Object(a["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function g(e){return Object(a["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function S(e){return Object(a["a"])({url:"/deviceScope/search",method:"get",params:e})}function w(e){return Object(a["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function q(e){return Object(a["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function x(e){return Object(a["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function P(e){return Object(a["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function N(e){return Object(a["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function _(e){return Object(a["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function T(e){return Object(a["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function C(e){return Object(a["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function I(e){return Object(a["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function L(e){return Object(a["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function j(e){return Object(a["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},cd08:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.quarterSampleDia,title:"季度抽样",width:"90%"},on:{"update:visible":function(t){e.quarterSampleDia=t},close:function(t){e.quarterSampleDia=!1}}},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},[r("div",{staticStyle:{width:"30%",display:"flex","align-items":"center"}},[r("span",{staticStyle:{width:"50px"}},[e._v("编号：")]),r("el-input",{attrs:{disabled:"add"!==e.operationType,size:"small"},model:{value:e.quarterSampleForm.quarterNo,callback:function(t){e.$set(e.quarterSampleForm,"quarterNo",t)},expression:"quarterSampleForm.quarterNo"}})],1),"add"===e.operationType?r("div",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addQuarter}},[e._v("添加")]),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e()]),r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.quarterItems,border:"",height:"420","header-cell-style":{background:"#f8f8f9",color:"#515a6e"}}},[r("el-table-column",{attrs:{label:"产品类型",prop:"productType",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small"},model:{value:a.productType,callback:function(t){e.$set(a,"productType",t)},expression:"row.productType"}})]]}}])}),r("el-table-column",{attrs:{label:"责任人",prop:"dutyUser",width:"100"}}),r("el-table-column",{attrs:{label:"型号",prop:"productModel",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.productModel,callback:function(t){e.$set(a,"productModel",t)},expression:"row.productModel"}})]]}}])}),r("el-table-column",{attrs:{label:"抽样数量","min-width":"340",prop:"spotCheckNumber"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.spotCheckNumber,callback:function(t){e.$set(a,"spotCheckNumber",t)},expression:"row.spotCheckNumber"}})]]}}])}),"add"===e.operationType?r("el-table-column",{attrs:{label:"数量","min-width":"120",prop:"number"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.number,callback:function(t){e.$set(a,"number",t)},expression:"row.number"}})]]}}],null,!1,1485353093)}):e._e(),"add"!==e.operationType?r("el-table-column",{attrs:{label:"抽样时间",prop:"spotCheckTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",disabled:"view"===e.operationType,placeholder:"选择日期",size:"small",clearable:"",type:"date","value-format":"yyyy-MM-dd"},model:{value:a.spotCheckTime,callback:function(t){e.$set(a,"spotCheckTime",t)},expression:"row.spotCheckTime"}})]]}}],null,!1,3990927429)}):e._e(),"add"!==e.operationType?r("el-table-column",{attrs:{label:"试样结论",prop:"result",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:"",disabled:"view"===e.operationType},model:{value:t.row.result,callback:function(r){e.$set(t.row,"result",r)},expression:"scope.row.result"}},[r("el-option",{attrs:{label:"合格",value:"合格"}}),r("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)]}}],null,!1,2110497481)}):e._e(),"add"!==e.operationType?r("el-table-column",{attrs:{label:"取样人员",prop:"samplingUser",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.samplingUser,callback:function(t){e.$set(a,"samplingUser",t)},expression:"row.samplingUser"}})]]}}],null,!1,3106039828)}):e._e(),r("el-table-column",{attrs:{label:"备注",prop:"itemRemark",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[r("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:a.itemRemark,callback:function(t){e.$set(a,"itemRemark",t)},expression:"row.itemRemark"}})]]}}])}),"view"!==e.operationType?r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(r){return e.deleteScope(t.$index)}}},[e._v("删除")])]}}],null,!1,3685618162)}):e._e()],1)],1),r("div",{staticStyle:{display:"flex","align-items":"center",margin:"10px 0"}},[r("span",{staticStyle:{width:"70px"}},[e._v("备注：")]),r("el-input",{staticStyle:{width:"43%"},attrs:{disabled:"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.quarterSampleForm.remark,callback:function(t){e.$set(e.quarterSampleForm,"remark",t)},expression:"quarterSampleForm.remark"}})],1),"add"!==e.operationType?r("div",[r("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"70px"}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"编制人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.writeUser,callback:function(t){e.$set(e.editForm,"writeUser",t)},expression:"editForm.writeUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"会签人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,multiple:"",placeholder:"请选择",size:"small"},model:{value:e.editForm.countersignUser,callback:function(t){e.$set(e.editForm,"countersignUser",t)},expression:"editForm.countersignUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"审核人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.examineUser,callback:function(t){e.$set(e.editForm,"examineUser",t)},expression:"editForm.examineUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"批准人："}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.ratifyUser,callback:function(t){e.$set(e.editForm,"ratifyUser",t)},expression:"editForm.ratifyUser"}},e._l(e.userList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1):e._e(),"view"!==e.operationType?r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"!==e.operationType?r("el-button",{on:{click:function(t){e.quarterSampleDia=!1}}},[e._v("取 消")]):e._e(),"add"===e.operationType?r("el-button",{on:{click:function(t){e.quarterSampleDia=!1}}},[e._v("保 存")]):e._e(),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSample}},[e._v("确 定")])],1):e._e()])],1)},n=[],o=r("5530"),i=(r("a15b"),r("d81d"),r("14d9"),r("a434"),r("e9c4"),r("a9e3"),r("b64b"),r("d3b7"),r("25f0"),r("4d90"),r("0643"),r("4e3e"),r("a573"),r("159b"),r("4a71")),l=r("b558"),s=r("2f62"),u={name:"addQuarterItem",components:{},data:function(){return{tableLoading:!1,quarterSampleDia:!1,quarterSampleForm:{quarterNo:""},quarterItems:[],quarterTemItems:[],operationType:"",editForm:{quarterId:"",writeUser:"",countersignUser:[],examineUser:"",ratifyUser:""},userList:[],quarterRow:{}}},computed:Object(o["a"])({},Object(s["b"])(["nickName"])),mounted:function(){this.getUserList()},methods:{openDia:function(e,t){var r=this;this.quarterSampleDia=!0,this.operationType=t,"add"===t?(e.length>0&&(this.quarterItems=e),this.quarterSampleForm.quarterNo=c()):(this.tableLoading=!0,this.quarterRow=e,Object(i["c"])({quarterId:e.quarterId}).then((function(e){r.tableLoading=!1,200===e.code&&(r.quarterItems=e.data.quarterItems,r.quarterSampleForm.quarterNo=e.data.quarterNo,r.quarterSampleForm.remark=e.data.remark,r.editForm.quarterId=e.data.quarterId,r.editForm.writeUser=e.data.writeUser,r.editForm.examineUser=e.data.examineUser,r.editForm.ratifyUser=e.data.ratifyUser,e.data.countersignUser&&(r.editForm.countersignUser=e.data.countersignUser.split(",").map(Number)))})).catch((function(e){r.tableLoading=!1})))},addQuarter:function(){this.quarterItems.push({productType:"",dutyUser:this.nickName,productModel:"",spotCheckNumber:"",number:"",spotCheckTime:"",result:"",samplingUser:"",itemRemark:""})},handleSample:function(){var e=this;this.$confirm("是否提交该数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if("add"===e.operationType)e.quarterSampleForm.quarterItems=JSON.parse(JSON.stringify(e.quarterItems)),e.quarterSampleForm.quarterItems.forEach((function(e){e.spotCheckNumber=e.spotCheckNumber+" "+(null==e.number?"":e.number)})),Object(i["a"])(e.quarterSampleForm).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.quarterItems=[],e.$parent.quarterTemItems=[],e.closeQuarterSampleDia())}));else{var t=Object(o["a"])({},e.editForm);t.countersignUser.length>0?t.countersignUser=t.countersignUser.join(","):t.countersignUser="",t.quarterItems=JSON.parse(JSON.stringify(e.quarterItems)),Object(i["d"])(t).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.quarterItems=[],e.closeQuarterSampleDia())}))}})).catch((function(){e.$message({type:"info",message:"已取消"})}))},clearTable:function(){this.quarterItems=[],this.$parent.quarterTemItems=[]},deleteScope:function(e){this.quarterItems.splice(e,1)},closeQuarterSampleDia:function(){this.quarterSampleDia=!1,"add"===this.operationType?this.$parent.handleStockList():this.$parent.refreshTable("page")},getUserList:function(){var e=this;Object(l["w"])().then((function(t){e.userList=t.data}))}}};function c(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;return t+r.toString().padStart(2,"0")}var d=u,p=r("2877"),m=Object(p["a"])(d,a,n,!1,null,"06a38273",null);t["default"]=m.exports}}]);