(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fc914dc","chunk-c5f7d8e0"],{"2dfe":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d}));var r=a("b775");function n(e){return Object(r["a"])({url:"/foreignRegister/pageForeignRegister",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/foreignRegister/getForeignRegisterOne",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/foreignRegister/addForeignRegister",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/foreignRegister/updateForeignRegister",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/foreignRegister/delForeignRegister",method:"delete",params:e})}function d(e){return Object(r["a"])({url:"/foreignRegister/exportForeignRegister",method:"get",responseType:"blob",params:e})}},"6be3":function(e,t,a){"use strict";a("6c34")},"6c34":function(e,t,a){},"726e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.formDia,title:"外来人员管理信息",width:"80%"},on:{"update:visible":function(t){e.formDia=t},close:e.closeThreeWastesDia}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"日期",prop:"registerDate"}},[a("el-date-picker",{attrs:{clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.registerDate,callback:function(t){e.$set(e.form,"registerDate",t)},expression:"form.registerDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"进入区域",prop:"area"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"进入人员",prop:"personnel"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.personnel,callback:function(t){e.$set(e.form,"personnel",t)},expression:"form.personnel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"进入原因",prop:"reason"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"陪同人员",prop:"accompanyingId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择陪同人员",size:"small"},model:{value:e.form.accompanyingId,callback:function(t){e.$set(e.form,"accompanyingId",t)},expression:"form.accompanyingId"}},e._l(e.personList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"批准人签名",prop:"approveId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择批准人",size:"small"},model:{value:e.form.approveId,callback:function(t){e.$set(e.form,"approveId",t)},expression:"form.approveId"}},e._l(e.personList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保密及其它情况",prop:"confidentiality"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.confidentiality,callback:function(t){e.$set(e.form,"confidentiality",t)},expression:"form.confidentiality"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeThreeWastesDia}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleEdit}},[e._v("提 交")])],1)],1)],1)},n=[],o=a("5530"),i=(a("c740"),a("14d9"),a("b0c0"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("2dfe")),s=a("2f62"),l={name:"Personnel-management-dia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,form:{registerDate:"",area:"",personnel:"",reason:"",accompanyingId:"",accompanyingName:"",approveId:"",approveName:"",confidentiality:"",remark:""},rules:{registerDate:[{required:!0,message:"请选择日期",trigger:"change"}],area:[{required:!0,message:"请填写进入区域",trigger:"blur"}],personnel:[{required:!0,message:"请填写进入人员",trigger:"blur"}],reason:[{required:!0,message:"请填写进入原因",trigger:"blur"}],accompanyingId:[{required:!0,message:"请选择陪同人员",trigger:"change"}],approveId:[{required:!0,message:"请选择批准人",trigger:"change"}],confidentiality:[{required:!0,message:"请填写保密及其他情况",trigger:"blur"}],remark:[{required:!1,message:"请填写备注",trigger:"blur"}]},operationType:"",personList:[]}},mounted:function(){},computed:Object(o["a"])({},Object(s["b"])(["userId"])),methods:{openDia:function(e,t){this.getAuthorizedPerson(),this.formDia=!0,this.operationType=e,"add"!==e?this.searchInfo(t):(this.form.accompanyingId=this.userId,this.form.area="装备电缆试验室",this.form.reason="参观实验室",this.form.accompanyingId=64,this.form.approveId=65,this.form.confidentiality="符合")},searchInfo:function(e){var t=this;this.diaLoading=!0,Object(i["d"])({registerId:e.registerId}).then((function(e){t.diaLoading=!1,200===e.code&&(t.form=e.data)})).catch((function(e){console.log(e),t.diaLoading=!1}))},handleEdit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a=e.HaveJson(e.form),r=e.personList.findIndex((function(e){return e.value===a.accompanyingId}));r>-1&&(a.accompanyingName=e.personList[r].label);var n=e.personList.findIndex((function(e){return e.value===a.approveId}));n>-1&&(a.approveName=e.personList[r].label),"add"===e.operationType?Object(i["a"])(a).then((function(t){e.loading=!1,200===t.code&&(e.$message.success("操作成功"),e.closeThreeWastesDia())})).catch((function(t){console.log("err---",t),e.loading=!1})):"edit"===e.operationType&&Object(i["g"])(a).then((function(t){e.loading=!1,200===t.code&&(e.$message.success("操作成功"),e.closeThreeWastesDia())})).catch((function(t){console.log("err---",t),e.loading=!1}))}))},closeThreeWastesDia:function(){this.$refs.form.resetFields(),this.formDia=!1,this.$emit("closeThreeWastesDia")},getAuthorizedPerson:function(){var e=this;Object(i["f"])().then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))}}},c=l,d=a("2877"),m=Object(d["a"])(c,r,n,!1,null,"685829d9",null);t["default"]=m.exports},"92a8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"日期",prop:"registerDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},on:{change:e.searchList},model:{value:e.searchForm.registerDate,callback:function(t){e.$set(e.searchForm,"registerDate",t)},expression:"searchForm.registerDate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small"},on:{click:e.handleDown}},[e._v("导 出")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openFormDia("add")}}},[e._v("新 增")])],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.tableColumn,height:"calc(100vh - 250px)",page:e.page,tableLoading:e.tableLoading},on:{pagination:e.pagination}})],1),e.threeWastesDia?a("personnel-management-dia",{ref:"threeWastesDia",on:{closeThreeWastesDia:e.closeThreeWastesDia}}):e._e()],1)},n=[],o=a("5530"),i=a("726e"),s=a("00d5"),l=a("2dfe"),c={name:"Personnel-management",components:{limsTable:s["a"],PersonnelManagementDia:i["default"]},data:function(){var e=this;return{searchForm:{registerDate:""},tableColumn:[{label:"日期",prop:"registerDate",minWidth:"100"},{label:"进入区域",prop:"area",minWidth:"100"},{label:"进入人员",prop:"personnel",minWidth:"100"},{label:"进入原因",prop:"reason",minWidth:"100"},{label:"陪同人员",prop:"accompanyingName",minWidth:"100"},{label:"批准人签名",prop:"approveName",minWidth:"100"},{label:"保密及其他情况",prop:"confidentiality",minWidth:"100"},{label:"备注",prop:"remark",minWidth:"100"},{dataType:"action",fixed:"right",minWidth:"220",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openFormDia("edit",t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.delPlan(t)}}]}],tableData:[],tableLoading:!1,page:{total:0,size:10,current:1},total:0,threeWastesDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this;this.tableLoading=!0,Object(l["e"])(Object(o["a"])(Object(o["a"])({},this.page),this.searchForm)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},delPlan:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,Object(l["b"])({registerId:e.registerId}).then((function(e){t.tableLoading=!1,200===e.code&&(t.$message.success("删除成功"),t.searchList())})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},openFormDia:function(e,t){var a=this;this.threeWastesDia=!0,this.$nextTick((function(){a.$refs.threeWastesDia.openDia(e,t)}))},handleDown:function(){var e=this;Object(l["c"])(this.searchForm).then((function(t){var a=new Blob([t],{type:"application/msword"});e.$download.saveAs(a,"外来人员登记.docx")}))},closeThreeWastesDia:function(){this.threeWastesDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.registerDate="",this.searchList()},pagination:function(e){this.page.size=e.limit,this.searchList()}}},d=c,m=(a("6be3"),a("2877")),u=Object(m["a"])(d,r,n,!1,null,"383082bc",null);t["default"]=u.exports}}]);