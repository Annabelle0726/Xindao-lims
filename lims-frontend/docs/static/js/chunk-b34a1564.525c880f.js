(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b34a1564"],{"02789":function(t,e,a){},"5fd5":function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return o}));var i=a("b775");function s(t){return Object(i["a"])({url:"/system/custom/selectCustomPageList",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/system/custom/addCustom",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/system/custom/upCustom",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/system/custom/delCustomById",method:"delete",params:t})}},"63d5":function(t,e,a){"use strict";a("02789")},a8f5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"capacity-scope"},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"border-card"},on:{"tab-click":function(e){t.queryParams.totaldealId=""}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{key:1,staticStyle:{height:"100%"},attrs:{label:"填写",name:"填写"}},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"small",type:"primary"},on:{click:t.handleAdd0}},[t._v("新增")]),"填写"==t.activeName?a("div",{staticClass:"table",staticStyle:{height:"calc(100% - 200px)"}},[a("lims-table",{key:"tableData",attrs:{tableData:t.tableData,column:t.column,tableLoading:t.tableLoading,height:"calc(100vh - 290px)",page:t.page},on:{pagination:t.pagination}})],1):t._e()],1),a("el-tab-pane",{key:2,staticStyle:{height:"100%"},attrs:{label:"历史记录",name:"历史记录"}},[a("el-form",{ref:"queryParams0",attrs:{model:t.queryParams0,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"年月",prop:"month"}},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",format:"yyyy-MM","value-format":"yyyy-MM",size:"small"},on:{change:function(e){return t.refreshTable()}},model:{value:t.queryParams0.month,callback:function(e){t.$set(t.queryParams0,"month",e)},expression:"queryParams0.month"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.refreshTable}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.refresh}},[t._v("重置")])],1)],1),a("div",{staticClass:"table"},[a("lims-table",{key:"tableData0",attrs:{tableData:t.tableData0,column:t.column0,tableLoading:t.tableLoading,height:"calc(100vh - 300px)",page:t.page0},on:{pagination:t.pagination0}})],1)],1)],1),a("el-dialog",{attrs:{title:t.title,visible:t.addDialogVisible,width:"400px"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-row",[a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("样品名称：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:t.addInfo.sampleName,callback:function(e){t.$set(t.addInfo,"sampleName",e)},expression:"addInfo.sampleName"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("样品编号：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:t.addInfo.sampleCode,callback:function(e){t.$set(t.addInfo,"sampleCode",e)},expression:"addInfo.sampleCode"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("供样单位：")]),a("div",{staticClass:"search_input"},[a("el-select",{attrs:{size:"small"},model:{value:t.addInfo.sampleSupplier,callback:function(e){t.$set(t.addInfo,"sampleSupplier",e)},expression:"addInfo.sampleSupplier"}},t._l(t.customPageList,(function(t,e){return a("el-option",{key:t.id,attrs:{label:t.company,value:t.company}})})),1)],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("数量：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:t.addInfo.num,callback:function(e){t.$set(t.addInfo,"num",e)},expression:"addInfo.num"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("处理方式：")]),a("div",{staticClass:"search_input"},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:t.addInfo.dealMethod,callback:function(e){t.$set(t.addInfo,"dealMethod",e)},expression:"addInfo.dealMethod"}})],1)])]),a("el-col",{staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[a("div",{staticClass:"search_thing"},[a("div",{staticClass:"search_label"},[t._v("时间：")]),a("div",{staticClass:"search_input"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"small",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.addInfo.dealTime,callback:function(e){t.$set(t.addInfo,"dealTime",e)},expression:"addInfo.dealTime"}})],1)])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.addLoading},on:{click:t.submitAdd}},[t._v("确 定")])],1)],1),a("el-dialog",{class:{downPdf:"下载"==t.title0},attrs:{title:t.title0,visible:t.lookDialogVisible,width:"800px",modal:"下载"!=t.title0,top:"5vh"},on:{"update:visible":function(e){t.lookDialogVisible=e}}},[t.lookDialogVisible?a("filePreview",{staticStyle:{"max-height":"70vh","overflow-y":"auto"},attrs:{fileUrl:t.javaApi+"/word/"+t.currentInfo.url,currentFile:{}}}):t._e(),"审核"==t.title0||"批准"==t.title0?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.noCheckLoading},on:{click:function(e){return t.submitCheck("不通过")}}},[t._v("不通过")]),a("el-button",{attrs:{type:"primary",loading:t.checkLoading},on:{click:function(e){return t.submitCheck("通过")}}},[t._v("通 过")])],1):t._e()],1)],1)},s=[],n=a("5530"),l=a("00d5"),o=a("a408"),c=a("5fd5"),r=a("b775");function d(t){return Object(r["a"])({url:"/processDeal/doProcessDeal",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/processDeal/addProcessDeal",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/processTotaldeal/submitProcessTotaldeal",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/processDeal/pageProcessDeal",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/processTotaldeal/checkProcessTotaldeal",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/processTotaldeal/ratifyProcessTotaldeal",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/processDeal/delProcessDeal",method:"delete",params:t})}function g(t){return Object(r["a"])({url:"/processTotaldeal/pageProcessTotaldeal",method:"get",params:t})}var y={name:"SampleDisposal",components:{limsTable:l["a"],filePreview:o["a"]},data:function(){var t=this;return{activeName:"填写",title:"新增",addDialogVisible:!1,addLoading:!1,outLoading:!1,editDialogVisible:!1,lookDialogVisible:!1,title0:"查看",noCheckLoading:!1,checkLoading:!1,addInfo:{},customPageList:[],currentInfo:{arr:[]},outPower:!1,addPower:!1,queryParams:{},tableData:[],column:[{label:"样品名称",prop:"sampleName"},{label:"样品编号",prop:"sampleCode"},{label:"供样单位",prop:"sampleSupplier"},{label:"数量",prop:"num"},{label:"处理方式",prop:"dealMethod"},{label:"时间",prop:"dealTime"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(e){t.handleAdd0(e)}},{name:"删除",type:"text",clickFun:function(e){t.handleDelete(e)}}]}],page:{total:0,size:10,current:0},tableLoading:!1,queryParams0:{},tableData0:[],column0:[{label:"月份",prop:"month"},{label:"总数量",prop:"totalNum"},{label:"提交人",prop:"submitUserName"},{label:"审核人",prop:"examineUserName"},{label:"批准人",prop:"ratifyUserName"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"查看",type:"text",clickFun:function(e){t.handleLook(e)}},{name:"下载",type:"text",clickFun:function(e){t.handleDown0(e)},disabled:function(t){return!t.url}},{name:"提交",type:"text",clickFun:function(e){t.handleSubmit(e)},disabled:function(t){return!!t.submitState&&"待提交"!=t.submitState}},{name:"审核",type:"text",clickFun:function(e){t.handleCheck(e)},disabled:function(t){return"通过"==t.examineState||"待提交"==t.submitState}},{name:"批准",type:"text",clickFun:function(e){t.handleApproval(e)},disabled:function(t){return"通过"==t.ratifyState||"待提交"==t.submitState}}]}],page0:{total:0,size:10,current:0}}},mounted:function(){this.getCustomPageList(),this.getList(),this.getList0()},methods:{getCustomPageList:function(){var t=this;Object(c["c"])({current:-1,size:-1}).then((function(e){t.customPageList=e.data.records})).catch((function(t){}))},handleDown:function(){},getList:function(){var t=this;this.tableLoading=!0;var e=Object(n["a"])(Object(n["a"])({},this.queryParams),this.page);delete e.total,m(Object(n["a"])({},e)).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},pagination:function(t){var e=t.page,a=t.limit;this.page.current=e,this.page.size=a,this.getList()},refresh:function(){this.queryParams0={},this.page0.current=1,this.getList0()},refreshTable:function(){this.page0.current=1,this.getList0()},getList0:function(){var t=this;this.tableLoading=!0;var e=Object(n["a"])(Object(n["a"])({},this.queryParams0),this.page);delete e.total,g(Object(n["a"])({},e)).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData0=e.data.records,t.page0.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},pagination0:function(t){var e=t.page,a=t.limit;this.page0.current=e,this.page0.size=a,this.getList0()},handleAdd0:function(t){t?(this.addInfo=this.HaveJson(t),this.title="编辑"):(this.title="新增",this.addInfo={}),this.addDialogVisible=!0},submitAdd:function(){var t=this;this.addInfo.id?(this.addLoading=!0,d(Object(n["a"])({totaldealId:this.queryParams.totaldealId},this.addInfo)).then((function(e){t.addLoading=!1,t.addDialogVisible=!1,t.$message({type:"success",message:"编辑成功!"}),t.page.current=0,t.getList()})).catch((function(t){}))):(this.addLoading=!0,u(Object(n["a"])({totaldealId:this.queryParams.totaldealId},this.addInfo)).then((function(e){t.addLoading=!1,t.addDialogVisible=!1,t.$message({type:"success",message:"新增成功!"}),t.page.current=0,t.getList()})).catch((function(t){})))},handleSubmit:function(t){var e=this;this.$confirm("是否提交 "+t.month+" 月份的数据","提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){h({id:t.id}).then((function(t){e.$message({type:"success",message:"提交成功!"}),e.refreshTable()})).catch((function(t){}))}))},handleLook:function(t){var e=this;this.activeName="填写",this.queryParams.totaldealId=t.id,this.$nextTick((function(){e.page.current=1,e.getList()}))},commonFun:function(t,e){var a=this;this.currentInfo=t,this.queryParams.totaldealId=t.id,m(Object(n["a"])({current:-1,size:-1},this.queryParams)).then((function(t){a.lookDialogVisible=!0,a.currentInfo.arr=t.data.records,e&&e()})).catch((function(t){}))},handleCheck:function(t){this.title0="审核",this.commonFun(t)},handleApproval:function(t){this.title0="批准",this.commonFun(t)},submitCheck:function(t){var e=this;"通过"==t?this.checkLoading=!0:this.noCheckLoading=!0,"审核"==this.title0?p({id:this.currentInfo.id,state:t}).then((function(t){e.checkLoading=!1,e.noCheckLoading=!1,e.$message({type:"success",message:"操作成功!"}),e.refreshTable(),e.lookDialogVisible=!1})).catch((function(t){})):"批准"==this.title0&&f({id:this.currentInfo.id,state:t}).then((function(t){e.checkLoading=!1,e.noCheckLoading=!1,e.$message({type:"success",message:"操作成功!"}),e.refreshTable(),e.lookDialogVisible=!1})).catch((function(t){}))},handleDown0:function(t){t.url?this.$download.saveAs(t.url,t.month+" 样品处理申请表"):this.$message.warning("暂无文件")},handleDelete:function(t){var e=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){b({id:t.id}).then((function(t){e.$message.success("删除成功"),e.page.current=0,e.getList()}))})).catch((function(){}))}}},v=y,k=(a("63d5"),a("2877")),L=Object(k["a"])(v,i,s,!1,null,"158683df",null);e["default"]=L.exports}}]);