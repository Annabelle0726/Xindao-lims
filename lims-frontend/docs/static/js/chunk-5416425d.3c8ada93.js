(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5416425d"],{"27bc":function(e,t,n){"use strict";n.d(t,"q",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"l",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"w",(function(){return s})),n.d(t,"t",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return p})),n.d(t,"p",(function(){return d})),n.d(t,"m",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"y",(function(){return b})),n.d(t,"j",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"o",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"u",(function(){return S})),n.d(t,"r",(function(){return O})),n.d(t,"k",(function(){return w})),n.d(t,"x",(function(){return T})),n.d(t,"d",(function(){return x})),n.d(t,"s",(function(){return j})),n.d(t,"v",(function(){return L})),n.d(t,"i",(function(){return k})),n.d(t,"a",(function(){return N}));var o=n("b775");function r(e){return Object(o["a"])({url:"/procurementSuppliesList/procurementSuppliesList",method:"get",params:e})}function a(e){return Object(o["a"])({url:"/procurementSuppliesList/deleteProcurementSuppliesList",method:"delete",params:e})}function l(e){return Object(o["a"])({url:"/procurementSuppliesList/exportProcurementSuppliesList",method:"get",responseType:"blob",params:e})}function i(e){return Object(o["a"])({url:"/procurementSuppliesList/addProcurementSuppliesList",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/procurementSuppliesList/updateProcurementSuppliesList",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/supplierManagement/selectSupplierManagementAll",method:"get",params:e})}function c(e){return Object(o["a"])({url:"/procurementSuppliesExpends/addProcurementSuppliesExpends",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/procurementSuppliesExpends/deleteProcurementSuppliesExpends",method:"delete",params:e})}function d(e){return Object(o["a"])({url:"/procurementSuppliesExpends/procurementSuppliesExpendlist/",method:"get",params:e})}function m(e){return Object(o["a"])({url:"/procurementSuppliesStore/exportExcel",method:"get",responseType:"blob",params:e})}function f(e){return Object(o["a"])({url:"/suppliersDirectoryContents/addSuppliersDirectoryContents",method:"post",data:e})}function b(e){return Object(o["a"])({url:"/suppliersDirectoryContents/updateSuppliersDirectoryContents",method:"post",data:e})}function h(e){return Object(o["a"])({url:"/suppliersDirectoryContents/deleteSuppliersDirectoryContentsById",method:"delete",params:e})}function g(e){return Object(o["a"])({url:"/procurementSuppliesContents/deleteProcurementSuppliesContentById",method:"delete",params:e})}function y(e){return Object(o["a"])({url:"/suppliersDirectoryContents/getSuppliersDirectoryContentsNodeNames",method:"get",params:e})}function v(e){return Object(o["a"])({url:"/procurementSuppliesContents/getNodeNames",method:"get",params:e})}function S(e){return Object(o["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function O(e){return Object(o["a"])({url:"/procurementSuppliesContents/selectProcurementSuppliesContentById",method:"get",params:e})}function w(e){return Object(o["a"])({url:"/procurementSuppliesContents/directoryListing",method:"get",params:e})}function T(e){return Object(o["a"])({url:"/procurementSuppliesStore/updateStore",method:"post",data:e})}function x(e){return Object(o["a"])({url:"/procurementSuppliesStore/addStore",method:"post",data:e})}function j(e){return Object(o["a"])({url:"/procurementSuppliesStore/selectStoreById",method:"get",params:e})}function L(e){return Object(o["a"])({url:"/procurementSuppliesStore/storeList",method:"get",params:e})}function k(e){return Object(o["a"])({url:"/procurementSuppliesStore/deleteStore",method:"delete",params:e})}function N(e){return Object(o["a"])({url:"/procurementSuppliesContents/addProcurementSuppliesContents",method:"post",data:e})}},3797:function(e,t,n){},7078:function(e,t,n){"use strict";n("3797")},"89ae":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"10px"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.searchList}},[e._v("刷新")]),n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){return e.addOrUpdateStore("add")}}},[e._v("添加")]),n("el-button",{attrs:{icon:"el-icon-download",size:"small"},on:{click:e.importExcel}},[e._v("导出excel")])],1),n("div",{staticClass:"table"},[n("limsTable",{attrs:{column:e.tableColumn,height:"calc(100vh - 20em)","table-data":e.storageTableData,"table-loading":e.tableLoading,page:e.page},on:{pagination:e.pagination}})],1),n("el-dialog",{attrs:{"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.title,visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticStyle:{"margin-left":"10px"}},[e._v("入库单")])]),n("el-form",{ref:"formModel",attrs:{model:e.form,"label-width":"auto"}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"入库单号"}},[n("el-input",{attrs:{placeholder:"请输入入库单号",size:"small"},model:{value:e.form.oddNumbers,callback:function(t){e.$set(e.form,"oddNumbers",t)},expression:"form.oddNumbers"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"入库库存"}},[n("el-input",{attrs:{placeholder:"请输入入库库存",size:"small"},model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",t)},expression:"form.inventory"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"入库总金额"}},[n("el-input",{attrs:{placeholder:"请输入入库总金额",size:"small"},model:{value:e.form.totalAmount,callback:function(t){e.$set(e.form,"totalAmount",t)},expression:"form.totalAmount"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"入库日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.storageTime,callback:function(t){e.$set(e.form,"storageTime",t)},expression:"form.storageTime"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"入库人"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.form.storageUser,callback:function(t){e.$set(e.form,"storageUser",t)},expression:"form.storageUser"}},e._l(e.users,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"入库说明"}},[n("el-input",{attrs:{rows:2,placeholder:"请输入内容",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),n("div",[n("div",[e._v("入库明细")]),n("div",{staticClass:"input-form"},[n("div",[n("div",[n("span",[e._v("耗材名称:")]),n("el-select",{staticStyle:{width:"70%"},attrs:{filterable:"",placeholder:"请选择耗材名称",size:"small"},model:{value:e.formTwo.id,callback:function(t){e.$set(e.formTwo,"id",t)},expression:"formTwo.id"}},e._l(e.consumableOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.consumablesName,value:e.id}})})),1)],1)]),n("div",[n("div",[n("span",[e._v("单价:")]),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入单价",size:"small"},model:{value:e.formTwo.unitPrice,callback:function(t){e.$set(e.formTwo,"unitPrice",t)},expression:"formTwo.unitPrice"}})],1)]),n("div",[n("div",[n("span",[e._v("入库数量:")]),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入入库数量",size:"small"},model:{value:e.formTwo.storeNumber,callback:function(t){e.$set(e.formTwo,"storeNumber",t)},expression:"formTwo.storeNumber"}})],1)]),n("div",[n("div",[n("span",[e._v("总价:")]),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入总价",size:"small"},model:{value:e.formTwo.totalPrice,callback:function(t){e.$set(e.formTwo,"totalPrice",t)},expression:"formTwo.totalPrice"}})],1)]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addTableData}},[e._v("添加 ")])],1),n("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:e.consumables,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[n("el-table-column",{attrs:{label:"编号",type:"index",width:"120px"}}),n("el-table-column",{attrs:{label:"货号",prop:"itemNumber"}}),n("el-table-column",{attrs:{label:"类别",prop:"type"}}),n("el-table-column",{attrs:{label:"名称",prop:"consumablesName"}}),n("el-table-column",{attrs:{label:"规格",prop:"specifications"}}),n("el-table-column",{attrs:{label:"参考供应商",prop:"supplier"}}),n("el-table-column",{attrs:{label:"计量单位",prop:"unit"}}),n("el-table-column",{attrs:{label:"单价",prop:"unitPrice"}}),n("el-table-column",{attrs:{label:"入库数量",prop:"storeNumber"}}),n("el-table-column",{attrs:{label:"总价",prop:"totalPrice"}}),n("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"mini",type:"text"},on:{click:function(n){return e.deleteTableData(t.$index)}}},[e._v("删除 ")])]}}])})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.save}},[e._v("保 存")])],1)])],1)},r=[],a=n("c14f"),l=n("1da1"),i=n("5530"),s=(n("7db0"),n("14d9"),n("a434"),n("a9e3"),n("d3b7"),n("0643"),n("fffc"),n("4e3e"),n("159b"),n("27bc")),u=n("00d5"),c={computed:{title:function(){return"add"==this.dialogType?"新建入库":"编辑入库"}},dicts:["consumables_type"],props:{contentsId:{type:Number,default:0}},watch:{},data:function(){var e=this;return{mutiList:[],consumables:[],users:[],form:{oddNumbers:null,inventory:null,totalAmount:null,storageTime:null,storageUser:null,remark:null},formTwo:{consumablesName:null,unitPrice:null,storeNumber:null,totalPrice:null},dialogVisible:!1,dialogType:"",upIndex:0,tableColumn:[{label:"入库单号",prop:"oddNumbers",minWidth:"100"},{label:"耗材名称",prop:"consumablesName",minWidth:"100"},{label:"入库数量",prop:"storeNumber",minWidth:"100"},{label:"入库总价",prop:"totalPrice",minWidth:"100"},{label:"入库人",prop:"storageUserName",minWidth:"100"},{label:"入库日期",prop:"storageTime",minWidth:"100"},{label:"说明",prop:"remark",minWidth:"100"},{label:"登记人",prop:"registrantName",minWidth:"160"},{label:"登记日期",prop:"registrantTime",minWidth:"100"},{dataType:"action",fixed:"right",minWidth:"120",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.addOrUpdateStore("edit",t)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(t){e.deleteStore(t)}}]}],tableLoading:!1,page:{total:0,size:10,current:1},consumableOptions:[],options:[],storageTableData:[],saveLoading:!1}},components:{limsTable:u["a"]},mounted:function(){this.searchList(),this.getUserList(),this.fetchListOptions(),this.options=this.dict.type.consumables_type},methods:{save:function(){var e=this,t={store:this.form,consumables:this.consumables};this.saveLoading=!0,"update"===this.dialogType?Object(s["x"])(t).then((function(t){e.saveLoading=!1,200==t.code&&(e.$message.success("修改成功"),e.handleClose(),e.searchList())})).catch((function(t){e.saveLoading=!1})):Object(s["d"])(t).then((function(t){e.saveLoading=!1,200==t.code&&(e.$message.success("新增成功"),e.handleClose(),e.searchList())})).catch((function(t){e.saveLoading=!1}))},findType:function(e){return console.log(e),this.options.find((function(t){return t.value===e})).label},addTableData:function(){var e=this;this.$nextTick(),console.log("this.consumableOptions",this.consumableOptions),this.consumableOptions.forEach((function(t){t.id===e.formTwo.id&&e.consumables.push({itemNumber:null,type:e.findType(t.consumablesType),consumablesName:t.consumablesName,specifications:t.specifications,supplier:t.supplierName,unit:t.unit,unitPrice:e.formTwo.unitPrice,storeNumber:e.formTwo.storeNumber,totalPrice:e.formTwo.totalPrice})}))},deleteTableData:function(e){this.consumables.splice(e,1)},addOrUpdateStore:function(e,t){var n=this;"edit"===e?(this.dialogType="update",Object(s["s"])({id:t.id}).then((function(e){n.consumables=e.data.consumables,n.form=Object(i["a"])({},e.data.store)})).catch((function(e){console.log("err---",e)}))):this.dialogType="add",this.dialogVisible=!0},searchList:function(){var e=this;this.tableLoading=!0,Object(s["v"])(Object(i["a"])({},this.page)).then((function(t){e.tableLoading=!1,200===t.code&&(e.storageTableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){console.log("err---",t),e.tableLoading=!1}))},importExcel:function(){var e=this;return Object(l["a"])(Object(a["a"])().m((function t(){return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:Object(s["m"])({parentId:e.contentsId}).then((function(t){var n=new Blob([t],{type:"application/octet-stream"});e.$download.saveAs(n,"耗材入库.xlsx")}));case 1:return t.a(2)}}),t)})))()},handleClose:function(){this.form={oddNumbers:null,inventory:null,totalAmount:null,storageTime:null,storageUser:null,remark:null},this.formTwo={consumablesName:null,unitPrice:null,storeNumber:null,totalPrice:null},this.consumables=[],this.dialogVisible=!1},viewIssued:function(e){console.log(e)},getUserList:function(){var e=this;Object(s["u"])().then((function(t){e.users=t.data}))},fetchListOptions:function(){var e=this;return Object(l["a"])(Object(a["a"])().m((function t(){return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:Object(s["q"])({contentsId:e.contentsId}).then((function(t){200===t.code&&(e.consumableOptions=t.data.records)}));case 1:return t.a(2)}}),t)})))()},deleteStore:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoading=!0,console.log("row>>>>>>>>>>>>>>s",e),Object(s["i"])({id:e.id,consumablesId:e.consumablesId}).then((function(e){t.tableLoading=!1,200===e.code&&(t.$message.success("删除成功"),t.searchList())})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},pagination:function(e){this.page.size=e.limit,this.searchList()}}},p=c,d=(n("7078"),n("2877")),m=Object(d["a"])(p,o,r,!1,null,"698823c8",null);t["default"]=m.exports}}]);