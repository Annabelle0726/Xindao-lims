(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1953716f"],{"2ce5":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.cableConfigShow&&!e.auxiliaryShow,expression:"!cableConfigShow&&!auxiliaryShow"}]},[s("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[s("div",[e._v("委托单信息")]),s("div",[s("el-cascader",{staticStyle:{width:"380px"},attrs:{disabled:e.active>1,options:e.quarterItemOptions,size:"small"},on:{focus:e.getQuarterOnOrderList},model:{value:e.addObj.quarterItemId,callback:function(t){e.$set(e.addObj,"quarterItemId",t)},expression:"addObj.quarterItemId"}}),s("el-select",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active==1"}],attrs:{placeholder:"下单模板",size:"small"},on:{change:e.selectInsOrderTemplateById},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}},e._l(e.templates,(function(t,a){return s("el-option",{key:a,attrs:{label:t.name,value:t.id}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),s("i",{staticClass:"el-icon-delete",staticStyle:{float:"right",color:"#66b1ff","font-size":"16px"},on:{click:function(s){return s.stopPropagation(),e.handleDelete(t)}}})])})),1),s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active==1"}],attrs:{size:"small"},on:{click:function(t){e.templateDia=!0}}},[s("span",{staticStyle:{color:"#3A7BFA"}},[e._v("保存模板")])]),1==e.active&&void 0!=e.addObj.sampleType&&(e.addObj.sampleType.indexOf("电缆")>-1||e.addObj.sampleType.indexOf("综合")>-1)?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openCableConfig}},[e._v("电缆配置")]):e._e(),1==e.active&&void 0!=e.addObj.sampleType&&e.addObj.sampleType.indexOf("电缆")>-1?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openAuxiliaryCore}},[e._v("辅助线芯配置")]):e._e(),s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.active||4==e.tabIndex&&2==e.active,expression:"active==1||(tabIndex==4&&active==2)"}],attrs:{loading:e.saveLoad,size:"small",type:"primary"},on:{click:e.save}},[e._v("提交")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active==3"}],attrs:{disabled:e.saveLoad,loading:e.saveLoad,size:"small"},on:{click:function(t){return e.upInsOrderOfState(2)}}},[e._v("不通过")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active==3"}],attrs:{loading:e.saveLoad,size:"small",type:"primary"},on:{click:function(t){return e.upInsOrderOfState(1)}}},[e._v("通过")]),s("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[s("span",{staticStyle:{color:"#3A7BFA"}},[e._v("返回")])])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.cableConfigShow&&!e.auxiliaryShow,expression:"!cableConfigShow&&!auxiliaryShow"}],staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"search"},[s("el-form",{ref:"addObj",attrs:{inline:!0,model:e.addObj,rules:e.addObjRules,"label-width":"108px","label-position":"right"}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"委托编号:",prop:"entrustCode"}},[s("el-input",{attrs:{clearable:"",disabled:"",placeholder:"系统生成",size:"small"},model:{value:e.addObj.entrustCode,callback:function(t){e.$set(e.addObj,"entrustCode",t)},expression:"addObj.entrustCode"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"检验类别:",prop:"orderType"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.active>1&&4!=e.tabIndex,clearable:"",size:"small"},model:{value:e.addObj.orderType,callback:function(t){e.$set(e.addObj,"orderType",t)},expression:"addObj.orderType"}},e._l(e.dict.type.check_type1,(function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"制单人:",prop:"custom"}},[s("el-input",{attrs:{disabled:"",size:"small",clearable:""},model:{value:e.addObj.custom,callback:function(t){e.$set(e.addObj,"custom",t)},expression:"addObj.custom"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"委托单位:",prop:"company"}},[s("el-input",{staticStyle:{width:"208px"},attrs:{disabled:"",placeholder:"选择委托单位",size:"small"},model:{value:e.addObj.company,callback:function(t){e.$set(e.addObj,"company",t)},expression:"addObj.company"}},[s("template",{slot:"append"},[s("el-button",{attrs:{slot:"append",disabled:e.active>1&&4!=e.tabIndex,icon:"el-icon-search"},on:{click:e.openCompanyList},slot:"append"})],1)],2)],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"联系方式:",prop:"phone"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,clearable:"",placeholder:"选择委托客户",size:"small"},model:{value:e.addObj.phone,callback:function(t){e.$set(e.addObj,"phone",t)},expression:"addObj.phone"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"紧急程度:",prop:"type"}},[s("el-select",{attrs:{disabled:e.active>1&&4!=e.tabIndex,clearable:"",size:"small"},model:{value:e.addObj.type,callback:function(t){e.$set(e.addObj,"type",t)},expression:"addObj.type"}},e._l(e.dict.type.urgency_level,(function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"样品名称:",prop:"sample"}},[s("el-input",{staticStyle:{width:"208px"},attrs:{disabled:"",size:"small"},model:{value:e.addObj.sample,callback:function(t){e.$set(e.addObj,"sample",t)},expression:"addObj.sample"}},[s("template",{slot:"append"},[s("el-button",{attrs:{slot:"append",disabled:e.active>1&&4!=e.tabIndex,icon:"el-icon-search"},on:{click:function(t){e.selectStandardTree=!0}},slot:"append"})],1)],2)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{label:"样品数量:",prop:"sampleNum"}},[s("el-input-number",{attrs:{disabled:e.active>1,max:100,min:1,precision:0,size:"small"},on:{change:e.addStandardTree},model:{value:e.addObj.sampleNum,callback:function(t){e.$set(e.addObj,"sampleNum",t)},expression:"addObj.sampleNum"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"样品状态:",prop:"sampleStatus"}},[s("el-select",{attrs:{disabled:e.active>1&&4!=e.tabIndex,size:"small"},model:{value:e.addObj.sampleStatus,callback:function(t){e.$set(e.addObj,"sampleStatus",t)},expression:"addObj.sampleStatus"}},e._l(e.dict.type.sample_status_list,(function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"抽检数量:",prop:"testQuantity"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,clearable:"",size:"small"},model:{value:e.addObj.testQuantity,callback:function(t){e.$set(e.addObj,"testQuantity",t)},expression:"addObj.testQuantity"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"来样方式:",prop:"formType"}},[s("el-select",{attrs:{disabled:e.active>1&&4!=e.tabIndex,size:"small",clearable:""},model:{value:e.addObj.formType,callback:function(t){e.$set(e.addObj,"formType",t)},expression:"addObj.formType"}},e._l(e.dict.type.form_type,(function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"报告发送方式:",prop:"send"}},[s("el-radio-group",{attrs:{disabled:e.active>1&&4!=e.tabIndex,size:"mini"},model:{value:e.addObj.send,callback:function(t){e.$set(e.addObj,"send",t)},expression:"addObj.send"}},[s("el-radio",{staticStyle:{"margin-right":"0"},attrs:{label:1,border:""}},[e._v("自取")]),s("el-radio",{attrs:{label:0,border:""}},[e._v("其他")])],1)],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"样品处理方式:",prop:"processing"}},[s("el-radio-group",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{disabled:e.active>1&&4!=e.tabIndex,size:"mini"},model:{value:e.addObj.processing,callback:function(t){e.$set(e.addObj,"processing",t)},expression:"addObj.processing"}},[s("el-radio",{staticStyle:{"margin-right":"0"},attrs:{label:0,border:""}},[e._v("委托单位取回")]),s("el-radio",{attrs:{label:1,border:""}},[e._v("实验室处理")])],1)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"生产单位:",prop:"production"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addObj.production,callback:function(t){e.$set(e.addObj,"production",t)},expression:"addObj.production"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"生产单位EN:",prop:"productionEn"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,clearable:"",placeholder:"请输入",size:"small"},model:{value:e.addObj.productionEn,callback:function(t){e.$set(e.addObj,"productionEn",t)},expression:"addObj.productionEn"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"是否留样:",prop:"isLeave"}},[s("el-radio-group",{attrs:{border:"",disabled:e.active>1&&4!=e.tabIndex,size:"mini"},model:{value:e.addObj.isLeave,callback:function(t){e.$set(e.addObj,"isLeave",t)},expression:"addObj.isLeave"}},[s("el-radio",{staticStyle:{"margin-right":"0"},attrs:{label:0,border:""}},[e._v("不留样")]),s("el-radio",{attrs:{label:1,border:""}},[e._v("留样")])],1)],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"委托人:",prop:"prepareUser"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small"},model:{value:e.addObj.prepareUser,callback:function(t){e.$set(e.addObj,"prepareUser",t)},expression:"addObj.prepareUser"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"委托人英文:",prop:"prepareUserEn"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small"},model:{value:e.addObj.prepareUserEn,callback:function(t){e.$set(e.addObj,"prepareUserEn",t)},expression:"addObj.prepareUserEn"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[s("el-input",{staticStyle:{width:"100%"},attrs:{autosize:{minRows:2,maxRows:2},disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small",type:"textarea"},model:{value:e.addObj.remark,callback:function(t){e.$set(e.addObj,"remark",t)},expression:"addObj.remark"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"备注英文:",prop:"remarkEn"}},[s("el-input",{attrs:{autosize:{minRows:2,maxRows:2},disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small",type:"textarea"},model:{value:e.addObj.remarkEn,callback:function(t){e.$set(e.addObj,"remarkEn",t)},expression:"addObj.remarkEn"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"样品名称:",prop:"sampleView"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small"},model:{value:e.addObj.sampleView,callback:function(t){e.$set(e.addObj,"sampleView",t)},expression:"addObj.sampleView"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"样品名称英文:",prop:"sampleViewEn"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small"},model:{value:e.addObj.sampleViewEn,callback:function(t){e.$set(e.addObj,"sampleViewEn",t)},expression:"addObj.sampleViewEn"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"委托人工号:",prop:"prepareCode"}},[s("el-input",{attrs:{disabled:e.active>1&&4!=e.tabIndex,placeholder:e.active>1?"":"请输入",clearable:"",size:"small"},model:{value:e.addObj.prepareCode,callback:function(t){e.$set(e.addObj,"prepareCode",t)},expression:"addObj.prepareCode"}})],1)],1)],1)],1)],1),s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between","background-color":"#F5F7FB","margin-bottom":"6px"}},[1==e.active?s("div",[s("el-form",{attrs:{inline:!0,model:e.addObj1,"label-width":"90px"}},[s("el-form-item",{staticStyle:{"margin-bottom":"6px","margin-top":"6px"},attrs:{label:"样品型号:"}},[s("el-select",{attrs:{placeholder:e.active>1?"":"请输入","allow-create":"",clearable:"","default-first-option":"",filterable:"",size:"small"},on:{change:e.changeModel},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.models,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("el-form-item",{staticStyle:{"margin-bottom":"6px","margin-top":"6px"},attrs:{label:"检验标准:"}},[s("el-select",{attrs:{loading:e.methodLoad,placeholder:e.active>1?"":"请输入",clearable:"",size:"small"},on:{change:e.changeStandardMethodListId,focus:e.methodFocus},model:{value:e.standardMethodListId,callback:function(t){e.standardMethodListId=t},expression:"standardMethodListId"}},e._l(e.methods,(function(e){return s("el-option",{key:e.id,attrs:{label:e.code,value:e.id}})})),1)],1)],1)],1):e._e(),s("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"6px","margin-top":"6px"}},[s("span",{staticStyle:{width:"150px","font-size":"14px","text-align":"right"}},[e._v("特殊标准：")]),s("el-input",{attrs:{disabled:!e.isSpecial,clearable:"",size:"small"},model:{value:e.specialStandardMethod,callback:function(t){e.specialStandardMethod=t},expression:"specialStandardMethod"}}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active==1"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.editSpecial}},[e._v("编辑")])],1)]),s("el-table",{ref:"sampleTable",staticClass:"el-table sampleTable",attrs:{data:e.sampleList,border:"","highlight-current-row":"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},"max-height":"400px","tooltip-effect":"dark"},on:{"selection-change":e.selectSample,"row-click":e.rowClick}},[1==e.active?s("el-table-column",{attrs:{selectable:e.selectable,type:"selection",width:"60"}}):e._e(),s("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"65"}}),s("el-table-column",{attrs:{align:"center",label:"样品名称","min-width":"100",prop:"sample"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{disabled:e.active>1,clearable:"",size:"small"},model:{value:t.row.sample,callback:function(s){e.$set(t.row,"sample",s)},expression:"scope.row.sample"}})]}}])}),s("el-table-column",{attrs:{align:"center",label:"样品编号","min-width":"100",prop:"sampleCode"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{disabled:e.active>1,clearable:"",placeholder:"不填写则系统自动生成",size:"small"},model:{value:t.row.sampleCode,callback:function(s){e.$set(t.row,"sampleCode",s)},expression:"scope.row.sampleCode"}})]}}])}),s("el-table-column",{attrs:{align:"center",label:"样品型号","min-width":"60",prop:"model"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.active>1,"allow-create":"","default-first-option":"",filterable:"",placeholder:"样品型号",size:"small"},on:{change:e.handleChangeModel},model:{value:t.row.model,callback:function(s){e.$set(t.row,"model",s)},expression:"scope.row.model"}},e._l(e.models,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),e.active>1?e._e():s("el-table-column",{attrs:{align:"center",label:"芯数",prop:"cores",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{clearable:"",placeholder:"非必填",size:"small"},on:{input:function(s){return e.spliceString(t.row,t.row.standardMethodListId,"cores")}},model:{value:t.row.cores,callback:function(s){e.$set(t.row,"cores",s)},expression:"scope.row.cores"}})]}}],null,!1,3530656466)}),e.active>1?e._e():s("el-table-column",{attrs:{align:"center",label:"型号参数",prop:"modelNum",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{clearable:"",placeholder:"非必填",size:"small"},on:{input:function(s){return e.methodChange(t.row.standardMethodListId,t.row,"splice")}},model:{value:t.row.modelNum,callback:function(s){e.$set(t.row,"modelNum",s)},expression:"scope.row.modelNum"}})]}}],null,!1,4073430087)}),e.active>1?e._e():s("el-table-column",{attrs:{align:"center",label:"最终样品型号",prop:"endModels",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{clearable:"",placeholder:"非必填",size:"small"},model:{value:t.row.endModels,callback:function(s){e.$set(t.row,"endModels",s)},expression:"scope.row.endModels"}})]}}],null,!1,2612017482)}),s("el-table-column",{attrs:{align:"center",label:"检验标准","min-width":"100",prop:"standardMethodListId"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:null==t.row.model||e.active>1,loading:e.methodLoad,readonly:e.active>1,clearable:"",placeholder:"检验标准",size:"small"},on:{change:function(s){return e.methodChange(s,t.row)},clear:function(t){e.productList=[]},focus:e.methodFocus},model:{value:t.row.standardMethodListId,callback:function(s){e.$set(t.row,"standardMethodListId",s)},expression:"scope.row.standardMethodListId"}},e._l(e.methods,(function(e){return s("el-option",{key:e.id,attrs:{label:e.code,value:e.id}})})),1)]}}])}),e.active>1?e._e():s("el-table-column",{attrs:{align:"center",label:"导体材质",prop:"conductorMaterial",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{clearable:"",placeholder:"非必填",size:"small"},on:{input:function(s){return e.spliceString(t.row,t.row.standardMethodListId)}},model:{value:t.row.conductorMaterial,callback:function(s){e.$set(t.row,"conductorMaterial",s)},expression:"scope.row.conductorMaterial"}})]}}],null,!1,1734673292)}),e.active>1?e._e():s("el-table-column",{attrs:{align:"center",label:"导体类型",prop:"conductorType",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{clearable:"",placeholder:"非必填",size:"small"},on:{input:function(s){return e.spliceString(t.row,t.row.standardMethodListId)}},model:{value:t.row.conductorType,callback:function(s){e.$set(t.row,"conductorType",s)},expression:"scope.row.conductorType"}})]}}],null,!1,3062935615)})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.getProductLoad,expression:"getProductLoad"}],ref:"productTable",staticClass:"el-table",staticStyle:{"margin-bottom":"10px"},attrs:{data:e.productList,"row-class-name":e.tableRowClassName,border:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},"max-height":"400px","tooltip-effect":"dark"},on:{select:e.selectOne,"selection-change":e.selectProduct,"select-all":e.handleAll}},[1==e.active?s("el-table-column",{attrs:{selectable:e.selectable0,type:"selection",width:"65"}}):e._e(),s("el-table-column",{attrs:{label:"检验项分类","min-width":"140",prop:"inspectionItemClass","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{label:"检验项","min-width":"140",prop:"inspectionItem","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[s("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"column","font-size":"14px"}},[s("span",[e._v("检验项")]),1==e.active?s("el-input",{attrs:{placeholder:"请输入",size:"mini"},on:{input:e.searchFilterList},model:{value:e.inspectionItem,callback:function(t){e.inspectionItem=t},expression:"inspectionItem"}}):e._e()],1)]}}])}),s("el-table-column",{attrs:{label:"检验项子项","min-width":"140",prop:"inspectionItemSubclass","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[s("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"column","font-size":"14px"}},[s("span",[e._v("检验项子项")]),1==e.active?s("el-input",{attrs:{placeholder:"请输入",size:"mini"},on:{input:e.searchFilterList},model:{value:e.inspectionItemSubclass,callback:function(t){e.inspectionItemSubclass=t},expression:"inspectionItemSubclass"}}):e._e()],1)]}}])}),s("el-table-column",{attrs:{label:"要求值","min-width":"220px",prop:"ask"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=e.active&&4!=e.tabIndex||!e.isAskOnlyRead&&!e.isSpecial||"5"==t.row.inspectionValueType?s("span",[[e._v(e._s(t.row.ask))]],2):s("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"要求值",size:"small",type:"textarea"},on:{change:function(s){return e.requestChange(s,t.row,"ask")}},model:{value:t.row.ask,callback:function(s){e.$set(t.row,"ask",s)},expression:"scope.row.ask"}})]}}])}),s("el-table-column",{attrs:{label:"要求描述","min-width":"220px",prop:"tell"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=e.active&&4!=e.tabIndex||!e.isAskOnlyRead&&!e.isSpecial?s("span",[[e._v(e._s(t.row.tell))]],2):s("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"要求描述",size:"small",type:"textarea"},on:{change:function(s){return e.requestChange(s,t.row,"tell")}},model:{value:t.row.tell,callback:function(s){e.$set(t.row,"tell",s)},expression:"scope.row.tell"}})]}}])}),s("el-table-column",{attrs:{label:"条件","min-width":"140",prop:"radius","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=e.active&&4!=e.tabIndex||!e.isAskOnlyRead&&!e.isSpecial?s("span",[e._v(e._s(t.row.radius))]):s("el-input",{attrs:{autosize:{minRows:1,maxRows:3},clearable:"",placeholder:"条件",size:"small",type:"textarea"},on:{change:function(s){return e.requestChange(s,t.row,"radius")}},model:{value:t.row.radius,callback:function(s){e.$set(t.row,"radius",s)},expression:"scope.row.radius"}})]}}])}),s("el-table-column",{attrs:{label:"试验方法","min-width":"120",prop:"methodS","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[s("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"column","font-size":"14px"}},[s("span",[e._v("试验方法")]),1==e.active?s("el-input",{attrs:{placeholder:"请输入",size:"mini"},on:{input:e.searchFilterList},model:{value:e.methodS,callback:function(t){e.methodS=t},expression:"methodS"}}):e._e()],1)]}}])}),s("el-table-column",{attrs:{label:"计量单位",prop:"unit","show-overflow-tooltip":"",width:"100"}}),s("el-table-column",{attrs:{label:"单价",prop:"price","show-overflow-tooltip":"",width:"100"}}),s("el-table-column",{attrs:{label:"区间","min-width":"120",prop:"section","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{"filter-method":e.filterHandler,filters:e.filters,label:"子实验室","min-width":"130",prop:"sonLaboratory","show-overflow-tooltip":""}}),e.isSpecial&&1==e.active?s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.repetitionTag?e._e():s("el-button",{attrs:{size:"small",type:"text"},on:{click:function(s){return e.addProductList(e.productList,t.row,t.$index)}}},[e._v("插入行")]),t.row.repetitionTag&&t.row.delete?s("el-button",{attrs:{size:"small",type:"text"},on:{click:function(s){return e.deleteProductList(t.$index,e.productList)}}},[e._v("删除")]):e._e()]}}],null,!1,1181205065)}):e._e()],1)],1)]),s("el-dialog",{attrs:{visible:e.selectUserDia,title:"选择单位",width:"70%"},on:{"update:visible":function(t){e.selectUserDia=t}}},[e.selectUserDia?s("div",{staticClass:"body"},[s("lims-table",{key:"tableData1",attrs:{tableData:e.tableData1,column:e.column1,isSelection:!0,handleSelectionChange:e.selectMethod,height:"400px",page:e.page1,tableLoading:e.tableLoading1},on:{pagination:e.pagination1}})],1):e._e(),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.selectUserDia=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.selectUser}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{visible:e.selectStandardTree,title:"选择样品",width:"500px"},on:{"update:visible":function(t){e.selectStandardTree=t}}},[e.selectStandardTree?s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectStandardTreeLoading,expression:"selectStandardTreeLoading"}],staticClass:"body",staticStyle:{height:"60vh","overflow-y":"auto","user-select":"none"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{clearable:"",placeholder:"输入关键字进行搜索",size:"small","suffix-icon":"el-icon-search"},on:{blur:e.searchFilter,clear:e.searchFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchFilter(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),s("el-tree",{ref:"tree",attrs:{data:e.list,"default-expanded-keys":e.expandedKeys,"filter-node-method":e.filterNode,props:{children:"children",label:"label"},"highlight-current":"","node-key":"label"},on:{"node-click":e.handleNodeClick,"node-expand":e.nodeOpen,"node-collapse":e.nodeClose},nativeOn:{dblclick:function(t){return e.activeStandardTree(t)}},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return s("div",{staticClass:"custom-tree-node"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("span",[s("i",{class:"node_i "+(void 0!=a.children?"[1]"===a.code?"el-icon-folder-opened":"el-icon-folder":"el-icon-tickets")}),e._v(" "+e._s(a.code)+" "+e._s(a.label))])])],1)],1)}}],null,!1,2818555394)})],1):e._e(),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.selectStandardTree=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.activeStandardTree}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{visible:e.templateDia,title:"保存模板",width:"400px"},on:{"update:visible":function(t){e.templateDia=t}}},[e.templateDia?s("div",{staticClass:"body",staticStyle:{display:"flex","align-items":"center"}},[s("div",{staticClass:"search_label",staticStyle:{width:"90px"}},[s("span",{staticClass:"required-span"},[e._v("* ")]),e._v("模板名称：")]),s("div",{staticClass:"search_input"},[s("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.templateName,callback:function(t){e.templateName=t},expression:"templateName"}})],1)]):e._e(),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.templateDia=!1}}},[e._v("取 消")]),s("el-button",{attrs:{loading:e.templateLoading,type:"primary"},on:{click:e.addTemplateDia}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.issuedDialogVisible,title:"检验下发",width:"400px"},on:{"update:visible":function(t){e.issuedDialogVisible=t}}},[s("div",{staticClass:"body",staticStyle:{"max-height":"60vh"}},[s("el-row",[s("el-col",{staticClass:"search_thing",attrs:{span:22}},[s("div",{staticClass:"search_label"},[s("span",{staticClass:"required-span"},[e._v("* ")]),e._v("约定时间：")]),s("div",{staticClass:"search_input"},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.distributeData.appointed,callback:function(t){e.$set(e.distributeData,"appointed",t)},expression:"distributeData.appointed"}})],1)]),s("el-col",{staticClass:"search_thing",attrs:{span:22}},[s("div",{staticClass:"search_label"},[s("span",{staticClass:"required-span"},[e._v("* ")]),e._v("指派人员：")]),s("div",{staticClass:"search_input"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:e.changeUser},model:{value:e.distributeData.userId,callback:function(t){e.$set(e.distributeData,"userId",t)},expression:"distributeData.userId"}},e._l(e.personList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),e.distributeData.userId?s("el-col",{staticClass:"search_thing",attrs:{span:22}},[s("div",{staticClass:"search_label"},[s("span",{staticClass:"required-span"},[e._v("* ")]),e._v("试验室：")]),s("div",{staticClass:"search_input"},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:e.distributeData.sonLaboratory,callback:function(t){e.$set(e.distributeData,"sonLaboratory",t)},expression:"distributeData.sonLaboratory"}},e._l(e.sonLaboratoryList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):e._e()],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-row",[s("el-button",{on:{click:function(t){e.issuedDialogVisible=!1,e.closeOpenPage}}},[e._v("取 消")]),s("el-button",{attrs:{loading:e.upLoad,type:"primary"},on:{click:e.submitForm2}},[e._v("确 定")])],1)],1)]),s("el-dialog",{attrs:{visible:e.noDialogVisible,title:"不通过原因",width:"400px"},on:{"update:visible":function(t){e.noDialogVisible=t}}},[s("div",{staticClass:"body",staticStyle:{"max-height":"60vh"}},[s("el-row",[s("el-col",{staticClass:"search_thing",attrs:{span:22}},[s("div",{staticClass:"search_label"},[s("span",{staticClass:"required-span"},[e._v("* ")]),e._v("不通过原因：")]),s("div",{staticClass:"search_input"},[s("el-input",{attrs:{placeholder:"请输入不通过原因",size:"small"},model:{value:e.tell,callback:function(t){e.tell=t},expression:"tell"}})],1)])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-row",[s("el-button",{on:{click:function(t){e.noDialogVisible=!1,e.tell=""}}},[e._v("取 消")]),s("el-button",{attrs:{loading:e.noLoading,type:"primary"},on:{click:e.submitTell}},[e._v("确 定")])],1)],1)]),e.cableConfigShow?s("cableConfig",{ref:"cableConfigShow",attrs:{active:e.active,isSpecial:e.isSpecial,sampleSelectionList:e.sampleSelectionList},on:{goBackAdd:e.goBackAdd}}):e._e(),e.auxiliaryShow?s("auxiliary-wire-core",{attrs:{active:e.active,isSpecial:e.isSpecial,sampleSelectionList:e.sampleSelectionList},on:{goBackAdd2:e.goBackAdd2}}):e._e(),s("el-dialog",{attrs:{"before-close":e.beforeClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.bsm1DiaAll,"min-width":"400px",title:"检测到特殊项，请作出以下选择"},on:{"update:visible":function(t){e.bsm1DiaAll=t}}},[e._l(e.bsm1DiaList,(function(t,a){return s("div",{key:t.id,staticClass:"body",staticStyle:{"max-height":"60vh"}},[s("span",[e._v(e._s(t.inspectionItem))]),t.bsm1?s("el-row",[s("el-col",{staticClass:"search_thing",staticStyle:{height:"initial",margin:"5px 0"},attrs:{span:24}},[s("div",{staticClass:"search_label",staticStyle:{width:"80px"}},[s("span",{staticClass:"required-span"},[e._v("* ")]),e._v("选项：")]),s("div",{staticClass:"search_input"},[s("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],on:{input:function(s){return e.upBsmAll(t)}},model:{value:t.bsm1Val,callback:function(s){e.$set(t,"bsm1Val",s)},expression:"item.bsm1Val"}},e._l(JSON.parse(t.bsmRow.sectionCopy),(function(e,t){return s("el-radio",{key:t,staticStyle:{"margin-bottom":"2px","margin-top":"2px"},attrs:{label:e}})})),1)],1)]),s("el-col",{staticClass:"search_thing",staticStyle:{height:"initial",margin:"5px 0"},attrs:{span:24}},[s("div",{staticClass:"search_label",staticStyle:{width:"80px"}},[e._v("要求值：")]),s("div",{staticClass:"search_input"},[s("el-radio-group",{directives:[{name:"removeAriaHidden",rawName:"v-removeAriaHidden"}],on:{input:function(s){return e.upBsmAll(t)}},model:{value:t.bsm1Val,callback:function(s){e.$set(t,"bsm1Val",s)},expression:"item.bsm1Val"}},e._l(JSON.parse(t.bsmRow.sectionCopy),(function(a,i){return s("el-radio",{key:i,attrs:{label:a}},[e._v(e._s(JSON.parse(t.bsmRow.askCopy)[i]))])})),1)],1)])],1):e._e()],1)})),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-row",[s("el-button",{attrs:{loading:e.saveLoad,type:"primary"},on:{click:e.save1}},[e._v("确 定")])],1)],1)],2),s("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.bsm3Dia,title:"区间值填写",width:"800px"},on:{"update:visible":function(t){e.bsm3Dia=t}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.editTable,height:"80vh"}},[s("el-table-column",{attrs:{label:"检验项",prop:"inspectionItemList",width:"180"}}),s("el-table-column",{attrs:{label:"样品编号",prop:"sampleCode",width:"180"}}),s("el-table-column",{attrs:{label:"样品型号",prop:"model",width:"180"}}),s("el-table-column",{attrs:{label:"识别符号",prop:"symbolItem"}}),s("el-table-column",{attrs:{label:"识别符值",prop:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"请输入",size:"small"},on:{input:function(s){return e.inputValueHandler(t.row,t.$index)}},model:{value:t.row.value,callback:function(s){e.$set(t.row,"value",s)},expression:"scope.row.value"}})]}}])})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-row",[s("el-button",{on:{click:function(t){e.bsm3Dia=!1}}},[e._v("取 消")]),s("el-button",{attrs:{loading:e.saveLoad,type:"primary"},on:{click:e.save0}},[e._v("确 定")])],1)],1)],1)],1)},i=[],l=s("9476"),o=l["a"],r=(s("8666"),s("2877")),_=Object(r["a"])(o,a,i,!1,null,"339a28e6",null);t["default"]=_.exports},8666:function(e,t,s){"use strict";s("e676")},9476:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2909"),D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ade3"),D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5530"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c740"),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("a434"),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("07ac"),core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_set_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("6062"),core_js_modules_es_set_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_set_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("1e70"),core_js_modules_es_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_set_difference_v2_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("79a4"),core_js_modules_es_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_set_intersection_v2_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("c1a1"),core_js_modules_es_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_set_is_disjoint_from_v2_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("8b00"),core_js_modules_es_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_set_is_subset_of_v2_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("a4e7"),core_js_modules_es_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_set_is_superset_of_v2_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("1e5a"),core_js_modules_es_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_set_symmetric_difference_v2_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_set_union_v2_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("72c3"),core_js_modules_es_set_union_v2_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_set_union_v2_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("5b81"),core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("841c"),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("0643"),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_esnext_iterator_every_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("76d6"),core_js_modules_esnext_iterator_every_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_esnext_iterator_every_js__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("2382"),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_34__),core_js_modules_esnext_iterator_find_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("fffc"),core_js_modules_esnext_iterator_find_js__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(core_js_modules_esnext_iterator_find_js__WEBPACK_IMPORTED_MODULE_35__),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("4e3e"),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_36__),core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("a573"),core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_37__),core_js_modules_esnext_iterator_some_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("9a9a"),core_js_modules_esnext_iterator_some_js__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(core_js_modules_esnext_iterator_some_js__WEBPACK_IMPORTED_MODULE_38__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_39__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_40__),_cable_config_vue__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("c03f"),_auxiliaryWireCore_vue__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("58d5"),_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("2381"),_api_business_add__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("2771"),_api_performance_class__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("b9fe"),_api_standard_standardLibrary__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("0180"),_components_Table_lims_table_vue__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("00d5"),_api_system_customer__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("5fd5"),vuex__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__("2f62");__webpack_exports__["a"]={name:"AddView",components:{limsTable:_components_Table_lims_table_vue__WEBPACK_IMPORTED_MODULE_47__["a"],cableConfig:_cable_config_vue__WEBPACK_IMPORTED_MODULE_41__["default"],AuxiliaryWireCore:_auxiliaryWireCore_vue__WEBPACK_IMPORTED_MODULE_42__["default"]},computed:Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_49__["b"])(["nickName"])),dicts:["check_type1","urgency_level","form_type","sample_status_list"],data:function(){return{active:"",tabIndex:"",currentId:"",sampleSelectionList:[],editTable:[],template:null,templates:[],addObj:{entrustCode:null,custom:null,company:null,userId:null,type:"0",code:null,appointed:null,remark:null,remarkEn:null,sample:null,factory:null,laboratory:null,sampleType:null,sampleNum:1,unit:null,model:null,method:null,phone:null,processing:1,isLeave:0,orderType:null,send:1,formType:"送检",sampleStatus:"In good condition",testQuantity:"",production:null,productionEn:null,companyId:null,prepareUser:null,prepareUserEn:null,prepareCode:"",quarterItemId:"",sampleView:"",sampleViewEn:""},addObjRules:{orderType:[{required:!0,message:"请选择检验类别",trigger:"change"}],company:[{required:!0,message:"请选择委托单位",trigger:"change"}],phone:[{required:!0,message:"请填写联系方式",trigger:"blur"}],type:[{required:!0,message:"请选择紧急程度",trigger:"change"}],sample:[{required:!0,message:"请选择样品名称",trigger:"change"}],sampleNum:[{required:!0,message:"请填写样品数量",trigger:"blur"}],sampleStatus:[{required:!0,message:"请选择样品状态",trigger:"change"}],formType:[{required:!0,message:"请选择来样方式",trigger:"change"}],testQuantity:[{required:!0,message:"请填写抽检数量",trigger:"blur"}],production:[{required:!0,message:"请填写生产单位",trigger:"blur"}],productionEn:[{required:!0,message:"请填写生产单位EN",trigger:"blur"}]},sample:{sampleCode:null,laboratory:null,factory:null,sampleType:null,sample:null,model:null,modelNum:null,sampleNum:1,isLeave:0,unit:null},type:[],selectUserDia:!1,tableData1:[],tableLoading1:!1,multipleSelection:[],column1:[{label:"客户名称",prop:"company"},{label:"客户单位EN",prop:"companyEn"},{label:"单位地址",prop:"address"},{label:"单位地址EN",prop:"addressEn"},{label:"单位电话",prop:"phone"},{label:"加急额度",prop:"num"},{label:"客户编号",prop:"code2"},{label:"工厂域",prop:"code"}],page1:{total:0,size:10,current:1},selectStandardTree:!1,search:null,list:[],selectStandardTreeLoading:!1,selectTree:null,sampleViewEn:null,expandedKeys:[],sampleList:[],upIndex:0,sampleIds:[],methodList:[],addSampleDia:!1,count:1,productList:[],productList0:[],bsm1DiaList:[],productIds:[],getProductLoad:!1,saveLoad:!1,templateDia:!1,templateLoading:!1,templateName:"",issuedDialogVisible:!1,distributeData:{appointed:"",userId:"",sonLaboratory:""},personList:[],upLoad:!1,models:[],methods:[],methodLoad:!1,noDialogVisible:!1,tell:"",noLoading:!1,orderType:[],filters:[],formType:[],currentMethod:null,isAskOnlyRead:!1,sampleId:null,bsmRow:null,bsm1:!1,bsm1Val:null,bsm1DiaAll:!1,cableConfigShow:!1,auxiliaryShow:!1,bsm3Dia:!1,RTS:"",totalArr:[],addObj1:{},model:null,standardMethodListId:null,symbolList:["RTS"],inspectionItem:null,inspectionItemSubclass:null,methodS:null,isBsm2Val2:!1,temperatureEngList:[],isShowInput:!1,temId:"",sonLaboratoryList:[],selectiveEcho:[],quarterItemOptions:[],specialStandardMethod:"",isSpecial:!1}},watch:Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__["a"])({sampleList:function(){this.addObj.method=null,this.productList=[]},productList:{deep:!0,handler:function(e){if(e&&e.length>0){var t=[];e.forEach((function(e){e.sonLaboratory&&!t.find((function(t){return t.value==e.sonLaboratory}))&&t.push({text:e.sonLaboratory,value:e.sonLaboratory})})),this.filters=t}}}},"sampleList",{deep:!0,handler:function(e){this.getTotal()}}),"addObj.sample",(function(e){this.model=null,this.standardMethodListId=null})),"addObj.sampleNum",(function(e){this.model=null,this.standardMethodListId=null})),"tabIndex",(function(e){4==e&&2==this.active?this.isSpecial=!0:this.isSpecial=!1})),mounted:function(){this.active=this.$route.query.active,this.tabIndex=this.$route.query.tabIndex,this.currentId=this.$route.query.currentId,this.getInfo()},activated:function(){this.active=this.$route.query.active,this.tabIndex=this.$route.query.tabIndex,this.currentId=this.$route.query.currentId,this.getInfo()},methods:{getInfo:function(){var e=this;this.selectStandardTreeList(),this.getAuthorizedPerson(),this.selectStandardMethods(),this.getPrepareUser(),1!=this.active&&Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["o"])({orderId:this.currentId}).then((function(t){e.addObj=Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__["a"])({},t.data.insOrder),e.addObj.type=String(e.addObj.type),e.sampleList=e.HaveJson(t.data.sampleProduct),e.specialStandardMethod=e.sampleList[0].specialStandardMethod,e.getProNum(),e.addObj.sampleNum=e.sampleList.length,e.$nextTick((function(){e.$refs.sampleTable.doLayout(),e.addObj.sampleNum>0&&(e.$refs.sampleTable.setCurrentRow(e.sampleList[0],!0),e.rowClick(e.sampleList[0]))}))})),4==this.tabIndex&&2==this.active?this.isSpecial=!0:this.isSpecial=!1},getPrepareUser:function(){},editSpecial:function(){var e=this;this.isSpecial=!0,this.$nextTick((function(){e.$refs.productTable.doLayout()}))},getQuarterOnOrderList:function(){var e=this;Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["d"])().then((function(t){200===t.code&&(e.quarterItemOptions=t.data)}))},inputValueHandler:function(e,t){if(e)for(var s=t+1,a=s;a<this.editTable.length;a++){var i=this.editTable[a];i.model==e.model&&e.symbolItem==i.symbolItem&&(this.editTable[a].value=e.value)}},changeProductList0:function(){var e=this;this.productList0.forEach((function(t){var s=e.productList.find((function(e){return t.repetitionTag?e.id===t.id&&e.repetitionTag==t.repetitionTag:e.id===t.id&&!e.repetitionTag}));s&&(t.state=s.state,t.section=s.section,t.ask=s.ask,t.manHour=s.manHour,t.price=s.price,t.tell=s.tell,t.radius=s.radius),0==t.state&&t.bsmRow&&(t=e.HaveJson(t.bsmRow))}))},searchFilterList:function(){var e=this,t={inspectionItem:this.inspectionItem,inspectionItemSubclass:this.inspectionItemSubclass,methodS:this.methodS},s=Object.values(t).some((function(e){return e}));if(this.changeProductList0(),s){var a=function(s){t[s]&&(e.productList=e.productList0.filter((function(e){return e[s]&&e[s].includes(t[s])})))};for(var i in t)a(i);this.$nextTick((function(){e.productList.forEach((function(t){1==t.state&&e.toggleSelection(t)}))}))}else this.productList=this.productList0,this.$nextTick((function(){e.productList.forEach((function(t){1==t.state&&e.toggleSelection(t)}))}))},getAuthorizedPerson:function(){var e=this;Object(_api_performance_class__WEBPACK_IMPORTED_MODULE_45__["g"])({type:1}).then((function(t){var s=[];t.data.forEach((function(e){s.push({label:e.name,value:e.id})})),e.personList=s}))},openCompanyList:function(){this.selectUserDia=!0,this.getCompanyList()},getCompanyList:function(){var e=this;Object(_api_system_customer__WEBPACK_IMPORTED_MODULE_48__["c"])(Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__["a"])({},this.page1)).then((function(t){e.tableLoading1=!1,200===t.code&&(e.tableData1=t.data.records,e.page1.total=t.data.total)})).catch((function(t){e.tableLoading1=!1}))},pagination1:function(e){this.page1.size=e.limit,this.getCompanyList()},selectMethod:function(e){this.multipleSelection=e},selectUser:function(){0!==this.multipleSelection.length?(this.addObj.company=this.multipleSelection[0].company,this.addObj.code=this.multipleSelection[0].code,this.addObj.companyId=this.multipleSelection[0].id,this.selectUserDia=!1,1==this.active&&this.selectInsOrderTemplate()):this.$message.error("未选择数据")},containsValue:function(e){if(e){var t="";return this.symbolList.some((function(s){if(e.includes(s))return t=s,!0})),t}},handleAsk:function handleAsk(ask,symbolItem,value){var _this8=this;try{var code=[">","<","=","＞","＜","≥","≤","±"],code2=["+","*","/","-"];if(ask.includes("&")){var arr0=ask.split("&"),arr1=[];return arr0.forEach((function(m){var index=code.findIndex((function(e){return m.includes(e)}));if(index>-1){var arr=m.split(code[index]).filter((function(e){return!!e})),num=eval(_this8.replaceAll(arr[0],symbolItem,value));m=code[index]+""+num,arr1.push(m)}})),arr1.join("&")}if(ask.includes("～")||ask.includes("~")){var _arr=[];_arr=ask.includes("～")?ask.split("～"):ask.split("~");var _arr2=[];return _arr.forEach((function(m){m=m.replace(symbolItem,value);var index=code2.findIndex((function(e){return m.includes(e)}));index>-1&&(m=eval(m)),_arr2.push(m)})),_arr2.join("～")}var index=code.findIndex((function(e){return ask.includes(e)}));if(index>-1){var arr=ask.split(code[index]).filter((function(e){return!!e})),num=eval(this.replaceAll(arr[0],symbolItem,value));return code[index]+""+num}}catch(e){}},replaceAll:function(e,t,s){return void 0===e?e:e.replaceAll(t,s)},save:function(){var e=this;this.$refs["addObj"].validate((function(t){if(t){e.sampleList.forEach((function(t){t.specialStandardMethod=e.specialStandardMethod}));try{e.sampleList.forEach((function(t){if(t.insulating){var s=[],a=[];t.insProduct.filter((function(e){return 1==e.state})).forEach((function(e){s.push(e.id)})),t.insulating.insProduct.filter((function(e){return 1==e.state})).forEach((function(e){a.push(e.id)}));var i=s.filter((function(e){return a.indexOf(e)>-1})).length;throw i>0&&e.$message.error("检验项与电缆配置检验项不能重复"),i>0}}))}catch(l){if(console.log("e---",l),!0===l)throw l}var s=e.HaveJson(e.sampleList);s.forEach((function(t){t.insProduct.length>0&&t.insProduct.forEach((function(t){4!=e.tabIndex&&delete t.id})),t.endModels&&(t.model=t.endModels),t.insProduct=t.insProduct.filter((function(e){return 1===e.state}))}));var a=e.totalArr.filter((function(e){return 1==e.state})).length;if(0==a)e.$confirm("检验项目为空，是否确认提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.saveMethod(s)})).catch((function(){}));else{var i=e.totalArr.find((function(t){return null!=t.ask&&e.symbolList.find((function(e){return t.ask.includes(e)}))&&1==t.state}));if(i)return e.editTable=e.handleData(s,e.containsValue,0),e.editTable.forEach((function(e){e.value=e.modelNum})),void(e.bsm3Dia=!0);e.saveMethod(s)}}}))},save0:function(){var e=this;if(this.editTable.every((function(e){return e.value}))){var t=this.handleData(this.HaveJson(this.sampleList),this.handleAsk,1);t.forEach((function(t){t.insProduct.length>0&&t.insProduct.forEach((function(t){4!=e.tabIndex&&delete t.id})),t.endModels&&(t.model=t.endModels),t.insProduct=t.insProduct.filter((function(e){return 1===e.state}))})),this.saveMethod(t)}else this.$message.error("请填写识别符值")},handleData:function(e,t,s){var a=this,i=[];if(e.forEach((function(e){var l={sampleCode:e.sampleCode,model:e.model,symbolList:[],sampleId:e.id,modelNum:e.modelNum};e.insProduct&&e.insProduct.length>0&&e.insProduct.forEach((function(i){if(1==i.state)if(0==s){var o=t(i.ask);o&&l.symbolList.push({symbolItem:o,inspectionItem:i.inspectionItem})}else if(1==s)for(var r=a.editTable.filter((function(t){return t.sampleId==e.id})),_=0;_<r.length;_++)if(i.ask){if(i.ask.includes(r[_].symbolItem)){var n=t(i.ask,r[_].symbolItem,r[_].value);n&&(i.ask=n);var d=a.handleAsk(i.tell,r[_].symbolItem,r[_].value);d&&(i.tell=d)}}else a.$message.error("要求值为空，需要去标准库维护！")})),0==s&&i.push(l)})),0==s){i.forEach((function(e){e.symbolList.forEach((function(t){var s=e.symbolList.filter((function(e){return e.symbolItem==t.symbolItem}));t.inspectionItemList=s.map((function(e){return e.inspectionItem})).join(",")}))})),i.forEach((function(e){var t=new Set;e.symbolList=e.symbolList.filter((function(e){var s=t.size;t.add(e.symbolItem);var a=t.size;return s!=a}))}));var l=[];return i.forEach((function(e){e.symbolList.forEach((function(t){var s={sampleCode:e.sampleCode,model:e.model,symbolItem:t.symbolItem,sampleId:e.sampleId,value:null,inspectionItemList:t.inspectionItemList,modelNum:e.modelNum};l.push(s)}))})),l}return e},saveMethod:function(e){var t=this;this.saveLoad=!0,this.addObj.quarterItemId&&(this.addObj.quarterItemId=this.addObj.quarterItemId[1]),4==this.tabIndex&&2==this.active?(this.addObj.createTime&&delete this.addObj.createTime,Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["i"])({insOrder:this.addObj,sampleProduct:e}).then((function(e){t.saveLoad=!1,t.$message.success("已提交"),t.bsm3Dia=!1,t.closeOpenPage()})).catch((function(e){t.saveLoad=!1}))):Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["a"])({insOrder:this.addObj,sampleList:e}).then((function(e){t.saveLoad=!1,t.$message.success("已提交"),t.bsm3Dia=!1,t.closeOpenPage()})).catch((function(e){t.saveLoad=!1}))},upInsOrderOfState:function(e){var t=this;1==e?(this.saveLoad=!0,Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["h"])({state:e,id:this.currentId,companyId:this.addObj.companyId,laboratory:this.addObj.laboratory,company:this.addObj.company}).then((function(e){t.saveLoad=!1,t.$message.success("提交成功"),Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["f"])({id:t.currentId}).then((function(e){t.distributeData.orderId=t.currentId,t.distributeData.appointed=e.data})),setTimeout((function(){t.issuedDialogVisible=!0}),1e3)}))):this.noDialogVisible=!0},submitForm2:function(){var e=this;null!=this.distributeData.appointed&&""!=this.distributeData.appointed?null!=this.distributeData.userId&&""!=this.distributeData.userId?!this.distributeData.userId||null!=this.distributeData.sonLaboratory&&""!=this.distributeData.sonLaboratory?(this.upLoad=!0,Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["g"])({orderId:this.distributeData.orderId,appointed:this.distributeData.appointed,userId:this.distributeData.userId,sonLaboratory:this.distributeData.sonLaboratory}).then((function(t){e.$message.success("提交成功"),e.upLoad=!1,e.issuedDialogVisible=!1,e.closeOpenPage()})).catch((function(t){e.$message.error("提交失败"),e.upLoad=!1}))):this.$message.error("试验室未填写"):this.$message.error("指派人员未填写"):this.$message.error("约定时间未填写")},getUserNowData:function(){var e=this;Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["q"])().then((function(t){var s=t.data;null!=s&&(e.addObj.userId=s.id,e.addObj.company=s.company,e.addObj.custom=s.name,e.addObj.code=s.code,e.addObj.phone=s.phone,e.addObj.companyId=s.departId,e.addObj.production="中天科技装备电缆有限公司",e.addObj.productionEn="Zhongtian Technology Industrial Wire&Cable System CO.,LTD",1==e.active&&e.selectInsOrderTemplate())}))},getProNum:function(){var e=this;this.sampleSelectionList.forEach((function(t,s){e.$set(e.sampleSelectionList[s],"proNum",t.insProduct.filter((function(e){return 1==e.state})).length)})),this.$refs.sampleTable.doLayout()},searchFilter:function(){this.$refs.tree.filter(this.search)},nodeOpen:function(e,t,s){$($(s.$el).find(".node_i")[0]).attr("class","node_i el-icon-folder-opened"),"[3]"===t.data.code?this.sampleViewEn=e.sampleTypeEn:"[4]"===t.data.code&&(this.sampleViewEn=e.sampleEn)},nodeClose:function(e,t,s){$($(s.$el).find(".node_i")[0]).attr("class","node_i el-icon-folder")},handleNodeClick:function(e,t,s){this.selectTree="",this.models=e.children,this.getNodeParent(t);var a=!1;3==t.level&&t.data.children.length>0&&t.data.children.forEach((function(e){var t=Object.keys(e);t.includes("level")||(a=!0)})),"[3]"===t.data.code?this.sampleViewEn=e.sampleTypeEn:"[4]"===t.data.code&&null!==t.data.children&&t.data.children.length>0&&(this.sampleViewEn=e.sampleEn),this.selectTree=this.selectTree.replace(" - ",""),a&&(this.selectTree=" -  - "+this.selectTree);for(var i=this.selectTree.split(" - "),l="",o=i.length-1;o>=0;o--)l+=" - "+i[o];this.selectTree=l.replace(" - ","")},getNodeParent:function(e){null!=e.parent&&(null===e.data.children?this.selectTree+=" - "+e.label+" - ":this.selectTree+=" - "+e.label,this.getNodeParent(e.parent))},selectStandardTreeList:function(){var e=this;this.selectStandardTreeLoading=!0,Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["F"])().then((function(t){e.list=t.data,e.list.forEach((function(t){e.expandedKeys.push(t.label)})),e.selectStandardTreeLoading=!1}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},activeStandardTree:function(){var e=this.selectTree.split(" - ");if(e.length<3)this.$message.error("未选择对象");else{this.addObj.factory=e[0],this.addObj.laboratory=e[1],this.addObj.sampleType=e[2],void 0===e[3]||""===e[3]||"- "===e[3]?this.addObj.sample=e[2]:this.addObj.sample=e[3],this.addObj.sampleView=this.addObj.sample,this.addObj.sampleViewEn=this.sampleViewEn,this.addObj.model=void 0==e[4]?null:e[4],this.selectStandardTree=!1,this.sampleList=[];for(var t=0;t<this.addObj.sampleNum;t++)this.sample.joinName=null,this.sample.joinModel=null,this.sample.joinNum=1,this.sample.sample=this.addObj.sample,this.sample.model=this.addObj.model,this.sample.unit=this.addObj.unit,this.sample.standardMethodListId=null,this.sample.insProduct=[],this.sample.id=this.count,this.sample.childSampleList=[],this.sample.insulating=null,this.sample.sheath=null,this.sampleList.push(this.HaveJson(this.sample)),this.count++;this.$refs.sampleTable.doLayout()}},selectsStandardMethodByFLSSMList:function(){var e=this;this.methodLoad=!0,Object(_api_standard_standardLibrary__WEBPACK_IMPORTED_MODULE_46__["s"])({tree:this.selectTree}).then((function(t){e.methodLoad=!1;try{if(0==t.data.standardMethodList.length&&5==e.selectTree.split("-").length){var s=e.selectTree.split("-"),a=s.slice(0,s.length-1),i=a.join("-").substring(0,a.join("-").length-1);Object(_api_standard_standardLibrary__WEBPACK_IMPORTED_MODULE_46__["s"])({tree:i}).then((function(t){e.methods=t.data.standardMethodList}))}else e.methods=t.data.standardMethodList}catch(l){}}))},addStandardTree:function(){if(null!=this.selectTree){this.sampleList=[],this.productList=[];for(var e=0;e<this.addObj.sampleNum;e++)this.sample.joinName=null,this.sample.joinModel=null,this.sample.joinNum=1,this.sample.sample=this.addObj.sample,this.sample.model=this.addObj.model,this.sample.unit=this.addObj.unit,this.sample.standardMethodListId=null,this.sample.insProduct=[],this.sample.id=parseInt(e+1),this.sample.childSampleList=[],this.sample.insulating=null,this.sample.sheath=null,this.sampleList.push(this.HaveJson(this.sample))}},selectSample:function(e){var t=this;this.sampleIds=[],e.forEach((function(e){t.sampleIds.push(e.id)})),this.sampleSelectionList=e},selectProduct:function(e){var t=this;this.productIds=[],e.forEach((function(e){t.productIds.push(e.id)}))},rowClick:function(e,t,s){var a=this;this.currentMethod=e;var i=this.methods.find((function(e){return e.id==a.currentMethod.standardMethodListId}));i&&"技术要求"==i.code?this.isAskOnlyRead=!0:this.isAskOnlyRead=!1,this.sampleId=e.id,1!==this.active&&(this.sampleIds=[],this.sampleSelectionList.forEach((function(t){t.id==e.id&&a.sampleIds.push(e.id)}))),this.productList=e.insProduct,this.productList0=JSON.parse(JSON.stringify(this.productList)),setTimeout((function(){a.productList.forEach((function(e){1==e.state?a.toggleSelection(e):a.$refs.productTable.toggleRowSelection(e,!1)}))}),200)},toggleSelection:function(e){this.$refs.productTable.toggleRowSelection(e,!0)},selectOne:function(e,t){var s=this;this.bsm1DiaList=[],t.state=1==t.state?0:1,null===t.section&&(t.section=""),void 0===t.sectionCopy&&t.section&&t.section.indexOf("[")>-1&&this.$set(t,"sectionCopy",t.section),t.ask.includes("[")&&this.$set(t,"askCopy",t.ask),t.tell.includes("[")&&this.$set(t,"tellCopy",t.tell);var a=this.productList.filter((function(e){return 1==e.state&&t.sectionCopy&&t.sectionCopy.includes(e.sectionCopy)&&e.ask&&-1==e.sectionCopy.indexOf("[")}));if("1"===t.bsm&&""!==t.sectionCopy&&null!==t.sectionCopy&&void 0!==t.sectionCopy&&1===t.state&&0==a.length)t.sectionCopy.indexOf("[")>-1&&(t.bsmRow=this.HaveJson(t)),t.bsm1=!0,this.bsm1DiaList.push(t),this.bsm1DiaAll=!0;else if("1"===t.bsm&&""!==t.sectionCopy&&null!==t.sectionCopy&&0===t.state&&0==a.length)t.bsm1=!1;else if(a.length>0)try{t.bsmRow=this.HaveJson(t);var i=a[0].sectionCopy,l=JSON.parse(t.sectionCopy),o=JSON.parse(t.ask),r=JSON.parse(t.tell),_=l.indexOf(i);t.sectionCopy=i,t.ask=o[_],t.tell=r[_]}catch(n){}this.sampleList.forEach((function(e){(s.sampleIds.indexOf(e.id)>-1||s.currentMethod.id==e.id)&&e.insProduct.forEach((function(e){e.id==t.id&&(e.state=t.state)}))})),this.productList.forEach((function(e){e.id==t.id&&(e.state=t.state)})),this.changeProductList0(),this.currentMethod.insProduct=this.productList0,this.getProNum()},permute:function(e){var t=[];function s(e,a){if(2!==e.length)for(var i=0;i<a.length;i++)e.includes(a[i])||e.length>0&&a[i]<e[e.length-1]||(e.push(a[i]),s(e,a),e.pop());else t.push(Object(D_Projects_Lims_ztt_lims_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e))}return s([],e),t},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1==t.state?"warning-row":""},selectInsOrderTemplate:function(){var e=this;Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["z"])({company:this.addObj.company}).then((function(t){e.templates=t.data}))},handleDelete:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["c"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.selectInsOrderTemplate()})).catch((function(e){t.$message.error("删除失败")}))})).catch((function(){}))},addTemplateDia:function(){var e=this;this.templateName?(this.templateLoading=!0,Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["b"])({name:this.templateName,thing:JSON.stringify({addObj:this.addObj,sampleList:this.sampleList,selectTree:this.selectTree})}).then((function(t){e.templateLoading=!1,e.templateDia=!1,e.$message.success("保存成功"),e.selectInsOrderTemplate(),e.templateName=""})).catch((function(t){e.templateLoading=!1}))):this.$message.error("请填写模板名称")},selectInsOrderTemplateById:function(e){var t=this;Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["e"])({id:e}).then((function(e){var s=JSON.parse(e.data),a=t.nickName;s.addObj.custom=a.name,s.addObj.userId=a.userId,t.addObj=s.addObj,t.sampleList=s.sampleList,t.selectTree=s.selectTree,t.rowClick(t.sampleList[0])}))},delSampleAndProduct:function(){this.sampleList.splice(scope.$index,1),this.productList=[]},spliceString:function(e,t,s){var a=this;if("cores"===s){var i=this.sampleList.findIndex((function(t){return t.id===e.id}));i>-1&&(this.sampleList[i].modelNum?this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+" "+this.sampleList[i].cores+"*"+this.sampleList[i].modelNum):this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+" "+this.sampleList[i].cores),this.sampleList[i].modelNum&&!this.sampleList[i].cores&&this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+" "+this.sampleList[i].modelNum))}this.getProductLoad=!0;var l=this.selectTree.split(" - ");this.addObj.model&&(l[l.length-1]=this.addObj.model),Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["E"])({model:this.addObj.model?this.addObj.model:e.model,modelNum:e.modelNum,standardMethodListId:t,factory:l.join(" - "),cores:e.cores,conductorMaterial:e.conductorMaterial,conductorType:e.conductorType}).then((function(t){t.data.forEach((function(e){e.state=0})),e.insProduct=a.HaveJson(t.data),a.getProductLoad=!1,a.productList=e.insProduct,a.productList0=JSON.parse(JSON.stringify(a.productList)),a.$refs.sampleTable.setCurrentRow(e),a.$nextTick((function(){a.$refs.productTable.doLayout(),a.upIndex++})),setTimeout((function(){a.productList.forEach((function(e){1==e.state&&a.toggleSelection(e)}))}),200)}))},methodChange:function(e,t,s){var a=this;if("splice"===s){var i=this.sampleList.findIndex((function(e){return e.id===t.id}));if(i>-1){if(this.sampleList[i].cores)this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+" "+this.sampleList[i].cores+"*"+this.sampleList[i].modelNum);else if(this.sampleList[i].modelNum){var l=this.sampleList[i].modelNum.indexOf("×");0===l?this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+this.sampleList[i].modelNum):-1===l?this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+" "+this.sampleList[i].modelNum):this.$set(this.sampleList[i],"endModels",this.sampleList[i].modelNum+this.sampleList[i].model)}else this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+(null==this.sampleList[i].modelNum||""==this.sampleList[i].modelNum||"null"==this.sampleList[i].modelNum?"":" "+this.sampleList[i].modelNum));!this.sampleList[i].modelNum&&this.sampleList[i].cores&&this.$set(this.sampleList[i],"endModels",this.sampleList[i].model+" "+this.sampleList[i].cores)}}if(null!==e&&""!==e){this.currentMethod=t;var o=this.methods.find((function(e){return e.id==a.currentMethod.standardMethodListId}));o&&"技术要求"==o.code?this.isAskOnlyRead=!0:this.isAskOnlyRead=!1,this.getProductLoad=!0;var r=this.selectTree.split(" - ");this.addObj.model&&(r[r.length-1]=this.addObj.model),Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["E"])({model:this.addObj.model?this.addObj.model:t.model,modelNum:t.modelNum,standardMethodListId:e,cores:t.cores,factory:r.join(" - ")}).then((function(e){e.data.forEach((function(e){e.state=0})),t.insProduct=a.HaveJson(e.data),a.getProductLoad=!1,a.productList=t.insProduct,a.productList0=JSON.parse(JSON.stringify(a.productList)),a.$refs.sampleTable.setCurrentRow(t),setTimeout((function(){a.productList.forEach((function(e){1==e.state&&a.toggleSelection(e)}))}),200)}))}},changeModel:function(){var e=this;this.sampleList.forEach((function(t){var s=e.sampleIds.find((function(e){return e==t.id}));s&&(t.model=e.model)}))},changeStandardMethodListId:function(){var e=this;this.sampleList.forEach((function(t){var s=e.sampleIds.find((function(e){return e==t.id}));s&&(t.standardMethodListId=e.standardMethodListId,e.methodChange(e.standardMethodListId,t))}))},methodFocus:function(){this.selectsStandardMethodByFLSSMList()},handleChangeModel:function(e){this.productList=[];var t=this.selectTree.split("-").length;if(5!=t)this.selectTree=this.selectTree+" - "+e;else{var s=this.selectTree.split("-"),a=s.slice(0,s.length-1);this.selectTree=a.join("-")+"- "+e}},requestChange:function(e,t,s){var a=this;this.sampleList.forEach((function(i){i.id==a.currentMethod.id&&i.insProduct.forEach((function(a){a.id==t.id&&(t.repetitionTag?t.repetitionTag==a.repetitionTag&&(a[s]=e):a.repetitionTag||(a[s]=e))}))}))},selectStandardMethods:function(){var e=this;Object(_api_business_rawMaterialOrder__WEBPACK_IMPORTED_MODULE_43__["D"])().then((function(t){e.methods=t.data}))},selectable:function(){return!(this.active>1)},selectable0:function(e,t){return!(this.active>1||e.repetitionTag)},handleAll:function(e){var t=this;e.length>0?this.productList.map((function(t){return e.find((function(e){return e.id==t.id}))&&(t.state=1),t})):this.productList.map((function(e){return e.state=0,e})),this.bsm1DiaList=[],this.productList.forEach((function(e){void 0===e.sectionCopy&&e.section&&e.section.indexOf("[")>-1&&t.$set(e,"sectionCopy",e.section),e.ask.includes("[")&&t.$set(e,"askCopy",e.ask),e.tell.includes("[")&&t.$set(e,"tellCopy",e.tell),"1"===e.bsm&&""!==e.sectionCopy&&null!==e.sectionCopy&&void 0!==e.sectionCopy&&1===e.state?(e.sectionCopy.indexOf("[")>-1&&(e.bsmRow=t.HaveJson(e)),e.bsm1=!0,t.bsm1DiaList.push(e),t.bsm1DiaAll=!0):"1"===e.bsm&&""!==e.sectionCopy&&null!==e.sectionCopy&&0===e.state&&(e.bsm1=!1)})),e.length>0?this.sampleList.map((function(e){return(t.sampleIds.indexOf(e.id)>-1||t.currentMethod.id==e.id)&&e.insProduct.map((function(e){return e.state=1,e})),e})):this.sampleList.map((function(e){return(t.sampleIds.indexOf(e.id)>-1||t.currentMethod.id==e.id)&&e.insProduct.map((function(e){return e.state=0,e})),e})),this.productList.forEach((function(e){e.id==row.id&&(e.state=row.state)})),this.changeProductList0(),this.currentMethod.insProduct=this.productList0,this.getProNum(),this.$nextTick((function(){t.$refs.productTable.doLayout()}))},submitTell:function(){var e=this;this.tell?(this.noLoading=!0,Object(_api_business_add__WEBPACK_IMPORTED_MODULE_44__["h"])({state:2,id:this.currentId,tell:this.tell}).then((function(t){e.noLoading=!1,e.tell="",e.$message.success("提交成功"),e.issuedDialogVisible=!1,e.closeOpenPage()}))):this.$message.error("请输入不通过原因")},filterHandler:function(e,t,s){var a=s["property"];return t[a]===e},areObjectsValuesEqual:function(e,t){if(!e||0===e.length)return!1;var s=e[0][t];return e.every((function(e){return e[t]===s}))},openAuxiliaryCore:function(){if(1==this.active)if(0===this.sampleIds.length)this.$message.error("未选择样品");else if(1===this.sampleIds.length){if(!this.sampleSelectionList[0].standardMethodListId)return void this.$message.error("样品未选择检验标准");this.auxiliaryShow=!0}else if(this.sampleSelectionList.every((function(e){return e.standardMethodListId}))){if(!this.areObjectsValuesEqual(this.sampleSelectionList,"standardMethodListId"))return void this.$message.error("请选择相同的检验标准");this.auxiliaryShow=!0}else this.$message.error("样品未选择检验标准");else null===this.sampleId&&this.$message.error("未选中样品")},openCableConfig:function(){if(1==this.active)if(0===this.sampleIds.length)this.$message.error("未选择样品");else if(1===this.sampleIds.length){if(!this.sampleSelectionList[0].standardMethodListId)return void this.$message.error("样品未选择检验标准");this.cableConfigShow=!0}else if(this.sampleSelectionList.every((function(e){return e.standardMethodListId}))){if(!this.areObjectsValuesEqual(this.sampleSelectionList,"standardMethodListId"))return void this.$message.error("请选择相同的检验标准");this.cableConfigShow=!0}else this.$message.error("样品未选择检验标准");else null===this.sampleId&&this.$message.error("未选中样品")},goBackAdd:function(){this.cableConfigShow=!1},goBackAdd2:function(){this.auxiliaryShow=!1},upBsmAll:function(e){var t=this,s=this.bsm1DiaList.findIndex((function(t){return t.id===e.id}));if(s>-1){this.bsm1DiaList[s].bsm1Val=e.bsm1Val;var a=this.bsm1DiaList[s].bsmRow.sectionCopy&&JSON.parse(this.bsm1DiaList[s].bsmRow.sectionCopy),i=this.bsm1DiaList[s].bsmRow.askCopy&&JSON.parse(this.bsm1DiaList[s].bsmRow.askCopy),l=this.bsm1DiaList[s].bsmRow.tellCopy&&JSON.parse(this.bsm1DiaList[s].bsmRow.tellCopy);for(var o in a)if(this.bsm1DiaList[s].bsm1Val===a[o]){this.productList.forEach((function(e){e.id===t.bsm1DiaList[s].bsmRow.id&&(e.section=a[o],e.ask=i[o],e.tell=l[o])}));break}}this.changeProductList0(),this.currentMethod.insProduct=this.productList0},save1:function(){var e=this;this.bsm1DiaList.length>0&&this.bsm1DiaList.forEach((function(t){if(!t.bsm1Val)throw e.$message.error("特殊项目必须处理")})),this.bsm1DiaAll=!1},beforeClose:function(e){var t=this;this.bsm1DiaList.length>0&&this.bsm1DiaList.forEach((function(e){if(!e.bsm1Val)throw t.$message.error("特殊项目必须处理")})),e()},getTotal:function(){var e=this;this.totalArr=[],this.sampleList.forEach((function(t){t.insProduct&&t.insProduct.length>0&&t.insProduct.forEach((function(t){e.totalArr.push(t)}))}));var t=new Set,s=(this.totalArr.filter((function(e){if(1==e.state){var s=t.size;if(""!==e.manHourGroup&&e.manHourGroup){t.add(e.manHourGroup);var a=t.size;return a>s}return!0}})),this.totalArr.filter((function(e){return 1==e.state}))),a=new Set;this.sonLaboratoryList=[],s.forEach((function(t){var s=a.size;a.add(t.sonLaboratory);var i=a.size;i>s&&e.sonLaboratoryList.push({label:t.sonLaboratory,value:t.sonLaboratory})}))},changeUser:function(){this.sonLaboratoryList.length>0&&(this.distributeData.sonLaboratory=this.sonLaboratoryList[0].value)},addProductList:function(e,t,s){var a=e.filter((function(e){return e.id==t.id&&(e.delete=!1),e.id==t.id})),i=a.length,l=this.HaveJson(t);l.repetitionTag=i,l.delete=!0,e.splice(s+i,0,l),this.addProductList0(t,s)},addProductList0:function(e,t){var s=this.productList0.filter((function(t){return t.id==e.id&&(t.delete=!1),t.id==e.id})),a=s.length,i=this.HaveJson(e);i.repetitionTag=a,i.delete=!0,this.productList0.splice(t+a,0,i)},deleteProductList:function(e,t){t[e-1]&&t[e-1].repetitionTag&&(t[e-1].delete=!0),t.splice(e,1),this.deleteProductList0(e)},deleteProductList0:function(e){this.productList0[e-1]&&this.productList0[e-1].repetitionTag&&(this.productList0[e-1].delete=!0),this.productList0.splice(e,1)},goBack:function(){1==this.active?this.$router.go(-1):this.closeOpenPage()},closeOpenPage:function(){this.$router.go(-1),this.$tab.closeOpenPage()}}}},e676:function(e,t,s){}}]);