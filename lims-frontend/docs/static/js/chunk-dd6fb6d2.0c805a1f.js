(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd6fb6d2"],{"00ff":function(e,t,r){},2381:function(e,t,r){"use strict";r.d(t,"n",(function(){return a})),r.d(t,"l",(function(){return i})),r.d(t,"k",(function(){return o})),r.d(t,"m",(function(){return s})),r.d(t,"q",(function(){return l})),r.d(t,"D",(function(){return u})),r.d(t,"o",(function(){return c})),r.d(t,"r",(function(){return d})),r.d(t,"G",(function(){return p})),r.d(t,"h",(function(){return f})),r.d(t,"B",(function(){return h})),r.d(t,"A",(function(){return m})),r.d(t,"e",(function(){return b})),r.d(t,"a",(function(){return g})),r.d(t,"E",(function(){return v})),r.d(t,"H",(function(){return y})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return j})),r.d(t,"F",(function(){return I})),r.d(t,"z",(function(){return k})),r.d(t,"f",(function(){return x})),r.d(t,"w",(function(){return T})),r.d(t,"u",(function(){return S})),r.d(t,"x",(function(){return R})),r.d(t,"v",(function(){return P})),r.d(t,"t",(function(){return L})),r.d(t,"I",(function(){return A})),r.d(t,"s",(function(){return _})),r.d(t,"C",(function(){return V})),r.d(t,"p",(function(){return C})),r.d(t,"j",(function(){return D})),r.d(t,"i",(function(){return U})),r.d(t,"g",(function(){return $})),r.d(t,"y",(function(){return z}));var n=r("b775");function a(e){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByStateOne",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByOver",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByAll",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/rawMaterialOrder/getIfsByQuarter",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/system/newUser/getUserNow",method:"get"})}function u(e){return Object(n["a"])({url:"/standardTree/selectStandardMethodEnum",method:"get"})}function c(e){return Object(n["a"])({url:"/insOrder/getInsOrder",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/rawMaterialOrder/notificationRawOrder",method:"get",params:e})}function p(e){return Object(n["a"])({url:"/rawMaterialOrder/selectStandardTreeListByPartNo",method:"get",params:e})}function f(e){return Object(n["a"])({url:"/rawMaterialOrder/delRawMaterOrderTemplate",method:"delete",params:e})}function h(e){return Object(n["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplateById",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/rawMaterialOrder/selectRawMaterOrderTemplate",method:"get",params:e})}function b(e){return Object(n["a"])({url:"/rawMaterialOrder/addRawMaterOrderTemplate",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/rawMaterialOrder/addExemptionOrder",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/standardTree/selectStandardProductList",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/standardTree/selectsStandardMethodByFLSSM",method:"get",params:e})}function O(e){return Object(n["a"])({url:"/insOrder/addInsOrder",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/rawMaterialOrder/addRawCopperOrder",method:"post",data:e})}function j(e){return Object(n["a"])({url:"/rawMaterialOrder/addRawCopperOrderExemptionOrder",method:"post",data:e})}function I(){return Object(n["a"])({url:"/standardTree/selectStandardTreeList2",method:"get"})}function k(e){return Object(n["a"])({url:"/insOrder/selectInsOrderTemplate",method:"get",params:e})}function x(e){return Object(n["a"])({url:"/rawMaterialOrder/concessionRelease",method:"post",data:e})}function T(e){return Object(n["a"])({url:"/rawMaterialOrder/repealQuarterRawOrder",method:"post",data:e})}function S(e){return Object(n["a"])({url:"/rawMaterialOrder/rawOrderRelease",method:"post",data:e})}function R(e){return Object(n["a"])({url:"/rawMaterialOrder/revokeInspectionReport",method:"post",data:e})}function P(e){return Object(n["a"])({url:"/rawMaterialOrder/repealEnterRawOrder",method:"post",data:e})}function L(e){return Object(n["a"])({url:"/rawMaterialOrder/rawAllExport",method:"get",data:e,responseType:"blob"})}function A(e){return Object(n["a"])({url:"/insOrder/updateEntrustCode",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/rawMaterialOrder/printLabel",method:"post",data:e})}function V(e){return Object(n["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function C(e){return Object(n["a"])({url:"/insOrder/getRetestResult",method:"get",params:e})}function D(e){return Object(n["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function U(e){return Object(n["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function $(e){return Object(n["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function z(e){return Object(n["a"])({url:"/insOrderPlan/saveUnqualifiedContext",method:"post",data:e})}},"404b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",[n("el-form",{ref:"entity",attrs:{model:e.entity,size:"small",inline:!0}},[n("el-form-item",{attrs:{label:"报告编号",prop:"code"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.entity.code,callback:function(t){e.$set(e.entity,"code",t)},expression:"entity.code"}})],1),n("el-form-item",{attrs:{label:"状态",prop:"queryStatus"}},[n("el-select",{attrs:{clearable:"",size:"small"},on:{change:function(t){return e.refreshTable()}},model:{value:e.entity.queryStatus,callback:function(t){e.$set(e.entity,"queryStatus",t)},expression:"entity.queryStatus"}},e._l(e.queryStatusList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"下单类别",prop:"typeSource"}},[n("el-select",{attrs:{clearable:"",size:"small"},on:{change:function(t){return e.refreshTable()}},model:{value:e.entity.typeSource,callback:function(t){e.$set(e.entity,"typeSource",t)},expression:"entity.typeSource"}},e._l(e.typeSourceList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"检验类别",prop:"orderType"}},[n("el-select",{attrs:{clearable:"",size:"small"},on:{change:function(t){return e.refreshTable()}},model:{value:e.entity.orderType,callback:function(t){e.$set(e.entity,"orderType",t)},expression:"entity.orderType"}},e._l(e.orderTypeList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.refreshTable()}}},[e._v("查询")]),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.refresh()}}},[e._v("重置")])],1)],1)],1),n("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[n("el-button",{attrs:{loading:e.outLoading,size:"mini",type:"primary"},on:{click:e.handleDowns}},[e._v("批量下载")])],1),n("div",[n("lims-table",{key:"valueTableData",attrs:{tableData:e.valueTableData,column:e.column,page:e.page,tableLoading:e.tableLoading,isSelection:!0,handleSelectionChange:e.handleChange,height:"calc(100vh - 290px)"},on:{pagination:e.pagination},scopedSlots:e._u([{key:"action",fn:function(t){return n("div",{},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(r){return e.viewIssued(t.row)}}},[e._v("查看报告")]),n("el-upload",{ref:"upload1",staticStyle:{display:"inline",margin:"0 6px"},attrs:{action:e.fileAction1+"?id="+t.row.id,"auto-upload":!0,"before-upload":e.fileBeforeUpload1,headers:e.uploadHeader,"on-error":e.onError1,"on-success":e.handleSuccessUp1,"show-file-list":!1,accept:".doc,.docx"}},[n("el-button",{attrs:{size:"small",type:"text",disabled:0!=t.row.state||e.nickName!==t.row.writeUserName}},[e._v("上传")])],1),n("el-button",{attrs:{type:"text",size:"small",disabled:0!=t.row.state||e.nickName!==t.row.writeUserName},on:{click:function(r){return e.handleRestore(t.row)}}},[e._v("还原")]),n("el-button",{attrs:{type:"text",size:"small",disabled:0!=t.row.state||e.nickName!==t.row.writeUserName},on:{click:function(r){return e.sendBackTask(t.row)}}},[e._v("退回任务")]),n("el-button",{attrs:{type:"text",size:"small",disabled:0!=t.row.state||e.nickName!==t.row.writeUserName},on:{click:function(r){return e.handle(t.row)}}},[e._v("提交")]),n("el-button",{attrs:{type:"text",size:"small",disabled:null==t.row.state||0==t.row.state||1==t.row.isExamine||e.nickName!==t.row.examineUser},on:{click:function(r){return e.handleIssued(t.row)}}},[e._v("审核")]),n("el-button",{attrs:{type:"text",size:"small",disabled:null==t.row.state||0==t.row.state||0==t.row.isExamine||null==t.row.isExamine||1==t.row.isRatify||e.nickName!==t.row.ratifyUser},on:{click:function(r){return e.handleApprove(t.row)}}},[e._v("批准")]),n("el-popover",{staticStyle:{"margin-left":"6px"},attrs:{placement:"bottom",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[n("el-button",{attrs:{link:"",type:"text",size:"small"}},[e._v("更多")])]},proxy:!0}],null,!0)},[n("div",[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(r){return e.download(t.row)}}},[e._v("下载")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.viewInspectInfo(t.row)}}},[e._v("原始记录")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleFileLook(t.row)}}},[e._v("附件上传")])],1)])],1)}}])})],1),n("el-dialog",{attrs:{fullscreen:e.fullscreen,"modal-append-to-body":!1,visible:e.claimVisible,title:"在线编制",width:"22cm"},on:{"update:visible":function(t){e.claimVisible=t}}},[n("div",{staticClass:"full-screen"},[e.fullscreen?n("img",{staticStyle:{cursor:"pointer"},attrs:{alt:"",src:r("8abd")},on:{click:function(t){e.fullscreen=!1}}}):n("i",{staticClass:"el-icon-full-screen",staticStyle:{cursor:"pointer","font-size":"18px"},on:{click:function(t){e.fullscreen=!0}}})]),e.claimVisible?n("Word",{ref:"Word",class:{fullscreen:e.fullscreen},staticStyle:{height:"70vh"},attrs:{value:e.value}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.claimVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmClaim}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{fullscreen:e.fullscreen,"modal-append-to-body":!1,visible:e.issuedVisible,title:"报告审核",width:"80vw"},on:{"update:visible":function(t){e.issuedVisible=t}}},[n("div",{staticClass:"full-screen"},[e.fullscreen?n("img",{staticStyle:{cursor:"pointer"},attrs:{alt:"",src:r("8abd")},on:{click:function(t){e.fullscreen=!1}}}):n("i",{staticClass:"el-icon-full-screen",staticStyle:{cursor:"pointer","font-size":"18px"},on:{click:function(t){e.fullscreen=!0}}})]),e.issuedVisible?n("div",{staticStyle:{height:"70vh"}},[n("onlyoffice",{ref:"onlyoffice",staticStyle:{width:"100%",height:"100%"},attrs:{options:e.option}})],1):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:e.loadingIssued},on:{click:function(t){e.issuedReasonVisible=!0}}},[e._v("不通过")]),n("el-button",{attrs:{type:"primary"},on:{click:e.subIssued}},[e._v("通 过")])],1)]),n("el-dialog",{attrs:{"modal-append-to-body":!1,visible:e.issuedReasonVisible,title:"不通过原因",width:"400px"},on:{"update:visible":function(t){e.issuedReasonVisible=t}}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("不通过原因：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:e.loadingIssuedReason},on:{click:function(t){e.issuedReasonVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{loading:e.loadingIssuedReason,type:"primary"},on:{click:e.handleIssuedReason}},[e._v("确定")])],1)]),n("el-dialog",{attrs:{fullscreen:e.fullscreen,"modal-append-to-body":!1,visible:e.approveVisible,title:"报告批准",width:"80vw"},on:{"update:visible":function(t){e.approveVisible=t}}},[n("div",{staticClass:"full-screen"},[e.fullscreen?n("img",{staticStyle:{cursor:"pointer"},attrs:{alt:"",src:r("8abd")},on:{click:function(t){e.fullscreen=!1}}}):n("i",{staticClass:"el-icon-full-screen",staticStyle:{cursor:"pointer","font-size":"18px"},on:{click:function(t){e.fullscreen=!0}}})]),e.approveVisible?n("div",{staticStyle:{height:"70vh"}},[n("onlyoffice",{ref:"onlyoffice",staticStyle:{width:"100%",height:"100%"},attrs:{options:e.option}})],1):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:e.loadingApprove},on:{click:function(t){e.approveReasonVisible=!0}}},[e._v("不批准")]),n("el-button",{attrs:{loading:e.loadingApprove,type:"primary"},on:{click:e.subApprove}},[e._v("批 准")])],1)]),n("el-dialog",{attrs:{"modal-append-to-body":!1,visible:e.approveReasonVisible,title:"不批准原因",width:"400px"},on:{"update:visible":function(t){e.approveReasonVisible=t}}},[n("div",{staticClass:"search_thing"},[n("div",{staticClass:"search_label"},[e._v("不批准原因：")]),n("div",{staticClass:"search_input"},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:e.loadingApproveReason},on:{click:function(t){e.approveReasonVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{loading:e.loadingApproveReason,type:"primary"},on:{click:e.handleApproveReason}},[e._v("确定")])],1)]),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.addApproverDia,title:"指定批准人员",width:"400px"},on:{"update:visible":function(t){e.addApproverDia=t},close:e.closeAddApproverDia}},[n("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px","align-items":"center"}},[n("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[n("span",{staticClass:"required-span"},[e._v("*")]),e._v("批准人：")]),n("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.approver,callback:function(t){e.approver=t},expression:"approver"}},e._l(e.approverList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeAddApproverDia}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.loadingIssued,type:"primary"},on:{click:e.submitAddApprover}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.addVerifyDia,title:"指定审核人员",width:"400px"},on:{"update:visible":function(t){e.addVerifyDia=t},close:e.closeAddVerifyDia}},[n("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px","align-items":"center"}},[n("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[n("span",{staticClass:"required-span"},[e._v("*")]),e._v("审核人：")]),n("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.verifyUser,callback:function(t){e.verifyUser=t},expression:"verifyUser"}},e._l(e.approverList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeAddVerifyDia}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.loadingVerify,type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{fullscreen:e.fullscreen,"modal-append-to-body":!1,visible:e.viewIssuedVisible,title:"报告查看",width:"80vw"},on:{"update:visible":function(t){e.viewIssuedVisible=t}}},[n("div",{staticClass:"full-screen"},[e.fullscreen?n("img",{staticStyle:{cursor:"pointer"},attrs:{alt:"",src:r("8abd")},on:{click:function(t){e.fullscreen=!1}}}):n("i",{staticClass:"el-icon-full-screen",staticStyle:{cursor:"pointer","font-size":"18px"},on:{click:function(t){e.fullscreen=!0}}})]),e.viewIssuedVisible?n("div",{staticStyle:{height:"80vh"}},[n("onlyoffice",{ref:"onlyoffice",staticStyle:{width:"100%",height:"100%"},attrs:{options:e.option}})],1):e._e()]),n("el-dialog",{attrs:{visible:e.filesDialogVisible,title:"附件查看",width:"80%"},on:{"update:visible":function(t){e.filesDialogVisible=t},closed:e.closeFilesLook}},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:e.fileAction,"auto-upload":!0,"before-upload":e.fileBeforeUpload,data:{orderId:e.filesLookInfo.insOrderId},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[n("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[e._v("附件上传")])],1)],1),n("lims-table",{key:"tableDataFile",attrs:{tableData:e.tableDataFile,column:e.columnFile,height:"500px",tableLoading:e.tableLoadingFile}})],1)],1)},a=[],i=r("5530"),o=(r("7db0"),r("a15b"),r("d81d"),r("14d9"),r("b0c0"),r("d3b7"),r("ac1f"),r("8a79"),r("5319"),r("0643"),r("fffc"),r("4e3e"),r("a573"),r("159b"),r("e317")),s=r("504c"),l=r("2f62"),u=r("b558"),c=r("00d5"),d=r("2381"),p={name:"ReportPreparation",components:{limsTable:c["a"],onlyoffice:o["a"]},data:function(){var e=this;return{entity:{queryStatus:null,code:null,typeSource:null},page:{current:1,size:20,total:0},upIndex:0,statusList:[],claimVisible:!1,issuedVisible:!1,issuedReasonVisible:!1,approveVisible:!1,approveReasonVisible:!1,fullscreen:!1,loadingApproveReason:!1,loadingApprove:!1,loadingIssuedReason:!1,loadingIssued:!1,value:"",reason:"",currentInfo:null,option:null,mutiList:[],outLoading:!1,inLoading:!1,addApproverDia:!1,approver:"",approverId:"",approverList:[],addVerifyDia:!1,verifyUser:null,loadingVerify:!1,typeSourceList:[{label:"成品下单",value:0},{label:"原材料下单",value:1}],orderTypeList:[{label:"委托试验",value:"Customer-ordered test"},{label:"抽检",value:"抽检"},{label:"进厂检验",value:"进厂检验"},{label:"季度检验",value:"Quarterly inspection"}],showInfoDialog:!1,isReport:1,activeFace:0,customsInspection:{},currentId:null,examine:null,viewIssuedVisible:!1,queryStatusList:[{label:"待提交",value:0},{label:"待审核",value:1},{label:"待批准",value:2}],state:0,orderId:0,inspectorList:[],InspectionKey:1,typeSource:null,sonLaboratory:"",filesDialogVisible:!1,filesLookInfo:{},tableDataFile:[],tableLoadingFile:!1,columnFile:[{dataType:"tag",label:"类型",prop:"type",formatData:function(e){return 1==e?"图片":2==e?"文件":""},formatType:function(e){return 1==e?"success":2==e?"warning":""}},{label:"附件名称",prop:"fileName"},{label:"上传人",prop:"name"},{label:"上传时间",prop:"createTime"},{dataType:"action",fixed:"right",label:"操作",width:"170px",operation:[{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"删除",type:"text",clickFun:function(t){e.delete(t)}}]}],isCopper:null,tableLoading:!1,valueTableData:[],column:[{label:"报告编号",prop:"code",width:"160px",dataType:"link",linkMethod:"selectAllByOne"},{label:"下单类别",prop:"typeSource",width:"100px",dataType:"tag",formatData:function(e){return 0==e?"成品下单":"原材料下单"}},{label:"检验类型",prop:"orderType",width:"100px",dataType:"tag",formatData:function(t){return e.orderTypeList.find((function(e){return e.value==t})).label},formatType:function(t){return e.orderTypeList.find((function(e){return e.value==t})).type}},{label:"创建时间",prop:"createTime"},{label:"提交人",prop:"writeUserName"},{label:"提交时间",prop:"writeTime"},{label:"提交状态",prop:"state",width:"100px",dataType:"tag",formatData:function(e){return 0==e?"待提交":"已提交"},formatType:function(e){return 0==e?"danger":"success"}},{label:"审核人",prop:"examineUser"},{label:"审核时间",prop:"examineTime"},{label:"审核状态",prop:"isExamine",width:"100px",dataType:"tag",formatData:function(e){return 0==e?"不通过":1==e?"通过":null},formatType:function(e){return 0==e?"danger":1==e?"success":null}},{label:"审核备注",prop:"examineTell"},{label:"批准人",prop:"ratifyUser"},{label:"批准时间",prop:"ratifyTime"},{label:"批准状态",prop:"isRatify",width:"100px",dataType:"tag",formatData:function(e){return 0==e?"不批准":1==e?"批准":null},formatType:function(e){return 0==e?"danger":1==e?"success":null}},{label:"批准备注",prop:"ratifyTell"},{fixed:"right",dataType:"slot",slot:"action",width:"360px",label:"操作"}],userName:""}},computed:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["nickName","userId"])),{},{action:function(){return this.javaApi+"/insReport/upAll"},fileAction:function(){return this.javaApi+"/insOrderPlan/uploadFile"},fileAction1:function(){return this.javaApi+"/insReport/inReport"}}),mounted:function(){this.refreshTable()},methods:{refreshTable:function(){var e=this;this.tableLoading=!0,Object(s["c"])(Object(i["a"])(Object(i["a"])({},this.page),this.entity)).then((function(t){e.tableLoading=!1,e.page.total=t.data.body.total,e.valueTableData=t.data.body.records}))},pagination:function(e){var t=e.page,r=e.limit;this.page.current=t,this.page.size=r,this.refreshTable()},refresh:function(){this.resetForm("entity"),this.refreshTable()},handleChange:function(e){this.mutiList=e},viewInspectInfo:function(e){var t=[];e.userName&&(t=e.userName.split(",")),t.push(this.nickName),this.$router.push({path:"/inspectionTask/inspection",query:{sonLaboratory:e.sonLaboratory,state:3,typeSource:e.typeSource,orderId:e.insOrderId,inspectorList:t}})},handleFileLook:function(e){this.filesLookInfo=e,this.filesDialogVisible=!0,this.getFileList()},getFileList:function(){var e=this;this.tableLoadingFile=!0,Object(d["j"])({insOrderId:this.filesLookInfo.insOrderId}).then((function(t){e.tableLoadingFile=!1,200===t.code&&(e.tableDataFile=t.data.records)})).catch((function(t){e.tableLoadingFile=!1}))},closeFilesLook:function(){this.filesDialogVisible=!1},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.getFileList())},handleSuccessUp1:function(e){200==e.code&&this.$message.success("上传成功")},handleDown:function(e){var t=this;Object(d["i"])({id:e.id}).then((function(r){t.$download.saveAs(r.data.fileUrl,e.fileName)})).catch((function(e){}))},delete:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableLoadingFile=!0,Object(d["g"])({id:e.id}).then((function(e){t.tableLoadingFile=!1,t.$message.success("删除成功"),t.getFileList()})).catch((function(e){t.tableLoadingFile=!1,console.log("err---",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},openInfoDialog:function(e){var t=this;this.showInfoDialog=!0,this.$nextTick((function(){t.$refs.showInfoDialog.getInfo(e.ifsInventoryId)}))},handleDowns:function(){var e=this;if(0!=this.mutiList.length){var t=this.mutiList.map((function(e){return e.id})).join(",");this.outLoading=!0,Object(s["a"])({ids:t}).then((function(t){e.outLoading=!1,e.$download.zip(t.data,"报告.zip")})).catch((function(){e.outLoading=!1}))}else this.$message.error("请选择报告")},beforeUpload:function(e){var t="application/zip"===e.type||e.name.endsWith(".zip");return t||this.$message.error("上传文件只能是 ZIP 格式!"),t&&(this.inLoading=!0),t},fileBeforeUpload:function(e){var t=!0;if(console.log("file----",e),e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),t=!1),!t)return Promise.reject(t)},fileBeforeUpload1:function(e){var t=!0;if(e.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload1.clearFiles(),t=!1),!t)return Promise.reject(t)},handleSuccess:function(e){this.inLoading=!1,200==e.code?(this.$message.success("导入成功"),this.refreshTable()):this.$message.error(e.message)},onError:function(e,t,r,n){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},onError1:function(e,t,r,n){this.$message.error("上传失败"),this.$refs.upload1.clearFiles()},confirmClaim:function(){},selectAllByOne:function(e){switch(this.isCopper=e.isCopper,this.customsInspection=e,this.activeFace=2,this.examine=1,this.isReport=1,this.currentId=parseInt(e.insOrderId),e.isCopper){case 0:this.$router.push({path:"/materialOrder/customsInspectionView",query:{customsInspection:e,active:this.activeFace,currentId:e.insOrderId,isReport:this.isReport}});break;case null:this.$router.push({path:"/productOrder/addView",query:{examine:this.examine,active:this.activeFace,currentId:e.insOrderId}});break;case 1:this.$router.push({path:"/materialOrder/CopperView",query:{active:this.activeFace,currentId:e.insOrderId}});break}},download:function(e){var t=e.urlS?e.urlS:e.url,r=document.createElement("a");r.href=this.javaApi+t,r.target="_blank",document.body.appendChild(r),r.click()},handleRestore:function(e){var t=this;Object(s["f"])({id:e.id}).then((function(e){200===e.code&&(t.$message.success("操作成功"),t.refreshTable("page"))}))},handleIssued:function(e){this.currentInfo=e;var t=null===e.urlS||""===e.urlS?e.url:e.urlS,r="docx";null==e.tempUrlPdf&&""!==e.tempUrlPdf||(t=e.tempUrlPdf,r="pdf"),t=t.replace("/word/","");var n=this.nickName;this.option={url:this.javaApi+"/word/"+t,isEdit:!1,fileType:r,title:t,lang:"zh-CN",isPrint:!1,user_id:1,user_name:n,editUrl:this.javaApi+"/insReport/onlyOffice/save?fileName="+t},this.issuedVisible=!0},viewIssued:function(e){console.log("this.javaApi",this.javaApi),this.currentInfo=e;var t=null===e.urlS||""===e.urlS?e.url:e.urlS,r="docx";null==e.tempUrlPdf&&""!==e.tempUrlPdf||(t=e.tempUrlPdf,r="pdf"),t=t.replace("/word/","");var n=this.nickName;this.option={url:this.javaApi+"/word/"+t,isEdit:!1,fileType:r,title:t,lang:"zh-CN",isPrint:!1,user_id:1,user_name:n,editUrl:this.javaApi+"/insReport/onlyOffice/save?fileName="+t},this.viewIssuedVisible=!0},sendBackTask:function(e){var t=this;this.$confirm("确认退回到检验任务?退回后需重新提交复核","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.upLoad=!0,Object(s["e"])({id:e.id}).then((function(e){t.upLoad=!1,t.$message.success("退回成功！"),t.refreshTable("page")})).catch((function(e){t.upLoad=!1}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},submitAddApprover:function(){var e=this;this.approver?(this.loadingIssued=!0,Object(s["b"])({id:this.currentInfo.id,userId:this.approver,isExamine:1}).then((function(t){e.loadingIssued=!1,e.$message.success("提交成功"),e.refreshTable("page"),e.currentInfo=null,e.addApproverDia=!1,e.issuedVisible=!1})).catch((function(t){e.$message.error("提交失败"),e.loadingIssued=!1}))):this.$message.error("请选择审批人")},closeAddApproverDia:function(){this.addApproverDia=!1,this.approver=""},subIssued:function(){this.getAuthorizedPerson(),this.addApproverDia=!0},getAuthorizedPerson:function(){var e=this;Object(u["w"])({type:1}).then((function(t){var r=[];t.data.forEach((function(e){r.push({label:e.name,value:e.id})})),e.approverList=r}))},handleApprove:function(e){this.currentInfo=e;var t=null===e.urlS||""===e.urlS?e.url:e.urlS,r="docx";null==e.tempUrlPdf&&""!==e.tempUrlPdf||(t=e.tempUrlPdf,r="pdf"),t=t.replace("/word/","");var n=this.nickName;this.option={url:this.javaApi+"/word/"+t,isEdit:!1,fileType:r,title:t,lang:"zh-CN",isPrint:!1,user_id:1,user_name:n,editUrl:this.javaApi+"/insReport/onlyOffice/save?fileName="+t},this.approveVisible=!0},subApprove:function(){var e=this;this.loadingApprove=!0,Object(s["d"])({id:this.currentInfo.id,isRatify:1}).then((function(t){e.loadingApprove=!1,e.$message.success("已批准"),e.refreshTable("page"),e.currentInfo=null,e.approveVisible=!1})).catch((function(){e.loadingApprove=!1}))},handle:function(e){this.getAuthorizedPerson(),this.currentInfo=e,this.addVerifyDia=!0},handleSubmit:function(e){var t=this;this.loadingVerify=!0,Object(s["g"])({id:this.currentInfo.id,userId:this.verifyUser}).then((function(e){t.loadingVerify=!1,t.addVerifyDia=!1,t.$message.success("提交成功"),t.refreshTable("page")})).catch((function(e){t.loadingVerify=!1,t.$message.error("提交失败")}))},closeAddVerifyDia:function(){this.addVerifyDia=!1,this.verifyUser=""},handleIssuedReason:function(){var e=this;if(!this.reason)return this.$message.error("请输入原因");this.loadingIssuedReason=!0,Object(s["b"])({id:this.currentInfo.id,isExamine:0,examineTell:this.reason}).then((function(t){e.loadingIssuedReason=!1,e.$message.success("操作成功"),e.refreshTable("page"),e.currentInfo=null,e.reason="",e.issuedVisible=!1,e.issuedReasonVisible=!1})).catch((function(t){e.$message.error("操作失败"),e.loadingIssuedReason=!1}))},handleApproveReason:function(){var e=this;if(!this.reason)return this.$message.error("请输入原因");this.loadingApproveReason=!0,Object(s["d"])({id:this.currentInfo.id,isRatify:0,examineTell:this.reason}).then((function(t){e.loadingApproveReason=!1,e.$message.success("操作成功"),e.refreshTable("page"),e.currentInfo=null,e.reason="",e.approveVisible=!1,e.approveReasonVisible=!1})).catch((function(t){e.$message.error("操作失败"),e.loadingIssuedReason=!1}))}}},f=p,h=(r("e583"),r("2877")),m=Object(h["a"])(f,n,a,!1,null,"4d3c881c",null);t["default"]=m.exports},"504c":function(e,t,r){"use strict";r.d(t,"f",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return u})),r.d(t,"d",(function(){return c}));var n=r("b775");function a(e){return Object(n["a"])({url:"/insReport/upReportUrl",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/insReport/pageInsReport",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/insReport/downAll",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/insReport/sendBackTask",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/insReport/examineReport",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/insReport/writeReport",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/insReport/ratifyReport",method:"post",data:e})}},"8abd":function(e,t,r){e.exports=r.p+"static/img/no-full.f23a9ad7.svg"},b558:function(e,t,r){"use strict";r.d(t,"v",(function(){return a})),r.d(t,"A",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"z",(function(){return s})),r.d(t,"y",(function(){return l})),r.d(t,"w",(function(){return u})),r.d(t,"i",(function(){return c})),r.d(t,"n",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"u",(function(){return h})),r.d(t,"g",(function(){return m})),r.d(t,"j",(function(){return b})),r.d(t,"p",(function(){return g})),r.d(t,"o",(function(){return v})),r.d(t,"d",(function(){return y})),r.d(t,"D",(function(){return O})),r.d(t,"l",(function(){return w})),r.d(t,"t",(function(){return j})),r.d(t,"C",(function(){return I})),r.d(t,"b",(function(){return k})),r.d(t,"x",(function(){return x})),r.d(t,"s",(function(){return T})),r.d(t,"h",(function(){return S})),r.d(t,"k",(function(){return R})),r.d(t,"f",(function(){return P})),r.d(t,"r",(function(){return L})),r.d(t,"m",(function(){return A})),r.d(t,"q",(function(){return _})),r.d(t,"B",(function(){return V}));var n=r("b775");function a(e){return Object(n["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function u(e){return Object(n["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function p(e){return Object(n["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function h(e){return Object(n["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function b(e){return Object(n["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function g(e){return Object(n["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function v(e){return Object(n["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function y(e){return Object(n["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function j(e){return Object(n["a"])({url:"/deviceScope/search",method:"get",params:e})}function I(e){return Object(n["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function k(e){return Object(n["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function x(e){return Object(n["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function T(e){return Object(n["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function S(e){return Object(n["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function R(e){return Object(n["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function P(e){return Object(n["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function L(e){return Object(n["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function A(e){return Object(n["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function _(e){return Object(n["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function V(e){return Object(n["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}},e583:function(e,t,r){"use strict";r("00ff")}}]);