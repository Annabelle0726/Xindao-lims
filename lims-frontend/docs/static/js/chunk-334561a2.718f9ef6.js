(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-334561a2","chunk-4bdb465a"],{"0ccb":function(e,t,a){"use strict";var r=a("e330"),n=a("50c4"),i=a("577e"),o=a("1148"),l=a("1d80"),s=r(o),c=r("".slice),u=Math.ceil,d=function(e){return function(t,a,r){var o,d,p=i(l(t)),m=n(a),f=p.length,b=void 0===r?" ":i(r);return m<=f||""===b?p:(o=m-f,d=s(b,u(o/b.length)),d.length>o&&(d=c(d,0,o)),e?p+d:d+p)}};e.exports={start:d(!1),end:d(!0)}},"4d90":function(e,t,a){"use strict";var r=a("23e7"),n=a("0ccb").start,i=a("9a0c");r({target:"String",proto:!0,forced:i},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"4f91":function(e,t,a){},"987e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.quarterSampleDia,title:"季度抽样",width:"90%"},on:{"update:visible":function(t){e.quarterSampleDia=t},close:function(t){e.quarterSampleDia=!1}}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},[a("div",{staticStyle:{width:"30%",display:"flex","align-items":"center"}},[a("span",{staticStyle:{width:"50px"}},[e._v("编号：")]),a("el-input",{attrs:{disabled:"add"!==e.operationType,size:"small"},model:{value:e.quarterSampleForm.quarterNo,callback:function(t){e.$set(e.quarterSampleForm,"quarterNo",t)},expression:"quarterSampleForm.quarterNo"}})],1),"add"===e.operationType?a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addQuarter}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e()]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.quarterItems,height:"400","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{label:"产品类型",prop:"productType",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-input",{attrs:{size:"small"},model:{value:r.productType,callback:function(t){e.$set(r,"productType",t)},expression:"row.productType"}})]]}}])}),a("el-table-column",{attrs:{label:"责任人",prop:"dutyUser",width:"100"}}),a("el-table-column",{attrs:{label:"型号",prop:"productModel",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:r.productModel,callback:function(t){e.$set(r,"productModel",t)},expression:"row.productModel"}})]]}}])}),a("el-table-column",{attrs:{label:"抽样数量","min-width":"340",prop:"spotCheckNumber"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:r.spotCheckNumber,callback:function(t){e.$set(r,"spotCheckNumber",t)},expression:"row.spotCheckNumber"}})]]}}])}),"add"===e.operationType?a("el-table-column",{attrs:{label:"数量","min-width":"120",prop:"number"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:r.number,callback:function(t){e.$set(r,"number",t)},expression:"row.number"}})]]}}],null,!1,1485353093)}):e._e(),"add"!==e.operationType?a("el-table-column",{attrs:{label:"抽样时间",prop:"spotCheckTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",disabled:"view"===e.operationType,placeholder:"选择日期",size:"small",clearable:"",type:"date","value-format":"yyyy-MM-dd"},model:{value:r.spotCheckTime,callback:function(t){e.$set(r,"spotCheckTime",t)},expression:"row.spotCheckTime"}})]]}}],null,!1,3990927429)}):e._e(),"add"!==e.operationType?a("el-table-column",{attrs:{label:"试样结论",prop:"result",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:"",disabled:"view"===e.operationType},model:{value:t.row.result,callback:function(a){e.$set(t.row,"result",a)},expression:"scope.row.result"}},[a("el-option",{attrs:{label:"合格",value:"合格"}}),a("el-option",{attrs:{label:"不合格",value:"不合格"}})],1)]}}],null,!1,2110497481)}):e._e(),"add"!==e.operationType?a("el-table-column",{attrs:{label:"取样人员",prop:"samplingUser",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:r.samplingUser,callback:function(t){e.$set(r,"samplingUser",t)},expression:"row.samplingUser"}})]]}}],null,!1,3106039828)}):e._e(),a("el-table-column",{attrs:{label:"备注",prop:"itemRemark",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[[a("el-input",{attrs:{size:"small",disabled:"view"===e.operationType},model:{value:r.itemRemark,callback:function(t){e.$set(r,"itemRemark",t)},expression:"row.itemRemark"}})]]}}])}),"view"!==e.operationType?a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteScope(t.$index)}}},[e._v("删除")])]}}],null,!1,3685618162)}):e._e()],1)],1),a("div",{staticStyle:{display:"flex","align-items":"center",margin:"10px 0"}},[a("span",{staticStyle:{width:"70px"}},[e._v("备注：")]),a("el-input",{staticStyle:{width:"43%"},attrs:{disabled:"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.quarterSampleForm.remark,callback:function(t){e.$set(e.quarterSampleForm,"remark",t)},expression:"quarterSampleForm.remark"}})],1),"add"!==e.operationType?a("div",[a("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"70px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.writeUser,callback:function(t){e.$set(e.editForm,"writeUser",t)},expression:"editForm.writeUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"会签人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,multiple:"",placeholder:"请选择",size:"small"},model:{value:e.editForm.countersignUser,callback:function(t){e.$set(e.editForm,"countersignUser",t)},expression:"editForm.countersignUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.examineUser,callback:function(t){e.$set(e.editForm,"examineUser",t)},expression:"editForm.examineUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"批准人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editForm.ratifyUser,callback:function(t){e.$set(e.editForm,"ratifyUser",t)},expression:"editForm.ratifyUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.quarterSampleDia=!1}}},[e._v("取 消")]),"add"===e.operationType?a("el-button",{on:{click:function(t){e.quarterSampleDia=!1}}},[e._v("保 存")]):e._e(),"add"!==e.operationType&&"view"!==e.operationType?a("el-button",{attrs:{type:"primary"},on:{click:e.handleSample}},[e._v("确 定")]):e._e()],1)])],1)},n=[],i=a("5530"),o=(a("a15b"),a("d81d"),a("14d9"),a("a434"),a("b0c0"),a("e9c4"),a("a9e3"),a("b64b"),a("d3b7"),a("25f0"),a("4d90"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("9985")),l=a("b9fe"),s={name:"addQuarterItem",components:{},data:function(){return{tableLoading:!1,quarterSampleDia:!1,quarterSampleForm:{quarterNo:""},quarterItems:[],quarterTemItems:[],operationType:"",editForm:{quarterId:"",writeUser:"",countersignUser:[],examineUser:"",ratifyUser:""},userList:[],quarterRow:{}}},mounted:function(){this.getUserList()},methods:{openDia:function(e,t){var a=this;this.quarterSampleDia=!0,this.operationType=t,"add"===t?(e.length>0&&(this.quarterItems=e),this.quarterSampleForm.quarterNo=c()):(this.tableLoading=!0,this.quarterRow=e,Object(o["g"])({quarterId:e.quarterId}).then((function(e){a.tableLoading=!1,200===e.code&&(a.quarterItems=e.data.quarterItems,a.quarterSampleForm.quarterNo=e.data.quarterNo,a.quarterSampleForm.remark=e.data.remark,a.editForm.quarterId=e.data.quarterId,a.editForm.writeUser=e.data.writeUser,a.editForm.examineUser=e.data.examineUser,a.editForm.ratifyUser=e.data.ratifyUser,e.data.countersignUser&&(a.editForm.countersignUser=e.data.countersignUser.split(",").map(Number)))})))},addQuarter:function(){this.quarterItems.push({productType:"",dutyUser:JSON.parse(localStorage.getItem("user")).name,productModel:"",spotCheckNumber:"",number:"",spotCheckTime:"",result:"",samplingUser:"",itemRemark:""})},handleSample:function(){var e=this;this.$confirm("是否提交该数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if("add"===e.operationType)e.quarterSampleForm.quarterItems=JSON.parse(JSON.stringify(e.quarterItems)),e.quarterSampleForm.quarterItems.forEach((function(e){e.spotCheckNumber=e.spotCheckNumber+" "+(null==e.number?"":e.number)})),Object(o["a"])(e.quarterSampleForm).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.quarterItems=[],e.$parent.quarterTemItems=[],e.closeQuarterSampleDia())}));else{var t=Object(i["a"])({},e.editForm);t.countersignUser.length>0?t.countersignUser=t.countersignUser.join(","):t.countersignUser="",t.quarterItems=JSON.parse(JSON.stringify(e.quarterItems)),Object(o["k"])(t).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.quarterItems=[],e.closeQuarterSampleDia())}))}})).catch((function(){e.$message({type:"info",message:"已取消"})}))},clearTable:function(){this.quarterItems=[],this.$parent.quarterTemItems=[]},deleteScope:function(e){this.quarterItems.splice(e,1)},closeQuarterSampleDia:function(){this.quarterSampleDia=!1,"add"===this.operationType?this.$parent.handleStockList():this.$parent.refreshTable()},getUserList:function(){var e=this;Object(l["g"])().then((function(t){e.userList=t.data}))}}};function c(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return t+a.toString().padStart(2,"0")}var u=s,d=a("2877"),p=Object(d["a"])(u,r,n,!1,null,"1d1b9048",null);t["default"]=p.exports},9985:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"j",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"l",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"a",(function(){return f})),a.d(t,"k",(function(){return b}));var r=a("b775");function n(e){return Object(r["a"])({url:"/finishProductSpotCheck/getQuarterPage",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/finishProductSpotCheck/getSpotCheckYearPage",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/finishProductSpotCheck/deleteQuarter",method:"delete",params:e})}function l(e){return Object(r["a"])({url:"/finishProductSpotCheck/finalReportQuarter",method:"get",params:e,responseType:"blob"})}function s(e){return Object(r["a"])({url:"/finishProductSpotCheck/finalReportSpotCheckYear",method:"get",params:e,responseType:"blob"})}function c(e){return Object(r["a"])({url:"/finishProductSpotCheck/deleteSpotCheckYear",method:"delete",params:e})}function u(e){return Object(r["a"])({url:"/finishProductSpotCheck/getSpotCheckYear",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/finishProductSpotCheck/addSpotCheckYear",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/finishProductSpotCheck/updateSpotCheckYear",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/finishProductSpotCheck/getQuarter",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/finishProductSpotCheck/addQuarter",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/finishProductSpotCheck/updateQuarterOnOrder",method:"post",data:e})}},"9a0c":function(e,t,a){"use strict";var r=a("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},b9fe:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"j",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"k",(function(){return m})),a.d(t,"g",(function(){return f}));var r=a("b775");function n(e){return Object(r["a"])({url:"/performanceShift/page",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/performanceShift/pageYear",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/performanceShift/add",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/shiftTime/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/shiftTime/add",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/shiftTime/update",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/shiftTime/remove",method:"delete",params:e})}function d(e){return Object(r["a"])({url:"/performanceShift/export",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/performanceShift/update",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}},f2a4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"search_box"},[a("div",{staticClass:"search_item"},[a("span",{staticClass:"search_label"},[e._v("编号")]),a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.entity.quarterNo,callback:function(t){e.$set(e.entity,"quarterNo",t)},expression:"entity.quarterNo"}})],1),a("div",{staticClass:"search_button"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)]),a("div",[1===e.tabIndex?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.yearSample("add")}}},[e._v("年度抽样")]):e._e()],1)]),a("div",[a("div",{staticClass:"table"},[a("ul",{staticClass:"tab"},e._l(e.tabList,(function(t,r){return a("li",{key:r,class:{active:r===e.tabIndex},on:{click:function(a){return e.handleTab(t,r)}}},[e._v(e._s(t.label))])})),0),0===e.tabIndex?a("lims-table",{attrs:{tableData:e.tableData,column:e.column,height:"calc(100vh - 290px)",page:e.page,tableLoading:e.tableLoading},on:{pagination:e.pagination}}):e._e(),1===e.tabIndex?a("lims-table",{key:"tableData1",attrs:{tableData:e.tableData1,column:e.column1,height:"calc(100vh - 290px)",page:e.page1,tableLoading:e.tableLoading1},on:{pagination:e.pagination1}}):e._e()],1)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.yearSampleDia,title:"年度抽样",width:"70%"},on:{"update:visible":function(t){e.yearSampleDia=t},close:e.closeYearSampleDia}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},[a("div",{staticStyle:{width:"30%",display:"flex","align-items":"center"}},["view"!==e.operationType?a("el-input",{attrs:{size:"small"},model:{value:e.currentYear,callback:function(t){e.currentYear=t},expression:"currentYear"}}):e._e(),"view"===e.operationType?a("span",{staticStyle:{width:"160px","font-size":"18px","font-weight":"600"}},[e._v(e._s(e.currentYear))]):e._e()],1),"view"!==e.operationType?a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addQuarter}},[e._v("添加")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearTable}},[e._v("清空")])],1):e._e()]),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.yearItems,border:"",height:"450","header-cell-style":{background:"#f8f8f9",color:"#515a6e"}}},[a("el-table-column",{attrs:{label:"类别",prop:"yearType",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.yearType,callback:function(t){e.$set(r,"yearType",t)},expression:"row.yearType"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.yearType))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"1",prop:"january",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.january,callback:function(t){e.$set(r,"january",t)},expression:"row.january"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.january))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"2",prop:"february",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.february,callback:function(t){e.$set(r,"february",t)},expression:"row.february"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.february))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"3",prop:"march",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.march,callback:function(t){e.$set(r,"march",t)},expression:"row.march"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.march))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"4",prop:"april",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.april,callback:function(t){e.$set(r,"april",t)},expression:"row.april"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.april))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"5",prop:"may",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.may,callback:function(t){e.$set(r,"may",t)},expression:"row.may"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.may))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"6",prop:"june",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.june,callback:function(t){e.$set(r,"june",t)},expression:"row.june"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.june))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"7",prop:"july",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.july,callback:function(t){e.$set(r,"july",t)},expression:"row.july"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.july))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"8",prop:"august",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.august,callback:function(t){e.$set(r,"august",t)},expression:"row.august"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.august))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"9",prop:"september",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.september,callback:function(t){e.$set(r,"september",t)},expression:"row.september"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.september))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"10",prop:"october",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.october,callback:function(t){e.$set(r,"october",t)},expression:"row.october"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.october))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"11",prop:"november",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.november,callback:function(t){e.$set(r,"november",t)},expression:"row.november"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.november))])]]}}])}),a("el-table-column",{attrs:{"header-align":"center",label:"12",prop:"december",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["view"!==e.operationType?[a("el-input",{attrs:{size:"small",type:"textarea",rows:4},model:{value:r.december,callback:function(t){e.$set(r,"december",t)},expression:"row.december"}})]:[a("span",{attrs:{size:"small"}},[e._v(e._s(r.december))])]]}}])}),"view"!==e.operationType?a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteScope(t.$index)}}},[e._v("删除")])]}}],null,!1,3685618162)}):e._e()],1)],1),a("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"10px"}},[a("span",{staticStyle:{width:"70px"}},[e._v("注意事项：")]),a("el-input",{staticStyle:{width:"50%"},attrs:{disabled:"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.yearSampleForm.tableRemark,callback:function(t){e.$set(e.yearSampleForm,"tableRemark",t)},expression:"yearSampleForm.tableRemark"}})],1),a("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"10px"}},[a("span",{staticStyle:{width:"70px"}},[e._v("备注：")]),a("el-input",{staticStyle:{width:"50%"},attrs:{disabled:"view"===e.operationType,size:"small",type:"textarea"},model:{value:e.yearSampleForm.remark,callback:function(t){e.$set(e.yearSampleForm,"remark",t)},expression:"yearSampleForm.remark"}})],1),"add"!==e.operationType?a("div",[a("el-form",{ref:"form",attrs:{model:e.editYearFormRow,"label-width":"70px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editYearFormRow.writeUser,callback:function(t){e.$set(e.editYearFormRow,"writeUser",t)},expression:"editYearFormRow.writeUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"会签人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,multiple:"",placeholder:"请选择",size:"small"},model:{value:e.editYearFormRow.countersignUser,callback:function(t){e.$set(e.editYearFormRow,"countersignUser",t)},expression:"editYearFormRow.countersignUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editYearFormRow.examineUser,callback:function(t){e.$set(e.editYearFormRow,"examineUser",t)},expression:"editYearFormRow.examineUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"批准人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"edit"!==e.operationType,placeholder:"请选择",size:"small"},model:{value:e.editYearFormRow.ratifyUser,callback:function(t){e.$set(e.editYearFormRow,"ratifyUser",t)},expression:"editYearFormRow.ratifyUser"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeYearSampleDia}},[e._v("取 消")]),"view"!==e.operationType?a("el-button",{attrs:{type:"primary"},on:{click:e.handleSample}},[e._v("确 定")]):e._e()],1)]),a("add-quarter-item",{ref:"addQuarterItem"})],1)},n=[],i=a("5530"),o=(a("a15b"),a("d81d"),a("14d9"),a("a434"),a("e9c4"),a("a9e3"),a("b64b"),a("d3b7"),a("0643"),a("a573"),a("987e")),l=a("00d5"),s=a("9985"),c=a("b9fe"),u={name:"ProductSamplingInfo",components:{limsTable:l["a"],AddQuarterItem:o["default"]},data:function(){var e=this;return{upIndex:0,tabIndex:0,tabList:[{label:"季度",value:0},{label:"年度",value:1}],entity:{quarterNo:null},tableData:[],tableLoading:!1,column:[{label:"编号",prop:"quarterNo"},{label:"备注",prop:"remark"},{label:"创建人",prop:"createUserName"},{label:"创建时间",prop:"createTime"},{dataType:"action",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.editForm(t)}},{name:"查看",type:"text",clickFun:function(t){e.viewQuarterInfo(t)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"删除",type:"text",clickFun:function(t){e.deleteQuarterInfo(t)}}]}],page:{total:0,size:20,current:1},tableData1:[],tableLoading1:!1,column1:[{label:"名称",prop:"yearHead"},{label:"创建人",prop:"createUserName"},{label:"创建时间",prop:"createTime"},{dataType:"action",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.editYearForm(t)}},{name:"查看",type:"text",clickFun:function(t){e.viewYearInfo(t)}},{name:"下载",type:"text",clickFun:function(t){e.download(t)}},{name:"删除",type:"text",clickFun:function(t){e.deleteYearInfo(t)}}]}],page1:{total:0,size:20,current:1},yearSampleDia:!1,yearSampleForm:{tableRemark:"",remark:""},yearItems:[],currentYear:"",operationType:"",userList:[],yearRow:{},editYearFormRow:{yearId:"",writeUser:"",countersignUser:null,examineUser:"",ratifyUser:""}}},mounted:function(){this.refreshTable()},methods:{refreshTable:function(){0===this.tabIndex?this.getQuarterPageList():1===this.tabIndex&&this.getSpotCheckYearPageList()},getQuarterPageList:function(){var e=this;this.tableLoading=!0,Object(s["h"])(Object(i["a"])(Object(i["a"])({},this.page),this.entity)).then((function(t){e.tableLoading=!1,e.page.total=t.data.total,e.tableData=t.data.records})).catch((function(t){e.tableLoading=!1}))},getSpotCheckYearPageList:function(){var e=this;this.tableLoading1=!0,Object(s["j"])(Object(i["a"])({},this.page1)).then((function(t){e.tableLoading1=!1,e.page1.total=t.data.total,e.tableData1=t.data.records})).catch((function(t){e.tableLoading1=!1}))},refresh:function(){this.resetForm("entity"),this.refreshTable()},pagination:function(e){this.page.size=e.limit,this.refreshTable()},pagination1:function(e){this.page1.size=e.limit,this.refreshTable()},editForm:function(e){this.$refs.addQuarterItem.openDia(e,"edit")},viewQuarterInfo:function(e){this.$refs.addQuarterItem.openDia(e,"view")},deleteQuarterInfo:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])({quarterId:e.quarterId}).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.refreshTable())}))})).catch((function(){}))},handleDown:function(e){var t=this,a=Math.random();Object(s["e"])({quarterId:e.quarterId,random:a}).then((function(e){t.outLoading=!1;var a=new Blob([e],{type:"application/octet-stream"});t.$download.saveAs(a,"季度抽样信息导出.docx")}))},download:function(e){var t=this;Object(s["f"])({yearId:e.yearId}).then((function(a){t.outLoading=!1;var r=new Blob([a],{type:"application/octet-stream"});t.$download.saveAs(r,e.yearHead+".docx")}))},deleteYearInfo:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["d"])({yearId:e.yearId}).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.refreshTable())}))})).catch((function(){}))},viewYearInfo:function(e){var t=this;this.operationType="view",this.getUserList(),this.yearSampleDia=!0,this.yearRow=e,Object(s["i"])({yearId:e.yearId}).then((function(e){200===e.code&&(t.currentYear=e.data.yearHead,t.yearItems=e.data.yearItems,t.yearSampleForm.tableRemark=e.data.tableRemark,t.yearSampleForm.remark=e.data.remark,t.editYearFormRow.yearId=e.data.yearId,t.editYearFormRow.writeUser=e.data.writeUser,t.editYearFormRow.examineUser=e.data.examineUser,t.editYearFormRow.ratifyUser=e.data.ratifyUser,e.data.countersignUser&&(t.editYearFormRow.countersignUser=e.data.countersignUser.split(",").map(Number)))}))},editYearForm:function(e){var t=this;this.operationType="edit",this.getUserList(),this.yearSampleDia=!0,Object(s["i"])({yearId:e.yearId}).then((function(e){200===e.code&&(t.currentYear=e.data.yearHead,t.yearItems=e.data.yearItems,t.yearSampleForm.tableRemark=e.data.tableRemark,t.yearSampleForm.remark=e.data.remark,t.editYearFormRow.yearId=e.data.yearId,t.editYearFormRow.writeUser=e.data.writeUser,t.editYearFormRow.examineUser=e.data.examineUser,t.editYearFormRow.ratifyUser=e.data.ratifyUser,e.data.countersignUser&&(t.editYearFormRow.countersignUser=e.data.countersignUser.split(",").map(Number)))}))},handleSample:function(){var e=this;if("add"===this.operationType)this.yearSampleForm.yearItems=JSON.parse(JSON.stringify(this.yearItems)),this.yearSampleForm.yearHead=this.currentYear,Object(s["b"])(this.yearSampleForm).then((function(t){200==t.code&&(e.$message.success("提交成功"),e.yearSampleForm={},e.yearItems=[],e.closeYearSampleDia(),e.refreshTable())}));else{var t=Object(i["a"])({},this.editYearFormRow);null!=t.countersignUser&&(t.countersignUser=t.countersignUser.join(",")),t.yearItems=JSON.parse(JSON.stringify(this.yearItems)),t.tableRemark=this.yearSampleForm.tableRemark,t.remark=this.yearSampleForm.remark,Object(s["l"])(t).then((function(t){200==t.code&&(e.$message.success("修改成功"),e.yearSampleForm={},e.editYearFormRow={yearId:"",writeUser:"",countersignUser:[],examineUser:"",ratifyUser:""},e.yearItems=[],e.closeYearSampleDia(),e.refreshTable())}))}},yearSample:function(e){this.operationType=e;var t=new Date;this.yearSampleDia=!0,this.currentYear=t.getFullYear()+"年年度抽检计划"},addQuarter:function(){this.yearItems.push({})},clearTable:function(){this.yearItems=[]},deleteScope:function(e){this.yearItems.splice(e,1)},handleTab:function(e,t){this.tabIndex=t,this.refreshTable()},closeYearSampleDia:function(){this.yearSampleForm={tableRemark:"",remark:""},this.yearItems=[],this.yearSampleDia=!1},getStyle:function(){return"height: calc(100% - 44px)"},getUserList:function(){var e=this;Object(c["g"])().then((function(t){e.userList=t.data}))}}},d=u,p=(a("fdc1"),a("2877")),m=Object(p["a"])(d,r,n,!1,null,"12820291",null);t["default"]=m.exports},fdc1:function(e,t,a){"use strict";a("4f91")}}]);