(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-395b9b06"],{"0e9a":function(e,t,n){"use strict";var a=n("c14f"),r=n("1da1"),o=(n("c19f"),n("ace4"),n("2c66"),n("249d"),n("40e9"),n("d3b7"),n("ac1f"),n("5319"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("6ce5"),n("2834"),n("72f7"),n("4ea1"),n("c343")),c=n("acff"),l=n("2b0e");t["a"]={convertFileToHtml:function(e){return Object(r["a"])(Object(a["a"])().m((function t(){var n,c;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return n=new XMLHttpRequest,n.open("GET",l["default"].prototype.javaApi+e,!0),n.send(),n.responseType="blob",c=new Promise((function(e,t){n.onload=Object(r["a"])(Object(a["a"])().m((function t(){var c,l,i,u,s;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:if(200!==this.status){t.n=2;break}return c=new Blob([this.response],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),l=new FileReader,l.readAsArrayBuffer(c),i=new Promise((function(e,t){l.onload=Object(r["a"])(Object(a["a"])().m((function t(){var r,c,l;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return r=n.response,t.n=1,Object(o["convertToHtml"])({arrayBuffer:r});case 1:c=t.v,l=c.value.replace(//g,"").replace("<h1>",'<h1 style="text-align: center;">').replace(/<table>/g,'<table style="border-collapse: collapse;border: 1px solid #000;">').replace(/<tr>/g,'<tr style="height: 30px;">').replace(/<td>/g,'<td style="border: 1px solid #000;">').replace(/<p>/g,'<p style="text-indent: 2em;">').replace(/<a [^>]*>/g,"").replace(/<\/a>/g,""),e(l);case 2:return t.a(2)}}),t)})))})),u=e,t.n=1,i;case 1:s=t.v,u(s);case 2:return t.a(2)}}),t,this)})))})),t.n=1,c;case 1:return t.a(2,t.v)}}),t)})))()},downloadIamge:function(e,t){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height;var a=e.getContext("2d");a.drawImage(n,0,0,n.width,n.height);var r=e.toDataURL("image/png"),o=document.createElement("a"),c=new MouseEvent("click");o.download=t||"photo",o.href=r,o.dispatchEvent(c)},n.src=e},compressBlob:function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(n){t.onload=function(){var a=t.result,r=new Uint8Array(a),o=c["a"].deflate(r),l=new Blob([o],{type:e.type});n(l)}}))}}},"157e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"search"},[n("div",[n("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[n("el-form-item",{attrs:{label:"文件名称",prop:"name"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),n("el-form-item",{attrs:{label:"文件状态",prop:"state"}},[n("el-select",{attrs:{size:"small",clearable:""},on:{change:function(t){return e.refreshTable()}},model:{value:e.queryParams.state,callback:function(t){e.$set(e.queryParams,"state",t)},expression:"queryParams.state"}},e._l(e.fileState,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),n("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),n("div",[n("el-upload",{ref:"upload",attrs:{action:e.action,multiple:!1,accept:".xls,.xlsx",headers:e.uploadHeader,"on-change":e.beforeUpload,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1}},[n("el-button",{attrs:{size:"small",type:"primary",loading:e.upLoading}},[e._v("导入")])],1)],1)]),n("div",{staticClass:"table"},[n("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),n("el-dialog",{attrs:{title:"上传",visible:e.addDialogVisible,width:"1000px",top:"3vh"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[e.addDialogVisible?n("UpPdfStamp",{ref:"UpPdfStamp",attrs:{isUpFile:!0},on:{uploadPDF:e.uploadPDF,uploadPDFErr:e.uploadPDFErr}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.addLoading,expression:"addLoading"}],attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"查看附件",visible:e.lookDialogVisible,width:"800px",top:"5vh",fullscreen:""},on:{"update:visible":function(t){e.lookDialogVisible=t}}},[e.lookDialogVisible?n("filePreview",{staticStyle:{"max-height":"90vh","overflow-y":"auto"},attrs:{fileUrl:e.javaApi+"/word/"+e.currentInfo.url,currentFile:{}}}):e._e()],1),n("el-dialog",{attrs:{title:e.title,visible:e.addDia,width:"500px"},on:{"update:visible":function(t){e.addDia=t}}},[n("el-form",{ref:"currentInfoForm",attrs:{model:e.currentInfo,rules:e.rules,"label-position":"right","label-width":"120px"}},[n("el-form-item",{attrs:{label:"文件编号",prop:"documentCode"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.documentCode,callback:function(t){e.$set(e.currentInfo,"documentCode",t)},expression:"currentInfo.documentCode"}})],1),n("el-form-item",{attrs:{label:"类别",prop:"type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.currentInfo.type,callback:function(t){e.$set(e.currentInfo,"type",t)},expression:"currentInfo.type"}},e._l(e.fileType,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.name,callback:function(t){e.$set(e.currentInfo,"name",t)},expression:"currentInfo.name"}})],1),n("el-form-item",{attrs:{label:"文件版本",prop:"version"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.version,callback:function(t){e.$set(e.currentInfo,"version",t)},expression:"currentInfo.version"}})],1),n("el-form-item",{attrs:{label:"作者",prop:"writer"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.currentInfo.writer,callback:function(t){e.$set(e.currentInfo,"writer",t)},expression:"currentInfo.writer"}})],1),n("el-form-item",{attrs:{label:"生效日期",prop:"effectiveDate"}},[n("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",size:"small",placeholder:"选择日期"},model:{value:e.currentInfo.effectiveDate,callback:function(t){e.$set(e.currentInfo,"effectiveDate",t)},expression:"currentInfo.effectiveDate"}})],1),n("el-form-item",{attrs:{label:"文件状态",prop:"state"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.currentInfo.state,callback:function(t){e.$set(e.currentInfo,"state",t)},expression:"currentInfo.state"}},e._l(e.fileState,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDia=!1}}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.uploading,type:"primary"},on:{click:function(t){return e.submitProduct("currentInfoForm")}}},[e._v("确 认")])],1)],1)],1)},r=[],o=n("c14f"),c=n("1da1"),l=n("5530"),i=(n("7db0"),n("d3b7"),n("0643"),n("fffc"),n("132c")),u=n("a408"),s=n("00d5"),d=n("5afa"),f={components:{UpPdfStamp:i["a"],filePreview:u["a"],limsTable:s["a"]},data:function(){var e=this;return{addDialogVisible:!1,lookDialogVisible:!1,addPower:!1,upLoading:!1,addLoading:!1,currentInfo:{},fileType:[],fileState:[],title:"新增",queryParams:{},tableData:[],column:[{label:"文件编号",prop:"documentCode"},{label:"类别",prop:"type",width:"120px",dataType:"tag",formatData:function(t){return e.fileType.find((function(e){return e.value==t}))?e.fileType.find((function(e){return e.value==t})).label:null},formatType:function(t){return e.fileType.find((function(e){return e.value==t}))?e.fileType.find((function(e){return e.value==t})).type:null}},{label:"名称",prop:"name"},{label:"文件版本",prop:"version"},{label:"作者",prop:"writer"},{label:"生效日期",prop:"effectiveDate"},{label:"文件状态",prop:"state",dataType:"tag",formatData:function(t){return e.fileState.find((function(e){return e.value==t}))?e.fileState.find((function(e){return e.value==t})).label:null},formatType:function(t){return e.fileState.find((function(e){return e.value==t}))?e.fileState.find((function(e){return e.value==t})).type:null}},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openAdd("编辑",t)}},{name:"上传",type:"text",clickFun:function(t){e.handleUp(t)}},{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"查看附件",type:"text",clickFun:function(t){e.handleLook(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)}}]}],page:{total:0,size:10,current:0},tableLoading:!1,addDia:!1,rules:{documentCode:[{required:!0,message:"请输入文件编号",trigger:"blur"}]},uploading:!1}},computed:{action:function(){return this.javaApi+"/manageDocumentList/exportManageDocumentList"}},mounted:function(){this.getList(),this.selectEnumByCategory()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(l["a"])(Object(l["a"])({},this.queryParams),this.page);delete t.total,Object(d["B"])(Object(l["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,n=e.limit;this.page.current=t,this.page.size=n,this.getList()},refreshTable:function(){this.page.current=1,this.getList()},refresh:function(){this.queryParams={},this.page.current=1,this.getList()},openAdd:function(e,t){this.title=e,this.currentInfo=t||{},this.addDia=!0},handleDown:function(e){if(!e.url)return this.$message.warning("文件未上传");this.$download.saveAs(e.url,e.url)},handleLook:function(e){if(!e.url)return this.$message.warning("文件未上传");this.currentInfo=e,this.lookDialogVisible=!0},handleUp:function(e){this.currentInfo=e,this.addDialogVisible=!0},handleAdd:function(){this.addLoading=!0,this.$refs["UpPdfStamp"].generatePDF()},uploadPDFErr:function(){this.addLoading=!1},beforeUpload:function(e){return!(e.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(e,t,n){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code?(this.$message.success("上传成功"),this.refreshTable()):this.$message.error(e.msg)},selectEnumByCategory:function(){var e=this;this.getDicts("document_type").then((function(t){e.fileType=e.dictToValue(t.data)})),this.getDicts("document_state").then((function(t){e.fileState=e.dictToValue(t.data)}))},uploadPDF:function(e,t){var n=this;return Object(c["a"])(Object(o["a"])().m((function a(){var r,c;return Object(o["a"])().w((function(a){while(1)switch(a.n){case 0:return r=new FormData,r.append("file",e,t),r.append("id",n.currentInfo.id),a.p=1,a.n=2,Object(d["C"])(r);case 2:if(c=a.v,n.addLoading=!1,200!=c.code){a.n=3;break}return n.$message({message:"上传成功",type:"success"}),n.addDialogVisible=!1,n.refreshTable(),a.a(2,!0);case 3:return n.$message({message:"上传失败",type:"error"}),a.a(2,!1);case 4:a.n=6;break;case 5:a.p=5,a.v,n.addLoading=!1;case 6:return a.a(2)}}),a,null,[[1,5]])})))()},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["o"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refresh()}))})).catch((function(){}))},submitProduct:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.uploading=!0,Object(d["t"])(t.currentInfo).then((function(e){t.uploading=!1,200==e.code&&(t.$message.success("提交成功"),t.refresh(),t.addDia=!1)})).catch((function(e){t.uploading=!1}))}))}}},p=f,m=(n("4124"),n("2877")),g=Object(m["a"])(p,a,r,!1,null,"2168b535",null);t["default"]=g.exports},1765:function(e,t,n){},"1d09":function(e,t,n){e.exports=n.p+"static/img/综合室.e417bcdf.png"},"1da9":function(e,t,n){e.exports=n.p+"static/img/电力.e5d2178e.png"},"2c86":function(e,t,n){e.exports=n.p+"static/img/储能.dc6fe605.png"},"3ab3":function(e,t,n){e.exports=n.p+"static/img/主任.4d96200f.png"},4124:function(e,t,n){"use strict";n("1765")},"5afa":function(e,t,n){"use strict";n.d(t,"C",(function(){return r})),n.d(t,"B",(function(){return o})),n.d(t,"o",(function(){return c})),n.d(t,"t",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"r",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"z",(function(){return p})),n.d(t,"y",(function(){return m})),n.d(t,"w",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"s",(function(){return h})),n.d(t,"j",(function(){return y})),n.d(t,"A",(function(){return v})),n.d(t,"n",(function(){return D})),n.d(t,"u",(function(){return w})),n.d(t,"a",(function(){return x})),n.d(t,"p",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return k})),n.d(t,"k",(function(){return C})),n.d(t,"x",(function(){return I})),n.d(t,"b",(function(){return T})),n.d(t,"q",(function(){return M})),n.d(t,"g",(function(){return L})),n.d(t,"v",(function(){return P})),n.d(t,"l",(function(){return A}));var a=n("b775");function r(e){return Object(a["a"])({url:"/manageDocumentList/uploadFileManageDocumentList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function o(e){return Object(a["a"])({url:"/manageDocumentList/pageManageDocumentList",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/manageDocumentList/delManageDocumentList",method:"delete",params:e})}function l(e){return Object(a["a"])({url:"/manageDocumentList/doManageDocumentList",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/manageDocumentControlled/addManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function u(e){return Object(a["a"])({url:"/manageDocumentControlled/doManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function s(e){return Object(a["a"])({url:"/manageDocumentControlled/checkManageDocumentControlledPdf",method:"get",responseType:"blob",params:e})}function d(e){return Object(a["a"])({url:"/manageDocumentControlled/checkManageDocumentControlled",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function f(e){return Object(a["a"])({url:"/manageDocumentControlled/delManageDocumentControlled",method:"delete",params:e})}function p(e){return Object(a["a"])({url:"/manageDocumentControlled/pageManageDocumentControlled",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/manageDocumentCancel/pageManageDocumentCancel",method:"get",params:e})}function g(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/exportManageDocumentIssueRecycle",method:"get",responseType:"blob",params:e})}function b(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/addManageDocumentIssueRecycle",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function h(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/doManageDocumentIssueRecycle",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/checkManageDocumentIssueRecycle",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/pageManageDocumentIssueRecycle",method:"get",params:e})}function D(e){return Object(a["a"])({url:"/manageDocumentIssueRecycle/delManageDocumentIssueRecycle",method:"delete",params:e})}function w(e){return Object(a["a"])({url:"/manageDocumentAlter/exportManageDocumentAlter",method:"get",responseType:"blob",params:e})}function x(e){return Object(a["a"])({url:"/manageDocumentAlter/addManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function O(e){return Object(a["a"])({url:"/manageDocumentAlter/doManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function j(e){return Object(a["a"])({url:"/manageDocumentAlter/checkManageDocumentAlterPdf",method:"get",responseType:"blob",params:e})}function k(e){return Object(a["a"])({url:"/manageDocumentAlter/checkManageDocumentAlter",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function C(e){return Object(a["a"])({url:"/manageDocumentAlter/delManageDocumentAlter",method:"delete",params:e})}function I(e){return Object(a["a"])({url:"/manageDocumentAlter/pageManageDocumentAlter",method:"get",params:e})}function T(e){return Object(a["a"])({url:"/manageDocumentCancel/addManageDocumentCancel",method:"post",data:e})}function M(e){return Object(a["a"])({url:"/manageDocumentCancel/doManageDocumentCancel",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/manageDocumentCancel/checkManageDocumentCancel",method:"post",data:e})}function P(e){return Object(a["a"])({url:"/manageDocumentCancel/exportManageDocumentCancel",method:"get",responseType:"blob",params:e})}function A(e){return Object(a["a"])({url:"/manageDocumentCancel/delManageDocumentCancel",method:"delete",params:e})}},7112:function(e,t,n){e.exports=n.p+"static/img/射频.329f22c5.png"},a112:function(e,t,n){e.exports=n.p+"static/img/装备.736f404b.png"},a436:function(e,t,n){var a={"./主任.png":"3ab3","./储能.png":"2c86","./射频.png":"7112","./技术负责人.png":"c6a3","./电力.png":"1da9","./综合室.png":"1d09","./装备.png":"a112","./质量负责人.png":"f26f","./通信.png":"af58"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="a436"},af58:function(e,t,n){e.exports=n.p+"static/img/通信.8cc52573.png"},c6a3:function(e,t,n){e.exports=n.p+"static/img/技术负责人.816870fa.png"},f26f:function(e,t,n){e.exports=n.p+"static/img/质量负责人.db312207.png"}}]);