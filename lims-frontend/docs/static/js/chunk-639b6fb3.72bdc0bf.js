(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-639b6fb3"],{"0ccb":function(e,t,a){"use strict";var r=a("e330"),i=a("50c4"),o=a("577e"),n=a("1148"),l=a("1d80"),s=r(n),u=r("".slice),c=Math.ceil,m=function(e){return function(t,a,r){var n,m,d=o(l(t)),f=i(a),p=d.length,b=void 0===r?" ":o(r);return f<=p||""===b?d:(n=f-p,m=s(b,c(n/b.length)),m.length>n&&(m=u(m,0,n)),e?d+m:m+d)}};e.exports={start:m(!1),end:m(!0)}},"4d90":function(e,t,a){"use strict";var r=a("23e7"),i=a("0ccb").start,o=a("9a0c");r({target:"String",proto:!0,forced:o},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4f37":function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"n",(function(){return o})),a.d(t,"k",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"q",(function(){return u})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return m})),a.d(t,"o",(function(){return d})),a.d(t,"m",(function(){return f})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return b})),a.d(t,"l",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"g",(function(){return y})),a.d(t,"p",(function(){return k})),a.d(t,"c",(function(){return D}));var r=a("b775");function i(e){return Object(r["a"])({url:"/auxiliaryOriginalHours/selectAuxiliaryAllByMonth",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/selectAuxiliaryWorkingHoursDay",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/auxiliaryOutputWorkingHours/selectAuxiliaryOutputWorkingHours",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/deleteAuxiliaryWorkingHoursDay",method:"delete",params:e})}function s(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/insertAuxiliaryWorkingHoursDay",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/updateAuxiliaryWorkingHoursDay",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/approve",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/auxiliaryOutputWorkingHours/collectWorkingHours",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/selectshiftByUser",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/selectAuxiliaryWorkingHoursByNumber",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/auxiliaryWorkingHoursDay/exportAssistantHours",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/auxiliaryOutputWorkingHours/exportOutputHours",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/auxiliaryWorkingHours/selectAuxiliaryWorkingHours",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get",params:e})}function y(e){return Object(r["a"])({url:"/auxiliaryWorkingHours/insertAuxiliaryWorkingHours",method:"post",data:e})}function k(e){return Object(r["a"])({url:"/auxiliaryWorkingHours/upAuxiliaryWorkingHours",method:"post",data:e})}function D(e){return Object(r["a"])({url:"/auxiliaryWorkingHours/deleteAuxiliaryWorkingHours",method:"delete",params:e})}},5694:function(e,t,a){},"9a0c":function(e,t,a){"use strict";var r=a("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},c466:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o}));a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),a=e.getMonth()+1;a<10?a="0"+a+"-":a+="-",t+="-";var r=e.getDate();return r=r<10?"0"+r:r,t+a+r}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("Invalid Date"!==e){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t}return""}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),a=e.getMonth(),r=e.getDate();return 26===r&&(a++,a>11&&(a=0,t++)),a+=1,a=a<10?"0"+a+"-":a+"-",t+="-",r=r<10?"0"+r:r,t+a+r}},c921:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("div",[a("el-form",{ref:"entity",attrs:{model:e.entity,size:"small",inline:!0}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"星期",prop:"weekDay"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部",size:"small"},on:{change:function(t){return e.refreshTable()}},model:{value:e.entity.weekDay,callback:function(t){e.$set(e.entity,"weekDay",t)},expression:"entity.weekDay"}},e._l(e.weekList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"dateTime",attrs:{label:"时间范围",prop:"dateTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"","end-placeholder":"结束日期",format:"yyyy-MM-dd","range-separator":"至",size:"small","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},on:{change:function(t){return e.refreshTable()}},model:{value:e.entity.dateTime,callback:function(t){e.$set(e.entity,"dateTime",t)},expression:"entity.dateTime"}})],1),a("el-form-item",{attrs:{label:"名字",prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1),"ValueTable0"==e.currentTable?a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"全部",size:"small",clearable:""},on:{change:function(t){return e.refreshTable()}},model:{value:e.entity.state,callback:function(t){e.$set(e.entity,"state",t)},expression:"entity.state"}},e._l(e.stateList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"ValueTable1"==e.currentTable?a("el-form-item",{attrs:{label:"样品编号",prop:"sample"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.entity.sample,callback:function(t){e.$set(e.entity,"sample",t)},expression:"entity.sample"}})],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},[a("el-radio-group",{key:"111",attrs:{size:"small"},on:{change:e.searchList},model:{value:e.currentTable,callback:function(t){e.currentTable=t},expression:"currentTable"}},[a("el-radio-button",{attrs:{label:"ValueTable0"}},[e._v(" 辅助工时 ")]),a("el-radio-button",{attrs:{label:"ValueTable1"}},[e._v(" 产量工时 ")])],1),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"ValueTable0"==e.currentTable&&e.checkPermi(["performance:manHour:workTimeManagement:add"]),expression:"currentTable == 'ValueTable0' &&\n        checkPermi(['performance:manHour:workTimeManagement:add'])\n        "}],attrs:{size:"small",type:"primary"},on:{click:e.openAdd}},[e._v("录入数据")]),e.down&&"ValueTable0"===e.currentTable?a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleOut}},[e._v("导 出")]):e._e(),e.down&&"ValueTable1"===e.currentTable?a("el-button",{attrs:{loading:e.outLoading,size:"small",type:"primary"},on:{click:e.handleOut1}},[e._v("导 出")]):e._e(),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"ValueTable0"==e.currentTable&&e.checkPermi(["performance:manHour:workTimeManagement:add"]),expression:"currentTable == 'ValueTable0' &&\n        checkPermi(['performance:manHour:workTimeManagement:add'])\n        "}],attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openBatchCheck(1)}}},[e._v("批量批准")])],1)],1),a("div",{staticClass:"table"},["ValueTable0"==e.currentTable?a("lims-table",{key:"tableData",attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 330px)",isSelection:!0,handleSelectionChange:e.handleSelectionChange},on:{pagination:e.pagination}}):e._e(),"ValueTable1"==e.currentTable?a("lims-table",{key:"tableData0",attrs:{tableData:e.tableData0,column:e.column0,page:e.page0,tableLoading:e.tableLoading,height:"calc(100vh - 330px)"},on:{pagination:e.pagination0}}):e._e()],1),a("el-dialog",{attrs:{"before-close":e.handleClose,title:e.formData.id?"编辑":"录入数据",visible:e.addVisible,width:"600px"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-row",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{model:e.formData,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"录入时间:"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.formData.dateTime,callback:function(t){e.$set(e.formData,"dateTime",t)},expression:"formData.dateTime"}},[a("el-radio",{attrs:{label:e.getYearAndMonthAndDays()+" 00:00:00"}},[e._v("今天")]),a("el-radio",{attrs:{label:e.getYearAndMonthAndDays(new Date((new Date).getTime()-864e5))+" 00:00:00"}},[e._v("昨天")])],1)],1),a("el-form-item",{attrs:{label:"年份:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData.year,callback:function(t){e.$set(e.formData,"year",t)},expression:"formData.year"}})],1),a("el-form-item",{attrs:{label:"周次:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData.week,callback:function(t){e.$set(e.formData,"week",t)},expression:"formData.week"}})],1),a("el-form-item",{attrs:{label:"星期:"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择",size:"small"},model:{value:e.formData.weekDay,callback:function(t){e.$set(e.formData,"weekDay",t)},expression:"formData.weekDay"}},e._l(e.weekList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"班次:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData.shift,callback:function(t){e.$set(e.formData,"shift",t)},expression:"formData.shift"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{model:e.formData,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"编号:",required:""}},[a("el-input",{attrs:{size:"small"},on:{blur:e.getInfoByCode},model:{value:e.formData.number,callback:function(t){e.$set(e.formData,"number",t)},expression:"formData.number"}})],1),a("el-form-item",{attrs:{label:"数量:",required:""}},[a("el-input",{attrs:{size:"small"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1),a("el-form-item",{attrs:{label:"核准工时:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData.approvedWorkingHour,callback:function(t){e.$set(e.formData,"approvedWorkingHour",t)},expression:"formData.approvedWorkingHour"}})],1),a("el-form-item",{attrs:{label:"辅助工时:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData.nonproductiveTime,callback:function(t){e.$set(e.formData,"nonproductiveTime",t)},expression:"formData.nonproductiveTime"}})],1),a("el-form-item",{attrs:{label:"辅助项目:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData.auxiliaryProject,callback:function(t){e.$set(e.formData,"auxiliaryProject",t)},expression:"formData.auxiliaryProject"}})],1)],1)],1)],1),a("el-form",{attrs:{model:e.formData,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"辅助说明:"}},[a("el-input",{attrs:{rows:3,size:"small",type:"textarea"},model:{value:e.formData.remarks,callback:function(t){e.$set(e.formData,"remarks",t)},expression:"formData.remarks"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.addLoad,type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.checkVisible,width:"600px"},on:{"update:visible":function(t){e.checkVisible=t}}},[a("el-row",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{model:e.formData0,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"年份:"}},[a("el-input",{attrs:{disabled:"批准"==e.title,size:"small"},model:{value:e.formData0.year,callback:function(t){e.$set(e.formData0,"year",t)},expression:"formData0.year"}})],1),a("el-form-item",{attrs:{label:"周次:"}},[a("el-input",{attrs:{disabled:"批准"==e.title,size:"small"},model:{value:e.formData0.week,callback:function(t){e.$set(e.formData0,"week",t)},expression:"formData0.week"}})],1),a("el-form-item",{attrs:{label:"星期:"}},[a("el-select",{attrs:{disabled:"批准"==e.title,placeholder:"请选择",size:"small"},model:{value:e.formData0.weekDay,callback:function(t){e.$set(e.formData0,"weekDay",t)},expression:"formData0.weekDay"}},e._l(e.weekList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"姓名:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData0.name,callback:function(t){e.$set(e.formData0,"name",t)},expression:"formData0.name"}})],1),a("el-form-item",{attrs:{label:"班次:"}},[a("el-select",{attrs:{disabled:"批准"==e.title,placeholder:"请选择",size:"small"},model:{value:e.formData0.shift,callback:function(t){e.$set(e.formData0,"shift",t)},expression:"formData0.shift"}},e._l(e.classType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"复核说明:"}},[a("el-input",{attrs:{rows:3,size:"small",type:"textarea"},model:{value:e.formData0.reviewerRemark,callback:function(t){e.$set(e.formData0,"reviewerRemark",t)},expression:"formData0.reviewerRemark"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{model:e.formData0,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"编号:",required:""}},[a("el-input",{attrs:{disabled:"批准"==e.title,size:"small"},model:{value:e.formData0.number,callback:function(t){e.$set(e.formData0,"number",t)},expression:"formData0.number"}})],1),a("el-form-item",{attrs:{label:"数量:",required:""}},[a("el-input",{attrs:{disabled:"批准"==e.title,size:"small"},model:{value:e.formData0.amount,callback:function(t){e.$set(e.formData0,"amount",t)},expression:"formData0.amount"}})],1),a("el-form-item",{attrs:{label:"复核数量:",required:""}},[a("el-input",{attrs:{size:"small"},model:{value:e.formData0.reviewerNumber,callback:function(t){e.$set(e.formData0,"reviewerNumber",t)},expression:"formData0.reviewerNumber"}})],1),a("el-form-item",{attrs:{label:"核准工时:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData0.approvedWorkingHour,callback:function(t){e.$set(e.formData0,"approvedWorkingHour",t)},expression:"formData0.approvedWorkingHour"}})],1),a("el-form-item",{attrs:{label:"复核工时:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData0.reviewerNonproductiveTime,callback:function(t){e.$set(e.formData0,"reviewerNonproductiveTime",t)},expression:"formData0.reviewerNonproductiveTime"}})],1),a("el-form-item",{attrs:{label:"辅助项目:"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.formData0.auxiliaryProject,callback:function(t){e.$set(e.formData0,"auxiliaryProject",t)},expression:"formData0.auxiliaryProject"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",[a("el-button",{attrs:{loading:e.checkLoadN},on:{click:function(t){return e.submitCheck(0)}}},[e._v("不批准")]),a("el-button",{attrs:{loading:e.checkLoadY,type:"primary"},on:{click:function(t){return e.submitCheck(1)}}},[e._v("批 准")])],1)],1)],1),a("el-dialog",{attrs:{"before-close":e.closeBatchCheckDialog,title:e.batchCheckTitle,visible:e.batchCheckDialog,width:"30%"},on:{"update:visible":function(t){e.batchCheckDialog=t}}},[a("span",[e._v(e._s(e.batchCheckDialogMessage))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.batchCheck(0)}}},[e._v("不批准")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.batchCheck(1)}}},[e._v("批 准")])],1)])],1)},i=[],o=a("5530"),n=(a("99af"),a("7db0"),a("14d9"),a("b0c0"),a("e9c4"),a("b64b"),a("d3b7"),a("4d90"),a("0643"),a("76d6"),a("fffc"),a("4e3e"),a("159b"),a("c466")),l=a("4f37"),s=a("00d5"),u={components:{limsTable:s["a"]},dicts:["sys_class_type"],data:function(){var e=this;return{entity:{dateTime:[]},down:!1,addFileVisible:!1,weekList:[{label:"周一",value:"1",type:"primary"},{label:"周二",value:"2",type:"primary"},{label:"周三",value:"3",type:"primary"},{label:"周四",value:"4",type:"primary"},{label:"周五",value:"5",type:"primary"},{label:"周六",value:"6",type:"primary"},{label:"周日",value:"0",type:"primary"}],currentTable:"ValueTable0",addVisible:!1,addLoad:!1,formData:{dateTime:Object(n["b"])()+" 00:00:00",year:(new Date).getFullYear(),week:this.getCurrentWeekNumber(),weekDay:this.getWeek(),shift:"",number:"",amount:"",approvedWorkingHour:"",nonproductiveTime:"",auxiliaryProject:"",remarks:""},formData0:{dateTime:0,year:(new Date).getFullYear(),week:this.getCurrentWeekNumber(),weekDay:this.getWeek(),createUser:"",shift:"",number:"",reviewerNumber:"",approvedWorkingHour:"",reviewerNonproductiveTime:"",auxiliaryProject:"",reviewerRemark:"",nameUser:"",name:""},checkVisible:!1,checkLoadN:!1,checkLoadY:!1,title:"批准",classType:[],stateList:[{value:"已提交",label:"已提交"},{value:"已审核",label:"已审核"},{value:"已批准",label:"已批准"},{value:"不批准",label:"不批准"}],totalInfo:null,auxiliaryWorking:null,outLoading:!1,batchCheckTitle:"批量审核",batchCheckDialog:!1,ValueTable0Selected:[],batchCheckDialogMessage:"",tableData:[],column:[{label:"姓名",prop:"name"},{label:"编号",prop:"number"},{label:"辅助项目名称",prop:"auxiliaryProject",width:"120px"},{label:"状态",prop:"state",dataType:"tag",formatType:function(e){return"已提交"==e?"primary":"已审核"==e?"warning":"已批准"==e?"success":"不批准"==e?"danger":void 0}},{label:"核准工时",prop:"approvedWorkingHour"},{label:"数量",prop:"amount"},{label:"辅助工时",prop:"nonproductiveTime"},{label:"辅助说明",prop:"remarks"},{label:"复核人",prop:"reviewer"},{label:"复核数量",prop:"reviewerNumber"},{label:"复核工时",prop:"reviewerNonproductiveTime"},{label:"复核说明",prop:"reviewerRemark"},{label:"年",prop:"year"},{label:"班次",prop:"shift",dataType:"tag",formatData:function(t){return e.shifList.find((function(e){return e.value==t}))?e.shifList.find((function(e){return e.value==t})).label:null}},{label:"周次",prop:"week"},{label:"星期",prop:"weekDay",dataType:"tag",formatData:function(t){return e.weekList.find((function(e){return e.value==t})).label}},{label:"创建时间",prop:"createTime"},{label:"日期",prop:"dateTime"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.handleEdit(t)},showHide:function(t){return e.checkPermi(["performance:manHour:workTimeManagement:edit"])},disabled:function(e){return"已批准"===e.state}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},showHide:function(t){return e.checkPermi(["sperformance:manHour:workTimeManagement:del"])},disabled:function(e){return"已批准"===e.state}},{name:"批准",type:"text",clickFun:function(t){e.handleRatify(t)},showHide:function(t){return e.checkPermi(["performance:manHour:workTimeManagement:ratify"])},disabled:function(e){return"已批准"===e.state}}]}],page:{total:0,size:20,current:1},tableLoading:!1,tableData0:[],column0:[{label:"检测人",prop:"name"},{label:"检测项分类",prop:"inspectionItemClass"},{label:"检测项",prop:"inspectionItem"},{label:"检测子项",prop:"inspectionItemSubclass"},{label:"样品编号",prop:"sample"},{label:"委托单号",prop:"orderNo"},{label:"电缆标识",prop:"cableTag"},{label:"产量工时",prop:"outputWorkTime"},{label:"工时分组",prop:"manHourGroup"},{label:"单价",prop:"price"},{label:"日期",prop:"dateTime"},{label:"周次",prop:"week"},{label:"星期",prop:"weekDay"}],page0:{total:0,size:20,current:1},shifList:[]}},watch:{"formData.dateTime":function(e){if(e==Object(n["b"])()+" 00:00:00")this.formData.year=(new Date).getFullYear(),this.formData.week=this.getCurrentWeekNumber(),this.formData.weekDay=this.getWeek();else{var t=new Date,a=new Date(t);a.setDate(t.getDate()-1);var r=new Date(a.getTime());this.formData.year=r.getFullYear(),this.formData.week=this.getCurrentWeekNumber(r),this.formData.weekDay=this.getWeek(r)}},"formData.amount":function(e){e&&(isNaN(e)?(this.$message.error("请输入数字"),this.formData.amount=""):this.formData.approvedWorkingHour&&(this.formData.nonproductiveTime=this.formData.approvedWorkingHour*e))},"formData.approvedWorkingHour":function(e){e&&this.formData.amount&&(this.formData.nonproductiveTime=this.formData.amount*e)},"formData0.reviewerNumber":function(e){e&&(isNaN(e)?(this.$message.error("请输入数字"),this.formData0.reviewerNumber=""):this.formData0.approvedWorkingHour&&(this.formData0.reviewerNonproductiveTime=this.formData0.approvedWorkingHour*e))},"formData0.approvedWorkingHour":function(e){e&&this.formData0.reviewerNumber&&(this.formData0.reviewerNonproductiveTime=this.formData0.reviewerNumber*e)}},created:function(){var e=this;this.setDate(),this.getDicts("sys_class_type").then((function(t){e.shifList=t.data}))},mounted:function(){this.getCurrentWeekNumber(),this.selectshiftByUser(),this.searchList()},methods:{searchList:function(){"ValueTable0"==this.currentTable?this.getList():this.getList0()},getList:function(e){var t=this;this.tableLoading=!0;var a,r={};e?r=Object(o["a"])(Object(o["a"])({},e),this.page):(r=Object(o["a"])(Object(o["a"])({},this.entity),this.page),r.dateTime=(null===(a=r.dateTime)||void 0===a?void 0:a.length)>0?JSON.stringify(r.dateTime):null);delete r.total,Object(l["n"])(Object(o["a"])({},r)).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData=e.data.records,t.page.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},getList0:function(e){var t=this;this.tableLoading=!0;var a,r={};e?r=Object(o["a"])(Object(o["a"])({},e),this.page0):(r=Object(o["a"])(Object(o["a"])({},this.entity),this.page0),r.dateTime=(null===(a=r.dateTime)||void 0===a?void 0:a.length)>0?JSON.stringify(r.dateTime):null);delete r.total,delete r.state,Object(l["k"])(Object(o["a"])({},r)).then((function(e){t.tableLoading=!1,200===e.code&&(t.tableData0=e.data.records,t.page0.total=e.data.total)})).catch((function(e){t.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},pagination0:function(e){var t=e.page,a=e.limit;this.page0.current=t,this.page0.size=a,this.getList0()},setDate:function(){var e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i="".concat(t,"-").concat(a,"-").concat(r),o="".concat(t,"-").concat(a,"-").concat(r);this.entity.dateTime.push(i),this.entity.dateTime.push(o),this.refreshTable()},getYearAndMonthAndDays:function(e){return Object(n["b"])(e)},refreshTable:function(e){var t={};this.entity.week1&&this.entity.week2?t.week=JSON.stringify([this.entity.week1,this.entity.week2]):t.week="",this.entity.dateTime?t.dateTime=JSON.stringify(this.entity.dateTime):t.dateTime="",t.weekDay=this.entity.weekDay,t.name=this.entity.name,t.sample=this.entity.sample,"ValueTable0"==this.currentTable?(t.state=this.entity.state,this.page.current=1,this.getList(t)):(this.page0.current=1,this.getList0(t))},refresh:function(){this.entity={},this.entity.dateTime=[],this.setDate(),this.refreshTable()},openAdd:function(){this.formData={dateTime:Object(n["b"])()+" 00:00:00",year:(new Date).getFullYear(),week:this.getCurrentWeekNumber(),weekDay:this.getWeek(),shift:"",number:"",amount:"",approvedWorkingHour:"",nonproductiveTime:"",auxiliaryProject:"",remarks:""},this.addVisible=!0},handleEdit:function(e){this.formData=e,this.addVisible=!0},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["d"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refreshTable("page")}))})).catch((function(){}))},handleClose:function(){this.addVisible=!1},submitAdd:function(){var e=this;this.formData.number?this.formData.amount?(this.addLoad=!0,this.formData.id?Object(l["q"])(this.formData).then((function(t){e.addLoad=!1,e.$message.success("操作成功"),e.formData.number="",e.formData.amount="",e.formData.remarks="",e.formData.approvedWorkingHour="",e.formData.nonproductiveTime="",e.formData.auxiliaryProject="",e.refreshTable("page")})):Object(l["h"])(this.formData).then((function(t){e.addLoad=!1,e.$message.success("已提交"),e.formData.number="",e.formData.amount="",e.formData.remarks="",e.formData.approvedWorkingHour="",e.formData.nonproductiveTime="",e.formData.auxiliaryProject="",e.addVisible=!1,e.refreshTable("page")}))):this.$message.error("请输入数量"):this.$message.error("请输入编号")},handleRatify:function(e){this.title="批准",this.formData0=e,this.checkVisible=!0,this.formData0.reviewerNumber=this.formData0.amount,this.formData0.approvedWorkingHour&&this.formData0.reviewerNumber&&(this.formData0.reviewerNonproductiveTime=this.formData0.approvedWorkingHour*this.formData0.reviewerNumber)},handleChangeTask:function(e){this.ValueTable0Selected=JSON.parse(JSON.stringify(e))},openBatchCheck:function(e){if(this.ValueTable0Selected.length>0){var t=this.ValueTable0Selected.every((function(e){return"已批准"!==e.state}));this.batchCheckTitle="批量批准",this.batchCheckDialogMessage="是否全部通过批准?",t?this.batchCheckDialog=!0:this.$message.error("请选择未批准的数据")}else this.$message.error("请选择至少一条数据")},batchCheck:function(e){var t=this,a=JSON.parse(JSON.stringify(this.ValueTable0Selected)),r=0===e?"不批准":"已批准",i=[];a.forEach((function(e){delete e.orderBy,e.state=r,i.push(e)})),Object(l["a"])({auxiliaryWorkingHoursDays:i}).then((function(e){t.submitBatchCheckDialog(),t.$message.success("操作成功")}))},closeBatchCheckDialog:function(){this.batchCheckDialog=!1},submitBatchCheckDialog:function(){this.batchCheckDialog=!1,this.refreshTable("page")},submitCheck:function(e){var t=this;this.formData0.number?this.formData0.amount?(0==e?this.checkLoadN=!0:this.checkLoadY=!0,this.formData0.state=0==e?"不批准":"已批准",Object(l["a"])({auxiliaryWorkingHoursDays:[this.formData0]}).then((function(a){0==e?t.checkLoadN=!1:t.checkLoadY=!1,t.$message.success("操作成功"),t.checkVisible=!1,t.refreshTable("page")}))):this.$message.error("请输入数量"):this.$message.error("请输入编号")},getCurrentWeekNumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()),a=new Date(t.getFullYear(),0,0),r=new Date(a.getFullYear()+1,0,0),i=(t-a)/864e5,o=Math.floor(i/7);return t>e?o:r<=e?o+1:o+2},getWeek:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDay();return String(t)},collectWorkingHours:function(){var e=this,t={};this.entity.week1&&this.entity.week2?t.week=JSON.stringify([this.entity.week1,this.entity.week2]):t.week="",this.entity.dateTime?t.dateTime=JSON.stringify(this.entity.dateTime):t.dateTime="",t.weekDay=this.entity.weekDay,t.name=this.entity.name,t.state=this.entity.state,Object(l["b"])(t).then((function(t){e.totalInfo=t.data}))},selectshiftByUser:function(){var e=this;Object(l["o"])().then((function(t){e.formData.shift=t.data}))},getInfoByCode:function(){var e=this;this.formData.number&&Object(l["m"])({number:this.formData.number}).then((function(t){e.auxiliaryWorking=t.data,e.addVisible?(e.formData.approvedWorkingHour=e.auxiliaryWorking.approvedWorkingHour,e.formData.auxiliaryProject=e.auxiliaryWorking.auxiliaryProject):"审核"==e.title&&e.checkVisible&&(e.formData0.approvedWorkingHour=e.auxiliaryWorking.approvedWorkingHour,e.formData0.auxiliaryProject=e.auxiliaryWorking.auxiliaryProject)}))},handleOut:function(){var e=this,t=this.HaveJson(this.entity);this.entity.dateTime?t.dateTime=JSON.stringify(this.entity.dateTime):t.dateTime="",this.outLoading=!0,Object(l["e"])({entity:t}).then((function(t){e.outLoading=!1;var a=new Blob([t]);e.$download.saveAs(a,"辅助工时信息导出.xlsx")})).catch((function(t){e.outLoading=!1}))},handleOut1:function(){var e=this,t=this.HaveJson(this.entity);this.entity.dateTime?t.dateTime=JSON.stringify(this.entity.dateTime):t.dateTime="",this.outLoading=!0,Object(l["f"])({entity:t}).then((function(t){e.outLoading=!1;var a=new Blob([t]);e.$download.saveAs(a,"产量工时信息导出.xlsx")})).catch((function(t){e.outLoading=!1}))},handleSelectionChange:function(e){this.ValueTable0Selected=e}}},c=u,m=(a("fb03"),a("2877")),d=Object(m["a"])(c,r,i,!1,null,"4b2670ea",null);t["default"]=d.exports},fb03:function(e,t,a){"use strict";a("5694")}}]);