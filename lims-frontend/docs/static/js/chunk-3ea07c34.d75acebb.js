(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea07c34","chunk-581e8f40"],{4749:function(t,i,e){"use strict";e("a4d5")},"53b1":function(t,i,e){},"6d3e":function(t,i,e){"use strict";e("53b1")},9448:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.diaLoading,expression:"diaLoading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.formDia,title:"不符合项的分布",width:"90%"},on:{"update:visible":function(i){t.formDia=i},close:t.closeDia}},[e("table",{staticClass:"table",attrs:{border:"1",cellspacing:"10"}},[e("tr",[e("td",[t._v("章节号")]),e("th",{staticClass:"div-with-line"},[e("span",{staticStyle:{float:"left"}},[t._v("要素")]),e("span",{staticStyle:{float:"right"}},[t._v("部门")])]),e("th",[t._v("主任")]),e("th",[t._v("技术负责人")]),e("th",[t._v("质量负责人")]),e("th",[t._v("综合室")]),e("th",[t._v("试验室")]),e("th",[t._v("合计")]),e("th",[t._v("占%")])]),t._l(t.distributionDetailList,(function(i,n){return e("tr",{key:i.value},[e("td",[t._v(t._s(i.chapterNumber))]),e("th",[t._v(t._s(i.essentials))]),e("th",[e("el-input-number",{attrs:{precision:0,clearable:"",size:"small"},model:{value:i.director,callback:function(e){t.$set(i,"director",e)},expression:"item.director"}})],1),e("th",[e("el-input-number",{attrs:{precision:0,clearable:"",size:"small"},model:{value:i.technology,callback:function(e){t.$set(i,"technology",e)},expression:"item.technology"}})],1),e("th",[e("el-input-number",{attrs:{precision:0,clearable:"",size:"small"},model:{value:i.quality,callback:function(e){t.$set(i,"quality",e)},expression:"item.quality"}})],1),e("th",[e("el-input-number",{attrs:{precision:0,clearable:"",size:"small"},model:{value:i.comprehensive,callback:function(e){t.$set(i,"comprehensive",e)},expression:"item.comprehensive"}})],1),e("th",[e("el-input-number",{attrs:{precision:0,clearable:"",size:"small"},model:{value:i.testing,callback:function(e){t.$set(i,"testing",e)},expression:"item.testing"}})],1),e("th",[t._v(" "+t._s(i.total)+" ")]),e("th",[t._v(" "+t._s((i.proportion?i.proportion:0)+"%")+" ")])])})),e("tr",[e("td"),e("th",[t._v(" 占比 ")]),e("th",[t._v(" "+t._s((t.distributionProportion.director?t.distributionProportion.director:0)+"%")+" ")]),e("th",[t._v(" "+t._s((t.distributionProportion.technology?t.distributionProportion.technology:0)+"%")+" ")]),e("th",[t._v(" "+t._s((t.distributionProportion.quality?t.distributionProportion.quality:0)+"%")+" ")]),e("th",[t._v(" "+t._s((t.distributionProportion.comprehensive?t.distributionProportion.comprehensive:0)+"%")+" ")]),e("th",[t._v(" "+t._s((t.distributionProportion.testing?t.distributionProportion.testing:0)+"%")+" ")]),e("th",[t._v(" "+t._s(t.distributionProportion.total?t.distributionProportion.total:0)+" ")]),e("th")])],2),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDia}},[t._v("取 消")]),e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleEdit}},[t._v("提 交")])],1)])],1)},o=[],a=(e("d81d"),e("14d9"),e("d3b7"),e("0643"),e("a573"),e("a343")),r={name:"formDia",components:{},data:function(){return{formDia:!1,diaLoading:!1,loading:!1,distributionDetailList:[],form:{},distributionProportion:{}}},mounted:function(){},methods:{openDia:function(t,i){this.formDia=!0,this.operationType=t,"add"!==t?this.searchInfo(i):this.selectEnumByCategory()},searchInfo:function(t){var i=this;this.diaLoading=!0,Object(a["d"])({distributionId:t.distributionId}).then((function(t){i.diaLoading=!1,i.form=t.data,i.distributionDetailList=i.form.distributionDetailList,i.distributionProportion=i.form.distributionProportion})).catch((function(t){console.log(t),i.diaLoading=!1}))},handleEdit:function(){var t=this,i=new Date,e=i.getFullYear();this.loading=!0;var n=this.HaveJson(this.form);n.distributionYear=e,n.distributionDetailList=this.HaveJson(this.distributionDetailList),"add"===this.operationType?Object(a["a"])(n).then((function(i){t.loading=!1,t.$message.success("操作成功"),t.closeDia()})).catch((function(i){console.log("err---",i),t.loading=!1})):"edit"===this.operationType&&Object(a["i"])(n).then((function(i){t.loading=!1,t.$message.success("操作成功"),t.closeDia()})).catch((function(i){console.log("err---",i),t.loading=!1}))},closeDia:function(){this.formDia=!1,this.$emit("closeDia")},selectEnumByCategory:function(){var t=this;this.distributionDetailList=[],this.getDicts("essential").then((function(i){var e=t.dictToValue(i.data);e.map((function(i){var e=Object.assign({essentials:i.label,chapterNumber:i.value});t.distributionDetailList.push(e)}))}))}}},s=r,c=(e("4749"),e("2877")),l=Object(c["a"])(s,n,o,!1,null,"b94e44a6",null);i["default"]=l.exports},a343:function(t,i,e){"use strict";e.d(i,"g",(function(){return o})),e.d(i,"h",(function(){return a})),e.d(i,"e",(function(){return r})),e.d(i,"f",(function(){return s})),e.d(i,"b",(function(){return c})),e.d(i,"c",(function(){return l})),e.d(i,"d",(function(){return u})),e.d(i,"a",(function(){return d})),e.d(i,"i",(function(){return h}));var n=e("b775");function o(t){return Object(n["a"])({url:"/qualitySupervise/pageSuperviseDetailAccording",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/qualitySupervise/superviseDetailAccordingExport",method:"get",responseType:"blob",params:t})}function r(t){return Object(n["a"])({url:"/qualitySupervise/getSuperviseDetailAccording",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/inconsistentDistribution/pageInconsistentDistribution",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/inconsistentDistribution/delInconsistentDistribution",method:"delete",params:t})}function l(t){return Object(n["a"])({url:"/inconsistentDistribution/exportInconsistentDistribution",method:"get",responseType:"blob",params:t})}function u(t){return Object(n["a"])({url:"/inconsistentDistribution/getInconsistentDistributionOne",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/inconsistentDistribution/addInconsistentDistribution",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/inconsistentDistribution/updateInconsistentDistribution",method:"post",data:t})}},a4d5:function(t,i,e){},aa0c:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"capacity-scope"},[e("div",{staticClass:"search"},[e("div",[e("el-form",{ref:"searchForm",attrs:{model:t.searchForm,size:"small",inline:!0}},[e("el-form-item",{attrs:{label:"年份",prop:"laboratoryName"}},[e("el-date-picker",{attrs:{"value-format":"yyyy",format:"yyyy",clearable:"",type:"year",placeholder:"选择年"},on:{change:t.searchList},model:{value:t.searchForm.distributionYear,callback:function(i){t.$set(t.searchForm,"distributionYear",i)},expression:"searchForm.distributionYear"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchList}},[t._v("查询")]),e("el-button",{attrs:{size:"mini"},on:{click:t.resetSearchForm}},[t._v("重置")])],1)],1)],1),e("div",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.openFormDia("add")}}},[t._v("新 增")])],1)]),e("div",{staticClass:"table"},[e("limsTable",{attrs:{column:t.tableColumn,height:"calc(100vh - 19em)","table-data":t.tableData,"table-loading":t.tableLoading,page:t.page},on:{pagination:t.pagination}})],1),t.formDia?e("form-dia",{ref:"formDia",on:{closeDia:t.closeDia}}):t._e()],1)},o=[],a=e("5530"),r=e("00d5"),s=e("9448"),c=e("a343"),l={name:"NonconformingDistribution",components:{FormDia:s["default"],limsTable:r["a"]},data:function(){var t=this;return{searchForm:{distributionYear:""},tableColumn:[{label:"年份",prop:"distributionYear",minWidth:"100"},{label:"创建人",prop:"createUserName",minWidth:"100"},{label:"创建时间",prop:"createTime",minWidth:"100"},{label:"修改人",prop:"updateUserName",minWidth:"100"},{label:"修改时间",prop:"updateTime",minWidth:"100"},{dataType:"action",minWidth:"220",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(i){t.openFormDia("edit",i)}},{name:"导出",type:"text",clickFun:function(i){t.handleDown(i)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(i){t.delPlan(i)}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},formDia:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,i=this.searchForm,e=this.page;this.tableLoading=!0,Object(c["f"])(Object(a["a"])(Object(a["a"])({},i),e)).then((function(i){t.tableLoading=!1,t.tableData=i.data.records,t.page.total=i.data.total})).catch((function(i){console.log("err---",i),t.tableLoading=!1}))},delPlan:function(t){var i=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.tableLoading=!0,Object(c["b"])({distributionId:t.distributionId}).then((function(t){i.tableLoading=!1,i.$message.success("删除成功"),i.searchList()})).catch((function(t){i.tableLoading=!1,console.log("err---",t)}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},openFormDia:function(t,i){var e=this;this.formDia=!0,this.$nextTick((function(){e.$refs.formDia.openDia(t,i)}))},handleDown:function(t){var i=this;Object(c["c"])({distributionId:t.distributionId}).then((function(t){i.outLoading=!1;var e=new Blob([t],{type:"application/msword"});i.$download.saveAs(e,"不符合项的分布.docx")}))},closeDia:function(){this.formDia=!1,this.searchList()},resetSearchForm:function(){this.searchForm.distributionYear="",this.searchList()},pagination:function(t){var i=t.page,e=t.limit;this.page.current=i,this.page.size=e,this.searchList()}}},u=l,d=(e("6d3e"),e("2877")),h=Object(d["a"])(u,n,o,!1,null,"72b3f92c",null);i["default"]=h.exports}}]);