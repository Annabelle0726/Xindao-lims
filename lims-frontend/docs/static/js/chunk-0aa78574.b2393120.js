(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0aa78574"],{"07cb":function(e,t,a){},"13f4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"inspection",staticStyle:{"background-color":"rgb(245, 247, 251)"}},[a("el-row",{staticClass:"title"},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8}},[a("el-form",{staticClass:"form-inline",staticStyle:{"text-align":"right","padding-top":"0",display:"inline"},attrs:{inline:!0,model:e.otherForm,"label-width":"50px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"温度:"}},[a("el-input",{staticStyle:{width:"90px","line-height":"60px"},attrs:{disabled:e.state>1,placeholder:"",size:"small"},on:{change:function(t){return e.subOtherForm(t,"temperature")}},model:{value:e.otherForm.temperature,callback:function(t){e.$set(e.otherForm,"temperature",t)},expression:"otherForm.temperature"}}),a("span",{staticStyle:{"margin-left":"4px"}},[e._v("℃")])],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"湿度:"}},[a("el-input",{staticStyle:{width:"90px","line-height":"60px"},attrs:{disabled:e.state>1,placeholder:"",size:"small"},on:{change:function(t){return e.subOtherForm(t,"humidity")}},model:{value:e.otherForm.humidity,callback:function(t){e.$set(e.otherForm,"humidity",t)},expression:"otherForm.humidity"}}),a("span",{staticStyle:{"margin-left":"4px"}},[e._v("%")])],1)],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.refreshView}},[e._v("刷新")]),1==e.typeSource?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openPurchase}},[e._v("进货验证")]):e._e(),1==e.state&&1==e.typeSource?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openUnPassDialog("add")}}},[e._v("不合格处理")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.sampleVisible=!0,e.uploadSample()}}},[e._v("样品切换")]),1==e.state?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.addVerifyDia=!0}}},[e._v("提交")]):e._e(),2==e.state?a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.openAddCheck}},[e._v("通过")]):e._e(),2==e.state?a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.upInsReview(0)}}},[e._v("不通过")]):e._e(),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.exportTable("myTable")}}},[e._v("下载原始记录")]),a("el-button",{attrs:{size:"small"},on:{click:e.goback}},[e._v("返回")])],1)],1),a("div",{staticClass:"search"},[a("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.searchForm,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"委托编号:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.insOrder.entrustCode,callback:function(t){e.$set(e.insOrder,"entrustCode",t)},expression:"insOrder.entrustCode"}})],1),a("el-form-item",{attrs:{label:"样品编号:"}},[a("el-tooltip",{attrs:{content:e.currentSample.sampleCode,disabled:!e.currentSample.sampleCode}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.currentSample.sampleCode,callback:function(t){e.$set(e.currentSample,"sampleCode",t)},expression:"currentSample.sampleCode"}})],1)],1),a("el-form-item",{attrs:{label:"样品名称:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.currentSample.sample,callback:function(t){e.$set(e.currentSample,"sample",t)},expression:"currentSample.sample"}})],1),a("el-form-item",{attrs:{label:"样品数量:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.sampleProduct.length,callback:function(t){e.$set(e.sampleProduct,"length",t)},expression:"sampleProduct.length"}})],1),a("el-form-item",{attrs:{label:"样品型号:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.currentSample.model,callback:function(t){e.$set(e.currentSample,"model",t)},expression:"currentSample.model"}})],1),a("el-form-item",{attrs:{label:"下发时间:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.insOrder.sendTime,callback:function(t){e.$set(e.insOrder,"sendTime",t)},expression:"insOrder.sendTime"}})],1),a("el-form-item",{attrs:{label:"紧急程度:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.insOrder.typeName,callback:function(t){e.$set(e.insOrder,"typeName",t)},expression:"insOrder.typeName"}})],1),a("el-form-item",{attrs:{label:"约定时间:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.insOrder.appointed,callback:function(t){e.$set(e.insOrder,"appointed",t)},expression:"insOrder.appointed"}})],1),1===e.typeSource?a("el-form-item",{attrs:{label:"抽检数量:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.insOrder.testQuantity,callback:function(t){e.$set(e.insOrder,"testQuantity",t)},expression:"insOrder.testQuantity"}})],1):e._e(),1===e.typeSource?a("el-form-item",{attrs:{label:"厂家密度:"}},[a("el-input",{attrs:{clearable:"",disabled:"",placeholder:"请输入",size:"small"},model:{value:e.supplierDensity,callback:function(t){e.supplierDensity=t},expression:"supplierDensity"}})],1):e._e(),a("el-form-item",{attrs:{label:"当前样品位数:","label-width":"120px"}},[e.currentKey?a("el-tag",[e._v(e._s("NO."+e.currentKey))]):e._e()],1),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{disabled:1!=e.state,clearable:"",placeholder:"请输入",size:"small"},on:{blur:function(t){return e.subOtherForm(e.insOrder.remark,"remark")}},model:{value:e.insOrder.remark,callback:function(t){e.$set(e.insOrder,"remark",t)},expression:"insOrder.remark"}})],1)],1)],1),a("div",{staticClass:"center"},[a("div",{staticClass:"search",staticStyle:{"text-align":"left",display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[e.tableList.length>0?a("span",[e._v("检验模板：")]):e._e(),a("el-radio-group",{attrs:{size:"small"},model:{value:e.currentTable,callback:function(t){e.currentTable=t},expression:"currentTable"}},e._l(e.tableLists,(function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.templateId,size:"small"}},[e._v(e._s(t.templateName))])})),1)],1),a("div",{staticStyle:{display:"flex","align-items":"center"}},[1==e.state?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openAddUnpass}},[e._v("新增不合格复测")]):e._e(),1==e.state?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.unpassCheck}},[e._v("不合格复测")]):e._e(),e.state>1?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.viewUnpassCheck}},[e._v("查看不合格复测")]):e._e(),e.cableTagList.length>0?a("span",[e._v(" 电缆配置：")]):e._e(),e.cableTagList.length>0?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:function(t){return e.handleChangeCableTag(e.currentSample.id,0,"cableTag",t)},focus:function(t){return e.getCableTag(e.currentSample.id)}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.cableTagList,(function(t){return a("el-option",{key:t.cableTag,attrs:{label:t.cableTag,value:t.cableTag}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.cableTag))]),0==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"danger"}},[e._v("未检")]):e._e(),1==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"warning"}},[e._v("检验中")]):e._e(),2==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"success"}},[e._v("已检")]):e._e()],1)})),1):e._e(),e.repetitionTagList.length>0?a("span",[e._v(" 重复检验项：")]):e._e(),e.repetitionTagList.length>0?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:function(t){return e.handleChangeCableTag(e.currentSample.id,0,"repetitionTag",t)},focus:function(t){return e.getRepetitionTag(e.currentSample.id)}},model:{value:e.repetitionTag,callback:function(t){e.repetitionTag=t},expression:"repetitionTag"}},e._l(e.repetitionTagList,(function(t){return a("el-option",{key:t.repetitionTag,attrs:{label:t.radius,value:t.repetitionTag}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.radius))]),0==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"danger"}},[e._v("未检")]):e._e(),1==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"warning"}},[e._v("检验中")]):e._e(),2==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"success"}},[e._v("已检")]):e._e()],1)})),1):e._e(),"1"==e.typeSource?a("span",[e._v(" 待检验数量：")]):e._e(),"1"==e.typeSource?a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:function(t){return e.handleChangeCableTag(e.currentSample.id,4,"cableTag",t)},focus:function(t){return e.getRawMaterialTag(e.currentSample.id)}},model:{value:e.rawMaterialTag,callback:function(t){e.rawMaterialTag=t},expression:"rawMaterialTag"}},e._l(e.rawMaterialTagList,(function(t){return a("el-option",{key:t.rawMaterialTag,attrs:{label:t.rawMaterialTag,value:t.rawMaterialTag}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.rawMaterialTag))]),0==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"danger"}},[e._v("未检")]):e._e(),1==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"warning"}},[e._v("检验中")]):e._e(),2==t.status?a("el-tag",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"small",type:"success"}},[e._v("已检")]):e._e()],1)})),1):e._e(),1==e.state?a("el-button",{attrs:{loading:e.dataAcquisitionLoading,size:"small",type:"primary"},on:{click:e.getDataAcquisitionDevice}},[e._v("数据采集")]):e._e(),1==e.state?a("el-button",{attrs:{type:e.dataAcquisitionEidtAble?"":"primary",size:"small"},on:{click:function(t){e.dataAcquisitionEidtAble=!e.dataAcquisitionEidtAble}}},[e._v(e._s(e.dataAcquisitionEidtAble?"关闭编辑":"编辑数采"))]):e._e()],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"center-box",attrs:{id:"nav"}},[e.tableLists.find((function(t){return t.templateId==e.currentTable}))?e._l(e.tableList,(function(t,i){return a("table",{key:i+e.currentTable+e.currentSample.id,staticClass:"tables",attrs:{border:"1",cellpadding:"10",id:"myTable"}},[a("tbody",[a("tr",{staticStyle:{"white-space":"nowrap"}},[e._v(" 委托编号："+e._s(e.insOrder.entrustCode)+" ")]),e._l(t.arr,(function(r,s){return a("tr",{key:s},e._l(r,(function(r,n){return void 0==r.v.mc||4===Object.keys(r.v.mc).length?a("td",{key:n,style:"background:"+(r.v.bg?r.v.bg:"")+";color:"+r.v.fc+";font-size:"+r.v.fs+"px;width:"+e.handleWidth(r)+"px !important;height:"+t.style.rowlen[r.r]+"px;font-wight:"+(r.v.bl?"bold":"")+";",attrs:{id:t.templateId+"-"+r.i+"-"+r.r+"-"+r.c,colspan:r.v.mc&&r.v.mc.cs?r.v.mc.cs:1,rowspan:r.v.mc&&r.v.mc.rs?r.v.mc.rs:1}},[a("div",{staticClass:"content",class:"content-h-"+r.v.ht+" content-v-"+r.v.vt,style:"width:"+e.handleWidth(r)+"px !important;min-height:"+t.style.rowlen[r.r]+"px;"},[void 0!=r.v.ps&&"string"===typeof r.v.ps.value&&r.v.ps.value.includes("检验值")&&1==e.state?[1==e.getInspectionValueType(r.i)?a("el-input",{key:"abc-000"+i+"000"+s+"000"+n,staticClass:"table_input",attrs:{disabled:1==e.getInspectionItemType(r.i)&&!e.dataAcquisitionEidtAble||r.u!=e.userId&&void 0!=r.u&&""!=r.u},on:{change:function(a){return e.changeInput(a,t.templateId+"-"+r.r+"-"+r.c+"-"+r.i,r,"getDataType")},input:function(t){return e.handleInput(r)},keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.changeInput("",t.templateId+"-"+r.r+"-"+r.c+"-"+r.i,r,"getDataType")}},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:r.v.v,callback:function(t){e.$set(r.v,"v",t)},expression:"n.v.v"}}):2==e.getInspectionValueType(r.i)?a("el-input",{staticClass:"table_input",attrs:{disabled:1==e.getInspectionItemType(r.i)||r.u!=e.userId&&void 0!=r.u&&""!=r.u,type:"textarea"},on:{change:function(a){return e.changeInput(a,t.templateId+"-"+r.r+"-"+r.c+"-"+r.i,r,"getDataType")}},model:{value:r.v.v,callback:function(t){e.$set(r.v,"v",t)},expression:"n.v.v"}}):4==e.getInspectionValueType(r.i)?a("span",{style:"font-family:"+r.v.ff+" !important;"},[e._v("/")]):e._e()]:void 0!=r.v.ps&&"结论"===r.v.ps.value?[2!=e.getInspectionValueType(r.i)&&5!=e.getInspectionValueType(r.i)||1!=e.state?e._e():a("el-select",{staticClass:"table_input",on:{change:function(a){return e.changeInput(a,t.templateId+"-"+r.r+"-"+r.c+"-"+r.i,r,"getDataType","changeSelect")}},model:{value:r.v.v,callback:function(t){e.$set(r.v,"v",t)},expression:"n.v.v"}},[a("el-option",{attrs:{value:1,label:"合格"}}),a("el-option",{attrs:{value:0,label:"不合格"}}),a("el-option",{attrs:{value:3,label:"不判定"}}),a("el-option",{attrs:{value:2,label:"待定"}})],1),e.state>1?[1===r.v.v?a("span",{style:"font-family:"+r.v.ff+" !important;color: green;"},[e._v("合格")]):0===r.v.v?a("span",{style:"font-family:"+r.v.ff+" !important;color: red;"},[e._v("不合格")]):3===r.v.v?a("span",{style:"font-family:"+r.v.ff+" !important;color: #3A7BFA;"},[e._v("不判定")]):a("span",{style:"font-family:"+r.v.ff+" !important;"},[e._v("待定")])]:e._e(),2!=e.getInspectionValueType(r.i)&&1==e.state?[1===r.v.v?a("span",{style:"font-family:"+r.v.ff+" !important;color: green;"},[e._v("合格")]):0===r.v.v?a("span",{style:"font-family:"+r.v.ff+" !important;color: red;"},[e._v("不合格")]):3===r.v.v?a("span",{style:"font-family:"+r.v.ff+" !important;color: #3A7BFA;"},[e._v("不判定")]):a("span",{style:"font-family:"+r.v.ff+" !important;"},[e._v("待定")])]:e._e()]:void 0!=r.v.ps&&"设备编码"===r.v.ps.value&&1==e.state?[a("span",[e._v(e._s(r.v.v))])]:void 0!=r.v.ps&&"设备名称"===r.v.ps.value?[a("el-select",{staticClass:"table_input",attrs:{disabled:e.state>1,filterable:"",multiple:"",placeholder:"设备",remote:""},on:{change:function(t){return e.changeEquip(t,r)},"visible-change":function(t){return e.getEquipOptions(t,r.i)}},model:{value:r.v.v,callback:function(t){e.$set(r.v,"v",t)},expression:"n.v.v"}},e._l(e.equipOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[e._v(" "+e._s(t.label+"--"+t.value)+" ")])})),1)]:void 0!=r.v.ps&&"要求值"===r.v.ps.value&&1==e.state?[a("span",{style:"font-family:"+r.v.ff+" !important;"},[e._v(e._s(e.getTell(r.i)))])]:void 0!=r.v.ps&&"计算值"===r.v.ps.value&&1==e.state||void 0!=r.v.ps&&"最终值"===r.v.ps.value&&1==e.state?[a("span",{style:"font-family:"+r.v.ff+" !important;"},[e._v(e._s(e.toFixed(r.v.v,r.v.ct)))])]:void 0!=r.v.ps&&"样品编号"===r.v.ps.value?[a("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","align-items":"center",width:"100%"},attrs:{title:e.currentSample.sampleCode}},[a("i",{staticClass:"el-icon-caret-left table_caret",staticStyle:{width:"16px"},on:{click:function(t){return e.caretSample(-1)}}}),a("div",{style:"font-family:"+r.v.ff+" !important;overflow: hidden;white-space: nowrap;width: calc(100% - 32px);"},[e._v(" "+e._s(e.currentSample.sampleCode)+" ")]),a("i",{staticClass:"el-icon-caret-right table_caret",staticStyle:{width:"16px"},on:{click:function(t){return e.caretSample(1)}}})])]:void 0!=r.v.ps&&"样品型号"===r.v.ps.value?[void 0!==e.currentSample.model&&null!==e.currentSample.model?a("div",{style:"font-family:"+r.v.ff+" !important;"},[e._v(" "+e._s(e.currentSample.model)+" ")]):e._e()]:a("span",{style:"font-family:"+r.v.ff+" !important;",domProps:{innerHTML:e._s(e.getValue(r.v))}})],2)]):e._e()})),0)}))],2)])})):e._e()],2),1==e.state?a("el-upload",{ref:"upload",staticStyle:{width:"80px !important","margin-top":"10px"},attrs:{action:e.action,"before-upload":e.beforeUpload,data:{orderId:e.id},headers:e.uploadHeader,"on-error":e.onError,"on-success":e.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[1==e.state?a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("附件上传")]):e._e()],1):e._e(),a("lims-table",{staticStyle:{height:"100%","margin-top":"16px"},attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 290px)"},on:{pagination:e.pagination}})],1),a("el-drawer",{attrs:{size:550,visible:e.sampleVisible,title:"样品切换"},on:{"update:visible":function(t){e.sampleVisible=t}}},[e.sampleVisible?a("el-table",{ref:"productTable",staticClass:"el-table",attrs:{"current-row-key":e.currentKey,data:e.sampleProduct,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:"","row-class-name":e.tableRowClassName,"row-key":function(e){return e.index},border:"",height:"100%","highlight-current-row":"","tooltip-effect":"dark"},on:{"row-click":e.handleChangeSample}},[a("el-table-column",{key:Math.random(),attrs:{align:"center",label:"序号",type:"index",width:"70px"}}),a("el-table-column",{attrs:{label:"样品编号","min-width":"100px",prop:"sampleCode","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"样品型号","min-width":"100px",prop:"model","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"检测状态",prop:"insState","show-overflow-tooltip":"",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.typeList,(function(i,r){return i.value==t.row.insState?a("el-tag",{key:r,staticStyle:{"margin-right":"5px"},attrs:{type:i.type,size:"medium"}},[e._v(e._s(i.label))]):e._e()}))}}],null,!1,1238899147)}),a("el-table-column",{attrs:{align:"center",label:"是否留样",prop:"isLeave","show-overflow-tooltip":"",width:"95px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.isLeave?"否":"是"))])]}}],null,!1,1644887739)}),e.insOrder.mating>0?a("el-table-column",{attrs:{label:"配套样品型号","min-width":"130px",prop:"joinModel","show-overflow-tooltip":""}}):e._e(),e.insOrder.mating>0?a("el-table-column",{attrs:{label:"配套样品名称","min-width":"130px",prop:"joinName","show-overflow-tooltip":""}}):e._e(),e.insOrder.mating>0?a("el-table-column",{attrs:{label:"配套样品数量","min-width":"130px",prop:"joinNum","show-overflow-tooltip":""}}):e._e()],1):e._e()],1),a("el-drawer",{attrs:{size:500,visible:e.taskVisible,title:"任务切换"},on:{"update:visible":function(t){e.taskVisible=t}}},[a("lims-table",{attrs:{tableData:e.tableData0,column:e.column0,page:e.page0,tableLoading:e.tableLoading0,height:"calc(100vh - 90px)",currentChange:e.handleChangeTask}})],1),a("el-dialog",{attrs:{visible:e.reviewDia,title:"检验复核",width:"500px"},on:{"update:visible":function(t){e.reviewDia=t}}},[e.reviewDia?a("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px"}},[a("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[a("span",{staticClass:"required-span"},[e._v("* ")]),e._v("不通过的理由： ")]),a("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[a("el-input",{attrs:{autosize:{minRows:4},clearable:"",size:"small",type:"textarea"},model:{value:e.noReason,callback:function(t){e.noReason=t},expression:"noReason"}})],1)]):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.reviewDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.reviewLoading,type:"primary"},on:{click:e.handleReviewDia}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.addVerifyDia,title:"指定复核人员",width:"400px"},on:{"update:visible":function(t){e.addVerifyDia=t}}},[a("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px","align-items":"center"}},[a("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[a("span",{staticClass:"required-span"},[e._v("*")]),e._v("复核人 ")]),a("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.verifyUser,callback:function(t){e.verifyUser=t},expression:"verifyUser"}},e._l(e.personList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVerifyDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.dataGetDia,title:"数据采集",width:"80%"},on:{"update:visible":function(t){e.dataGetDia=t}}},[a("div",[a("table",{staticClass:"thermal-table",attrs:{border:"1",cellpadding:"10"}},[a("tr",[a("td",{staticStyle:{width:"120px"}},[e._v("检验项分类")]),a("td",{staticStyle:{width:"120px"}},[e._v("检验项")]),a("td",{staticStyle:{width:"120px"}},[e._v("检验子项")]),a("td",[e._v("数采数据")])]),e._l(e.getData,(function(t,i){return[a("tr",[a("td",{attrs:{rowspan:t.child.length}},[e._v(e._s(t.sortName))]),a("td",{attrs:{rowspan:t.child.length}},[e._v(e._s(t.faName))]),a("td",[e._v(e._s(t.child[0].name))]),a("td",{staticStyle:{"text-align":"left"}},[t.child[0].isShowSelect?a("el-select",{attrs:{"multiple-limit":t.child[0].maxNum,clearable:"",filterable:"",multiple:"",placeholder:"请选择"},on:{change:function(a){return e.setData(t)}},model:{value:t.child[0].getDataIndex1,callback:function(a){e.$set(t.child[0],"getDataIndex1",a)},expression:"item.child[0].getDataIndex1"}},e._l(t.child[0].arr,(function(t,i){return a("el-option",{key:i,attrs:{"filter-method":e.filterMethod,label:i+1+"^"+t.result,value:i+"^"+t.result}},[a("span",[e._v(e._s("序号："+(i+1)+"，结果："+t.result+"，厚度："+t.thickness+"，时间："+t.mergedDateTime))])])})),1):e._e(),t.child[0].isShowSelect?e._e():a("el-checkbox-group",{attrs:{max:t.child[0].maxNum},model:{value:t.child[0].getDataIndex1,callback:function(a){e.$set(t.child[0],"getDataIndex1",a)},expression:"item.child[0].getDataIndex1"}},e._l(t.child[0].arr,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:i+"^"+t}},[e._v(e._s(t))])})),1)],1)]),e._l(t.child,(function(t,r){return a("tr",{directives:[{name:"show",rawName:"v-show",value:r>0,expression:"i > 0"}],key:r+"bbbbbbbbbbbbbb"},[a("td",[e._v(e._s(t.name))]),a("td",{staticStyle:{"text-align":"left"}},[t.isShowSelect?a("el-select",{attrs:{"multiple-limit":t.maxNum,clearable:"",filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.getDataIndex1,callback:function(a){e.$set(t,"getDataIndex1",a)},expression:"m.getDataIndex1"}},e._l(t.arr,(function(t,r){return a("el-option",{key:r,attrs:{label:i+1+"^"+t.result,value:r+"^"+t.result}},[a("span",[e._v(e._s("序号："+(r+1)+"，结果："+t.result+"，厚度："+t.thickness+"，时间："+t.mergedDateTime))])])})),1):e._e(),t.isShowSelect?e._e():a("el-checkbox-group",{attrs:{max:t.maxNum},model:{value:t.getDataIndex1,callback:function(a){e.$set(t,"getDataIndex1",a)},expression:"m.getDataIndex1"}},e._l(t.arr,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:i+"^"+t}},[e._v(e._s(t))])})),1)],1)])}))]}))],2)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dataGetDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.getDataIndexLoading,type:"primary"},on:{click:function(t){return e.submitDataGet()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.addCheck,title:"指定报告审核人员",width:"400px"},on:{"update:visible":function(t){e.addCheck=t},close:e.closeAddVerifyDia}},[a("div",{staticClass:"body",staticStyle:{display:"flex",padding:"10px","align-items":"center"}},[a("div",{staticClass:"search_label",staticStyle:{width:"150px"}},[a("span",{staticClass:"required-span"},[e._v("*")]),e._v("审核人： ")]),a("div",{staticClass:"search_input",staticStyle:{width:"100%"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.checkUser,callback:function(t){e.checkUser=t},expression:"checkUser"}},e._l(e.personList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeAddVerifyDia}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.reviewLoading,type:"primary"},on:{click:function(t){return e.upInsReview(1)}}},[e._v("确 定")])],1)]),e.addUnPassDialog?a("add-un-pass",{ref:"addUnPassDialog",attrs:{addUnPassDialog:e.addUnPassDialog},on:{resetAddUnPass:e.resetAddUnPass}}):e._e(),e.unPassDialog?a("UnPassDialog",{ref:"unPassDialog",attrs:{orderId:e.orderId,unPassDialog:e.unPassDialog},on:{resetForm:e.resetForm}}):e._e(),e.unPassCheck?a("InspectionWord",{attrs:{inspectorList:e.inspectorList,orderId:e.orderId,rawMaterialTag:e.rawMaterialTag,sonLaboratory:e.sonLaboratory,state:e.state,typeSource:e.typeSource,unPassCheck:e.unPassCheck},on:{closeUnPassCheckDialog:e.closeUnPassCheckDialog,refreshView:e.refreshView}}):e._e(),e.purchaseDialog?a("purchase-verification",{ref:"purchaseDialog",attrs:{orderId:e.orderId,purchaseDialog:e.purchaseDialog},on:{resetPurchaseDialog:e.resetPurchaseDialog}}):e._e(),a("viewManHourDia",{ref:"viewManHourDia",on:{submit:e.openAddVerifyDia}})],1)},r=[],s=a("3835"),n=a("6f3e"),l=a("2909"),o=a("c14f"),c=a("1da1"),u=a("5530"),d=a("ade3"),p=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("caad"),a("a15b"),a("d81d"),a("14d9"),a("fb6a"),a("4e82"),a("a434"),a("b0c0"),a("e9c4"),a("4ec9"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("6062"),a("1e70"),a("79a4"),a("c1a1"),a("8b00"),a("a4e7"),a("1e5a"),a("72c3"),a("2532"),a("3ca3"),a("5319"),a("0643"),a("2382"),a("fffc"),a("4e3e"),a("a573"),a("159b"),a("ddb0"),a("5d52")),m=a("00d5"),h=a("6ddf"),v=a("c354"),f=a("59f4"),b=a("b25a"),g=a("b558"),y=a("963c"),w=a("9eb6"),L=a("c0e9"),k=a.n(L),S=a("2f62"),I=a("df10"),_={name:"InspectionView",components:{viewManHourDia:I["default"],PurchaseVerification:b["default"],AddUnPass:v["default"],limsTable:m["a"],UnPassDialog:h["default"],InspectionWord:f["default"]},data:function(){var e=this;return Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])({sonLaboratory:null,orderId:null,state:null,inspectorList:null,typeSource:null,sagData:[],sagForm:{sampleCode:null,model:null,inspection:null,methodName:null,tensileForce:null,spanLength:null,load:null},dataGetDia:!1,fileAdd:!1,sampleVisible:!1,taskVisible:!1,submitLoading:!1,searchForm:{sampleName:null,state:null},id:null,changeType:null,insOrder:{},sampleProduct:[],supplierDensity:"",typeList:[],urgentList:[],currentSample:{},tableList:[],loading:!1,ps:{},param:{},currentKey:1,currentKey0:1,currentKey1:1,currentKey2:1,comparisonList:[],excelMethodList:[],equipOptions:[],reviewLoading:!1,reviewDia:!1,noReason:"",tableWidth:1e3,currentTable:null,tableLists:[],widthList:[],addVerifyDia:!1,verifyUser:null,personList:[],enumList:[],tableLoading:!1,upLoading:!1,temptList:null,currentTab:null,wareForm:{inspectionItem:1,inspectionItemSubclass:"20(常温)"},otherForm:{humidity:null,temperature:null},equipForm:{value0:null,code0:null,value1:null,code1:null},result:null,worker:null,worker0:null,wareLength:[],dataAcquisitionInfo:{},dataAcquisitionInfoNew:{},dataAcquisitionEidtAble:!1,dataAcquisitionLoading:!1,collected:!1,temDataAcquisition:!1,getData:[{faName:"波长附加衰减",child:[{name:"1285nm~1330nm",arr:[12,13,14,15]},{name:"1525nm~1575nm",arr:[12,13,14,15]}]},{faName:"截至波长",child:[{name:"截至波长",arr:[12,13,14,15]}]}],getDataIndex:[],getDataIndexLoading:!1,getDataTypeId:"",getDataType:null,unPassDialog:!1,cableTagList:[],rawMaterialTag:"",rawMaterialTagList:[],addCheck:!1,checkUser:"",addUnPassDialog:!1,type:"",retestTag:"",unPassCheck:!1,unPassTableList:[],unPassTableLoading:!1,purchaseDialog:!1,temCableTag:"",repetitionTagList:[],repetitionTag:"",tableData:[],column:[{label:"类型",prop:"type",dataType:"tag",formatData:function(e){return 1==e?"图片":"文件"}},{label:"附件名称",prop:"fileName"},{label:"上传人",prop:"name"},{label:"上传时间",prop:"createTime"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"下载",type:"text",clickFun:function(t){e.handleDown(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)},disabled:function(t){return 1!=e.state}}]}],page:{total:0,size:10,current:0}},"tableLoading",!1),"tableData0",[]),"column0",[{label:"委托编号",prop:"entrustCode",width:"160px"},{label:"检验对象",prop:"sampleType",width:"140px"},{label:"紧急程度",prop:"type",dataType:"tag",formatData:function(t){return e.urgentList.find((function(e){return e.value==t})).label},formatType:function(t){return e.urgentList.find((function(e){return e.value==t})).type}},{label:"状态",prop:"insState",dataType:"tag",formatData:function(t){return e.typeList.find((function(e){return e.value==t})).label},formatType:function(t){return e.typeList.find((function(e){return e.value==t})).type}},{label:"约定时间",prop:"appointed",width:"140px"},{label:"下发时间",prop:"sendTime",width:"140px"}]),"page0",{total:0,size:-1,current:-1}),"tableLoading0",!1)},computed:Object(u["a"])(Object(u["a"])({},Object(S["b"])(["userId"])),{},{action:function(){return this.javaApi+"/insOrderPlan/uploadFile"}}),created:function(){var e=this.$route.query,t=e.sonLaboratory,a=e.orderId,i=e.state,r=e.inspectorList,s=e.typeSource;this.sonLaboratory=t,this.orderId=a,this.id=this.orderId,this.state=i,this.inspectorList=r,this.typeSource=s},mounted:function(){this.getTypeDicts(),this.getInsStateDicts(),this.getComparisonList(),this.getAuthorizedPerson(),this.startWorker(),this.scrollInit()},activated:function(){this.getTypeDicts(),this.getInsStateDicts(),this.getComparisonList(),this.getAuthorizedPerson(),this.startWorker(),this.scrollInit()},watch:{id:function(e){this.refreshView()},currentTable:function(e,t){var a=this;if(null!=t&&e!=t){if(this.changeType&&this.changeType>0)return;this.tableLists.forEach(function(){var t=Object(c["a"])(Object(o["a"])().m((function t(i,r){var s,n;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:if(i.templateId!=e){t.n=2;break}return t.n=1,a.getCurrentProduct(a.currentSample.id,0);case 1:s=t.v,a.currentSample.insProduct=a.HaveJson(s),a.param={},a.currentSample.insProduct.forEach((function(e,t){a.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),n=new Set,a.tableLists=a.currentSample.insProduct.filter((function(e){var t=n.size;if(null!=e.templateId&&null!=e.template)try{n.add(JSON.stringify({template:e.template,templateId:e.templateId}))}catch(i){console.log(222,i)}var a=n.size;if(a>t)return e})),a.tableLists&&a.tableLists.length>0&&(a.tableList=null,a.tableList=a.tableLists.filter((function(t){return t.templateId==e})),a.handleTableData());case 2:return t.a(2)}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},equipForm:{deep:!0,handler:function(e){}}},beforeDestroy:function(){this.stopWorker()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(u["a"])({},this.page);delete t.total,Object(g["k"])(Object(u["a"])({insOrderId:this.id},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(g["f"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.getList()}))})).catch((function(){}))},getList0:function(){var e=this;this.tableLoading0=!0;var t=Object(u["a"])({userId:this.userId,sonLaboratory:this.sonLaboratory},this.page0);delete t.total,Object(g["r"])(Object(u["a"])({},t)).then((function(t){e.tableLoading0=!1,200===t.code&&(e.tableData0=t.data.records)})).catch((function(t){e.tableLoading0=!1}))},closeAddVerifyDia:function(){this.addCheck=!1,this.checkUser=""},refreshView:function(){var e=this;this.loading=!0,Object(g["g"])({id:this.id,laboratory:this.sonLaboratory}).then(function(){var t=Object(c["a"])(Object(o["a"])().m((function t(a){var i;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:if(e.insOrder=a.data.insOrder,e.supplierDensity=a.data.supplierDensity,e.getList(),e.urgentList.forEach((function(t){t.value==e.insOrder.type&&(e.insOrder.typeName=t.label)})),e.loading=!1,a.data.sampleProduct&&0!=a.data.sampleProduct.length){t.n=1;break}return e.goback(),t.a(2,e.$message.error("该任务没有样品信息"));case 1:return e.sampleProduct=a.data.sampleProduct,e.currentSample=e.HaveJson(e.sampleProduct[0]),e.HaveJson(e.currentSample.insProduct),e.otherForm={temperature:e.insOrder.temperature?e.insOrder.temperature:null,humidity:e.insOrder.humidity?e.insOrder.humidity:null},"1"==e.typeSource&&(e.getRawMaterialTag(e.currentSample.id),e.rawMaterialTag="1"),e.getEquipOptions(1),t.n=2,e.getCurrentProduct(e.currentSample.id,0);case 2:i=t.v,e.currentSample.insProduct=e.HaveJson(i),e.param={},e.changeType=0,e.currentSample.insProduct.forEach((function(t){e.param[t.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),void 0==e.currentSample.index&&(e.currentSample["index"]=1),e.currentSample.bushing,e.getTableLists(),e.currentKey=1,e.getCableTag(e.currentSample.id),e.getRepetitionTag(e.currentSample.id);case 3:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}())},closeUnPassCheckDialog:function(){this.unPassCheck=!1},getCableTag:function(){var e=this;Object(g["j"])({id:this.currentSample.id,laboratory:this.sonLaboratory}).then((function(t){200===t.code&&t.data.length>0&&(e.cableTagList=t.data)}))},getRepetitionTag:function(){var e=this;Object(g["p"])({id:this.currentSample.id,laboratory:this.sonLaboratory,cableTag:this.temCableTag}).then((function(t){200===t.code&&(e.repetitionTagList=t.data)}))},getRawMaterialTag:function(){var e=this;Object(g["o"])({id:this.currentSample.id,laboratory:this.sonLaboratory}).then((function(t){200===t.code&&t.data.forEach((function(a){e.rawMaterialTagList=t.data}))}))},openAddUnpass:function(){var e=this;this.addUnPassDialog=!0;var t={id:this.currentSample.id,type:this.type,laboratory:this.sonLaboratory,cableTag:"",rawMaterialTag:this.rawMaterialTag};this.$nextTick((function(){e.$refs.addUnPassDialog.getInsOrder(t)}))},resetAddUnPass:function(){this.addUnPassDialog=!1},unpassCheck:function(){this.unPassCheck=!0,this.retestTag="1"},viewUnpassCheck:function(){this.unPassCheck=!0,this.retestTag="1"},openUnPassDialog:function(e){var t=this;this.unPassDialog=!0,this.$nextTick((function(){t.$refs.unPassDialog.getInsOrder(e)}))},resetForm:function(){this.$refs.unPassDialog.$refs["unPassForm"].resetFields(),this.unPassDialog=!1},openPurchase:function(){var e=this,t=1==this.state?"add":"view";this.purchaseDialog=!0;var a={id:this.currentSample.id,sonLaboratory:this.sonLaboratory,cableTag:this.temCableTag,rawMaterialTag:this.rawMaterialTag,typeSource:this.typeSource};this.$nextTick((function(){e.$refs.purchaseDialog.getInsOrder(t,a)}))},resetPurchaseDialog:function(){this.$refs.purchaseDialog.$refs["purchaseForm"].resetFields(),this.purchaseDialog=!1},getDataAcquisitionDevice:function(){var e=this,t=[];this.currentSample.insProduct.forEach((function(e){"1"===e.inspectionItemType&&t.push(e.id)}));var a={entrustCode:this.insOrder.entrustCode,sampleCode:this.currentSample.sampleCode,id:this.currentSample.id,itemIds:t};this.dataAcquisitionLoading=!0,Object(g["d"])(a).then((function(t){e.dataAcquisitionLoading=!1,200==t.code&&(e.dataAcquisitionInfoNew=e.HaveJson(t.data),e.handleDataAcquisition(t.data))})).catch((function(t){e.dataAcquisitionLoading=!1}))},objectOrder:function(e){for(var t=Object.keys(e).sort(),a={},i=0;i<t.length;i++)a[t[i]]=e[t[i]];return a},handleDataAcquisition:function(e,t){var a=this;this.dataAcquisitionEidtAble?this.getDataType=1:this.getDataType=2,this.dataAcquisitionInfo={},this.getData=[];var i=function(i){var r={};r=i.includes("@")?{faName:i.split("@")[0],sortName:i.split("@")[1],child:[]}:{faName:i,child:[]};var s=function(s){var n="";if(n=i.includes("@")?i.split("@")[0]==s?i.split("@")[0]+",":i.split("@")[1]+","+i.split("@")[0]+","+s:i==s?i+",":i+","+s,"frequency"==s||!e[i][s]||e[i][s].result&&"string"!=typeof e[i][s].result){if("frequency"!=s&&e[i][s]&&Array.isArray(e[i][s].result)){var l="";l=i.includes("@")?i.split("@")[0]==s?i.split("@")[0]+",":i.split("@")[1]+","+i.split("@")[0]+","+s:i==s?i+",":i+","+s;var o=a.tableList[0].arr,c=0;o.forEach((function(t,a){var r=0,n="";t.forEach((function(t){if(t.v.ps&&("检验子项"==t.v.ps.value||"检验项"==t.v.ps.value||"检验项分类"==t.v.ps.value)){t.v.ps&&"检验项分类"==t.v.ps.value&&0==r&&(r++,n=t.v.v+","),t.v.ps&&"检验项"==t.v.ps.value&&(1==r?(n=n+t.v.v+",",r++):(n=t.v.v+",",r++)),t.v.ps&&"检验子项"==t.v.ps.value&&(n+=t.v.v);var u=0;o[a].forEach((function(e){e.v.ps&&e.v.ps.value&&"string"==typeof e.v.ps.value&&e.v.ps.value.includes("检验值")&&(u++,l==n&&(c=u))}))}e[i][s].equipName&&e[i][s].equipValue&&t.v&&t.v.ps&&"设备名称"==t.v.ps.value&&l==n&&t.v.v}))}));var u={name:s,arr:e[i][s].result,maxNum:c,equipValue:e[i][s].equipValue,value:[]};e[i][s].result&&Array.isArray(e[i][s].result)&&e[i][s].result.length>c&&"noDialog"!==t||"JCZX-ZB-FF01014"===u.equipValue&&"noDialog"!==t?r.child.push(u):a.dataAcquisitionInfo[l]={value:e[i][s].result}}}else{e[i][s].result&&(a.dataAcquisitionInfo[n]={value:e[i][s].result,frequency:e[i].frequency});var d=a.tableList[0].arr;d.forEach((function(t,a){var r=0,l="";t.forEach((function(t){!t.v.ps||"检验子项"!=t.v.ps.value&&"检验项"!=t.v.ps.value&&"检验项分类"!=t.v.ps.value||(t.v.ps&&"检验项分类"==t.v.ps.value&&0==r&&(r++,l=t.v.v+","),t.v.ps&&"检验项"==t.v.ps.value&&(1==r?(l=l+t.v.v+",",r++):(l=t.v.v+",",r++)),t.v.ps&&"检验子项"==t.v.ps.value&&(l+=t.v.v)),e[i][s].equipName&&e[i][s].equipValue&&t.v&&t.v.ps&&"设备名称"==t.v.ps.value&&n==l&&t.v.v}))}))}};for(var n in e[i])s(n);r.child.length>0&&(r.child.forEach((function(e){a.$set(e,"getDataIndex1",[]),"JCZX-ZB-FF01014"===e.equipValue?a.$set(e,"isShowSelect",!0):a.$set(e,"isShowSelect",!1)})),a.getData.push(r))};for(var r in this.objectOrder(e))i(r);if(this.getData.length>0)this.dataGetDia=!0;else try{this.getDataIndexLoading=!1,this.dataGetDia=!1,this.getDataTypeId="",this.worker0.postMessage(JSON.stringify({dataAcquisitionInfo:this.dataAcquisitionInfo,list:this.tableList[0].arr}))}catch(s){console.log(1111,s)}this.worker0.onmessage=function(e){var t=JSON.parse(e.data);if("changeInput"==t.method){var i=t.value,r=i.list,s=i.n;a.$set(a.tableList[0],"arr",r),a.changeInput("","".concat(a.currentSample.insProduct[0].templateId,"-").concat(s.r,"-").concat(s.c,"-").concat(s.i),s)}else t.getDataTypeId&&(a.getDataTypeId=t.getDataTypeId)},this.dataAcquisitionLoading=!1},setData:function(e){var t=this;if(e.child.length>1)for(var a=[],i=function(i){var r=[];if(0===i){for(var s=0;s<e.child[i].getDataIndex1.length;s++){var n=e.child[i].getDataIndex1[s],l=n.indexOf("^");l>-1&&(n=n.substring(0,l),r.push(n))}a=r}else t.$set(e.child[i],"getDataIndex1",[]),a.map((function(t){var a=t+"^"+e.child[i].arr[Number(t)].result;e.child[i].getDataIndex1.push(a)}))},r=0;r<e.child.length;r++)i(r)},filterMethod:function(e){console.log("val---",e)},submitDataGet:function(){for(var e=0;e<this.getData.length;e++)for(var t=0;t<this.getData[e].child.length;t++){for(var a=[],i=0;i<this.getData[e].child[t].getDataIndex1.length;i++){if(this.getData[e].child[t].getDataIndex1[i].includes("^")){var r=this.getData[e].child[t].getDataIndex1[i].indexOf("^");r>-1&&(this.getData[e].child[t].getDataIndex1[i]=this.getData[e].child[t].getDataIndex1[i].slice(r+1,this.getData[e].child[t].getDataIndex1[i].length))}a.push(this.getData[e].child[t].getDataIndex1[i])}this.getData[e].sortName?this.dataAcquisitionInfoNew[this.getData[e].faName+"@"+this.getData[e].sortName][this.getData[e].child[t].name].result=a:this.dataAcquisitionInfoNew[this.getData[e].faName][this.getData[e].child[t].name].result=a}this.getDataIndexLoading=!0,this.handleDataAcquisition(this.dataAcquisitionInfoNew,"noDialog")},startWorker:function(){this.worker&&this.stopWorker(),this.worker=new y["a"],this.worker0&&this.stopWorker(),this.worker0=new w["a"]},stopWorker:function(){this.worker&&(this.worker.terminate(),this.worker=null),this.worker0&&(this.worker0.terminate(),this.worker0=null)},subOtherForm:function(e,t){var a=this;Object(g["D"])(Object(d["a"])(Object(d["a"])({},t,"remark"===t?e:Number(e)),"id",this.insOrder.id)).then((function(e){a.$message.success("保存成功")}))},exportTable:function(e){var t=document.getElementById(e);k()(t).then((function(e){var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t,a.download="table.png",a.click()}))},uploadSample:function(){var e=this;Object(g["g"])({id:this.id,laboratory:this.sonLaboratory}).then(function(){var t=Object(c["a"])(Object(o["a"])().m((function t(a){return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:e.sampleProduct=a.data.sampleProduct;case 1:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}())},getCurrentProduct:function(e,t,a){var i=this;return Object(c["a"])(Object(o["a"])().m((function r(){var s;return Object(o["a"])().w((function(r){while(1)switch(r.n){case 0:return void 0===a&&(a=""),i.tableLoading=!0,t="1"==i.typeSource?5:t,i.type=t,r.n=1,Object(g["l"])({id:e,type:t,laboratory:i.sonLaboratory,cableTag:a||i.temCableTag,rawMaterialTag:i.rawMaterialTag,repetitionTag:i.repetitionTag});case 1:if(s=r.v,i.tableLoading=!1,!(s.data.length>0)){r.n=2;break}return r.a(2,s.data);case 2:return r.a(2)}}),r)})))()},handleChangeSample:function(e,t,a){var i=this;return Object(c["a"])(Object(o["a"])().m((function t(){var a;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:return i.param={},i.sampleVisible=!1,i.currentSample=i.HaveJson(e),t.n=1,i.getCurrentProduct(e.id,0);case 1:a=t.v,i.currentSample.insProduct=i.HaveJson(a),i.param={},i.changeType=0,i.currentSample.insProduct.forEach((function(e,t){i.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),i.getTableLists(),i.currentKey=e.index,i.currentTab=null,i.worker.postMessage(JSON.stringify({modelType:i.sampleProduct[0].model,type:"saveData",tableList:i.tableList,param:i.param,currentTable:i.currentTable}));case 2:return t.a(2)}}),t)})))()},handleChangeCableTag:function(e,t,a,i){var r=this;return Object(c["a"])(Object(o["a"])().m((function s(){var n,l,c;return Object(o["a"])().w((function(s){while(1)switch(s.n){case 0:if(n="",l="","cableTag"===a&&(n=i,r.temCableTag=n,r.getRepetitionTag()),"repetitionTag"===a&&(l=i,r.repetitionTag=l),i||(t=0),r.changeType=t,!e){s.n=2;break}return s.n=1,r.getCurrentProduct(e,t,n);case 1:c=s.v,c&&c.length>0?(r.param={},c.forEach((function(e){r.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),r.getTableLists0(c),r.worker.postMessage(JSON.stringify({type:"saveData",tableList:r.tableList,param:r.param,currentTable:r.currentTable,bushing:e}))):(r.tableLists=[],r.tableList=[],r.$message.error("检验项为空"));case 2:return s.a(2)}}),s)})))()},handleChangeTask:function(e){e&&(this.id=e.id),this.taskVisible=!1},getTypeDicts:function(){var e=this;this.getDicts("urgency_level").then((function(t){e.urgentList=e.dictToValue(t.data)}))},getInsStateDicts:function(){var e=this;this.getDicts("inspection_task_state").then((function(t){e.typeList=e.dictToValue(t.data)}))},getComparisonList:function(){var e=this;this.getDicts("coordinate_transformation").then((function(t){e.comparisonList=e.dictToValue(t.data)}))},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a+1},getTableLists:function(){var e=new Set;this.tableLists=this.currentSample.insProduct.filter((function(t){var a=e.size;if(null!=t.templateId&&null!=t.template)try{e.add(JSON.stringify({template:t.template,templateId:t.templateId}))}catch(r){console.log(222,r)}var i=e.size;if(i>a)return t})),this.tableLists&&this.tableLists.length>0&&(this.tableList=null,this.tableList=[this.tableLists[0]],this.currentTable=this.tableLists[0].templateId,this.handleTableData())},getTableLists0:function(e){var t=new Set;this.tableLists=e.filter((function(e){var a=t.size;if(null!=e.templateId&&null!=e.template)try{t.add(JSON.stringify({template:e.template,templateId:e.templateId}))}catch(r){console.log(333,r)}var i=t.size;if(i>a)return e})),this.tableLists&&this.tableLists.length>0&&(this.tableList=null,this.tableList=[this.tableLists[0]],this.currentTable=this.tableLists[0].templateId,this.currentSample.insProduct=this.HaveJson(e),this.handleTableData())},handleTableData:function(){var e=this;this.excelMethodList=[],this.widthList=this.tableList[0].style.columnlen,this.tableList.forEach((function(t){var a=t.template.filter((function(e){return void 0!=e.v.mc&&void 0!=e.v.mc.cs&&void 0!=e.v.mc.rs})),i=0,r=new Map;t.template.forEach((function(e){r.set("".concat(e.c,"-").concat(e.r),e)})),a.forEach((function(t){for(var a=t.v.mc.cs,s=t.v.mc.rs,n=0;n<a;n++)for(var l=0;l<s;l++){var o="".concat(t.c+n,"-").concat(t.r+l),c=r.get(o);if(c){var u=e.HaveJson(t);c.v.v=u.v.v,c.v.ps=u.v.ps,c.v.fc=u.v.fc,c.v.fs=u.v.fs,c.v.ht=u.v.ht,c.mc=i}}i++}))})),this.tableList.forEach((function(t){var a=new Set,i=[],r=new Set;t.template.forEach((function(s){var n=r.size,l=r.add(s.r).size;if(n<l){var o="",c="",u="",d=0,p=0;if(t.template.forEach((function(e){s.r===e.r&&(void 0!=e.v.ps&&"检验项分类"===e.v.ps.value&&0===d?p=1:void 0!=e.v.ps&&"检验项"===e.v.ps.value&&0===d&&(p=0),0==p?void 0!=e.v.ps&&"检验项"===e.v.ps.value?0===d&&(e.v.v&&(e.v.v=e.v.v.replace(/\s*/g,"")),o+=e.v.v,d+=1):void 0!=e.v.ps&&"检验子项"===e.v.ps.value&&1===d&&(e.v.v&&(e.v.v=e.v.v.replace(/\s*/g,"")),o+=e.v.v,d+=1):1==p&&(void 0!=e.v.ps&&"检验项分类"===e.v.ps.value?0===d&&(e.v.v&&(e.v.v=e.v.v.replace(/\s*/g,"")),o+=e.v.v,d+=1):void 0!=e.v.ps&&"检验项"===e.v.ps.value?1===d&&(e.v.v&&(e.v.v=e.v.v.replace(/\s*/g,"")),o+=e.v.v,d+=1):void 0!=e.v.ps&&"检验子项"===e.v.ps.value&&2===d&&(e.v.v&&(e.v.v=e.v.v.replace(/\s*/g,"")),o+=e.v.v,d+=1)),"机械性能干态拉伸强度(纵向)"===o&&void 0!=e.v.ps&&"单位"===e.v.ps.value&&(e.v.v&&(e.v.v=e.v.v.replace(/\s*/g,"")),c=o+e.v.v,u=e.v.v))})),""!=o){var m=0;for(var h in e.currentSample.insProduct){var v=null==e.currentSample.insProduct[h].inspectionItemClass||void 0==e.currentSample.insProduct[h].inspectionItemClass?"":e.currentSample.insProduct[h].inspectionItemClass;v=v.replace(/\s*/g,"");var f=null==e.currentSample.insProduct[h].inspectionItem||void 0==e.currentSample.insProduct[h].inspectionItem?"":e.currentSample.insProduct[h].inspectionItem;f=f.replace(/\s*/g,"");var b=null==e.currentSample.insProduct[h].inspectionItemSubclass||void 0==e.currentSample.insProduct[h].inspectionItemSubclass?"":e.currentSample.insProduct[h].inspectionItemSubclass;if(b=b.replace(/\s*/g,""),"干态拉伸强度(纵向)"===b){var g=e.currentSample.insProduct[h].unit;if(e.currentSample.insProduct[h].templateId===t.templateId&&v+f+b+g===c||e.currentSample.insProduct[h].templateId===t.templateId&&!u.includes("/")&&v+f+b===o){i.push({r:s.r,id:e.currentSample.insProduct[h].id,product:e.currentSample.insProduct[h]});break}}else if(e.currentSample.insProduct[h].templateId===t.templateId&&v+f+b===o){i.push({r:s.r,id:e.currentSample.insProduct[h].id,product:e.currentSample.insProduct[h]});break}m++}m==e.currentSample.insProduct.length&&a.add(s.r)}}})),a.forEach((function(e){for(var a=0;a<t.template.length;a++)t.template[a].r===e&&(t.template.splice(a,1),a-=1)})),i.forEach((function(e){for(var a=0;a<t.template.length;a++)t.template[a].r===e.r&&(t.template[a].i=e.id,void 0!=t.template[a].v.ps&&"单位"===t.template[a].v.ps.value&&(t.template[a].v.v=e.product.unit),void 0==t.template[a].v.ps||"试验方法"!==t.template[a].v.ps.value&&"检测方法"!==t.template[a].v.ps.value||(t.template[a].v.v=e.product.methodS))}));var s=new Set;t.template.forEach((function(e){var a=s.size,i=s.add(e.mc).size;void 0!=e.mc&&a<i&&(e.v.mc.rs=0,e.v.mc.cs=0,t.template.forEach((function(t){e.mc===t.mc&&(e.r===t.r&&(e.v.mc.cs+=1),e.c===t.c&&(e.v.mc.rs+=1))})))}))})),this.tableList.forEach((function(t){var a=[],i=new Set,r=0,s=[],n=[];s=t.template.filter((function(e){return void 0!=e.v.ps&&"结论"===e.v.ps.value})),n=t.template.filter((function(e){return void 0!=e.v.ps&&"最终值"===e.v.ps.value})),t.template.forEach((function(t){void 0==t.v.ps||"序号"!==t.v.ps.value||void 0!=t.v.mc&&4!==Object.keys(t.v.mc).length||(r++,t.v.v=r),void 0!=t.v.ps&&"要求值"===t.v.ps.value&&(t.v.v=e.getAsk(t.i)),void 0!=t.v.ps&&"string"===typeof t.v.ps.value&&t.v.ps.value.includes("检验值")&&(e.$set(t.v,"v",""),t.u="",t.i&&e.param[t.i]&&e.param[t.i].insValue.push(t)),void 0!=t.v.ps&&"计算值"===t.v.ps.value&&(e.$set(t.v,"v",""),t.i&&e.param[t.i]&&e.param[t.i].comValue.push(t)),void 0!=t.v.ps&&"设备编码"===t.v.ps.value&&(e.$set(t.v,"v",""),t.i&&e.param[t.i]&&e.param[t.i].equipValue.push(t)),void 0!=t.v.ps&&"设备名称"===t.v.ps.value&&(e.$set(t.v,"v",""),t.i&&e.param[t.i]&&e.param[t.i].equipName.push(t)),void 0!=t.v.ps&&"最终值"===t.v.ps.value&&(e.$set(t.v,"v",""),void 0!==t.i&&e.param[t.i]&&!e.param[t.i].resValue&&(e.param[t.i].resValue=t)),void 0!=t.v.ps&&"结论"===t.v.ps.value&&void 0!==t.i&&e.param[t.i]&&!e.param[t.i].insResult&&(e.param[t.i].insResult=t,s.forEach((function(a,i){a.r==t.r&&a.c==t.c&&(t.v.f="(".concat(e.comparisonList.find((function(e){return e.value==n[i].c})).label).concat(n[i].r+1,")"))}))),i.add(t.r),t.v.f&&e.excelMethodList.push(t)})),i=Object(l["a"])(i),i.forEach((function(e){var i=[];t.template.forEach((function(t){t.r===e&&i.push(t)})),a.push(i)})),t.arr=a,e.tableWidth=0;for(var o=0;o<a[0].length;o++)e.tableWidth+=void 0===t.style.columnlen[o]?100:t.style.columnlen[o]})),this.currentSample.insProduct.forEach(function(){var t=Object(c["a"])(Object(o["a"])().m((function t(a){var i,r,s,l,c,u,d,p,m,h;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:try{for(i=JSON.parse(a.insProductResult.comValue),r=0;r<i.length;r++)e.param[a.id].comValue.find((function(e){return e.c==i[r].c&&e.r==i[r].r}))?e.param[a.id].comValue.find((function(e){return e.c==i[r].c&&e.r==i[r].r})).v.v=e.toFixed(i[r].v,e.param[a.id].comValue.find((function(e){return e.c==i[r].c&&e.r==i[r].r})).v.ct):i[r].c&&i[r].r||(e.param[a.id].comValue[r].v.v=e.toFixed(i[r].v,e.param[a.id].comValue[r].v.ct))}catch(v){}t.p=1,s=JSON.parse(a.insProductResult.insValue),l=Object(o["a"])().m((function t(i){return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:e.param[a.id].insValue.find((function(e){return e.c==s[i].c&&e.r==s[i].r}))&&(e.param[a.id].insValue.find((function(e){return e.c==s[i].c&&e.r==s[i].r})).v.v=e.toFixed(s[i].v,e.param[a.id].insValue.find((function(e){return e.c==s[i].c&&e.r==s[i].r})).v.ct),e.param[a.id].insValue.find((function(e){return e.c==s[i].c&&e.r==s[i].r})).u=s[i].u);case 1:return t.a(2)}}),t)})),c=0;case 2:if(!(c<s.length)){t.n=4;break}return t.d(Object(n["a"])(l(c)),3);case 3:c++,t.n=2;break;case 4:t.n=6;break;case 5:t.p=5,t.v;case 6:try{for(u=JSON.parse(a.insProductResult.equipValue),d=0;d<u.length;d++)e.param[a.id].equipValue[d].v.v=u[d].v}catch(v){}try{for(p=JSON.parse(a.insProductResult.equipName),m=0;m<p.length;m++)""!==p[m].v&&p[m].v.map((function(t){var a=e.equipOptions.findIndex((function(e){return e.value===t}));a>-1&&(t=e.equipOptions[a].deviceName)}));for(h=0;h<p.length;h++)e.param[a.id].equipName[h].v.v=p[h].v}catch(v){console.log("设备名称赋值----",v)}try{e.param[a.id].resValue.v.v=e.toFixed(a.lastValue,e.param[a.id].resValue.v.ct),e.param[a.id].insResult.v.v=a.insResult}catch(v){}case 7:return t.a(2)}}),t,null,[[1,5]])})));return function(e){return t.apply(this,arguments)}}()),this.handleExcelMethod()},changeInput:function(e,t,a,i,r){var n=this;"getDataType"==i&&(this.getDataType=2);var l=null;if(a&&(l=JSON.parse(JSON.stringify(a.i)),"string"==typeof a.v.v)){var o=function(e){var t=e.split("/"),a=Object(s["a"])(t,2),i=a[0],r=a[1];return!(!r||!i)},c=o(a.v.v);c||(a.v.v=a.v.v.replace("/",""))}try{this.worker.postMessage(JSON.stringify({code:t,tableList:this.tableList,excelMethodList:this.excelMethodList,comparisonList:this.comparisonList,currentSample:this.currentSample,PROJECT:this.PROJECT,param:this.param,currentTable:this.currentTable,getDataTypeId:this.getDataTypeId,modelType:this.sampleProduct[0].model,currentInsItem:a}))}catch(u){console.log(444,u)}this.worker.onmessage=function(e){switch(n.result=JSON.parse(e.data),n.result.method){case"saveInsContext":n.$nextTick((function(){for(var e in n.$set(n.tableList[0],"arr",n.result.value.tableList[0].arr),n.param=n.result.value.param,n.result.value.currentInsItemId&&(l=n.result.value.currentInsItemId),n.param)n.param[e].insResult&&n.param[e].insResult.v&&n.param[e].insResult.v.v&&("合格"==n.param[e].insResult.v.v?n.$set(n.param[e].insResult.v,"v",1):"不合格"==n.param[e].insResult.v.v&&n.$set(n.param[e].insResult.v,"v",0));n.saveInsContext(l)}));break;case"tableList":n.$nextTick((function(){n.$delete(n.tableList[0],"arr"),n.$set(n.tableList[0],"arr",n.result.value[0].arr),n.result.value.currentInsItem&&(l=n.result.value.currentInsItem.i)}));break;case"getCurrentInsProduct":n.getCurrentInsProduct(n.result.value);break}},setTimeout((function(){r&&n.saveInsContext(l)}),200)},getCurrentInsProduct:function(e){var t=this;this.tableList[0].insProductResult||(this.tableList[0].insProductResult={});var a=function(a){var i=t.param[e][a];switch(a){case"comValue":if(i&&i.length>0){t.tableList[0].insProductResult[a]=[],i.forEach((function(e,i){var r={v:e.v.v};t.tableList[0].insProductResult[a].push(r)}));try{t.tableList[0].insProductResult[a]=JSON.stringify(t.tableList[0].insProductResult[a])}catch(r){console.log(555,r)}}break;case"insValue":if(i&&i.length>0){t.tableList[0].insProductResult[a]=[],i.forEach((function(e,i){var r={v:e.v.v,u:e.u};t.tableList[0].insProductResult[a].push(r)}));try{t.tableList[0].insProductResult[a]=JSON.stringify(t.tableList[0].insProductResult[a])}catch(r){console.log(666,r)}}break;case"equipValue":if(i&&i.length>0){t.tableList[0].insProductResult[a]=[],i.forEach((function(e,i){var r={v:e.v.v};t.tableList[0].insProductResult[a].push(r)}));try{t.tableList[0].insProductResult[a]=JSON.stringify(t.tableList[0].insProductResult[a])}catch(r){console.log(777,r)}}break;case"equipName":if(i&&i.length>0){t.tableList[0].insProductResult[a]=[],i.forEach((function(e,i){var r={v:e.v.v};t.tableList[0].insProductResult[a].push(r)}));try{t.tableList[0].insProductResult[a]=JSON.stringify(t.tableList[0].insProductResult[a])}catch(r){console.log(888,r)}}break;case"resValue":t.tableList[0].lastValue=i?i.v.v:"";break;case"insResult":t.tableList[0].insResult=i?i.v.v:"";break}};for(var i in this.param[e])a(i)},handleExcelMethod:function(){this.excelMethodList.length>0&&this.excelMethodList.map((function(e){return e.valueList=p["a"].changeParameter(e.v.f),e}))},getValue:function(e){var t=e.v||0===e.v?e.v:e.ct&&e.ct.s?e.ct.s.length>0&&e.ct.s[0].v.replace(new RegExp("\n","g"),"<br/>").replace(new RegExp("@","g"),"<br/>"):"";if(e.ct&&e.ct.fa&&e.ct.fa.includes(".")&&t){var a=0,i=e.ct.fa.split(".")[1];a=i.length,t=Number(t).toFixed(a)}return e.v&&"string"==typeof e.v&&e.v.includes("@")&&(t=e.v.replace(new RegExp("@","g"),"<br/>")),t},getInspectionValueType:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].inspectionValueType},getTell:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].tell},handleWidth:function(e){var t=0;if(e.v.mc&&e.v.mc.cs&&void 0!=e.v.mc.c)for(var a=0;a<e.v.mc.cs;a++){var i=this.widthList[a+e.v.mc.c]?this.widthList[a+e.v.mc.c]:100;t+=i}else t=this.widthList[e.c]?this.widthList[e.c]:100;return t},handleInput:function(e){try{e.v.v=e.v.v.replace(/[^\d.^e>＞≥≤<＜断裂脆化\-/+]/g,""),e.v.v=e.v.v.replace(/\.{2,}/g,"."),e.v.v=e.v.v.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.v.v=e.v.v.replace(/\/{2,}/g,"/"),e.v.v=e.v.v.replace("/","$#$").replace(/\//g,"").replace("$#$","/")}catch(t){console.log(t)}},getInspectionItemType:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].inspectionItemType},getAsk:function(e){for(var t in this.currentSample.insProduct)if(this.currentSample.insProduct[t].id==e)return this.currentSample.insProduct[t].ask},getEquipOptions:function(e,t){var a=this;e&&(this.equipOptions=[],Object(g["t"])({status:0}).then((function(e){200===e.code&&e.data&&(a.equipOptions=e.data.map((function(e){return e.value=e.managementNumber,e.label=e.deviceName,e})))})).catch((function(e){console.error(e)})))},openAddCheck:function(){this.addCheck=!0},upInsReview:function(e){var t=this;1==e?(this.reviewLoading=!0,Object(g["C"])({orderId:this.orderId,type:1,laboratory:this.sonLaboratory,tell:null,userId:this.checkUser}).then((function(e){200===e.code&&(t.$message.success("操作成功"),t.goback(),t.addCheck=!1),t.reviewLoading=!1})).catch((function(e){console.error(e),t.reviewLoading=!1}))):this.reviewDia=!0},handleReviewDia:function(){var e=this;this.noReason?(this.reviewLoading=!0,Object(g["C"])({orderId:this.orderId,type:0,laboratory:this.sonLaboratory,tell:this.noReason}).then((function(t){200===t.code&&(e.$message.success("操作成功"),e.goback()),e.reviewLoading=!1})).catch((function(t){console.error(t),e.reviewLoading=!1}))):this.$message.error("未输入不通过原因")},viewManHour:function(){this.$refs.viewManHourDia.showDialog(this.id,99)},openAddVerifyDia:function(){this.addVerifyDia=!0},submit:function(){var e=this;null!==this.verifyUser&&""!==this.verifyUser?this.otherForm.humidity?this.otherForm.temperature?(this.submitLoading=!0,Object(g["b"])({orderId:this.orderId,laboratory:this.sonLaboratory}).then((function(t){if(200===t.code)if(t.data&&0!=t.data.length){var a=[],i=e.$createElement;for(var r in t.data){var s=t.data[r].slice(-1);"-"==s&&(t.data[r]=t.data[r].slice(0,-1)),a.push(i("p",{style:"font-size: 14px;color: red;"},Number(r)+1+"、"+t.data[r]))}a.push(i("p",{style:"font-size: 16px;color:#000;margin-top:12px;overflow-y: auto;max-height:80vh"},"以上项目不合格，确定提交？")),e.$confirm("提示",{title:"提示",message:i("div",null,a),confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then((function(){e.submitLoading=!0,Object(g["x"])({orderId:e.orderId,laboratory:e.sonLaboratory,verifyUser:e.verifyUser}).then((function(t){200===t.code&&(e.$message.success("操作成功"),e.addVerifyDia=!1,e.goback()),e.submitLoading=!1})).catch((function(t){console.error(t),e.submitLoading=!1}))})).catch((function(){}))}else e.submitLoading=!0,Object(g["x"])({orderId:e.orderId,laboratory:e.sonLaboratory,verifyUser:e.verifyUser,entrustCode:e.insOrder.entrustCode}).then((function(t){200===t.code&&(e.$message.success("操作成功"),e.goback(),e.submitLoading=!1,e.addVerifyDia=!1)})).catch((function(t){console.error(t),e.submitLoading=!1}))})).catch((function(t){console.error(t),e.submitLoading=!1}))):this.$message.error("请输入温度"):this.$message.error("请输入湿度"):this.$message.error("请指定复核人员")},saveInsContext:function(e){var t=this;try{if(this.param){var a=null;a=e?Object(d["a"])({},e,this.param[e]):this.param,Object(g["s"])({param:JSON.stringify(a),currentTable:this.currentTable,sampleId:this.currentSample.id,orderId:this.orderId,sonLaboratory:this.sonLaboratory}).then((function(e){t.$message.success("已保存")})),this.worker.postMessage(JSON.stringify({modelType:this.sampleProduct[0].model,type:"saveData",tableList:this.tableList,param:this.param,currentTable:this.currentTable}))}}catch(i){console.log(999,i)}},changeEquip:function(e,t,a){var i=this;try{for(var r in this.tableList[0].arr.forEach((function(e,t){e.forEach((function(e,t){i.param[e.i]&&(i.param[e.i].state=1)}))})),this.param)1!=this.param[r].state&&delete this.param[r];for(var s in this.param[t.i].equipName)this.param[t.i].equipName[s].i===t.i&&this.param[t.i].equipName[s].r===t.r&&(this.$delete(this.param[t.i].equipValue[s].v,"v"),this.$set(this.param[t.i].equipValue[s].v,"v",e.join("，")),this.$delete(this.param[t.i].equipName[s].v,"v"),this.$set(this.param[t.i].equipName[s].v,"v",e),this.tableList[0].arr.forEach((function(a,r){a.forEach((function(a){a.i==t.i&&a.v.ps&&"设备编码"==a.v.ps.value&&i.$set(a.v,"v",e.join("，")),a.i==t.i&&a.v.ps&&"设备名称"==a.v.ps.value&&i.$set(a.v,"v",e)}))})));this.saveInsContext(t.i)}catch(n){console.log("changeEquip----",n)}},getAuthorizedPerson:function(){var e=this;Object(g["w"])({type:1}).then((function(t){var a=[];t.data.forEach((function(e){a.push({label:e.name,value:e.id})})),e.personList=a}))},scrollInit:function(){var e,t,a,i=document.getElementById("nav");i.addEventListener("mousedown",(function(i){e=!0,t=i.clientX,a=this.scrollLeft})),i.addEventListener("mousemove",(function(i){if(e){var r=i.clientX,s=r-t;this.scrollLeft=a-s}})),i.addEventListener("mouseup",(function(){e=!1})),i.addEventListener("mouseleave",(function(t){e=!1}))},caretSample:function(e){var t=this;return Object(c["a"])(Object(o["a"])().m((function a(){var i,r;return Object(o["a"])().w((function(a){while(1)switch(a.n){case 0:if(i=t.currentKey+e,!(i<1)){a.n=1;break}return t.$message.error("当前是第一个样品"),a.a(2);case 1:if(!(i>t.sampleProduct.length)){a.n=2;break}return t.$message.error("当前是最后一个样品"),a.a(2);case 2:return t.currentKey=i,t.currentSample=t.HaveJson(t.sampleProduct[i-1]),a.n=3,t.getCurrentProduct(t.currentSample.id,0);case 3:r=a.v,t.currentSample.insProduct=t.HaveJson(r),t.param={},t.changeType=0,t.currentSample.insProduct.forEach((function(e,a){t.param[e.id]={insValue:[],comValue:[],resValue:null,equipValue:[],equipName:[],insResult:null}})),t.getTableLists(),t.worker.postMessage(JSON.stringify({modelType:t.sampleProduct[0].model,type:"saveData",tableList:t.tableList,param:t.param,currentTable:t.currentTable}));case 4:return a.a(2)}}),a)})))()},handleSuccessUp:function(e){this.upLoading=!1,200==e.code&&(this.$message.success("上传成功"),this.getList())},beforeUpload:function(e){return e.size>10485760?(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1):(this.upLoading=!0,!0)},onError:function(e,t,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleDown:function(e){var t=this;Object(g["h"])({id:e.id}).then((function(a){t.$download.saveAs(a.data.fileUrl,e.fileName)})).catch((function(e){}))},toFixed:function(e,t){if(e&&t&&t.fa){if(t.fa.includes(".")){var a=t.fa.slice(4).length;return Number(e).toFixed(a)}return e}return e},goback:function(){this.$router.go(-1)}}},x=_,D=(a("be4b"),a("7ba9"),a("2877")),T=Object(D["a"])(x,i,r,!1,null,"2de996f6",null);t["default"]=T.exports},"3e1e":function(e,t,a){"use strict";a("82a0")},"4ec9":function(e,t,a){"use strict";a("6f48")},"6f48":function(e,t,a){"use strict";var i=a("6d61"),r=a("6566");i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},"7ba9":function(e,t,a){"use strict";a("07cb")},"82a0":function(e,t,a){},"8d6b":function(e,t,a){"use strict";a("cae1")},"9c05":function(e,t,a){},b25a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"进货验证原始记录",visible:e.isShow,width:"70%","show-close":!1,"close-on-click-modal":!1,"modal-append-to-body":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isShow=t}}},[a("div",{staticClass:"search"},[a("el-form",{ref:"purchaseForm",staticClass:"form-inline",attrs:{inline:!0,model:e.purchaseForm,"label-position":"right",rules:e.purchaseFormRules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"检验编号:"}},[a("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.purchaseForm.entrustCode,callback:function(t){e.$set(e.purchaseForm,"entrustCode",t)},expression:"purchaseForm.entrustCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"材料厂家:"}},[a("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.purchaseForm.supplierName,callback:function(t){e.$set(e.purchaseForm,"supplierName",t)},expression:"purchaseForm.supplierName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"到货日期:"}},[a("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.purchaseForm.declareDate,callback:function(t){e.$set(e.purchaseForm,"declareDate",t)},expression:"purchaseForm.declareDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"材料名称:"}},[a("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.purchaseForm.sample,callback:function(t){e.$set(e.purchaseForm,"sample",t)},expression:"purchaseForm.sample"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"规格型号:"}},[a("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.purchaseForm.model,callback:function(t){e.$set(e.purchaseForm,"model",t)},expression:"purchaseForm.model"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"材料批号:"}},[a("el-input",{attrs:{clearable:"",disabled:"",size:"small",placeholder:"请输入"},model:{value:e.purchaseForm.updateBatchNo,callback:function(t){e.$set(e.purchaseForm,"updateBatchNo",t)},expression:"purchaseForm.updateBatchNo"}})],1)],1)],1),a("div",[a("el-form-item",{staticClass:"headLine",staticStyle:{width:"100%"},attrs:{label:"验证依据文件编号:","label-width":"160px",prop:"verifyFileCode"}},[a("el-input",{attrs:{clearable:"",size:"small",disabled:"view"===e.operationType,placeholder:"请输入"},model:{value:e.purchaseForm.verifyFileCode,callback:function(t){e.$set(e.purchaseForm,"verifyFileCode",t)},expression:"purchaseForm.verifyFileCode"}})],1)],1),a("h4",[a("span",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticClass:"line"}),a("span",[e._v("验证内容")])])]),a("div",{staticClass:"title"},[e._v("一、供方产品检测报告的基本信息确认")]),a("el-form-item",{attrs:{label:"材料名称:",prop:"basicName"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicName,callback:function(t){e.$set(e.purchaseForm,"basicName",t)},expression:"purchaseForm.basicName"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("el-form-item",{attrs:{label:"规格型号:",prop:"basicModel"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicModel,callback:function(t){e.$set(e.purchaseForm,"basicModel",t)},expression:"purchaseForm.basicModel"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("el-form-item",{attrs:{label:"材料批号:",prop:"basicBatchNo"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicBatchNo,callback:function(t){e.$set(e.purchaseForm,"basicBatchNo",t)},expression:"purchaseForm.basicBatchNo"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("el-form-item",{attrs:{label:"执行标准:",prop:"basicStandard"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicStandard,callback:function(t){e.$set(e.purchaseForm,"basicStandard",t)},expression:"purchaseForm.basicStandard"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("el-form-item",{attrs:{label:"生产日期:",prop:"basicDate"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicDate,callback:function(t){e.$set(e.purchaseForm,"basicDate",t)},expression:"purchaseForm.basicDate"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("el-form-item",{attrs:{label:"供货数量:",prop:"basicNumber"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicNumber,callback:function(t){e.$set(e.purchaseForm,"basicNumber",t)},expression:"purchaseForm.basicNumber"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("el-form-item",{attrs:{label:"材料颜色:",prop:"basicColor"}},[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicColor,callback:function(t){e.$set(e.purchaseForm,"basicColor",t)},expression:"purchaseForm.basicColor"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)],1),a("div",[a("el-form-item",{attrs:{label:"其他:"}},[a("el-input",{attrs:{clearable:"",size:"small",disabled:"view"===e.operationType,placeholder:"请输入"},model:{value:e.purchaseForm.basicOtherValue,callback:function(t){e.$set(e.purchaseForm,"basicOtherValue",t)},expression:"purchaseForm.basicOtherValue"}})],1),a("el-form-item",[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:e.purchaseForm.basicOther,callback:function(t){e.$set(e.purchaseForm,"basicOther",t)},expression:"purchaseForm.basicOther"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")])],1)],1),a("div",{staticClass:"titleSec"},[a("span",[e._v("二、供方产品检测报告中各项性能指标的验证")]),a("span",["add"===e.operationType?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addItem}},[e._v("手动添加检验项目")]):e._e(),"add"===e.operationType?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addFactoryVerifyItem}},[e._v("添加验证项目")]):e._e()],1)]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"98%"},attrs:{data:e.factoryVerifyItemList,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"inspectionItem",label:"验证项目",width:"300"}}),a("el-table-column",{attrs:{prop:"result",label:"验证结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{attrs:{disabled:"view"===e.operationType},model:{value:t.row.result,callback:function(a){e.$set(t.row,"result",a)},expression:"scope.row.result"}},[a("el-radio",{attrs:{label:"1"}},[e._v("符合")]),a("el-radio",{attrs:{label:"2"}},[e._v("不符合")]),a("el-radio",{attrs:{label:"3"}},[e._v("不适用")])],1)]}}])}),"add"===e.operationType?a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index)}}},[e._v("删除")])]}}],null,!1,3395820834)}):e._e()],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("resetPurchaseDialog")}}},[e._v("取 消")]),"add"===e.operationType?a("el-button",{attrs:{type:"primary",loading:e.handlePurchaseLoading},on:{click:e.handlePurchase}},[e._v("确定")]):e._e()],1)]),a("el-dialog",{staticStyle:{"max-height":"96vh","margin-top":"2vh"},attrs:{title:"待验证项目",visible:e.factoryVerifyItemDia,width:"1000px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.factoryVerifyItemDia=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableList,"header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"inspectionItem",label:"验证项目"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.factoryVerifyItemDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.handleFactoryVerifyLoading},on:{click:e.handleFactoryVerifyItem}},[e._v("添 加")])],1)],1),a("el-dialog",{attrs:{title:"手动添加验证项目",visible:e.inspectionItemDia,width:"500px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.inspectionItemDia=t},close:e.resetInput}},[a("el-input",{model:{value:e.inspectionItem,callback:function(t){e.inspectionItem=t},expression:"inspectionItem"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.inspectionItemDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添 加")])],1)],1)],1)},r=[],s=a("c14f"),n=a("1da1"),l=(a("d81d"),a("14d9"),a("4e82"),a("a434"),a("e9c4"),a("b64b"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("9a9a"),a("159b"),a("5e56")),o=a("b558"),c={name:"PurchaseVerification",components:{},props:{purchaseDialog:{type:Boolean,default:function(){return!1}},orderId:{type:String,default:function(){return null}}},data:function(){return{type:"",info:{},isShow:this.purchaseDialog,purchaseForm:{entrustCode:"",supplierName:"",declareDate:"",sample:"",model:"",updateBatchNo:"",verifyFileCode:"",basicName:"",basicModel:"",basicBatchNo:"",basicStandard:"",basicDate:"",basicNumber:"",basicColor:"",basicOtherValue:"",basicOther:""},purchaseFormRules:{verifyFileCode:[{required:!0,message:"请填写验证依据文件编号",trigger:"blur"}],basicName:[{required:!1,message:"请选择材料名称验证信息",trigger:"change"}],basicModel:[{required:!1,message:"请选择规格型号验证信息",trigger:"change"}],basicStandard:[{required:!1,message:"请选择执行标准验证信息",trigger:"change"}],basicDate:[{required:!1,message:"请选择生产日期验证信息",trigger:"change"}],basicNumber:[{required:!1,message:"请选择供货数量验证信息",trigger:"change"}],basicColor:[{required:!1,message:"请选择材料颜色验证信息",trigger:"change"}]},factoryVerifyItemList:[],tableList:[],multipleSelection:[],operationType:"",handlePurchaseLoading:!1,tableLoading:!1,factoryVerifyItemDia:!1,handleFactoryVerifyLoading:!1,inspectionItemDia:!1,inspectionItem:""}},methods:{getInsOrder:function(e,t){var a=this;return Object(n["a"])(Object(s["a"])().m((function i(){var r;return Object(s["a"])().w((function(i){while(1)switch(i.n){case 0:return a.operationType=e,a.info=t,i.n=1,Object(l["e"])({insOrderId:a.orderId});case 1:r=i.v,a.purchaseForm=r.data,a.factoryVerifyItemList=r.data.factoryVerifyItemList||[];case 2:return i.a(2)}}),i)})))()},addFactoryVerifyItem:function(){var e=this;return Object(n["a"])(Object(s["a"])().m((function t(){var a,i;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return e.factoryVerifyItemDia=!0,e.tableList=[],void 0===e.info.cableTag&&(e.info.cableTag=""),e.tableLoading=!0,a=5,t.n=1,Object(o["l"])({id:e.info.id,type:a,laboratory:e.info.sonLaboratory,cableTag:e.info.cableTag,rawMaterialTag:e.info.rawMaterialTag});case 1:i=t.v,i.data.length>0&&(i.data.map((function(t){t.inspectionItemSubclass&&(t.inspectionItem=t.inspectionItem+"-"+t.inspectionItemSubclass);var a=Object.assign({inspectionItem:t.inspectionItem,result:t.result});e.tableList.push(a)})),e.tableLoading=!1);case 2:return t.a(2)}}),t)})))()},handleSelectionChange:function(e){console.log("val---",e),this.multipleSelection=e},addItem:function(){this.inspectionItemDia=!0},deleteRow:function(e){this.factoryVerifyItemList.splice(e,1)},handleAdd:function(){this.inspectionItem?(this.factoryVerifyItemList.push({inspectionItem:this.inspectionItem,result:null}),this.inspectionItemDia=!1):this.$message.warning("请填写内容")},resetInput:function(){this.inspectionItem="",this.inspectionItemDia=!1},handleFactoryVerifyItem:function(){0===this.multipleSelection.length?this.$message.warning("请选择数据"):(this.factoryVerifyItemList=JSON.parse(JSON.stringify(this.multipleSelection)),this.factoryVerifyItemDia=!1)},handlePurchase:function(){var e=this;this.$refs["purchaseForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.factoryVerifyItemList.some((function(e){return void 0===e.result||null===e.result||""===e.result}))?e.$message.warning("请选择供方产品验证结果"):(e.factoryVerifyItemList.forEach((function(e,t){e.sort=t})),e.purchaseForm.factoryVerifyItemList=JSON.parse(JSON.stringify(e.factoryVerifyItemList)),e.handlePurchaseLoading=!0,Object(l["a"])(e.purchaseForm).then((function(t){200===t.code&&(e.$message.success("提交成功"),e.$emit("resetPurchaseDialog")),e.handlePurchaseLoading=!1})))}))}}},u=c,d=(a("3e1e"),a("2877")),p=Object(d["a"])(u,i,r,!1,null,"7a723372",null);t["default"]=p.exports},be4b:function(e,t,a){"use strict";a("9c05")},c0c7:function(e,t,a){"use strict";a.d(t,"j",(function(){return s})),a.d(t,"h",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"r",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"i",(function(){return p})),a.d(t,"s",(function(){return m})),a.d(t,"t",(function(){return h})),a.d(t,"u",(function(){return v})),a.d(t,"g",(function(){return f})),a.d(t,"q",(function(){return b})),a.d(t,"f",(function(){return g})),a.d(t,"l",(function(){return y})),a.d(t,"n",(function(){return w})),a.d(t,"b",(function(){return L})),a.d(t,"m",(function(){return k})),a.d(t,"a",(function(){return S})),a.d(t,"p",(function(){return I})),a.d(t,"o",(function(){return _}));var i=a("b775"),r=a("c38a");function s(e){return Object(i["a"])({url:"/system/user/list",method:"get",params:e})}function n(e){return Object(i["a"])({url:"/system/user/"+Object(r["e"])(e),method:"get"})}function l(e){return Object(i["a"])({url:"/system/user",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/system/user",method:"put",data:e})}function c(e){return Object(i["a"])({url:"/system/user/"+e,method:"delete"})}function u(e,t){var a={userId:e,password:t};return Object(i["a"])({url:"/system/user/resetPwd",method:"put",data:a})}function d(e,t){var a={userId:e,status:t};return Object(i["a"])({url:"/system/user/changeStatus",method:"put",data:a})}function p(){return Object(i["a"])({url:"/system/user/profile",method:"get"})}function m(e){return Object(i["a"])({url:"/system/user/profile",method:"put",data:e})}function h(e,t){var a={oldPassword:e,newPassword:t};return Object(i["a"])({url:"/system/user/profile/updatePwd",method:"put",data:a})}function v(e){return Object(i["a"])({url:"/system/user/profile/avatar",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}function f(e){return Object(i["a"])({url:"/system/user/authRole/"+e,method:"get"})}function b(e){return Object(i["a"])({url:"/system/user/authRole",method:"put",params:e})}function g(){return Object(i["a"])({url:"/system/user/deptTree",method:"get"})}function y(){return Object(i["a"])({url:"/companies/selectCompaniesList",method:"get"})}function w(e){return Object(i["a"])({url:"/companies/selectSimpleList",method:"post",params:e})}function L(e){return Object(i["a"])({url:"/companies/addPersonUser",method:"post",data:e})}function k(){return Object(i["a"])({url:"/system/custom/selectCustomEnum",method:"get"})}function S(e){return Object(i["a"])({url:"/department/addDepartment",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/system/newUser/selectUserDepartmentLimsName",method:"get"})}function _(e){return Object(i["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}},cae1:function(e,t,a){},df10:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.editInspectionDia,title:"查看工时",width:"80%"},on:{"update:visible":function(t){e.editInspectionDia=t},close:function(t){e.editInspectionDia=!1}}},[a("div",[a("el-form",{attrs:{model:e.entity,inline:!0}},[a("el-form-item",{attrs:{label:"检验项",prop:"outputWorkTime"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.entity.inspectionItem,callback:function(t){e.$set(e.entity,"inspectionItem",t)},expression:"entity.inspectionItem"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getList0}},[e._v("查询")])],1)],1)],1),a("lims-table",{attrs:{tableData:e.tableData0,column:e.column0,page:e.page0,tableLoading:e.tableLoading,height:"500"},on:{pagination:e.pagination0}}),99==e.insState?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editInspectionDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1):e._e()],1),a("el-dialog",{attrs:{visible:e.editAskDia,title:"修改",width:"50%"},on:{"update:visible":function(t){e.editAskDia=t}}},[a("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"检测人",prop:"name"}},[a("el-select",{attrs:{clearable:"",size:"small"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}},e._l(e.responsibleOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"产量工时",prop:"outputWorkTime"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.editForm.outputWorkTime,callback:function(t){e.$set(e.editForm,"outputWorkTime",t)},expression:"editForm.outputWorkTime"}})],1),a("el-form-item",{attrs:{label:"日期",prop:"dateTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择日期",size:"small",type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.editForm.dateTime,callback:function(t){e.$set(e.editForm,"dateTime",t)},expression:"editForm.dateTime"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editAskDia=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.handleEditLoading,type:"primary"},on:{click:e.handleEdit}},[e._v("确 定")])],1)],1)],1)},r=[],s=a("5530"),n=a("00d5"),l=a("b558"),o=a("c0c7"),c={name:"EditInspectionItem",components:{limsTable:n["a"]},data:function(){var e=this;return{editInspectionDia:!1,entity:{orderId:0,inspectionItem:""},insState:0,tableData0:[],tableLoading:!1,column0:[{label:"检测人",prop:"name"},{label:"检测项分类",prop:"inspectionItemClass"},{label:"检测项",prop:"inspectionItem",width:110},{label:"检测子项",prop:"inspectionItemSubclass",width:110},{label:"样品编号",prop:"sample",width:160},{label:"委托单号",prop:"orderNo",width:160},{label:"电缆标识",prop:"cableTag"},{label:"产量工时",prop:"outputWorkTime"},{label:"工时分组",prop:"manHourGroup"},{label:"单价",prop:"price"},{label:"日期",prop:"dateTime"},{label:"周次",prop:"week"},{label:"星期",prop:"weekDay"},{dataType:"action",width:"80px",label:"操作",fixed:"right",operation:[{name:"编辑",type:"text",clickFun:function(t){e.editIns(t)},disabled:function(t){return 3==e.insState||5==e.insState||99==e.insState}}]}],page0:{total:0,size:10,current:1},editAskDia:!1,editForm:{id:"",name:"",outputWorkTime:"",inspectionValueType:""},handleEditLoading:!1,inspectionValueType:[],responsibleOptions:[]}},mounted:function(){},methods:{showDialog:function(e,t){this.insState=t,this.editInspectionDia=!0,this.entity.orderId=e,this.getList0()},getList0:function(){var e=this;this.tableLoading=!0,Object(l["q"])(Object(s["a"])(Object(s["a"])({},this.entity),this.page0)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData0=t.data.records,e.page0.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},editIns:function(e){this.editAskDia=!0,this.editForm=Object(s["a"])({},e),this.getUserList()},handleEdit:function(){var e=this;this.handleEditLoading=!0,Object(l["B"])(Object(s["a"])({},this.editForm)).then((function(t){e.handleEditLoading=!1,e.$message.success("修改成功"),e.editAskDia=!1,e.getList0()})).catch((function(){e.handleEditLoading=!1}))},handleSubmit:function(){this.editInspectionDia=!1,this.$emit("submit")},pagination0:function(e){var t=e.page,a=e.limit;this.page0.current=t,this.page0.size=a,this.getList0()},getUserList:function(){var e=this;Object(o["o"])({type:1}).then((function(t){e.responsibleOptions=t.data}))}}},u=c,d=(a("8d6b"),a("2877")),p=Object(d["a"])(u,i,r,!1,null,"a5039e28",null);t["default"]=p.exports}}]);