(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2894d0eb"],{"0762":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"header"},[n("div",[e._v("照度记录")]),n("div",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.clickAdd}},[e._v("新 增")])],1)]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"calc(100vh - 18em)","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s((e.search.current-1)*e.search.size+t.$index+1))])]}}])}),n("el-table-column",{attrs:{label:"结论","min-width":"180",prop:"conclusion"}}),n("el-table-column",{attrs:{label:"测试日期","min-width":"180",prop:"testDate",width:"testDate"}}),n("el-table-column",{attrs:{label:"检测者","min-width":"180",prop:"testerUser"}}),n("el-table-column",{attrs:{label:"核查人","min-width":"180",prop:"checkerUser"}}),n("el-table-column",{attrs:{label:"设备名称","min-width":"180",prop:"deviceName"}}),n("el-table-column",{attrs:{label:"设备编号","min-width":"180",prop:"managementNumber"}}),n("el-table-column",{attrs:{label:"校准日期","min-width":"180",prop:"lastCalibrationDate"}}),n("el-table-column",{attrs:{label:"下次校准日期","min-width":"180",prop:"nextCalibrationDate"}}),n("el-table-column",{attrs:{label:"创建时间","min-width":"180",prop:"createTime"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.downLoadPost(t.row)}}},[e._v("导出")]),n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.edit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.deleteRowFun(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":1,"page-size":e.search.size,"page-sizes":[10,20,30,50,100],total:e.search.total,layout:"->,total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"新增",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.openDialog}},[n("div",{staticStyle:{height:"50vh","overflow-y":"auto"}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{rules:[{required:!0,message:"请输入测试地点",trigger:"change"}],label:"测试日期",prop:"testDate"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.testDate,callback:function(t){e.$set(e.form,"testDate",t)},expression:"form.testDate"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{rules:[{required:!0,message:"请输入设备名称",trigger:"change"}],label:"设备名称",prop:"deviceId"}},[n("el-select",{staticClass:"table_input",attrs:{clearable:"",filterable:"",placeholder:"设备名称",size:"small"},on:{change:e.getCalibrationDateFun},model:{value:e.form.deviceId,callback:function(t){e.$set(e.form,"deviceId",t)},expression:"form.deviceId"}},e._l(e.equipOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.deviceName,value:t.id}},[e._v(" "+e._s(t.deviceName+t.managementNumber)+" ")])})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"设备编号"}},[n("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.managementNumber,callback:function(t){e.$set(e.form,"managementNumber",t)},expression:"form.managementNumber"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"最近校准日期"}},[n("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.lastCalibrationDate,callback:function(t){e.$set(e.form,"lastCalibrationDate",t)},expression:"form.lastCalibrationDate"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"下次校准日期"}},[n("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.form.nextCalibrationDate,callback:function(t){e.$set(e.form,"nextCalibrationDate",t)},expression:"form.nextCalibrationDate"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"检测者",prop:"recipientUser"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.form.testerId,callback:function(t){e.$set(e.form,"testerId",t)},expression:"form.testerId"}},e._l(e.responsibleOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"核查人",prop:"recipientUser"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:e.form.checkerId,callback:function(t){e.$set(e.form,"checkerId",t)},expression:"form.checkerId"}},e._l(e.responsibleOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"结论"}},[n("el-input",{attrs:{rows:2,placeholder:"请输入内容",type:"textarea"},model:{value:e.form.conclusion,callback:function(t){e.$set(e.form,"conclusion",t)},expression:"form.conclusion"}})],1)],1)],1),n("div",[n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"0.5em"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.feMeasuredQuantityListAdd}},[e._v("新增")])],1),n("div",[n("el-table",{staticStyle:{width:"100%",margin:"auto"},attrs:{data:e.form.illuminationDetectionAreaList,height:"40vh","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),n("el-table-column",{attrs:{align:"center",label:"检测区域名称","min-width":"180",prop:"detectionAreaLabel"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-input",{attrs:{rows:1,type:"textarea"},model:{value:a.detectionAreaLabel,callback:function(t){e.$set(a,"detectionAreaLabel",t)},expression:"row.detectionAreaLabel"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:"检测值","min-width":"300",prop:"name"}},[[n("el-table-column",{attrs:{align:"center",label:"第一次","min-width":"100",prop:"valueOne"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-input",{attrs:{rows:1},on:{blur:function(t){return e.getAverage(a)}},model:{value:a.valueOne,callback:function(t){e.$set(a,"valueOne",t)},expression:"row.valueOne"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:"第二次","min-width":"100",prop:"valueTwo"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-input",{attrs:{rows:1},on:{blur:function(t){return e.getAverage(a)}},model:{value:a.valueTwo,callback:function(t){e.$set(a,"valueTwo",t)},expression:"row.valueTwo"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:"第三次","min-width":"100",prop:"valueThree"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-input",{attrs:{rows:1},on:{blur:function(t){return e.getAverage(a)}},model:{value:a.valueThree,callback:function(t){e.$set(a,"valueThree",t)},expression:"row.valueThree"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:"平均值","min-width":"100",prop:"average"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-input",{attrs:{rows:1},model:{value:a.average,callback:function(t){e.$set(a,"average",t)},expression:"row.average"}})]}}])})]],2),n("el-table-column",{attrs:{align:"center",label:"备注","min-width":"180",prop:"detectionAreaLabel"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-input",{attrs:{rows:1,type:"textarea"},model:{value:a.remark,callback:function(t){e.$set(a,"remark",t)},expression:"row.remark"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.feMeasuredQuantityListDelete(t.row,t.$index)}}},[e._v(" 删除 ")])]}}])})],1)],1)])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.addPowerSupplyStability}},[e._v("确 定")])],1)])],1)},i=[],r=n("5530"),o=(n("c740"),n("14d9"),n("a434"),n("a9e3"),n("ac1f"),n("841c"),n("1839")),l={data:function(){return{search:{size:10,current:1,total:0},tableData:[],dialogVisible:!1,submitLoading:!1,form:{testDate:"",deviceId:"",managementNumber:"",lastCalibrationDate:"",nextCalibrationDate:"",testerId:"",checkerId:"",conclusion:"",illuminationDetectionAreaList:[]},cascaderList:[],responsibleOptions:[],equipOptions:[]}},mounted:function(){this.initData()},watch:{dialogVisible:function(e){e||(this.form={deviceId:null,illuminationDetectionAreaList:[]})}},methods:{getAverage:function(e){if(e.valueOne&&e.valueTwo&&e.valueThree)if(isNaN(e.valueOne)||isNaN(e.valueTwo)||isNaN(e.valueThree))this.$message.warning("必须为数字！");else{var t=Number(e.valueOne)+Number(e.valueTwo)+Number(e.valueThree);console.log(t),e.average=Math.round(t/3)}},edit:function(e){var t=this;Object(o["s"])({intensityIlluminationId:e.intensityIlluminationId}).then((function(n){t.form=Object(r["a"])({},e),t.form.illuminationDetectionAreaList=n.data,t.dialogVisible=!0}))},initData:function(){var e=this;Object(o["t"])(Object(r["a"])({},this.search)).then((function(t){200===t.code&&(e.tableData=t.data.records,e.search.total=t.data.total)}))},handleSizeChange:function(e){this.search.size=e,this.initData()},handleCurrentChange:function(e){this.search.current=e,this.initData()},deleteRowFun:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["h"])({intensityIlluminationId:e.intensityIlluminationId}).then((function(e){t.$message.success("删除成功！"),t.initData()}))}))},feMeasuredQuantityListDelete:function(e,t){var n=this;e.detectionAreaId?Object(o["g"])({detectionAreaId:e.detectionAreaId}).then((function(e){200===e.code&&(n.form.illuminationDetectionAreaList.splice(t,1),n.$message.success("删除成功！"))})):(this.form.illuminationDetectionAreaList.splice(t,1),this.$message.success("删除成功！"))},openDialog:function(){var e=this;Object(o["A"])().then((function(t){e.cascaderList=t.data})),this.$nextTick((function(){e.$refs["form"].clearValidate()})),this.getUserList()},clickAdd:function(){this.dialogVisible=!0,this.getEquipOptions()},getEquipOptions:function(){var e=this;this.equipOptions=[],Object(o["n"])({status:"0"}).then((function(t){200===t.code&&t.data&&(e.equipOptions=t.data)})).catch((function(e){console.error(e)}))},feMeasuredQuantityListAdd:function(){var e={detectionAreaLabel:null,valueOne:null,valueTwo:null,valueThree:null,average:null,remark:null};this.form.illuminationDetectionAreaList.push(e)},addPowerSupplyStability:function(){var e=this;this.submitLoading=!0,this.$refs.form.validate((function(t){t&&Object(o["a"])(e.form).then((function(t){e.submitLoading=!1,200===t.code&&(e.initData(),e.dialogVisible=!1)})).catch((function(t){e.submitLoading=!1}))}))},getUserList:function(){var e=this;Object(o["z"])().then((function(t){200==t.code&&(e.responsibleOptions=t.data)}))},getCalibrationDateFun:function(e){var t=this.equipOptions.findIndex((function(t){return t.id===e}));t>-1&&(this.form.managementNumber=this.equipOptions[t].managementNumber,this.form.lastCalibrationDate=this.equipOptions[t].lastCalibrationDate,this.form.nextCalibrationDate=this.equipOptions[t].nextCalibrationDate)},downLoadPost:function(e){var t=this;Object(o["o"])({intensityIlluminationId:e.intensityIlluminationId}).then((function(e){t.outLoading=!1;var n=new Blob([e],{type:"application/msword"});t.$download.saveAs(n,"照度记录.docx")}))}}},u=l,s=(n("52f7"),n("2877")),c=Object(s["a"])(u,a,i,!1,null,"bac9918a",null);t["default"]=c.exports},1839:function(e,t,n){"use strict";n.d(t,"x",(function(){return i})),n.d(t,"n",(function(){return r})),n.d(t,"A",(function(){return o})),n.d(t,"z",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"u",(function(){return d})),n.d(t,"p",(function(){return m})),n.d(t,"y",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"m",(function(){return b})),n.d(t,"q",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"h",(function(){return w})),n.d(t,"s",(function(){return y})),n.d(t,"g",(function(){return D})),n.d(t,"o",(function(){return O})),n.d(t,"v",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"w",(function(){return L})),n.d(t,"c",(function(){return j})),n.d(t,"k",(function(){return T})),n.d(t,"j",(function(){return I})),n.d(t,"r",(function(){return S})),n.d(t,"f",(function(){return A}));var a=n("b775");function i(e){return Object(a["a"])({url:"/fePowerStable/getLaboratoryFacilityPowerStablePage",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/deviceScope/search",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/deviceScope/treeDevice",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/fePowerStable/addLaboratoryFacilityPowerStable",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/fePowerStable/deleteFeMeasuredQuantity",method:"delete",params:e})}function c(e){return Object(a["a"])({url:"/fePowerStable/deleteLaboratoryFacilityPowerStable",method:"delete",params:e})}function d(e){return Object(a["a"])({url:"/fePowerStable/getFeMeasuredQuantityService",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/fePowerStable/exportFePowerStable",method:"get",responseType:"blob",params:e})}function f(e){return Object(a["a"])({url:"/feLightningProtection/getLightningProtectionDetection",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/feLightningProtection/addLightningProtectionDetection",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function b(e){return Object(a["a"])({url:"/feLightningProtection/deleteLightningProtectionDetection",method:"delete",params:e})}function h(e){return Object(a["a"])({url:"/feLightningProtection/exportOfLightningProtectionDetection",method:"get",responseType:"blob",params:e})}function g(e){return Object(a["a"])({url:"/feIllumination/getFeLightningProtection",method:"get",params:e})}function v(e){return Object(a["a"])({url:"/feIllumination/addFeLightningProtection",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/feIllumination/deleteFeLightningProtection",method:"delete",params:e})}function y(e){return Object(a["a"])({url:"/feIllumination/getFeIlluminationDetectionArea",method:"get",params:e})}function D(e){return Object(a["a"])({url:"/feIllumination/deleteFeIlluminationDetectionArea",method:"delete",params:e})}function O(e){return Object(a["a"])({url:"/feIllumination/exportFeIllumination",method:"get",responseType:"blob",params:e})}function k(e){return Object(a["a"])({url:"/feTempHumDate/getFeTempHumDate",method:"get",params:e})}function x(e){return Object(a["a"])({url:"/feTempHumDate/addFeTempHumDate",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/feTempHumDate/getFeTempHumRecordPage",method:"get",params:e})}function j(e){return Object(a["a"])({url:"/feTempHumDate/addFeTempHumRecord",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/feTempHumDate/deleteFeTempHumRecord",method:"delete",params:e})}function I(e){return Object(a["a"])({url:"/feTempHumDate/deleteFeTempHumDate",method:"delete",params:e})}function S(e){return Object(a["a"])({url:"/feTempHumDate/exportTemperatureAndHumidityRecords",method:"get",responseType:"blob",params:e})}function A(e){return Object(a["a"])({url:"/feTempHumDate/affirmFeTempHumDate",method:"post",data:e})}},"52f7":function(e,t,n){"use strict";n("af19")},af19:function(e,t,n){}}]);