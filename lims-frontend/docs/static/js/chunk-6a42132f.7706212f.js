(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a42132f"],{"13fe":function(t,e,r){},"4e71a":function(t,e,r){"use strict";r.d(e,"q",(function(){return n})),r.d(e,"s",(function(){return i})),r.d(e,"j",(function(){return s})),r.d(e,"h",(function(){return u})),r.d(e,"r",(function(){return o})),r.d(e,"k",(function(){return c})),r.d(e,"t",(function(){return l})),r.d(e,"l",(function(){return d})),r.d(e,"i",(function(){return p})),r.d(e,"c",(function(){return f})),r.d(e,"u",(function(){return m})),r.d(e,"p",(function(){return v})),r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return b})),r.d(e,"m",(function(){return y})),r.d(e,"n",(function(){return g})),r.d(e,"a",(function(){return O})),r.d(e,"g",(function(){return S})),r.d(e,"o",(function(){return _})),r.d(e,"b",(function(){return C})),r.d(e,"f",(function(){return j}));var a=r("b775");function n(t){return Object(a["a"])({url:"/qualitySupervise/pageQualitySupervise",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/qualitySupervise/ratifyQualitySupervise",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/qualitySupervise/exportQualitySupervise",method:"get",data:t,responseType:"blob"})}function u(t){return Object(a["a"])({url:"/qualitySupervise/delQualitySupervise",method:"delete",params:t})}function o(t){return Object(a["a"])({url:"/qualitySupervise/pageQualitySuperviseDetail",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/qualitySupervise/exportSuperviseDetailRecord",method:"get",params:t,responseType:"blob"})}function l(t){return Object(a["a"])({url:"/qualitySupervise/superviseDetailAccordingExport",method:"get",params:t,responseType:"blob"})}function d(t){return Object(a["a"])({url:"/qualitySupervise/exportSuperviseDetaillCorrect",method:"get",params:t,responseType:"blob"})}function p(t){return Object(a["a"])({url:"/qualitySupervise/delQualitySuperviseDetail",method:"delete",params:t})}function f(t){return Object(a["a"])({url:"/qualitySupervise/addQualitySuperviseDetail",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/qualitySupervise/updateQualitySuperviseDetail",method:"post",data:t})}function v(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailRecord",method:"get",params:t})}function h(t){return Object(a["a"])({url:"/qualitySupervise/addSuperviseDetailRecord",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/qualitySupervise/addSuperviseRecordOpinion",method:"post",data:t})}function y(t){return Object(a["a"])({url:"/qualitySupervise/getRecordUser",method:"get",params:t})}function g(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailAccording",method:"get",params:t})}function O(t){return Object(a["a"])({url:"/qualitySupervise/addEquipSuperviseDetailAccording",method:"post",data:t})}function S(t){return Object(a["a"])({url:"/qualitySupervise/approverEquipSuperviseDetailAccording",method:"post",data:t})}function _(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrect",method:"get",params:t})}function C(t){return Object(a["a"])({url:"/qualitySupervise/addEquipSuperviseDetailCorrect",method:"post",data:t})}function j(t){return Object(a["a"])({url:"/qualitySupervise/approveEquipSuperviseDetailCorrect",method:"post",data:t})}},"8dc4":function(t,e,r){"use strict";r("13fe")},b2cc:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.formDia,title:"纠正措施处理单",width:"60%"},on:{"update:visible":function(e){t.formDia=e},close:t.closeRectifyDia}},[r("el-steps",{attrs:{active:t.currentStep,"align-center":"","finish-status":"success"}},[r("el-step",{attrs:{title:"不合格或偏离事实的描述"},nativeOn:{click:function(e){return t.setStep(0)}}}),r("el-step",{attrs:{title:"批准"},nativeOn:{click:function(e){return t.setStep(2)}}})],1),r("div",{staticStyle:{height:"510px","overflow-y":"auto"}},[r("table",{staticClass:"tables",attrs:{border:"1",cellspacing:"10"}},[r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("培训计划：")])]),r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",disabled:0!==t.currentStep,placeholder:"请选择",size:"small"},model:{value:t.form.personTrainingDetailedId,callback:function(e){t.$set(t.form,"personTrainingDetailedId",e)},expression:"form.personTrainingDetailedId"}},t._l(t.yearTrainingDetailed,(function(t){return r("el-option",{key:t.id,attrs:{label:t.trainingObjectives,value:t.id}})})),1)],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("不合格或偏离事实的描述：")])]),r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[0===t.currentStep?r("el-input",{attrs:{rows:2,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.raiseResult,callback:function(e){t.$set(t.form,"raiseResult",e)},expression:"form.raiseResult"}}):t._e(),0!==t.currentStep?r("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.raiseResult))]):t._e()],1)]),0!==t.currentStep?r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("提出人：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.raiseUserName)+" ")]),r("td",{staticClass:"td-title"},[r("p",[t._v("提出部门：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.raiseDepartment)+" ")])]):t._e(),r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("提出日期：")])]),0===t.currentStep?r("td",{staticClass:"td-info"},[r("el-date-picker",{staticStyle:{width:"80%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:t.form.raiseTime,callback:function(e){t.$set(t.form,"raiseTime",e)},expression:"form.raiseTime"}})],1):t._e(),0!==t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.raiseTime)+" ")]):t._e()]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("原因分析：")])]),r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[0===t.currentStep?r("el-input",{attrs:{rows:2,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.causeResult,callback:function(e){t.$set(t.form,"causeResult",e)},expression:"form.causeResult"}}):t._e(),0!==t.currentStep?r("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.causeResult))]):t._e()],1)]),0!==t.currentStep?r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("原因分析人：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.causeUserName)+" ")]),r("td",{staticClass:"td-title"},[r("p",[t._v("责任部门：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.causeDepartment)+" ")])]):t._e(),r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("原因分析日期：")])]),0===t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[r("el-date-picker",{staticStyle:{width:"80%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:t.form.causeTime,callback:function(e){t.$set(t.form,"causeTime",e)},expression:"form.causeTime"}})],1):t._e(),0!==t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.causeTime)+" ")]):t._e()]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("纠正措施：")])]),r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[0===t.currentStep?r("el-input",{attrs:{rows:2,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.correctResult,callback:function(e){t.$set(t.form,"correctResult",e)},expression:"form.correctResult"}}):t._e(),0!==t.currentStep?r("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.correctResult))]):t._e()],1)]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("提出要求部门确认：")])]),r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[0===t.currentStep?r("el-input",{attrs:{rows:2,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.raiseDepartmentAffirm,callback:function(e){t.$set(t.form,"raiseDepartmentAffirm",e)},expression:"form.raiseDepartmentAffirm"}}):t._e(),0!==t.currentStep?r("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.raiseDepartmentAffirm))]):t._e()],1)]),0!==t.currentStep?r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("纠正人：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.correctUserName)+" ")]),r("td",{staticClass:"td-title"},[r("p",[t._v("责任部门：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.correctDepartment)+" ")])]):t._e(),r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("纠正日期：")])]),0===t.currentStep?r("td",{staticClass:"td-info"},[r("el-date-picker",{staticStyle:{width:"80%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:t.form.correctTime,callback:function(e){t.$set(t.form,"correctTime",e)},expression:"form.correctTime"}})],1):t._e(),0!==t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.correctTime)+" ")]):t._e()]),r("tr",[r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("实施验证结果：")])]),r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[0===t.currentStep?r("el-input",{attrs:{rows:2,placeholder:"请输入内容",size:"small",type:"textarea"},model:{value:t.form.validationResult,callback:function(e){t.$set(t.form,"validationResult",e)},expression:"form.validationResult"}}):t._e(),0!==t.currentStep?r("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.validationResult))]):t._e()],1)]),0!==t.currentStep?r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("验证人：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.validationUserName)+" ")]),r("td",{staticClass:"td-title"},[r("p",[t._v("责任部门：")])]),r("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.validationDepartment)+" ")])]):t._e(),r("tr",[r("td",{staticClass:"td-title"},[r("p",[t._v("验证日期：")])]),0===t.currentStep?r("td",{staticClass:"td-info"},[r("el-date-picker",{staticStyle:{width:"80%"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",size:"small",type:"date","value-format":"yyyy-MM-dd"},model:{value:t.form.validationTime,callback:function(e){t.$set(t.form,"validationTime",e)},expression:"form.validationTime"}})],1):t._e(),0!==t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.validationTime)+" ")]):t._e()]),0===t.currentStep?r("tr",[0===t.currentStep?r("td",{staticClass:"td-title"},[r("p",[r("span",{staticClass:"required-span"},[t._v("* ")]),t._v("请选择批准人：")])]):t._e(),0===t.currentStep?r("td",{staticClass:"td-info",attrs:{colspan:"3"}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择",size:"small"},model:{value:t.form.approverUserId,callback:function(e){t.$set(t.form,"approverUserId",e)},expression:"form.approverUserId"}},t._l(t.personList,(function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1):t._e()]):t._e()])]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.closeRectifyDia}},[t._v("取 消")]),0===t.currentStep&&t.userId==t.supervisedUserId?r("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:t.handleEdit}},[t._v("提 交")]):t._e(),1===t.currentStep&&t.userId==t.approverUserId?r("el-button",{attrs:{loading:t.editLoad},on:{click:function(e){return t.handleEdit(0)}}},[t._v("不通过")]):t._e(),1===t.currentStep&&t.userId==t.approverUserId?r("el-button",{attrs:{loading:t.editLoad,type:"primary"},on:{click:function(e){return t.handleEdit(1)}}},[t._v("通 过")]):t._e()],1)],1)],1)},n=[],i=r("5530"),s=(r("14d9"),r("b0c0"),r("d3b7"),r("0643"),r("4e3e"),r("159b"),r("4e71a")),u=r("b558"),o=r("bb61"),c=r("2f62"),l={name:"rectifyDialog",components:{},data:function(){return{formDia:!1,currentStep:0,form:{superviseDetailsId:"",raiseResult:"",vdeRaiseResult:"",raiseUserName:"",raiseDepartment:"",raiseTime:"",causeResult:"",causeUserName:"",causeDepartment:"",causeTime:"",correctResult:"",raiseDepartmentAffirm:"",correctUserName:"",correctDepartment:"",correctTime:"",approverUserId:"",validationResult:"",validationUserName:"",validationDepartment:"",validationTime:"",superviseDetailsCorrectId:"",approveId:"",personTrainingDetailedId:""},editLoad:!1,personList:[],yearTrainingDetailed:[],supervisedUserId:"",approverUserId:""}},computed:Object(i["a"])({},Object(c["b"])(["userId"])),methods:{openDia:function(t){this.formDia=!0,this.searchInfo(t),this.form.superviseDetailsId=t.superviseDetailsId,this.form.approveId=t.approveId,this.supervisedUserId=t.supervisedUserId,this.getAuthorizedPerson(),this.getYearTrainingDetailed()},searchInfo:function(t){var e=this;this.form.qualityMonitorDetailsId=t.qualityMonitorDetailsId,Object(s["o"])({superviseDetailsId:t.superviseDetailsId}).then((function(t){t.data.approverUserId?1!=t.data.isFinish?e.currentStep=1:1==t.data.isFinish&&(e.currentStep=2):e.currentStep=0,e.form=t.data,e.approverUserId=t.data.approverUserId})).catch((function(t){console.log("err---",t)}))},handleEdit:function(t){var e=this;if(0===this.currentStep){if(!this.form.raiseResult)return void this.$message.warning("请填写不合格描述");if(!this.form.causeResult)return void this.$message.warning("请填写原因分析");if(!this.form.correctResult)return void this.$message.warning("请填写纠正措施");if(!this.form.validationResult)return void this.$message.warning("请填写实施验证结果")}this.editLoad=!0,this.form.flowType=this.currentStep,0===this.currentStep?Object(s["b"])(this.form).then((function(t){e.editLoad=!1,e.$message.success("提交成功"),e.closeRectifyDia()})).catch((function(t){console.log("err---",t),e.editLoad=!1})):(this.form.isFinish=t,Object(s["f"])(this.form).then((function(t){e.editLoad=!1,e.$message.success("批准成功"),e.closeRectifyDia()})).catch((function(t){console.log("err---",t),e.editLoad=!1})))},closeRectifyDia:function(){this.formDia=!1,this.$emit("closeRectifyDia")},setStep:function(t){this.showStep=t},getAuthorizedPerson:function(){var t=this;Object(u["w"])({type:2}).then((function(e){var r=[];e.data.forEach((function(t){r.push({label:t.name,value:t.id})})),t.personList=r}))},getYearTrainingDetailed:function(){var t=this;Object(o["e"])().then((function(e){t.yearTrainingDetailed=e.data}))}}},d=l,p=(r("8dc4"),r("2877")),f=Object(p["a"])(d,a,n,!1,null,"5bc78a81",null);e["default"]=f.exports},b558:function(t,e,r){"use strict";r.d(e,"v",(function(){return n})),r.d(e,"A",(function(){return i})),r.d(e,"c",(function(){return s})),r.d(e,"z",(function(){return u})),r.d(e,"y",(function(){return o})),r.d(e,"w",(function(){return c})),r.d(e,"i",(function(){return l})),r.d(e,"n",(function(){return d})),r.d(e,"a",(function(){return p})),r.d(e,"e",(function(){return f})),r.d(e,"u",(function(){return m})),r.d(e,"g",(function(){return v})),r.d(e,"j",(function(){return h})),r.d(e,"p",(function(){return b})),r.d(e,"o",(function(){return y})),r.d(e,"d",(function(){return g})),r.d(e,"D",(function(){return O})),r.d(e,"l",(function(){return S})),r.d(e,"t",(function(){return _})),r.d(e,"C",(function(){return C})),r.d(e,"b",(function(){return j})),r.d(e,"x",(function(){return D})),r.d(e,"s",(function(){return P})),r.d(e,"h",(function(){return I})),r.d(e,"k",(function(){return T})),r.d(e,"f",(function(){return q})),r.d(e,"r",(function(){return R})),r.d(e,"m",(function(){return k})),r.d(e,"q",(function(){return w})),r.d(e,"B",(function(){return U}));var a=r("b775");function n(t){return Object(a["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:t})}function c(t){return Object(a["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:t})}function d(t){return Object(a["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:t})}function p(t){return Object(a["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:t})}function m(t){return Object(a["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:t})}function v(t){return Object(a["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:t})}function h(t){return Object(a["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:t})}function b(t){return Object(a["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:t})}function y(t){return Object(a["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:t})}function g(t){return Object(a["a"])({url:"/deviceScope/dataCollection",method:"post",data:t})}function O(t){return Object(a["a"])({url:"/insOrderPlan/write",method:"post",data:t})}function S(t){return Object(a["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:t})}function _(t){return Object(a["a"])({url:"/deviceScope/search",method:"get",params:t})}function C(t){return Object(a["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:t})}function j(t){return Object(a["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:t})}function D(t){return Object(a["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:t})}function P(t){return Object(a["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:t})}function I(t){return Object(a["a"])({url:"/insOrderPlan/downFile",method:"get",params:t})}function T(t){return Object(a["a"])({url:"/insOrderPlan/getFileList",method:"get",params:t})}function q(t){return Object(a["a"])({url:"/insOrderPlan/delfile",method:"delete",params:t})}function R(t){return Object(a["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:t})}function k(t){return Object(a["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:t})}function w(t){return Object(a["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:t})}function U(t){return Object(a["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:t})}},bb61:function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return u})),r.d(e,"c",(function(){return o})),r.d(e,"e",(function(){return c}));var a=r("b775");function n(t){return Object(a["a"])({url:"/qualitySupervise/pageSuperviseDetailCorrect",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/qualitySupervise/exportSuperviseDetaillCorrect",method:"get",responseType:"blob",params:t})}function s(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrectFileList",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/qualitySupervise/delSuperviseDetailCorrectFile",method:"delete",params:t})}function o(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrect",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/personTraining/getThisYearTrainingDetailed",method:"get",params:t})}}}]);