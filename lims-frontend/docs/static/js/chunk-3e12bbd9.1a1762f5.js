(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e12bbd9"],{"120a":function(e,t,n){"use strict";n("67e6")},"67e6":function(e,t,n){},"896b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"page-header"},[e._m(0),n("div",{staticClass:"btns"},[1!==this.currentRow.state?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm(3)}}},[e._v("撤销")]):e._e(),1!==this.currentRow.state?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm(0)}}},[e._v("提交")]):e._e(),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("goBack")}}},[e._v("返回")])],1)]),n("div",{staticClass:"form_title"},[n("el-row",[n("el-col",{attrs:{span:7}},[n("span",{staticClass:"form_label"},[e._v("培训内容：")]),n("span",[e._v(" "+e._s(e.trainingForm.trainingContent)+" ")])]),n("el-col",{attrs:{span:5}},[n("span",{staticClass:"form_label"},[e._v("状态：")]),1===e.trainingForm.state?n("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):e._e(),2===e.trainingForm.state?n("el-tag",{attrs:{type:"warning"}},[e._v("待评价")]):e._e(),3===e.trainingForm.state?n("el-tag",{attrs:{type:"primary"}},[e._v("未开始")]):e._e()],1),n("el-col",{attrs:{span:4}},[n("span",{staticClass:"form_label"},[e._v("培训讲师：")]),n("span",[e._v(" "+e._s(e.trainingForm.trainingLecturerName)+" ")])])],1),n("el-row",{staticStyle:{margin:"15px 0"}},[n("el-form",[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"培训日期:"}},[n("el-date-picker",{staticStyle:{width:"60%"},attrs:{format:"yyyy-MM-dd",disabled:3!==e.currentRow.state,placeholder:"选择日期",size:"small","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.trainingForm.openingTime,callback:function(t){e.$set(e.trainingForm,"openingTime",t)},expression:"trainingForm.openingTime"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"培训地点"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{disabled:3!==e.currentRow.state,rows:2,placeholder:"请输入",size:"small",type:"text"},model:{value:e.trainingForm.placeTraining,callback:function(t){e.$set(e.trainingForm,"placeTraining",t)},expression:"trainingForm.placeTraining"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"评价人"}},[n("el-select",{staticStyle:{width:"50%"},attrs:{disabled:3!==e.currentRow.state,placeholder:"请选择",size:"small"},model:{value:e.trainingForm.assessmentUserId,callback:function(t){e.$set(e.trainingForm,"assessmentUserId",t)},expression:"trainingForm.assessmentUserId"}},e._l(e.userList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"考核方式"}},[n("el-input",{staticStyle:{width:"79%"},attrs:{disabled:3!==e.currentRow.state,rows:2,placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.trainingForm.assessmentMethod,callback:function(t){e.$set(e.trainingForm,"assessmentMethod",t)},expression:"trainingForm.assessmentMethod"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"评价时间"}},[n("el-date-picker",{attrs:{disabled:2!==e.currentRow.state||e.isDisabled,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small",placeholder:"选择日期"},model:{value:e.trainingForm.assessmentDate,callback:function(t){e.$set(e.trainingForm,"assessmentDate",t)},expression:"trainingForm.assessmentDate"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"本次培训综合评价"}},[n("el-input",{staticStyle:{width:"68%"},attrs:{disabled:2!==e.currentRow.state||e.isDisabled,rows:2,placeholder:"请输入",size:"small",type:"textarea"},model:{value:e.trainingForm.comprehensiveAssessment,callback:function(t){e.$set(e.trainingForm,"comprehensiveAssessment",t)},expression:"trainingForm.comprehensiveAssessment"}})],1)],1)],1)],1)],1)],1),n("el-divider",[e._v("人员详情")]),n("div",[n("div",{staticClass:"items_center"},[n("span",[e._v("姓名")]),n("el-input",{staticClass:"search",attrs:{placeholder:"请输入",size:"small"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getInfo}},[e._v("查询")])],1),n("div",{staticClass:"items_btn"},[n("el-button",{attrs:{disabled:1===e.currentRow.state,size:"small",type:"primary"},on:{click:e.addPerson}},[e._v("新增人员")]),n("el-button",{attrs:{disabled:1===e.currentRow.state,size:"small"},on:{click:e.batchDelete}},[e._v("批量删除")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.trainingTableData,height:"calc(100vh - 30em)",stripe:"","header-cell-style":{background:"#f8f8f9",color:"#515a6e"},border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),n("el-table-column",{attrs:{label:"姓名",prop:"userName"}}),n("el-table-column",{attrs:{label:"工号",prop:"account"}}),n("el-table-column",{attrs:{label:"角色",prop:"roleName"}}),n("el-table-column",{attrs:{label:"电话号码",prop:"phone"}}),n("el-table-column",{attrs:{label:"考核结果",prop:"examinationResults"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1===e.currentRow.state,clearable:"",size:"small"},on:{blur:function(n){return e.updatePersonResult(t.row)}},model:{value:t.row.examinationResults,callback:function(n){e.$set(t.row,"examinationResults",n)},expression:"scope.row.examinationResults"}})]}}])})],1)],1),n("el-dialog",{attrs:{visible:e.selectUserDia,title:"选择用户",width:"70%"},on:{"update:visible":function(t){e.selectUserDia=t}}},[n("div",[n("el-form",{ref:"addUserTableInfo",attrs:{model:e.addUserTableInfo,size:"small",inline:!0,"label-position":"left","label-width":"100"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",size:"small"},on:{input:e.selectUserList},model:{value:e.addUserTableInfo.name,callback:function(t){e.$set(e.addUserTableInfo,"name",t)},expression:"addUserTableInfo.name"}})],1)],1)],1),e.selectUserDia?n("div",{staticClass:"body",staticStyle:{height:"60vh"}},[n("lims-table",{attrs:{tableData:e.tableData1,column:e.column1,isSelection:!0,handleSelectionChange:e.selectMethod,height:"500",tableLoading:e.tableLoading1}})],1):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.selectUserDia=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.selectUser}},[e._v("确 定")])],1)])],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",[n("span",{staticClass:"line"}),n("span",[e._v("培训与考核记录")])])}],s=n("c14f"),i=n("1da1"),o=n("5530"),l=(n("a15b"),n("d81d"),n("14d9"),n("d3b7"),n("ac1f"),n("841c"),n("0643"),n("4e3e"),n("a573"),n("159b"),n("00d5")),c=n("b558"),u=n("2f62"),d=n("9695"),m={name:"Edit",components:{limsTable:l["a"]},props:{currentRow:{type:Object,default:function(){return{}}}},data:function(){return{isSelectedList:[],userName:void 0,trainingForm:{code:"111111",date:"2024-10-10"},trainingColumn:[{label:"姓名",prop:"userName"},{label:"工号",prop:"account"},{label:"角色",prop:"roleName"},{label:"电话号码",prop:"phone"},{label:"考核结果",prop:"result"}],trainingTableData:[],trainingLoading:!1,isDisabled:!1,selectUserDia:!1,tableData1:[],tableLoading1:!1,column1:[{label:"姓名",prop:"name"},{label:"账号",prop:"account"},{label:"角色",prop:"roleName"},{dataType:"tag",label:"状态",prop:"status",formatData:function(e){return 0==e?"启用":"停用"},formatType:function(e){return 0==e?"success":"danger"}},{label:"电话号码",prop:"phone"}],page1:{total:0,size:10,current:1},addUserTableInfo:{name:null,type:2},multipleSelection:[],userList:[]}},computed:Object(o["a"])({},Object(u["b"])(["userId"])),mounted:function(){this.trainingForm=this.currentRow,this.getInfo(),this.getUserList(),this.isDisabled=this.trainingForm.assessmentUserId!==this.userId},methods:{getInfo:function(){var e=this;return Object(i["a"])(Object(s["a"])().m((function t(){return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return e.trainingLoading=!0,t.n=1,Object(d["q"])({trainingDetailedId:e.currentRow.id,userName:e.userName}).then((function(t){200===t.code&&(e.trainingTableData=t.data),e.trainingLoading=!1}));case 1:return t.a(2)}}),t)})))()},updatePersonResult:function(e){var t=this;Object(d["j"])(e).then((function(e){t.$message.success("操作成功！")}))},addPerson:function(){this.isSelectedList=this.trainingTableData.map((function(e){return e.userId})),this.selectUserDia=!0,this.selectUserList()},selectUserList:function(){var e=this;this.tableLoading1=!0,Object(c["w"])(Object(o["a"])({},this.addUserTableInfo)).then((function(t){e.tableLoading1=!1,e.tableData1=t.data})).catch((function(t){e.tableLoading1=!1}))},selectMethod:function(e){this.multipleSelection=e},selectUser:function(){var e=this,t=this.multipleSelection;if(0!=t.length){var n=[];t.forEach((function(t){var r={courseId:e.currentRow.id,examinationResults:"",userId:t.id};n.push(r)})),Object(d["i"])(n).then((function(t){e.isSelectedList=[],e.selectUserDia=!1,e.getInfo()}))}else this.$message.error("未选择数据")},handleSelectionChange:function(e){this.multipleSelection=e},batchDelete:function(){var e=this;if(this.multipleSelection.length>0){var t=this.multipleSelection.map((function(e){return e.trainingRecordId})).join(",");this.$confirm("是否确认删除所选择的数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["e"])({ids:t}).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.getInfo())}))})).catch((function(){e.$message.warning("取消删除")}))}else this.$message.warning("请选择需要删除的数据")},handleSizeChange:function(e){this.search.size=e,this.getInfo()},handleCurrentChange:function(e){this.search.current=e,this.getInfo()},submitForm:function(e){var t=this;return Object(i["a"])(Object(s["a"])().m((function n(){var r,a,i;return Object(s["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=t.currentRow.state,t.trainingForm.assessmentUserId&&(r=2),t.trainingForm.comprehensiveAssessment&&(r=1),3===e&&(r=3),a={assessmentMethod:t.trainingForm.assessmentMethod,openingTime:t.trainingForm.openingTime,placeTraining:t.trainingForm.placeTraining,comprehensiveAssessment:t.trainingForm.comprehensiveAssessment,trainingDetailedId:t.trainingForm.id,assessmentUserId:t.trainingForm.assessmentUserId,assessmentDate:t.trainingForm.assessmentDate,state:r},i={},2!==r){n.n=2;break}return n.n=1,Object(d["o"])(a);case 1:i=n.v,n.n=4;break;case 2:return n.n=3,Object(d["p"])(a);case 3:i=n.v;case 4:t.isDisabled=t.trainingForm.assessmentUserId!==t.userId,200===i.code&&(t.currentRow.state=r,t.$message.success("操作成功"));case 5:return n.a(2)}}),n)})))()},getUserList:function(){var e=this;Object(c["w"])({type:2}).then((function(t){e.userList=t.data}))}}},p=m,f=(n("120a"),n("2877")),b=Object(f["a"])(p,r,a,!1,null,"ef34327a",null);t["default"]=b.exports},9695:function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"m",(function(){return s})),n.d(t,"l",(function(){return i})),n.d(t,"n",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"q",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"e",(function(){return g})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return O})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return j}));var r=n("b775");function a(e){return Object(r["a"])({url:"/personTraining/personTrainingSelect",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/personTraining/queryTheAnnualPlanDetailsTable",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/personTraining/personTrainingDelete",method:"delete",params:e})}function o(e){return Object(r["a"])({url:"/personTraining/reviewAnnualPersonnelTraining",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/personTraining/approveAnnualPersonnelTraining",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/personTraining/exportPersonTraining",method:"get",params:e,responseType:"blob"})}function u(e){return Object(r["a"])({url:"/personTraining/exportPersonTrainingRecord",method:"get",params:e,responseType:"blob"})}function d(e){return Object(r["a"])({url:"/personTraining/deleteAnnualPlanDetailTable",method:"delete",params:e})}function m(e){return Object(r["a"])({url:"/personTraining/addOrUpdatePersonTrainingDetailed",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/personTraining/trainingAndAssessmentRecordsPage",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/personTraining/outOfFocusPreservation",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/personTraining/newPersonnelAddedToTrainingRecords",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/personTraining/deleteTrainingAndAssessmentRecords",method:"delete",params:e})}function h(e){return Object(r["a"])({url:"/personTraining/trainingAndAssessmentRecordsAdded",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/personTraining/trainingAndAssessmentRecordsEvaluate",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/personTraining/getTrainingDetailedFileList",method:"get",params:e})}function j(e){return Object(r["a"])({url:"/personTraining/delTrainingDetailedFileList",method:"delete",params:e})}},b558:function(e,t,n){"use strict";n.d(t,"v",(function(){return a})),n.d(t,"A",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"z",(function(){return o})),n.d(t,"y",(function(){return l})),n.d(t,"w",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"u",(function(){return f})),n.d(t,"g",(function(){return b})),n.d(t,"j",(function(){return g})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"D",(function(){return j})),n.d(t,"l",(function(){return y})),n.d(t,"t",(function(){return T})),n.d(t,"C",(function(){return w})),n.d(t,"b",(function(){return P})),n.d(t,"x",(function(){return F})),n.d(t,"s",(function(){return I})),n.d(t,"h",(function(){return _})),n.d(t,"k",(function(){return D})),n.d(t,"f",(function(){return U})),n.d(t,"r",(function(){return k})),n.d(t,"m",(function(){return R})),n.d(t,"q",(function(){return S})),n.d(t,"B",(function(){return x}));var r=n("b775");function a(e){return Object(r["a"])({url:"/insOrder/selectSampleAndProductByOrderId",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/insOrderPlan/updateProductOnPlan",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/insOrderPlan/claimInsOrderPlan",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/insOrderPlan/upPlanUser2",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/insOrderPlan/upPlanUser",method:"post",params:e})}function c(e){return Object(r["a"])({url:"/system/newUser/selectUserCondition",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/insOrderPlan/getBindingProductByProductId",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/insOrderPlan/getProductTreeByProductId",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/insOrderPlan/bindingProductTreeByProductId",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/insOrderPlan/delProductTreeByProductId",method:"delete",params:e})}function f(e){return Object(r["a"])({url:"/insOrderPlan/selectInsOrderPlanList",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/insOrderPlan/doInsOrder",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/insOrderPlan/getCableTag",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/insOrderPlan/getRepetitionTag",method:"get",params:e})}function O(e){return Object(r["a"])({url:"/insOrderPlan/getRawMaterialTag",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/deviceScope/dataCollection",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/insOrderPlan/write",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/insOrderPlan/getInsProduct",method:"get",params:e})}function T(e){return Object(r["a"])({url:"/deviceScope/search",method:"get",params:e})}function w(e){return Object(r["a"])({url:"/insOrderPlan/verifyPlan",method:"post",params:e})}function P(e){return Object(r["a"])({url:"/insOrderPlan/checkSubmitPlan",method:"post",params:e})}function F(e){return Object(r["a"])({url:"/insOrderPlan/submitPlan",method:"post",params:e})}function I(e){return Object(r["a"])({url:"/insOrderPlan/saveInsContext",method:"post",data:e})}function _(e){return Object(r["a"])({url:"/insOrderPlan/downFile",method:"get",params:e})}function D(e){return Object(r["a"])({url:"/insOrderPlan/getFileList",method:"get",params:e})}function U(e){return Object(r["a"])({url:"/insOrderPlan/delfile",method:"delete",params:e})}function k(e){return Object(r["a"])({url:"/insOrderPlan/inspectionOrderDetailsTaskSwitching",method:"get",params:e})}function R(e){return Object(r["a"])({url:"/insOrderPlan/getInsProductUnqualifiedRetest",method:"get",params:e})}function S(e){return Object(r["a"])({url:"/insOrderPlan/getWorkingHoursByOrderId",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/insOrderPlan/updateWorkingHours",method:"post",data:e})}}}]);