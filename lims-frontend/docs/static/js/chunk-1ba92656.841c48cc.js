(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ba92656","chunk-6793f997","chunk-36ed4254"],{"2c10":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.filesDialogVisible,title:"附件",width:"80%"},on:{"update:visible":function(e){t.filesDialogVisible=e},closed:t.closeFilesLook}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("el-upload",{ref:"upload",staticStyle:{width:"80px !important"},attrs:{action:t.fileAction,"auto-upload":!0,"before-upload":t.fileBeforeUpload,data:{superviseDetailsCorrectId:t.info.superviseDetailsCorrectId},headers:t.uploadHeader,"on-error":t.onError,"on-success":t.handleSuccessUp,"show-file-list":!1,accept:".jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.zip,.rar"}},[i("el-button",{staticStyle:{height:"38px"},attrs:{size:"small",type:"primary"}},[t._v("附件上传")])],1)],1),i("div",[i("limsTable",{ref:"yearTable",staticStyle:{"margin-top":"0.5em"},attrs:{column:t.columnData,height:"calc(100vh - 30em)",highlightCurrentRow:!0,"table-data":t.tableData,"table-loading":t.tableLoading}})],1)]),i("el-dialog",{attrs:{visible:t.lookDialogVisible,fullscreen:"",title:"查看附件",top:"5vh",width:"800px"},on:{"update:visible":function(e){t.lookDialogVisible=e}}},[t.lookDialogVisible?i("filePreview",{staticStyle:{height:"90vh","overflow-y":"auto"},attrs:{currentFile:{},fileUrl:t.javaApi+"/word/"+t.currentInfo.fileUrl}}):t._e()],1)],1)},s=[],r=(i("d3b7"),i("00d5")),o=i("a408"),l=i("bb61"),n={name:"ViewTestRecord",components:{filePreview:o["a"],limsTable:r["a"]},data:function(){var t=this;return{filesDialogVisible:!1,tableLoading:!1,filesLookInfo:{},columnData:[{label:"文件名称",prop:"fileName",minWidth:"150px"},{dataType:"action",minWidth:"100",label:"操作",fixed:"right",operation:[{name:"预览",type:"text",clickFun:function(e){t.handleLook(e)}},{name:"下载",type:"text",clickFun:function(e){t.upload(e)}},{name:"删除",type:"text",color:"#f56c6c",clickFun:function(e){t.delete(e)}}]}],tableData:[],info:{},currentInfo:{},lookDialogVisible:!1}},methods:{openDia:function(t){this.filesDialogVisible=!0,this.info=t,this.searchTableList()},searchTableList:function(){var t=this;this.tableLoading=!0,Object(l["d"])({superviseDetailsCorrectId:this.info.superviseDetailsCorrectId}).then((function(e){t.tableLoading=!1,t.tableData=e.data})).catch((function(e){t.tableLoading=!1,console.log("err---",e)}))},closeFilesLook:function(){this.filesDialogVisible=!1},handleLook:function(t){this.currentInfo=t,this.lookDialogVisible=!0},upload:function(t){this.$download.saveAs(t.fileUrl,t.fileName)},delete:function(t){var e=this;this.tableLoading=!0,Object(l["a"])({superviseDetailsCorrectFileId:t.superviseDetailsCorrectFileId}).then((function(t){e.tableLoading=!1,e.$message.success("删除成功"),e.searchTableList()})).catch((function(t){e.tableLoading=!1,console.log("err---",t)}))},fileBeforeUpload:function(t){var e=!0;if(t.size>10485760&&(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),e=!1),!e)return Promise.reject(e)},onError:function(t,e,i,a){this.$message.error("上传失败"),this.$refs.upload.clearFiles()},handleSuccessUp:function(t){this.upLoading=!1,200==t.code&&(this.$message.success("上传成功"),this.searchTableList())}},computed:{fileAction:function(){return this.javaApi+"/qualitySupervise/uploadSuperviseDetailCorrectFile"}}},c=n,d=i("2877"),u=Object(d["a"])(c,a,s,!1,null,"ca2d2566",null);e["default"]=u.exports},"55d0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.formDia,title:"纠正措施处理单",width:"60%"},on:{"update:visible":function(e){t.formDia=e},close:t.closeProcessingDia}},[i("div",{staticStyle:{height:"660px","overflow-y":"auto"}},[i("table",{staticClass:"tables",attrs:{border:"1",cellspacing:"10"}},[i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("培训计划：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",disabled:"",placeholder:"请选择",size:"small"},model:{value:t.form.personTrainingDetailedId,callback:function(e){t.$set(t.form,"personTrainingDetailedId",e)},expression:"form.personTrainingDetailedId"}},t._l(t.yearTrainingDetailed,(function(t){return i("el-option",{key:t.id,attrs:{label:t.trainingObjectives,value:t.id}})})),1)],1)]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("不合格或偏离事实的描述：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[i("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.raiseResult))])])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("提出人：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.raiseUserName)+" ")]),i("td",{staticClass:"td-title"},[i("p",[t._v("提出部门：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.raiseDepartment)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("日期：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.raiseTime)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("原因分析：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[i("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.causeResult))])])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("原因分析人：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.causeUserName)+" ")]),i("td",{staticClass:"td-title"},[i("p",[t._v("责任部门：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.causeDepartment)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("原因分析日期：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.causeTime)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("纠正措施：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[i("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.correctResult))])])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("提出要求部门确认：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[i("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.raiseDepartmentAffirm))])])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("纠正人：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.correctUserName)+" ")]),i("td",{staticClass:"td-title"},[i("p",[t._v("责任部门：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.correctDepartment)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("纠正日期：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.correctTime)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("实施验证结果：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[i("span",{staticClass:"td-info1"},[t._v(" "+t._s(t.form.validationResult))])])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("验证人：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.validationUserName)+" ")]),i("td",{staticClass:"td-title"},[i("p",[t._v("责任部门：")])]),i("td",{staticClass:"td-info"},[t._v(" "+t._s(t.form.validationDepartment)+" ")])]),i("tr",[i("td",{staticClass:"td-title"},[i("p",[t._v("验证日期：")])]),i("td",{staticClass:"td-info",attrs:{colspan:"3"}},[t._v(" "+t._s(t.form.validationTime)+" ")])])])])])],1)},s=[],r=i("bb61"),o={name:"correctiveInfo",components:{},data:function(){return{formDia:!1,yearTrainingDetailed:[],form:{superviseDetailsId:"",raiseResult:"",vdeRaiseResult:"",causeUserId:"",raiseUserName:"",raiseDepartment:"",raiseTime:"",causeResult:"",causeUserName:"",causeDepartment:"",causeTime:"",correctUserId:"",correctResult:"",raiseDepartmentAffirm:"",correctUserName:"",correctDepartment:"",correctTime:"",validationUserId:"",validationResult:"",validationUserName:"",validationDepartment:"",validationTime:""}}},methods:{openDia:function(t){this.formDia=!0,this.searchInfo(t),this.form.superviseDetailsId=t.superviseDetailsId,this.getYearTrainingDetailed()},searchInfo:function(t){var e=this;this.form.qualityMonitorDetailsId=t.qualityMonitorDetailsId,Object(r["c"])({superviseDetailsId:t.superviseDetailsId}).then((function(t){e.form=t.data})).catch((function(t){console.log("err---",t)}))},getYearTrainingDetailed:function(){var t=this;Object(r["e"])().then((function(e){t.yearTrainingDetailed=e.data}))},closeProcessingDia:function(){this.formDia=!1}}},l=o,n=(i("bc59"),i("2877")),c=Object(n["a"])(l,a,s,!1,null,"48abb4b8",null);e["default"]=c.exports},"623a":function(t,e,i){},b8c9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"capacity-scope"},[i("div",[i("el-form",{ref:"searchForm",attrs:{model:t.searchForm,size:"small",inline:!0}},[i("el-form-item",{attrs:{label:"不合格描述",prop:"raiseResult"}},[i("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.searchForm.raiseResult,callback:function(e){t.$set(t.searchForm,"raiseResult",e)},expression:"searchForm.raiseResult"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchList}},[t._v("查询")]),i("el-button",{attrs:{size:"mini"},on:{click:t.resetSearchForm}},[t._v("重置")])],1)],1)],1),i("div",{staticClass:"table"},[i("limsTable",{attrs:{column:t.tableColumn,height:"calc(100vh - 17em)","table-data":t.tableData,"table-loading":t.tableLoading,page:t.page},on:{pagination:t.pagination}})],1),t.correctiveInfo?i("corrective-info",{ref:"correctiveInfo"}):t._e(),t.viewTestRecordDialog?i("ViewTestRecord",{ref:"viewTestRecordDialog"}):t._e()],1)},s=[],r=i("5530"),o=i("00d5"),l=i("55d0"),n=i("2c10"),c=i("bb61"),d={name:"CorrectiveAction",components:{CorrectiveInfo:l["default"],limsTable:o["a"],ViewTestRecord:n["default"]},data:function(){var t=this;return{searchForm:{raiseResult:""},tableColumn:[{label:"不合格或偏离事实的描述",prop:"raiseResult",minWidth:"100"},{label:"原因分析",prop:"causeResult",minWidth:"100"},{label:"纠正措施",prop:"correctResult",minWidth:"100"},{label:"实施验证结果",prop:"validationResult",minWidth:"100"},{dataType:"action",minWidth:"60",label:"操作",operation:[{name:"查看",type:"text",clickFun:function(e){t.viewInfo(e)}},{name:"导出",type:"text",clickFun:function(e){t.handleDown(e)}},{name:"查看附件",type:"text",clickFun:function(e){t.viewFiles(e)}}]}],tableData:[],tableLoading:!1,page:{size:20,current:1,total:0},correctiveInfo:!1,viewTestRecordDialog:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={raiseResult:this.searchForm.raiseResult},i=this.page;this.tableLoading=!0,Object(c["f"])(Object(r["a"])(Object(r["a"])({},e),i)).then((function(e){t.tableLoading=!1,t.tableData=e.data.records,t.page.total=e.data.total})).catch((function(e){console.log("err---",e),t.tableLoading=!1}))},handleDown:function(t){var e=this;Object(c["b"])({superviseDetailsCorrectId:t.superviseDetailsCorrectId}).then((function(t){e.outLoading=!1;var i=new Blob([t],{type:"application/msword"});e.$download.saveAs(i,"监督纠正措施.docx")}))},resetSearchForm:function(){this.searchForm.raiseResult="",this.searchList()},viewInfo:function(t){var e=this;this.correctiveInfo=!0,this.$nextTick((function(){e.$refs.correctiveInfo.openDia(t)}))},viewFiles:function(t){var e=this;this.viewTestRecordDialog=!0,this.$nextTick((function(){e.$refs.viewTestRecordDialog.openDia(t)}))},pagination:function(t){var e=t.page,i=t.limit;this.page.current=e,this.page.size=i,this.searchList()}}},u=d,f=(i("d368"),i("2877")),p=Object(f["a"])(u,a,s,!1,null,"dd9428be",null);e["default"]=p.exports},bb61:function(t,e,i){"use strict";i.d(e,"f",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return n})),i.d(e,"e",(function(){return c}));var a=i("b775");function s(t){return Object(a["a"])({url:"/qualitySupervise/pageSuperviseDetailCorrect",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/qualitySupervise/exportSuperviseDetaillCorrect",method:"get",responseType:"blob",params:t})}function o(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrectFileList",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/qualitySupervise/delSuperviseDetailCorrectFile",method:"delete",params:t})}function n(t){return Object(a["a"])({url:"/qualitySupervise/getSuperviseDetailCorrect",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/personTraining/getThisYearTrainingDetailed",method:"get",params:t})}},bc59:function(t,e,i){"use strict";i("e516")},d368:function(t,e,i){"use strict";i("623a")},e516:function(t,e,i){}}]);