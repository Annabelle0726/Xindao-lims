(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a41a468"],{"5fb3":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}));var r=a("b775");function o(e){return Object(r["a"])({url:"/certification/getCertificationDetail",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/certification/addCertificationDetail",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/certification/delCertificationDetail",method:"delete",params:e})}},6428:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"实验室名称",prop:"laboratoryName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable(t)}},model:{value:e.queryParams.laboratoryName,callback:function(t){e.$set(e.queryParams,"laboratoryName",t)},expression:"queryParams.laboratoryName"}})],1),a("el-form-item",{attrs:{label:"实验室编码",prop:"laboratoryNumber"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable(t)}},model:{value:e.queryParams.laboratoryNumber,callback:function(t){e.$set(e.queryParams,"laboratoryNumber",t)},expression:"queryParams.laboratoryNumber"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),a("div",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openAdd("add")}}},[e._v("新增")])],1)]),a("div",{staticClass:"table"},[a("lims-table",{attrs:{tableData:e.tableData,column:e.column,height:"calc(100vh - 250px)",page:e.page,tableLoading:e.tableLoading},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:e.formTitle,visible:e.addDia,width:"450px"},on:{"update:visible":function(t){e.addDia=t}}},[a("el-form",{ref:"laboratoryForm",attrs:{model:e.laboratoryForm,rules:e.userRules,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"实验室名称",prop:"laboratoryName"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.laboratoryForm.laboratoryName,callback:function(t){e.$set(e.laboratoryForm,"laboratoryName",t)},expression:"laboratoryForm.laboratoryName"}})],1),a("el-form-item",{attrs:{label:"场所编码",prop:"laboratoryNumber"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.laboratoryForm.laboratoryNumber,callback:function(t){e.$set(e.laboratoryForm,"laboratoryNumber",t)},expression:"laboratoryForm.laboratoryNumber"}})],1),a("el-form-item",{attrs:{label:"实验室代号",prop:"laboratoryCode"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.laboratoryForm.laboratoryCode,callback:function(t){e.$set(e.laboratoryForm,"laboratoryCode",t)},expression:"laboratoryForm.laboratoryCode"}})],1),a("el-form-item",{attrs:{label:"负责人",prop:"head"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.laboratoryForm.head,callback:function(t){e.$set(e.laboratoryForm,"head",t)},expression:"laboratoryForm.head"}})],1),a("el-form-item",{attrs:{label:"负责人电话",prop:"phoneNumber"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.laboratoryForm.phoneNumber,callback:function(t){e.$set(e.laboratoryForm,"phoneNumber",t)},expression:"laboratoryForm.phoneNumber"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.laboratoryForm.address,callback:function(t){e.$set(e.laboratoryForm,"address",t)},expression:"laboratoryForm.address"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.reset}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.customAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"印章管理",visible:e.fileVisible,width:"60vw"},on:{"update:visible":function(t){e.fileVisible=t}}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.openUpload}},[e._v("更新印章")])],1),a("lims-table",{attrs:{tableData:e.fileComponentData,column:e.fileComponentDataColumn,height:"500px",page:e.fileComponentPage,tableLoading:e.fileComponentTableLoading},on:{pagination:e.fileComponentPagination}})],1),a("el-dialog",{attrs:{title:"更新印章",visible:e.upFileVisible,width:"400px"},on:{"update:visible":function(t){e.upFileVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataFormRules,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"印章类型",prop:"type"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.options,"show-all-levels":!1,props:e.props,placeholder:"请选择",size:"small","collapse-tags":"",clearable:""},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),a("el-form-item",{attrs:{label:"印章图片",prop:"address"}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:e.action,headers:e.uploadHeader,accept:"image/jpg,image/jpeg,image/png","show-file-list":!1,"on-success":e.handleSuccess,"on-change":e.beforeUpload,"on-error":e.onError}},[e.dataForm.address?a("img",{staticClass:"avatar",attrs:{src:e.javaApi+"/img/"+e.dataForm.address}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.upFileVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.confirmConnect}},[e._v("确 定")])],1)],1)],1)},o=[],l=a("5530"),i=(a("d81d"),a("b0c0"),a("d3b7"),a("0643"),a("a573"),a("00d5")),n=a("c779"),s=a("5fb3"),c={components:{limsTable:i["a"]},computed:{action:function(){return this.javaApi+"/deviceScope/uploadFile"}},data:function(){var e=this;return{queryParams:{laboratoryName:"",laboratoryNumber:""},tableData:[],tableLoading:!1,column:[{label:"实验室名称",prop:"laboratoryName"},{label:"场所编码",prop:"laboratoryNumber"},{label:"实验室代号",prop:"laboratoryCode"},{label:"负责人",prop:"head"},{label:"负责人电话",prop:"phoneNumber"},{label:"地址",prop:"address"},{label:"创建人",prop:"createUserName"},{label:"创建时间",prop:"createTime"},{dataType:"action",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openAdd("edit",t)}},{name:"删除",type:"text",clickFun:function(t){e.delete(t)}},{name:"印章管理",type:"text",clickFun:function(t){e.fileManagement(t)}}]}],page:{total:0,size:10,current:1},addDia:!1,formTitle:"",laboratoryForm:{},operationType:"",userRules:{laboratoryName:[{required:!0,message:"请输入实验室名称",trigger:"blur"}],laboratoryNumber:[{required:!0,message:"请输入场所编码",trigger:"blur"}],head:[{required:!0,message:"请输入负责人",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入负责人电话",trigger:"blur"}]},currentRow:{},fileComponentTableLoading:!1,fileComponentData:[],fileComponentDataColumn:[{label:"实验室名称",prop:"laboratoryName"},{label:"印章图片",prop:"address",dataType:"image"},{label:"印章类型",prop:"type"}],fileComponentPage:{total:0,size:10,current:1,layout:"total, prev, pager, next"},fileVisible:!1,upFileVisible:!1,loading:!1,dataForm:{type:"",address:""},dataFormRules:{type:[{required:!0,message:"请选择印章类型",trigger:"change"}],address:[{required:!1,message:"请上传图片",trigger:"change"}]},props:{multiple:!1,emitPath:!1},options:[{value:"实验室资质",label:"实验室资质",children:[]},{value:"委托报告",label:"委托报告",children:null},{value:"进厂报告",label:"进厂报告",children:null}]}},mounted:function(){this.refreshTable()},methods:{refreshTable:function(){var e=this;this.tableLoading=!0,Object(n["e"])(Object(l["a"])(Object(l["a"])({},this.page),this.queryParams)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},refresh:function(){this.resetForm("queryForm"),this.refreshTable()},pagination:function(e){this.page.size=e.limit,this.refreshTable()},openAdd:function(e,t){this.formTitle="add"===e?"新增实验室":"编辑实验室",this.operationType=e,"edit"===e&&(this.laboratoryForm=this.HaveJson(t)),this.addDia=!0},customAdd:function(){var e=this;this.$refs["laboratoryForm"].validate((function(t){t&&(e.loading=!0,"add"===e.operationType?Object(n["a"])(e.laboratoryForm).then((function(t){e.loading=!1,200===t.code&&(e.$message.success("新增成功"),e.refreshTable(),e.reset())})).catch((function(t){e.loading=!1})):Object(n["g"])(e.laboratoryForm).then((function(t){e.loading=!1,200===t.code&&(e.$message.success("修改成功"),e.refreshTable(),e.reset())})).catch((function(t){e.loading=!1})))}))},reset:function(){this.resetForm("laboratoryForm"),this.addDia=!1},delete:function(e){var t=this;this.$confirm("是否删除当前数据?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["c"])({id:e.id}).then((function(e){t.$message.success("删除成功"),t.refreshTable()}))})).catch((function(){}))},fileManagement:function(e){this.fileVisible=!0,this.fileComponentTableLoading=!0,this.currentRow=e,this.getFileComponentList()},getFileComponentList:function(){var e=this;Object(n["f"])(Object(l["a"])({id:this.currentRow.id},this.fileComponentPage)).then((function(t){e.fileComponentTableLoading=!1,200===t.code&&(e.fileComponentData=t.data.records,e.fileComponentPage.total=t.data.total)})).catch((function(t){e.fileComponentTableLoading=!1}))},fileComponentPagination:function(e){this.fileComponentPage.size=e.limit,this.getFileComponentList()},openUpload:function(){this.dataForm.type="",this.dataForm.address="",this.upFileVisible=!0,this.getCertificationOperation()},getCertificationOperation:function(){var e=this,t={current:-1,size:-1};Object(s["c"])(t).then((function(t){e.options[0].children=t.data.records.map((function(e){return e.value=e.name,e.label=e.name,e}))}))},confirmConnect:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&(e.loading=!0,Object(n["b"])(Object(l["a"])({labId:e.currentRow.id},e.dataForm)).then((function(t){e.loading=!1,e.getFileComponentList(),e.upFileVisible=!1})))}))},handleSuccess:function(e){200===e.code&&(this.dataForm.address=e.data.url)},beforeUpload:function(e,t){return!(e.size>10485760)||(this.$message.error("上传文件不超过10M"),this.$refs.upload.clearFiles(),!1)},onError:function(e,t,a,r){this.$message.error("上传失败"),this.$refs.upload.clearFiles()}}},u=c,d=(a("bf74"),a("2877")),m=Object(d["a"])(u,r,o,!1,null,"758d0874",null);t["default"]=m.exports},7124:function(e,t,a){},bf74:function(e,t,a){"use strict";a("7124")},c779:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return u}));var r=a("b775");function o(){return Object(r["a"])({url:"/laboratoryScope/obtainItemParameterList",method:"get"})}function l(e){return Object(r["a"])({url:"/laboratoryScope/selectItemParameter",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/laboratoryScope/addParameter",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/laboratoryScope/upParameter",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/laboratoryScope/delParameter",method:"delete",params:e})}function c(e){return Object(r["a"])({url:"/sealScope/selectSeal",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/sealScope/addSeal",method:"post",data:e})}}}]);