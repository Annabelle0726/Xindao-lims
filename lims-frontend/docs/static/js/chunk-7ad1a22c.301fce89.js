(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ad1a22c"],{"368e":function(e,t,a){},"7dfe":function(e,t,a){"use strict";a("368e")},f4c8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-scope"},[a("div",{staticClass:"search"},[a("div",[a("el-form",{ref:"queryParams",attrs:{model:e.queryParams,size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"标准编号",prop:"code"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),a("el-form-item",{attrs:{label:"标准名称",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refreshTable()}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshTable}},[e._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),a("div",[e.addPower?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openAdd}},[e._v("新增")]):e._e()],1)]),a("lims-table",{attrs:{tableData:e.tableData,column:e.column,page:e.page,tableLoading:e.tableLoading,height:"calc(100vh - 250px)"},on:{pagination:e.pagination}}),a("el-dialog",{attrs:{title:e.title,visible:e.addDlog,width:"500px"},on:{"update:visible":function(t){e.addDlog=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"领域",prop:"field"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.field,callback:function(t){e.$set(e.addForm,"field",t)},expression:"addForm.field"}})],1),a("el-form-item",{attrs:{label:"标准编号",prop:"code"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),a("el-form-item",{attrs:{label:"检验对象",prop:"structureTestObjectId"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"small",options:e.tandardTree,"collapse-tags":"",props:{multiple:!0,checkStrictly:!0},clearable:""},model:{value:e.addForm.structureTestObjectId,callback:function(t){e.$set(e.addForm,"structureTestObjectId",t)},expression:"addForm.structureTestObjectId"}})],1),a("el-form-item",{attrs:{label:"标准描述",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"标准描述EN",prop:"nameEn"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.nameEn,callback:function(t){e.$set(e.addForm,"nameEn",t)},expression:"addForm.nameEn"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入",clearable:""},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1),a("el-form-item",{attrs:{label:"资质",prop:"qualificationId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.addForm.qualificationId,callback:function(t){e.$set(e.addForm,"qualificationId",t)},expression:"addForm.qualificationId"}},e._l(e.qualificationList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"是否产品标准",prop:"isProduct"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.addForm.isProduct,callback:function(t){e.$set(e.addForm,"isProduct",t)},expression:"addForm.isProduct"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1),a("el-form-item",{attrs:{label:"是否启用",prop:"isUse"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.addForm.isUse,callback:function(t){e.$set(e.addForm,"isUse",t)},expression:"addForm.isUse"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDlog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:function(t){return e.submitProduct("addForm")}}},[e._v("确 认")])],1)],1)],1)},l=[],i=a("5530"),o=(a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),a("00d5")),d=a("b775");function n(e){return Object(d["a"])({url:"/standardMethod/selectStandardMethodList",method:"get",params:e})}function s(e){return Object(d["a"])({url:"/standardMethod/delStandardMethod",method:"delete",params:e})}function c(e){return Object(d["a"])({url:"/standardMethod/addStandardMethod",method:"post",data:e})}function u(e){return Object(d["a"])({url:"/standardMethod/upStandardMethod",method:"post",data:e})}function m(e){return Object(d["a"])({url:"/standardTree/getStandardTree2",method:"get",params:e})}var p={name:"StandardMethod",components:{limsTable:o["a"]},data:function(){var e=this;return{addPower:!0,title:"新增",inPower:!0,queryParams:{},tableData:[],column:[{label:"领域",prop:"field",width:"100px"},{label:"标准编号",prop:"code",width:"100px"},{label:"检验对象",prop:"structureTestObjectId",width:"140px"},{label:"标准描述",prop:"name",width:"100px"},{label:"标准描述EN",prop:"nameEn",width:"100px"},{label:"备注",prop:"remark"},{label:"资质",prop:"qualificationId"},{label:"是否产品标准",prop:"isProduct",width:"100px",dataType:"tag",formatData:function(e){return 0==e?"否":"是"},formatType:function(e){return 0==e?"danger":"primary"}},{label:"是否启用",prop:"isUse",formatData:function(e){return 0==e?"否":"是"},formatType:function(e){return 0==e?"danger":"primary"}},{label:"创建人",prop:"createUserName"},{label:"创建时间",prop:"createTime"},{label:"更新人",prop:"updateUserName"},{label:"更新时间",prop:"updateTime"},{dataType:"action",fixed:"right",label:"操作",operation:[{name:"编辑",type:"text",clickFun:function(t){e.openEdit(t)}},{name:"删除",type:"text",clickFun:function(t){e.handleDelete(t)}}]}],page:{total:0,size:10,current:1},tableLoading:!1,addForm:{},addDlog:!1,addLoading:!1,qualificationList:[],tandardTree:[],addRules:{code:[{required:!0,message:"请输入标准编号",trigger:"blur"}],name:[{required:!0,message:"请输入标准描述",trigger:"blur"}],nameEn:[{required:!0,message:"请输入标准描述EN",trigger:"blur"}],isProduct:[{required:!0,message:"请选择是否产品标准",trigger:"change"}],isUse:[{required:!0,message:"请选择是否启用",trigger:"change"}]}}},mounted:function(){this.getQualificationList(),this.selectTestObjectByName(),this.getList()},methods:{getList:function(){var e=this;this.tableLoading=!0;var t=Object(i["a"])(Object(i["a"])({},this.queryParams),this.page);delete t.total,n(Object(i["a"])({},t)).then((function(t){e.tableLoading=!1,200===t.code&&(e.tableData=t.data.records,e.page.total=t.data.total)})).catch((function(t){e.tableLoading=!1}))},pagination:function(e){var t=e.page,a=e.limit;this.page.current=t,this.page.size=a,this.getList()},refreshTable:function(){this.page.current=1,this.getList(),this.selectTestObjectByName()},refresh:function(){this.selectTestObjectByName(),this.page.current=1,this.queryParams={},this.getList()},openAdd:function(){this.title="新增",this.addForm={},this.addDlog=!0},openEdit:function(e){this.title="编辑",this.addDlog=!0,this.addForm=this.HaveJson(e),this.addForm.structureTestObjectId=JSON.parse(this.addForm.structureTestObjectId)},getQualificationList:function(){var e=this;this.getDicts("cnas_method_qualification").then((function(t){var a=t.data.map((function(e){return{label:e.dictLabel,value:e.dictValue}}));e.qualificationList=a}))},selectTestObjectByName:function(){var e=this;m().then((function(t){t.data.forEach((function(t){e.cascaderFieldData(t)})),e.tandardTree=t.data}))},cascaderFieldData:function(e){var t=this;void 0!==e.children&&(0==e.children.length?delete e.children:e.children.forEach((function(e){t.cascaderFieldData(e)})))},submitProduct:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.addLoading=!0;var a=JSON.parse(JSON.stringify(t.addForm));a.structureTestObjectId=JSON.stringify(a.structureTestObjectId),"新增"==t.title?c(a).then((function(e){t.addLoading=!1,200==e.code&&(t.$message.success("提交成功"),t.getList(),t.addDlog=!1)})).catch((function(e){t.addLoading=!1})):u(a).then((function(e){t.addLoading=!1,200==e.code&&(t.$message.success("提交成功"),t.getList(),t.addDlog=!1)})).catch((function(e){t.addLoading=!1}))}))},handleDelete:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s({id:e.id}).then((function(e){t.$message.success("删除成功"),t.getList()}))})).catch((function(){}))}}},f=p,b=(a("7dfe"),a("2877")),h=Object(b["a"])(f,r,l,!1,null,"6ee09886",null);t["default"]=h.exports}}]);